var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,o=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),s=(e,i,o,s)=>{if(i&&typeof i==`object`||typeof i==`function`)for(var c=r(i),l=0,u=c.length,d;l<u;l++)d=c[l],!a.call(e,d)&&d!==o&&t(e,d,{get:(e=>i[e]).bind(null,d),enumerable:!(s=n(i,d))||s.enumerable});return e},c=(n,r,a)=>(a=n==null?{}:e(i(n)),s(r||!n||!n.__esModule?t(a,`default`,{value:n,enumerable:!0}):a,n));(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var l=o((e=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.portal`),r=Symbol.for(`react.fragment`),i=Symbol.for(`react.strict_mode`),a=Symbol.for(`react.profiler`),o=Symbol.for(`react.consumer`),s=Symbol.for(`react.context`),c=Symbol.for(`react.forward_ref`),l=Symbol.for(`react.suspense`),u=Symbol.for(`react.memo`),d=Symbol.for(`react.lazy`),f=Symbol.for(`react.activity`),p=Symbol.iterator;function m(e){return typeof e!=`object`||!e?null:(e=p&&e[p]||e[`@@iterator`],typeof e==`function`?e:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,_={};function v(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||h}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if(typeof e!=`object`&&typeof e!=`function`&&e!=null)throw Error(`takes an object of state variables to update or a function which returns an object of state variables.`);this.updater.enqueueSetState(this,e,t,`setState`)},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,`forceUpdate`)};function y(){}y.prototype=v.prototype;function b(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||h}var x=b.prototype=new y;x.constructor=b,g(x,v.prototype),x.isPureReactComponent=!0;var ee=Array.isArray;function te(){}var S={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function ne(e,n,r){var i=r.ref;return{$$typeof:t,type:e,key:n,ref:i===void 0?null:i,props:r}}function re(e,t){return ne(e.type,t,e.props)}function ie(e){return typeof e==`object`&&!!e&&e.$$typeof===t}function ae(e){var t={"=":`=0`,":":`=2`};return`$`+e.replace(/[=:]/g,function(e){return t[e]})}var oe=/\/+/g;function se(e,t){return typeof e==`object`&&e&&e.key!=null?ae(``+e.key):t.toString(36)}function ce(e){switch(e.status){case`fulfilled`:return e.value;case`rejected`:throw e.reason;default:switch(typeof e.status==`string`?e.then(te,te):(e.status=`pending`,e.then(function(t){e.status===`pending`&&(e.status=`fulfilled`,e.value=t)},function(t){e.status===`pending`&&(e.status=`rejected`,e.reason=t)})),e.status){case`fulfilled`:return e.value;case`rejected`:throw e.reason}}throw e}function le(e,r,i,a,o){var s=typeof e;(s===`undefined`||s===`boolean`)&&(e=null);var c=!1;if(e===null)c=!0;else switch(s){case`bigint`:case`string`:case`number`:c=!0;break;case`object`:switch(e.$$typeof){case t:case n:c=!0;break;case d:return c=e._init,le(c(e._payload),r,i,a,o)}}if(c)return o=o(e),c=a===``?`.`+se(e,0):a,ee(o)?(i=``,c!=null&&(i=c.replace(oe,`$&/`)+`/`),le(o,r,i,``,function(e){return e})):o!=null&&(ie(o)&&(o=re(o,i+(o.key==null||e&&e.key===o.key?``:(``+o.key).replace(oe,`$&/`)+`/`)+c)),r.push(o)),1;c=0;var l=a===``?`.`:a+`:`;if(ee(e))for(var u=0;u<e.length;u++)a=e[u],s=l+se(a,u),c+=le(a,r,i,s,o);else if(u=m(e),typeof u==`function`)for(e=u.call(e),u=0;!(a=e.next()).done;)a=a.value,s=l+se(a,u++),c+=le(a,r,i,s,o);else if(s===`object`){if(typeof e.then==`function`)return le(ce(e),r,i,a,o);throw r=String(e),Error(`Objects are not valid as a React child (found: `+(r===`[object Object]`?`object with keys {`+Object.keys(e).join(`, `)+`}`:r)+`). If you meant to render a collection of children, use an array instead.`)}return c}function ue(e,t,n){if(e==null)return e;var r=[],i=0;return le(e,r,``,``,function(e){return t.call(n,e,i++)}),r}function de(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(t){(e._status===0||e._status===-1)&&(e._status=1,e._result=t)},function(t){(e._status===0||e._status===-1)&&(e._status=2,e._result=t)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var w=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)},T={map:ue,forEach:function(e,t,n){ue(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ue(e,function(){t++}),t},toArray:function(e){return ue(e,function(e){return e})||[]},only:function(e){if(!ie(e))throw Error(`React.Children.only expected to receive a single React element child.`);return e}};e.Activity=f,e.Children=T,e.Component=v,e.Fragment=r,e.Profiler=a,e.PureComponent=b,e.StrictMode=i,e.Suspense=l,e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,e.__COMPILER_RUNTIME={__proto__:null,c:function(e){return S.H.useMemoCache(e)}},e.cache=function(e){return function(){return e.apply(null,arguments)}},e.cacheSignal=function(){return null},e.cloneElement=function(e,t,n){if(e==null)throw Error(`The argument must be a React element, but you passed `+e+`.`);var r=g({},e.props),i=e.key;if(t!=null)for(a in t.key!==void 0&&(i=``+t.key),t)!C.call(t,a)||a===`key`||a===`__self`||a===`__source`||a===`ref`&&t.ref===void 0||(r[a]=t[a]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var o=Array(a),s=0;s<a;s++)o[s]=arguments[s+2];r.children=o}return ne(e.type,i,r)},e.createContext=function(e){return e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:o,_context:e},e},e.createElement=function(e,t,n){var r,i={},a=null;if(t!=null)for(r in t.key!==void 0&&(a=``+t.key),t)C.call(t,r)&&r!==`key`&&r!==`__self`&&r!==`__source`&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var s=Array(o),c=0;c<o;c++)s[c]=arguments[c+2];i.children=s}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return ne(e,a,i)},e.createRef=function(){return{current:null}},e.forwardRef=function(e){return{$$typeof:c,render:e}},e.isValidElement=ie,e.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:de}},e.memo=function(e,t){return{$$typeof:u,type:e,compare:t===void 0?null:t}},e.startTransition=function(e){var t=S.T,n={};S.T=n;try{var r=e(),i=S.S;i!==null&&i(n,r),typeof r==`object`&&r&&typeof r.then==`function`&&r.then(te,w)}catch(e){w(e)}finally{t!==null&&n.types!==null&&(t.types=n.types),S.T=t}},e.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},e.use=function(e){return S.H.use(e)},e.useActionState=function(e,t,n){return S.H.useActionState(e,t,n)},e.useCallback=function(e,t){return S.H.useCallback(e,t)},e.useContext=function(e){return S.H.useContext(e)},e.useDebugValue=function(){},e.useDeferredValue=function(e,t){return S.H.useDeferredValue(e,t)},e.useEffect=function(e,t){return S.H.useEffect(e,t)},e.useEffectEvent=function(e){return S.H.useEffectEvent(e)},e.useId=function(){return S.H.useId()},e.useImperativeHandle=function(e,t,n){return S.H.useImperativeHandle(e,t,n)},e.useInsertionEffect=function(e,t){return S.H.useInsertionEffect(e,t)},e.useLayoutEffect=function(e,t){return S.H.useLayoutEffect(e,t)},e.useMemo=function(e,t){return S.H.useMemo(e,t)},e.useOptimistic=function(e,t){return S.H.useOptimistic(e,t)},e.useReducer=function(e,t,n){return S.H.useReducer(e,t,n)},e.useRef=function(e){return S.H.useRef(e)},e.useState=function(e){return S.H.useState(e)},e.useSyncExternalStore=function(e,t,n){return S.H.useSyncExternalStore(e,t,n)},e.useTransition=function(){return S.H.useTransition()},e.version=`19.2.0`})),u=o(((e,t)=>{t.exports=l()})),d=o((e=>{function t(e,t){var n=e.length;e.push(t);a:for(;0<n;){var r=n-1>>>1,a=e[r];if(0<i(a,t))e[r]=t,e[n]=a,n=r;else break a}}function n(e){return e.length===0?null:e[0]}function r(e){if(e.length===0)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;a:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,c=e[s],l=s+1,u=e[l];if(0>i(c,n))l<a&&0>i(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[s]=n,r=s);else if(l<a&&0>i(u,n))e[r]=u,e[l]=n,r=l;else break a}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return n===0?e.id-t.id:n}if(e.unstable_now=void 0,typeof performance==`object`&&typeof performance.now==`function`){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var c=[],l=[],u=1,d=null,f=3,p=!1,m=!1,h=!1,g=!1,_=typeof setTimeout==`function`?setTimeout:null,v=typeof clearTimeout==`function`?clearTimeout:null,y=typeof setImmediate<`u`?setImmediate:null;function b(e){for(var i=n(l);i!==null;){if(i.callback===null)r(l);else if(i.startTime<=e)r(l),i.sortIndex=i.expirationTime,t(c,i);else break;i=n(l)}}function x(e){if(h=!1,b(e),!m)if(n(c)!==null)m=!0,ee||(ee=!0,ie());else{var t=n(l);t!==null&&se(x,t.startTime-e)}}var ee=!1,te=-1,S=5,C=-1;function ne(){return g?!0:!(e.unstable_now()-C<S)}function re(){if(g=!1,ee){var t=e.unstable_now();C=t;var i=!0;try{a:{m=!1,h&&(h=!1,v(te),te=-1),p=!0;var a=f;try{b:{for(b(t),d=n(c);d!==null&&!(d.expirationTime>t&&ne());){var o=d.callback;if(typeof o==`function`){d.callback=null,f=d.priorityLevel;var s=o(d.expirationTime<=t);if(t=e.unstable_now(),typeof s==`function`){d.callback=s,b(t),i=!0;break b}d===n(c)&&r(c),b(t)}else r(c);d=n(c)}if(d!==null)i=!0;else{var u=n(l);u!==null&&se(x,u.startTime-t),i=!1}}break a}finally{d=null,f=a,p=!1}i=void 0}}finally{i?ie():ee=!1}}}var ie;if(typeof y==`function`)ie=function(){y(re)};else if(typeof MessageChannel<`u`){var ae=new MessageChannel,oe=ae.port2;ae.port1.onmessage=re,ie=function(){oe.postMessage(null)}}else ie=function(){_(re,0)};function se(t,n){te=_(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error(`forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported`):S=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_scheduleCallback=function(r,i,a){var o=e.unstable_now();switch(typeof a==`object`&&a?(a=a.delay,a=typeof a==`number`&&0<a?o+a:o):a=o,r){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return s=a+s,r={id:u++,callback:i,priorityLevel:r,startTime:a,expirationTime:s,sortIndex:-1},a>o?(r.sortIndex=a,t(l,r),n(c)===null&&r===n(l)&&(h?(v(te),te=-1):h=!0,se(x,a-o))):(r.sortIndex=s,t(c,r),m||p||(m=!0,ee||(ee=!0,ie()))),r},e.unstable_shouldYield=ne,e.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}})),f=o(((e,t)=>{t.exports=d()})),p=o((e=>{var t=u();function n(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function r(){}var i={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for(`react.portal`);function o(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:r==null?null:``+r,children:e,containerInfo:t,implementation:n}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){if(e===`font`)return``;if(typeof t==`string`)return t===`use-credentials`?t:``}e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,e.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(n(299));return o(e,t,null,r)},e.flushSync=function(e){var t=s.T,n=i.p;try{if(s.T=null,i.p=2,e)return e()}finally{s.T=t,i.p=n,i.d.f()}},e.preconnect=function(e,t){typeof e==`string`&&(t?(t=t.crossOrigin,t=typeof t==`string`?t===`use-credentials`?t:``:void 0):t=null,i.d.C(e,t))},e.prefetchDNS=function(e){typeof e==`string`&&i.d.D(e)},e.preinit=function(e,t){if(typeof e==`string`&&t&&typeof t.as==`string`){var n=t.as,r=c(n,t.crossOrigin),a=typeof t.integrity==`string`?t.integrity:void 0,o=typeof t.fetchPriority==`string`?t.fetchPriority:void 0;n===`style`?i.d.S(e,typeof t.precedence==`string`?t.precedence:void 0,{crossOrigin:r,integrity:a,fetchPriority:o}):n===`script`&&i.d.X(e,{crossOrigin:r,integrity:a,fetchPriority:o,nonce:typeof t.nonce==`string`?t.nonce:void 0})}},e.preinitModule=function(e,t){if(typeof e==`string`)if(typeof t==`object`&&t){if(t.as==null||t.as===`script`){var n=c(t.as,t.crossOrigin);i.d.M(e,{crossOrigin:n,integrity:typeof t.integrity==`string`?t.integrity:void 0,nonce:typeof t.nonce==`string`?t.nonce:void 0})}}else t??i.d.M(e)},e.preload=function(e,t){if(typeof e==`string`&&typeof t==`object`&&t&&typeof t.as==`string`){var n=t.as,r=c(n,t.crossOrigin);i.d.L(e,n,{crossOrigin:r,integrity:typeof t.integrity==`string`?t.integrity:void 0,nonce:typeof t.nonce==`string`?t.nonce:void 0,type:typeof t.type==`string`?t.type:void 0,fetchPriority:typeof t.fetchPriority==`string`?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy==`string`?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet==`string`?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes==`string`?t.imageSizes:void 0,media:typeof t.media==`string`?t.media:void 0})}},e.preloadModule=function(e,t){if(typeof e==`string`)if(t){var n=c(t.as,t.crossOrigin);i.d.m(e,{as:typeof t.as==`string`&&t.as!==`script`?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity==`string`?t.integrity:void 0})}else i.d.m(e)},e.requestFormReset=function(e){i.d.r(e)},e.unstable_batchedUpdates=function(e,t){return e(t)},e.useFormState=function(e,t,n){return s.H.useFormState(e,t,n)},e.useFormStatus=function(){return s.H.useHostTransitionStatus()},e.version=`19.2.0`})),m=o(((e,t)=>{function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=p()})),h=o((e=>{var t=f(),n=u(),r=m();function i(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function a(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function s(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function c(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function l(e){if(o(e)!==e)throw Error(i(188))}function d(e){var t=e.alternate;if(!t){if(t=o(e),t===null)throw Error(i(188));return t===e?e:null}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var s=a.alternate;if(s===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===n)return l(a),e;if(s===r)return l(a),t;s=s.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=s;else{for(var c=!1,u=a.child;u;){if(u===n){c=!0,n=a,r=s;break}if(u===r){c=!0,r=a,n=s;break}u=u.sibling}if(!c){for(u=s.child;u;){if(u===n){c=!0,n=s,r=a;break}if(u===r){c=!0,r=s,n=a;break}u=u.sibling}if(!c)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(n.tag!==3)throw Error(i(188));return n.stateNode.current===n?e:t}function p(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=p(e),t!==null)return t;e=e.sibling}return null}var h=Object.assign,g=Symbol.for(`react.element`),_=Symbol.for(`react.transitional.element`),v=Symbol.for(`react.portal`),y=Symbol.for(`react.fragment`),b=Symbol.for(`react.strict_mode`),x=Symbol.for(`react.profiler`),ee=Symbol.for(`react.consumer`),te=Symbol.for(`react.context`),S=Symbol.for(`react.forward_ref`),C=Symbol.for(`react.suspense`),ne=Symbol.for(`react.suspense_list`),re=Symbol.for(`react.memo`),ie=Symbol.for(`react.lazy`),ae=Symbol.for(`react.activity`),oe=Symbol.for(`react.memo_cache_sentinel`),se=Symbol.iterator;function ce(e){return typeof e!=`object`||!e?null:(e=se&&e[se]||e[`@@iterator`],typeof e==`function`?e:null)}var le=Symbol.for(`react.client.reference`);function ue(e){if(e==null)return null;if(typeof e==`function`)return e.$$typeof===le?null:e.displayName||e.name||null;if(typeof e==`string`)return e;switch(e){case y:return`Fragment`;case x:return`Profiler`;case b:return`StrictMode`;case C:return`Suspense`;case ne:return`SuspenseList`;case ae:return`Activity`}if(typeof e==`object`)switch(e.$$typeof){case v:return`Portal`;case te:return e.displayName||`Context`;case ee:return(e._context.displayName||`Context`)+`.Consumer`;case S:var t=e.render;return e=e.displayName,e||=(e=t.displayName||t.name||``,e===``?`ForwardRef`:`ForwardRef(`+e+`)`),e;case re:return t=e.displayName||null,t===null?ue(e.type)||`Memo`:t;case ie:t=e._payload,e=e._init;try{return ue(e(t))}catch{}}return null}var de=Array.isArray,w=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,T=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},pe=[],me=-1;function he(e){return{current:e}}function ge(e){0>me||(e.current=pe[me],pe[me]=null,me--)}function _e(e,t){me++,pe[me]=e.current,e.current=t}var ve=he(null),ye=he(null),be=he(null),xe=he(null);function Se(e,t){switch(_e(be,t),_e(ye,e),_e(ve,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?gf(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=gf(t),e=_f(t,e);else switch(e){case`svg`:e=1;break;case`math`:e=2;break;default:e=0}}ge(ve),_e(ve,e)}function Ce(){ge(ve),ge(ye),ge(be)}function we(e){e.memoizedState!==null&&_e(xe,e);var t=ve.current,n=_f(t,e.type);t!==n&&(_e(ye,e),_e(ve,n))}function Te(e){ye.current===e&&(ge(ve),ge(ye)),xe.current===e&&(ge(xe),Ep._currentValue=fe)}var Ee,De;function Oe(e){if(Ee===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);Ee=t&&t[1]||``,De=-1<e.stack.indexOf(`
    at`)?` (<anonymous>)`:-1<e.stack.indexOf(`@`)?`@unknown:0:0`:``}return`
`+Ee+e+De}var ke=!1;function E(e,t){if(!e||ke)return``;ke=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,`props`,{set:function(){throw Error()}}),typeof Reflect==`object`&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}}else{try{throw Error()}catch(e){r=e}(n=e())&&typeof n.catch==`function`&&n.catch(function(){})}}catch(e){if(e&&r&&typeof e.stack==`string`)return[e.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName=`DetermineComponentFrameRoot`;var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,`name`);i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,`name`,{value:`DetermineComponentFrameRoot`});var a=r.DetermineComponentFrameRoot(),o=a[0],s=a[1];if(o&&s){var c=o.split(`
`),l=s.split(`
`);for(i=r=0;r<c.length&&!c[r].includes(`DetermineComponentFrameRoot`);)r++;for(;i<l.length&&!l[i].includes(`DetermineComponentFrameRoot`);)i++;if(r===c.length||i===l.length)for(r=c.length-1,i=l.length-1;1<=r&&0<=i&&c[r]!==l[i];)i--;for(;1<=r&&0<=i;r--,i--)if(c[r]!==l[i]){if(r!==1||i!==1)do if(r--,i--,0>i||c[r]!==l[i]){var u=`
`+c[r].replace(` at new `,` at `);return e.displayName&&u.includes(`<anonymous>`)&&(u=u.replace(`<anonymous>`,e.displayName)),u}while(1<=r&&0<=i);break}}}finally{ke=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:``)?Oe(n):``}function Ae(e,t){switch(e.tag){case 26:case 27:case 5:return Oe(e.type);case 16:return Oe(`Lazy`);case 13:return e.child!==t&&t!==null?Oe(`Suspense Fallback`):Oe(`Suspense`);case 19:return Oe(`SuspenseList`);case 0:case 15:return E(e.type,!1);case 11:return E(e.type.render,!1);case 1:return E(e.type,!0);case 31:return Oe(`Activity`);default:return``}}function je(e){try{var t=``,n=null;do t+=Ae(e,n),n=e,e=e.return;while(e);return t}catch(e){return`
Error generating stack: `+e.message+`
`+e.stack}}var Me=Object.prototype.hasOwnProperty,Ne=t.unstable_scheduleCallback,Pe=t.unstable_cancelCallback,Fe=t.unstable_shouldYield,Ie=t.unstable_requestPaint,Le=t.unstable_now,Re=t.unstable_getCurrentPriorityLevel,ze=t.unstable_ImmediatePriority,Be=t.unstable_UserBlockingPriority,Ve=t.unstable_NormalPriority,He=t.unstable_LowPriority,Ue=t.unstable_IdlePriority,We=t.log,Ge=t.unstable_setDisableYieldValue,Ke=null,qe=null;function Je(e){if(typeof We==`function`&&Ge(e),qe&&typeof qe.setStrictMode==`function`)try{qe.setStrictMode(Ke,e)}catch{}}var Ye=Math.clz32?Math.clz32:Qe,Xe=Math.log,Ze=Math.LN2;function Qe(e){return e>>>=0,e===0?32:31-(Xe(e)/Ze|0)|0}var $e=256,et=262144,tt=4194304;function nt(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function rt(e,t,n){var r=e.pendingLanes;if(r===0)return 0;var i=0,a=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var s=r&134217727;return s===0?(s=r&~a,s===0?o===0?n||(n=r&~e,n!==0&&(i=nt(n))):i=nt(o):i=nt(s)):(r=s&~a,r===0?(o&=s,o===0?n||(n=s&~e,n!==0&&(i=nt(n))):i=nt(o)):i=nt(r)),i===0?0:t!==0&&t!==i&&(t&a)===0&&(a=i&-i,n=t&-t,a>=n||a===32&&n&4194048)?t:i}function it(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function at(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ot(){var e=tt;return tt<<=1,!(tt&62914560)&&(tt=4194304),e}function st(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ct(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function lt(e,t,n,r,i,a){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,c=e.expirationTimes,l=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-Ye(n),d=1<<u;s[u]=0,c[u]=-1;var f=l[u];if(f!==null)for(l[u]=null,u=0;u<f.length;u++){var p=f[u];p!==null&&(p.lane&=-536870913)}n&=~d}r!==0&&ut(e,r,0),a!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=a&~(o&~t))}function ut(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-Ye(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|n&261930}function dt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ye(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function ft(e,t){var n=t&-t;return n=n&42?1:pt(n),(n&(e.suspendedLanes|t))===0?n:0}function pt(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function mt(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function ht(){var e=T.p;return e===0?(e=window.event,e===void 0?32:Hp(e.type)):e}function gt(e,t){var n=T.p;try{return T.p=e,t()}finally{T.p=n}}var _t=Math.random().toString(36).slice(2),vt=`__reactFiber$`+_t,yt=`__reactProps$`+_t,bt=`__reactContainer$`+_t,xt=`__reactEvents$`+_t,St=`__reactListeners$`+_t,Ct=`__reactHandles$`+_t,wt=`__reactResources$`+_t,Tt=`__reactMarker$`+_t;function Et(e){delete e[vt],delete e[yt],delete e[xt],delete e[St],delete e[Ct]}function Dt(e){var t=e[vt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[bt]||n[vt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=zf(e);e!==null;){if(n=e[vt])return n;e=zf(e)}return t}e=n,n=e.parentNode}return null}function Ot(e){if(e=e[vt]||e[bt]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function kt(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function At(e){var t=e[wt];return t||=e[wt]={hoistableStyles:new Map,hoistableScripts:new Map},t}function jt(e){e[Tt]=!0}var Mt=new Set,Nt={};function Pt(e,t){Ft(e,t),Ft(e+`Capture`,t)}function Ft(e,t){for(Nt[e]=t,e=0;e<t.length;e++)Mt.add(t[e])}var It=RegExp(`^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$`),Lt={},Rt={};function zt(e){return Me.call(Rt,e)?!0:Me.call(Lt,e)?!1:It.test(e)?Rt[e]=!0:(Lt[e]=!0,!1)}function Bt(e,t,n){if(zt(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case`undefined`:case`function`:case`symbol`:e.removeAttribute(t);return;case`boolean`:var r=t.toLowerCase().slice(0,5);if(r!==`data-`&&r!==`aria-`){e.removeAttribute(t);return}}e.setAttribute(t,``+n)}}function Vt(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case`undefined`:case`function`:case`symbol`:case`boolean`:e.removeAttribute(t);return}e.setAttribute(t,``+n)}}function Ht(e,t,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case`undefined`:case`function`:case`symbol`:case`boolean`:e.removeAttribute(n);return}e.setAttributeNS(t,n,``+r)}}function D(e){switch(typeof e){case`bigint`:case`boolean`:case`number`:case`string`:case`undefined`:return e;case`object`:return e;default:return``}}function Ut(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()===`input`&&(t===`checkbox`||t===`radio`)}function Wt(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&r!==void 0&&typeof r.get==`function`&&typeof r.set==`function`){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=``+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=``+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Gt(e){if(!e._valueTracker){var t=Ut(e)?`checked`:`value`;e._valueTracker=Wt(e,t,``+e[t])}}function Kt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r=``;return e&&(r=Ut(e)?e.checked?`true`:`false`:e.value),e=r,e===n?!1:(t.setValue(e),!0)}function qt(e){if(e||=typeof document<`u`?document:void 0,e===void 0)return null;try{return e.activeElement||e.body}catch{return e.body}}var O=/[\n"\\]/g;function Jt(e){return e.replace(O,function(e){return`\\`+e.charCodeAt(0).toString(16)+` `})}function Yt(e,t,n,r,i,a,o,s){e.name=``,o!=null&&typeof o!=`function`&&typeof o!=`symbol`&&typeof o!=`boolean`?e.type=o:e.removeAttribute(`type`),t==null?o!==`submit`&&o!==`reset`||e.removeAttribute(`value`):o===`number`?(t===0&&e.value===``||e.value!=t)&&(e.value=``+D(t)):e.value!==``+D(t)&&(e.value=``+D(t)),t==null?n==null?r!=null&&e.removeAttribute(`value`):Zt(e,o,D(n)):Zt(e,o,D(t)),i==null&&a!=null&&(e.defaultChecked=!!a),i!=null&&(e.checked=i&&typeof i!=`function`&&typeof i!=`symbol`),s!=null&&typeof s!=`function`&&typeof s!=`symbol`&&typeof s!=`boolean`?e.name=``+D(s):e.removeAttribute(`name`)}function Xt(e,t,n,r,i,a,o,s){if(a!=null&&typeof a!=`function`&&typeof a!=`symbol`&&typeof a!=`boolean`&&(e.type=a),t!=null||n!=null){if(!(a!==`submit`&&a!==`reset`||t!=null)){Gt(e);return}n=n==null?``:``+D(n),t=t==null?n:``+D(t),s||t===e.value||(e.value=t),e.defaultValue=t}r??=i,r=typeof r!=`function`&&typeof r!=`symbol`&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,o!=null&&typeof o!=`function`&&typeof o!=`symbol`&&typeof o!=`boolean`&&(e.name=o),Gt(e)}function Zt(e,t,n){t===`number`&&qt(e.ownerDocument)===e||e.defaultValue===``+n||(e.defaultValue=``+n)}function Qt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t[`$`+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty(`$`+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=``+D(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function $t(e,t,n){if(t!=null&&(t=``+D(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n==null?``:``+D(n)}function en(e,t,n,r){if(t==null){if(r!=null){if(n!=null)throw Error(i(92));if(de(r)){if(1<r.length)throw Error(i(93));r=r[0]}n=r}n??=``,t=n}n=D(t),e.defaultValue=n,r=e.textContent,r===n&&r!==``&&r!==null&&(e.value=r),Gt(e)}function k(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var tn=new Set(`animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp`.split(` `));function nn(e,t,n){var r=t.indexOf(`--`)===0;n==null||typeof n==`boolean`||n===``?r?e.setProperty(t,``):t===`float`?e.cssFloat=``:e[t]=``:r?e.setProperty(t,n):typeof n!=`number`||n===0||tn.has(t)?t===`float`?e.cssFloat=n:e[t]=(``+n).trim():e[t]=n+`px`}function rn(e,t,n){if(t!=null&&typeof t!=`object`)throw Error(i(62));if(e=e.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf(`--`)===0?e.setProperty(r,``):r===`float`?e.cssFloat=``:e[r]=``);for(var a in t)r=t[a],t.hasOwnProperty(a)&&n[a]!==r&&nn(e,a,r)}else for(var o in t)t.hasOwnProperty(o)&&nn(e,o,t[o])}function an(e){if(e.indexOf(`-`)===-1)return!1;switch(e){case`annotation-xml`:case`color-profile`:case`font-face`:case`font-face-src`:case`font-face-uri`:case`font-face-format`:case`font-face-name`:case`missing-glyph`:return!1;default:return!0}}var on=new Map([[`acceptCharset`,`accept-charset`],[`htmlFor`,`for`],[`httpEquiv`,`http-equiv`],[`crossOrigin`,`crossorigin`],[`accentHeight`,`accent-height`],[`alignmentBaseline`,`alignment-baseline`],[`arabicForm`,`arabic-form`],[`baselineShift`,`baseline-shift`],[`capHeight`,`cap-height`],[`clipPath`,`clip-path`],[`clipRule`,`clip-rule`],[`colorInterpolation`,`color-interpolation`],[`colorInterpolationFilters`,`color-interpolation-filters`],[`colorProfile`,`color-profile`],[`colorRendering`,`color-rendering`],[`dominantBaseline`,`dominant-baseline`],[`enableBackground`,`enable-background`],[`fillOpacity`,`fill-opacity`],[`fillRule`,`fill-rule`],[`floodColor`,`flood-color`],[`floodOpacity`,`flood-opacity`],[`fontFamily`,`font-family`],[`fontSize`,`font-size`],[`fontSizeAdjust`,`font-size-adjust`],[`fontStretch`,`font-stretch`],[`fontStyle`,`font-style`],[`fontVariant`,`font-variant`],[`fontWeight`,`font-weight`],[`glyphName`,`glyph-name`],[`glyphOrientationHorizontal`,`glyph-orientation-horizontal`],[`glyphOrientationVertical`,`glyph-orientation-vertical`],[`horizAdvX`,`horiz-adv-x`],[`horizOriginX`,`horiz-origin-x`],[`imageRendering`,`image-rendering`],[`letterSpacing`,`letter-spacing`],[`lightingColor`,`lighting-color`],[`markerEnd`,`marker-end`],[`markerMid`,`marker-mid`],[`markerStart`,`marker-start`],[`overlinePosition`,`overline-position`],[`overlineThickness`,`overline-thickness`],[`paintOrder`,`paint-order`],[`panose-1`,`panose-1`],[`pointerEvents`,`pointer-events`],[`renderingIntent`,`rendering-intent`],[`shapeRendering`,`shape-rendering`],[`stopColor`,`stop-color`],[`stopOpacity`,`stop-opacity`],[`strikethroughPosition`,`strikethrough-position`],[`strikethroughThickness`,`strikethrough-thickness`],[`strokeDasharray`,`stroke-dasharray`],[`strokeDashoffset`,`stroke-dashoffset`],[`strokeLinecap`,`stroke-linecap`],[`strokeLinejoin`,`stroke-linejoin`],[`strokeMiterlimit`,`stroke-miterlimit`],[`strokeOpacity`,`stroke-opacity`],[`strokeWidth`,`stroke-width`],[`textAnchor`,`text-anchor`],[`textDecoration`,`text-decoration`],[`textRendering`,`text-rendering`],[`transformOrigin`,`transform-origin`],[`underlinePosition`,`underline-position`],[`underlineThickness`,`underline-thickness`],[`unicodeBidi`,`unicode-bidi`],[`unicodeRange`,`unicode-range`],[`unitsPerEm`,`units-per-em`],[`vAlphabetic`,`v-alphabetic`],[`vHanging`,`v-hanging`],[`vIdeographic`,`v-ideographic`],[`vMathematical`,`v-mathematical`],[`vectorEffect`,`vector-effect`],[`vertAdvY`,`vert-adv-y`],[`vertOriginX`,`vert-origin-x`],[`vertOriginY`,`vert-origin-y`],[`wordSpacing`,`word-spacing`],[`writingMode`,`writing-mode`],[`xmlnsXlink`,`xmlns:xlink`],[`xHeight`,`x-height`]]),sn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function cn(e){return sn.test(``+e)?`javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')`:e}function ln(){}var un=null;function dn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var fn=null,pn=null;function mn(e){var t=Ot(e);if(t&&(e=t.stateNode)){var n=e[yt]||null;a:switch(e=t.stateNode,t.type){case`input`:if(Yt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type===`radio`&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll(`input[name="`+Jt(``+t)+`"][type="radio"]`),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=r[yt]||null;if(!a)throw Error(i(90));Yt(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)r=n[t],r.form===e.form&&Kt(r)}break a;case`textarea`:$t(e,n.value,n.defaultValue);break a;case`select`:t=n.value,t!=null&&Qt(e,!!n.multiple,t,!1)}}}var hn=!1;function gn(e,t,n){if(hn)return e(t,n);hn=!0;try{return e(t)}finally{if(hn=!1,(fn!==null||pn!==null)&&(Gu(),fn&&(t=fn,e=pn,pn=fn=null,mn(t),e)))for(t=0;t<e.length;t++)mn(e[t])}}function _n(e,t){var n=e.stateNode;if(n===null)return null;var r=n[yt]||null;if(r===null)return null;n=r[t];a:switch(t){case`onClick`:case`onClickCapture`:case`onDoubleClick`:case`onDoubleClickCapture`:case`onMouseDown`:case`onMouseDownCapture`:case`onMouseMove`:case`onMouseMoveCapture`:case`onMouseUp`:case`onMouseUpCapture`:case`onMouseEnter`:(r=!r.disabled)||(e=e.type,r=!(e===`button`||e===`input`||e===`select`||e===`textarea`)),e=!r;break a;default:e=!1}if(e)return null;if(n&&typeof n!=`function`)throw Error(i(231,t,typeof n));return n}var vn=!(typeof window>`u`||window.document===void 0||window.document.createElement===void 0),yn=!1;if(vn)try{var bn={};Object.defineProperty(bn,`passive`,{get:function(){yn=!0}}),window.addEventListener(`test`,bn,bn),window.removeEventListener(`test`,bn,bn)}catch{yn=!1}var xn=null,Sn=null,Cn=null;function wn(){if(Cn)return Cn;var e,t=Sn,n=t.length,r,i=`value`in xn?xn.value:xn.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[a-r];r++);return Cn=i.slice(e,1<r?1-r:void 0)}function Tn(e){var t=e.keyCode;return`charCode`in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function En(){return!0}function Dn(){return!1}function On(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented==null?!1===i.returnValue:i.defaultPrevented)?En:Dn,this.isPropagationStopped=Dn,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!=`unknown`&&(e.returnValue=!1),this.isDefaultPrevented=En)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!=`unknown`&&(e.cancelBubble=!0),this.isPropagationStopped=En)},persist:function(){},isPersistent:En}),t}var kn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},An=On(kn),jn=h({},kn,{view:0,detail:0}),Mn=On(jn),Nn,Pn,Fn,In=h({},jn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qn,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return`movementX`in e?e.movementX:(e!==Fn&&(Fn&&e.type===`mousemove`?(Nn=e.screenX-Fn.screenX,Pn=e.screenY-Fn.screenY):Pn=Nn=0,Fn=e),Nn)},movementY:function(e){return`movementY`in e?e.movementY:Pn}}),Ln=On(In),Rn=h({},In,{dataTransfer:0}),zn=On(Rn),Bn=h({},jn,{relatedTarget:0}),Vn=On(Bn),Hn=h({},kn,{animationName:0,elapsedTime:0,pseudoElement:0}),Un=On(Hn),Wn=h({},kn,{clipboardData:function(e){return`clipboardData`in e?e.clipboardData:window.clipboardData}}),Gn=On(Wn),Kn=h({},kn,{data:0}),qn=On(Kn),Jn={Esc:`Escape`,Spacebar:` `,Left:`ArrowLeft`,Up:`ArrowUp`,Right:`ArrowRight`,Down:`ArrowDown`,Del:`Delete`,Win:`OS`,Menu:`ContextMenu`,Apps:`ContextMenu`,Scroll:`ScrollLock`,MozPrintableKey:`Unidentified`},Yn={8:`Backspace`,9:`Tab`,12:`Clear`,13:`Enter`,16:`Shift`,17:`Control`,18:`Alt`,19:`Pause`,20:`CapsLock`,27:`Escape`,32:` `,33:`PageUp`,34:`PageDown`,35:`End`,36:`Home`,37:`ArrowLeft`,38:`ArrowUp`,39:`ArrowRight`,40:`ArrowDown`,45:`Insert`,46:`Delete`,112:`F1`,113:`F2`,114:`F3`,115:`F4`,116:`F5`,117:`F6`,118:`F7`,119:`F8`,120:`F9`,121:`F10`,122:`F11`,123:`F12`,144:`NumLock`,145:`ScrollLock`,224:`Meta`},Xn={Alt:`altKey`,Control:`ctrlKey`,Meta:`metaKey`,Shift:`shiftKey`};function Zn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Xn[e])?!!t[e]:!1}function Qn(){return Zn}var $n=h({},jn,{key:function(e){if(e.key){var t=Jn[e.key]||e.key;if(t!==`Unidentified`)return t}return e.type===`keypress`?(e=Tn(e),e===13?`Enter`:String.fromCharCode(e)):e.type===`keydown`||e.type===`keyup`?Yn[e.keyCode]||`Unidentified`:``},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qn,charCode:function(e){return e.type===`keypress`?Tn(e):0},keyCode:function(e){return e.type===`keydown`||e.type===`keyup`?e.keyCode:0},which:function(e){return e.type===`keypress`?Tn(e):e.type===`keydown`||e.type===`keyup`?e.keyCode:0}}),er=On($n),tr=h({},In,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nr=On(tr),rr=h({},jn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qn}),ir=On(rr),ar=h({},kn,{propertyName:0,elapsedTime:0,pseudoElement:0}),or=On(ar),sr=h({},In,{deltaX:function(e){return`deltaX`in e?e.deltaX:`wheelDeltaX`in e?-e.wheelDeltaX:0},deltaY:function(e){return`deltaY`in e?e.deltaY:`wheelDeltaY`in e?-e.wheelDeltaY:`wheelDelta`in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),cr=On(sr),lr=h({},kn,{newState:0,oldState:0}),ur=On(lr),dr=[9,13,27,32],fr=vn&&`CompositionEvent`in window,pr=null;vn&&`documentMode`in document&&(pr=document.documentMode);var mr=vn&&`TextEvent`in window&&!pr,hr=vn&&(!fr||pr&&8<pr&&11>=pr),gr=` `,_r=!1;function vr(e,t){switch(e){case`keyup`:return dr.indexOf(t.keyCode)!==-1;case`keydown`:return t.keyCode!==229;case`keypress`:case`mousedown`:case`focusout`:return!0;default:return!1}}function yr(e){return e=e.detail,typeof e==`object`&&`data`in e?e.data:null}var br=!1;function xr(e,t){switch(e){case`compositionend`:return yr(t);case`keypress`:return t.which===32?(_r=!0,gr):null;case`textInput`:return e=t.data,e===gr&&_r?null:e;default:return null}}function Sr(e,t){if(br)return e===`compositionend`||!fr&&vr(e,t)?(e=wn(),Cn=Sn=xn=null,br=!1,e):null;switch(e){case`paste`:return null;case`keypress`:if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case`compositionend`:return hr&&t.locale!==`ko`?null:t.data;default:return null}}var Cr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t===`input`?!!Cr[e.type]:t===`textarea`}function Tr(e,t,n,r){fn?pn?pn.push(r):pn=[r]:fn=r,t=Qd(t,`onChange`),0<t.length&&(n=new An(`onChange`,`change`,null,n,r),e.push({event:n,listeners:t}))}var Er=null,Dr=null;function Or(e){Gd(e,0)}function kr(e){var t=kt(e);if(Kt(t))return e}function Ar(e,t){if(e===`change`)return t}var jr=!1;if(vn){var Mr;if(vn){var Nr=`oninput`in document;if(!Nr){var Pr=document.createElement(`div`);Pr.setAttribute(`oninput`,`return;`),Nr=typeof Pr.oninput==`function`}Mr=Nr}else Mr=!1;jr=Mr&&(!document.documentMode||9<document.documentMode)}function Fr(){Er&&(Er.detachEvent(`onpropertychange`,Ir),Dr=Er=null)}function Ir(e){if(e.propertyName===`value`&&kr(Dr)){var t=[];Tr(t,Dr,e,dn(e)),gn(Or,t)}}function Lr(e,t,n){e===`focusin`?(Fr(),Er=t,Dr=n,Er.attachEvent(`onpropertychange`,Ir)):e===`focusout`&&Fr()}function Rr(e){if(e===`selectionchange`||e===`keyup`||e===`keydown`)return kr(Dr)}function zr(e,t){if(e===`click`)return kr(t)}function Br(e,t){if(e===`input`||e===`change`)return kr(t)}function Vr(e,t){return e===t&&(e!==0||1/e==1/t)||e!==e&&t!==t}var Hr=typeof Object.is==`function`?Object.is:Vr;function Ur(e,t){if(Hr(e,t))return!0;if(typeof e!=`object`||!e||typeof t!=`object`||!t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Me.call(t,i)||!Hr(e[i],t[i]))return!1}return!0}function Wr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Gr(e,t){var n=Wr(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}a:{for(;n;){if(n.nextSibling){n=n.nextSibling;break a}n=n.parentNode}n=void 0}n=Wr(n)}}function Kr(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Kr(e,t.parentNode):`contains`in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function qr(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=qt(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href==`string`}catch{n=!1}if(n)e=t.contentWindow;else break;t=qt(e.document)}return t}function Jr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t===`input`&&(e.type===`text`||e.type===`search`||e.type===`tel`||e.type===`url`||e.type===`password`)||t===`textarea`||e.contentEditable===`true`)}var Yr=vn&&`documentMode`in document&&11>=document.documentMode,Xr=null,Zr=null,A=null,Qr=!1;function $r(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Qr||Xr==null||Xr!==qt(r)||(r=Xr,`selectionStart`in r&&Jr(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),A&&Ur(A,r)||(A=r,r=Qd(Zr,`onSelect`),0<r.length&&(t=new An(`onSelect`,`select`,null,t,n),e.push({event:t,listeners:r}),t.target=Xr)))}function ei(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n[`Webkit`+e]=`webkit`+t,n[`Moz`+e]=`moz`+t,n}var ti={animationend:ei(`Animation`,`AnimationEnd`),animationiteration:ei(`Animation`,`AnimationIteration`),animationstart:ei(`Animation`,`AnimationStart`),transitionrun:ei(`Transition`,`TransitionRun`),transitionstart:ei(`Transition`,`TransitionStart`),transitioncancel:ei(`Transition`,`TransitionCancel`),transitionend:ei(`Transition`,`TransitionEnd`)},ni={},ri={};vn&&(ri=document.createElement(`div`).style,`AnimationEvent`in window||(delete ti.animationend.animation,delete ti.animationiteration.animation,delete ti.animationstart.animation),`TransitionEvent`in window||delete ti.transitionend.transition);function ii(e){if(ni[e])return ni[e];if(!ti[e])return e;var t=ti[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ri)return ni[e]=t[n];return e}var ai=ii(`animationend`),oi=ii(`animationiteration`),si=ii(`animationstart`),ci=ii(`transitionrun`),li=ii(`transitionstart`),ui=ii(`transitioncancel`),di=ii(`transitionend`),fi=new Map,pi=`abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel`.split(` `);pi.push(`scrollEnd`);function mi(e,t){fi.set(e,t),Pt(t,[e])}var hi=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)},gi=[],_i=0,vi=0;function yi(){for(var e=_i,t=vi=_i=0;t<e;){var n=gi[t];gi[t++]=null;var r=gi[t];gi[t++]=null;var i=gi[t];gi[t++]=null;var a=gi[t];if(gi[t++]=null,r!==null&&i!==null){var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}a!==0&&Ci(n,i,a)}}function bi(e,t,n,r){gi[_i++]=e,gi[_i++]=t,gi[_i++]=n,gi[_i++]=r,vi|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function xi(e,t,n,r){return bi(e,t,n,r),wi(e)}function Si(e,t){return bi(e,null,null,t),wi(e)}function Ci(e,t,n){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n);for(var i=!1,a=e.return;a!==null;)a.childLanes|=n,r=a.alternate,r!==null&&(r.childLanes|=n),a.tag===22&&(e=a.stateNode,e===null||e._visibility&1||(i=!0)),e=a,a=a.return;return e.tag===3?(a=e.stateNode,i&&t!==null&&(i=31-Ye(n),e=a.hiddenUpdates,r=e[i],r===null?e[i]=[t]:r.push(t),t.lane=n|536870912),a):null}function wi(e){if(50<Iu)throw Iu=0,Lu=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Ti={};function Ei(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Di(e,t,n,r){return new Ei(e,t,n,r)}function Oi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ki(e,t){var n=e.alternate;return n===null?(n=Di(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Ai(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ji(e,t,n,r,a,o){var s=0;if(r=e,typeof e==`function`)Oi(e)&&(s=1);else if(typeof e==`string`)s=_p(e,n,ve.current)?26:e===`html`||e===`head`||e===`body`?27:5;else a:switch(e){case ae:return e=Di(31,n,t,a),e.elementType=ae,e.lanes=o,e;case y:return Mi(n.children,a,o,t);case b:s=8,a|=24;break;case x:return e=Di(12,n,t,a|2),e.elementType=x,e.lanes=o,e;case C:return e=Di(13,n,t,a),e.elementType=C,e.lanes=o,e;case ne:return e=Di(19,n,t,a),e.elementType=ne,e.lanes=o,e;default:if(typeof e==`object`&&e)switch(e.$$typeof){case te:s=10;break a;case ee:s=9;break a;case S:s=11;break a;case re:s=14;break a;case ie:s=16,r=null;break a}s=29,n=Error(i(130,e===null?`null`:typeof e,``)),r=null}return t=Di(s,n,t,a),t.elementType=e,t.type=r,t.lanes=o,t}function Mi(e,t,n,r){return e=Di(7,e,r,t),e.lanes=n,e}function Ni(e,t,n){return e=Di(6,e,null,t),e.lanes=n,e}function Pi(e){var t=Di(18,null,null,0);return t.stateNode=e,t}function Fi(e,t,n){return t=Di(4,e.children===null?[]:e.children,e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ii=new WeakMap;function Li(e,t){if(typeof e==`object`&&e){var n=Ii.get(e);return n===void 0?(t={value:e,source:t,stack:je(t)},Ii.set(e,t),t):n}return{value:e,source:t,stack:je(t)}}var Ri=[],zi=0,Bi=null,Vi=0,Hi=[],Ui=0,Wi=null,Gi=1,Ki=``;function qi(e,t){Ri[zi++]=Vi,Ri[zi++]=Bi,Bi=e,Vi=t}function Ji(e,t,n){Hi[Ui++]=Gi,Hi[Ui++]=Ki,Hi[Ui++]=Wi,Wi=e;var r=Gi;e=Ki;var i=32-Ye(r)-1;r&=~(1<<i),n+=1;var a=32-Ye(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Gi=1<<32-Ye(t)+i|n<<i|r,Ki=a+e}else Gi=1<<a|n<<i|r,Ki=e}function Yi(e){e.return!==null&&(qi(e,1),Ji(e,1,0))}function Xi(e){for(;e===Bi;)Bi=Ri[--zi],Ri[zi]=null,Vi=Ri[--zi],Ri[zi]=null;for(;e===Wi;)Wi=Hi[--Ui],Hi[Ui]=null,Ki=Hi[--Ui],Hi[Ui]=null,Gi=Hi[--Ui],Hi[Ui]=null}function Zi(e,t){Hi[Ui++]=Gi,Hi[Ui++]=Ki,Hi[Ui++]=Wi,Gi=t.id,Ki=t.overflow,Wi=e}var Qi=null,$i=null,j=!1,ea=null,ta=!1,na=Error(i(519));function ra(e){var t=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?`text`:`HTML`,``));throw la(Li(t,e)),na}function ia(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[vt]=e,t[yt]=r,n){case`dialog`:V(`cancel`,t),V(`close`,t);break;case`iframe`:case`object`:case`embed`:V(`load`,t);break;case`video`:case`audio`:for(n=0;n<Ud.length;n++)V(Ud[n],t);break;case`source`:V(`error`,t);break;case`img`:case`image`:case`link`:V(`error`,t),V(`load`,t);break;case`details`:V(`toggle`,t);break;case`input`:V(`invalid`,t),Xt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case`select`:V(`invalid`,t);break;case`textarea`:V(`invalid`,t),en(t,r.value,r.defaultValue,r.children)}n=r.children,typeof n!=`string`&&typeof n!=`number`&&typeof n!=`bigint`||t.textContent===``+n||!0===r.suppressHydrationWarning||af(t.textContent,n)?(r.popover!=null&&(V(`beforetoggle`,t),V(`toggle`,t)),r.onScroll!=null&&V(`scroll`,t),r.onScrollEnd!=null&&V(`scrollend`,t),r.onClick!=null&&(t.onclick=ln),t=!0):t=!1,t||ra(e,!0)}function aa(e){for(Qi=e.return;Qi;)switch(Qi.tag){case 5:case 31:case 13:ta=!1;return;case 27:case 3:ta=!0;return;default:Qi=Qi.return}}function oa(e){if(e!==Qi)return!1;if(!j)return aa(e),j=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!==`form`&&n!==`button`)||vf(e.type,e.memoizedProps)),n=!n),n&&$i&&ra(e),aa(e),t===13){if(e=e.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(317));$i=Rf(e)}else if(t===31){if(e=e.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(317));$i=Rf(e)}else t===27?(t=$i,Ef(e.type)?(e=Lf,Lf=null,$i=e):$i=t):$i=Qi?If(e.stateNode.nextSibling):null;return!0}function sa(){$i=Qi=null,j=!1}function ca(){var e=ea;return e!==null&&(F===null?F=e:F.push.apply(F,e),ea=null),e}function la(e){ea===null?ea=[e]:ea.push(e)}var ua=he(null),da=null,fa=null;function pa(e,t,n){_e(ua,t._currentValue),t._currentValue=n}function ma(e){e._currentValue=ua.current,ge(ua)}function ha(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)===t?r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t):(e.childLanes|=t,r!==null&&(r.childLanes|=t)),e===n)break;e=e.return}}function ga(e,t,n,r){var a=e.child;for(a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){var s=a.child;o=o.firstContext;a:for(;o!==null;){var c=o;o=a;for(var l=0;l<t.length;l++)if(c.context===t[l]){o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),ha(o.return,n,e),r||(s=null);break a}o=c.next}}else if(a.tag===18){if(s=a.return,s===null)throw Error(i(341));s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),ha(s,n,e),s=null}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}}function _a(e,t,n,r){e=null;for(var a=t,o=!1;a!==null;){if(!o){if(a.flags&524288)o=!0;else if(a.flags&262144)break}if(a.tag===10){var s=a.alternate;if(s===null)throw Error(i(387));if(s=s.memoizedProps,s!==null){var c=a.type;Hr(a.pendingProps.value,s.value)||(e===null?e=[c]:e.push(c))}}else if(a===xe.current){if(s=a.alternate,s===null)throw Error(i(387));s.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(e===null?e=[Ep]:e.push(Ep))}a=a.return}e!==null&&ga(t,e,n,r),t.flags|=262144}function va(e){for(e=e.firstContext;e!==null;){if(!Hr(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ya(e){da=e,fa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ba(e){return Sa(da,e)}function xa(e,t){return da===null&&ya(e),Sa(e,t)}function Sa(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},fa===null){if(e===null)throw Error(i(308));fa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else fa=fa.next=t;return n}var Ca=typeof AbortController<`u`?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},wa=t.unstable_scheduleCallback,Ta=t.unstable_NormalPriority,Ea={$$typeof:te,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Da(){return{controller:new Ca,data:new Map,refCount:0}}function Oa(e){e.refCount--,e.refCount===0&&wa(Ta,function(){e.controller.abort()})}var ka=null,Aa=0,ja=0,Ma=null;function Na(e,t){if(ka===null){var n=ka=[];Aa=0,ja=Fd(),Ma={status:`pending`,value:void 0,then:function(e){n.push(e)}}}return Aa++,t.then(Pa,Pa),t}function Pa(){if(--Aa===0&&ka!==null){Ma!==null&&(Ma.status=`fulfilled`);var e=ka;ka=null,ja=0,Ma=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Fa(e,t){var n=[],r={status:`pending`,value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status=`fulfilled`,r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status=`rejected`,r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}var Ia=w.S;w.S=function(e,t){Eu=Le(),typeof t==`object`&&t&&typeof t.then==`function`&&Na(e,t),Ia!==null&&Ia(e,t)};var La=he(null);function Ra(){var e=La.current;return e===null?fu.pooledCache:e}function za(e,t){t===null?_e(La,La.current):_e(La,t.pool)}function Ba(){var e=Ra();return e===null?null:{parent:Ea._currentValue,pool:e}}var Va=Error(i(460)),Ha=Error(i(474)),Ua=Error(i(542)),Wa={then:function(){}};function Ga(e){return e=e.status,e===`fulfilled`||e===`rejected`}function Ka(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(ln,ln),t=n),t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,Xa(e),e;default:if(typeof t.status==`string`)t.then(ln,ln);else{if(e=fu,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status=`pending`,e.then(function(e){if(t.status===`pending`){var n=t;n.status=`fulfilled`,n.value=e}},function(e){if(t.status===`pending`){var n=t;n.status=`rejected`,n.reason=e}})}switch(t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,Xa(e),e}throw Ja=t,Va}}function qa(e){try{var t=e._init;return t(e._payload)}catch(e){throw typeof e==`object`&&e&&typeof e.then==`function`?(Ja=e,Va):e}}var Ja=null;function Ya(){if(Ja===null)throw Error(i(459));var e=Ja;return Ja=null,e}function Xa(e){if(e===Va||e===Ua)throw Error(i(483))}var Za=null,Qa=0;function $a(e){var t=Qa;return Qa+=1,Za===null&&(Za=[]),Ka(Za,e,t)}function eo(e,t){t=t.props.ref,e.ref=t===void 0?null:t}function to(e,t){throw t.$$typeof===g?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e===`[object Object]`?`object with keys {`+Object.keys(t).join(`, `)+`}`:e)))}function no(e){function t(t,n){if(e){var r=t.deletions;r===null?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;r!==null;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;e!==null;)e.key===null?t.set(e.index,e):t.set(e.key,e),e=e.sibling;return t}function a(e,t){return e=ki(e,t),e.index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?(r=t.alternate,r===null?(t.flags|=67108866,n):(r=r.index,r<n?(t.flags|=67108866,n):r)):(t.flags|=1048576,n)}function s(t){return e&&t.alternate===null&&(t.flags|=67108866),t}function c(e,t,n,r){return t===null||t.tag!==6?(t=Ni(n,e.mode,r),t.return=e,t):(t=a(t,n),t.return=e,t)}function l(e,t,n,r){var i=n.type;return i===y?d(e,t,n.props.children,r,n.key):t!==null&&(t.elementType===i||typeof i==`object`&&i&&i.$$typeof===ie&&qa(i)===t.type)?(t=a(t,n.props),eo(t,n),t.return=e,t):(t=ji(n.type,n.key,n.props,null,e.mode,r),eo(t,n),t.return=e,t)}function u(e,t,n,r){return t===null||t.tag!==4||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=Fi(n,e.mode,r),t.return=e,t):(t=a(t,n.children||[]),t.return=e,t)}function d(e,t,n,r,i){return t===null||t.tag!==7?(t=Mi(n,e.mode,r,i),t.return=e,t):(t=a(t,n),t.return=e,t)}function f(e,t,n){if(typeof t==`string`&&t!==``||typeof t==`number`||typeof t==`bigint`)return t=Ni(``+t,e.mode,n),t.return=e,t;if(typeof t==`object`&&t){switch(t.$$typeof){case _:return n=ji(t.type,t.key,t.props,null,e.mode,n),eo(n,t),n.return=e,n;case v:return t=Fi(t,e.mode,n),t.return=e,t;case ie:return t=qa(t),f(e,t,n)}if(de(t)||ce(t))return t=Mi(t,e.mode,n,null),t.return=e,t;if(typeof t.then==`function`)return f(e,$a(t),n);if(t.$$typeof===te)return f(e,xa(e,t),n);to(e,t)}return null}function p(e,t,n,r){var i=t===null?null:t.key;if(typeof n==`string`&&n!==``||typeof n==`number`||typeof n==`bigint`)return i===null?c(e,t,``+n,r):null;if(typeof n==`object`&&n){switch(n.$$typeof){case _:return n.key===i?l(e,t,n,r):null;case v:return n.key===i?u(e,t,n,r):null;case ie:return n=qa(n),p(e,t,n,r)}if(de(n)||ce(n))return i===null?d(e,t,n,r,null):null;if(typeof n.then==`function`)return p(e,t,$a(n),r);if(n.$$typeof===te)return p(e,t,xa(e,n),r);to(e,n)}return null}function m(e,t,n,r,i){if(typeof r==`string`&&r!==``||typeof r==`number`||typeof r==`bigint`)return e=e.get(n)||null,c(t,e,``+r,i);if(typeof r==`object`&&r){switch(r.$$typeof){case _:return e=e.get(r.key===null?n:r.key)||null,l(t,e,r,i);case v:return e=e.get(r.key===null?n:r.key)||null,u(t,e,r,i);case ie:return r=qa(r),m(e,t,n,r,i)}if(de(r)||ce(r))return e=e.get(n)||null,d(t,e,r,i,null);if(typeof r.then==`function`)return m(e,t,n,$a(r),i);if(r.$$typeof===te)return m(e,t,n,xa(t,r),i);to(t,r)}return null}function h(i,a,s,c){for(var l=null,u=null,d=a,h=a=0,g=null;d!==null&&h<s.length;h++){d.index>h?(g=d,d=null):g=d.sibling;var _=p(i,d,s[h],c);if(_===null){d===null&&(d=g);break}e&&d&&_.alternate===null&&t(i,d),a=o(_,a,h),u===null?l=_:u.sibling=_,u=_,d=g}if(h===s.length)return n(i,d),j&&qi(i,h),l;if(d===null){for(;h<s.length;h++)d=f(i,s[h],c),d!==null&&(a=o(d,a,h),u===null?l=d:u.sibling=d,u=d);return j&&qi(i,h),l}for(d=r(d);h<s.length;h++)g=m(d,i,h,s[h],c),g!==null&&(e&&g.alternate!==null&&d.delete(g.key===null?h:g.key),a=o(g,a,h),u===null?l=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),j&&qi(i,h),l}function g(a,s,c,l){if(c==null)throw Error(i(151));for(var u=null,d=null,h=s,g=s=0,_=null,v=c.next();h!==null&&!v.done;g++,v=c.next()){h.index>g?(_=h,h=null):_=h.sibling;var y=p(a,h,v.value,l);if(y===null){h===null&&(h=_);break}e&&h&&y.alternate===null&&t(a,h),s=o(y,s,g),d===null?u=y:d.sibling=y,d=y,h=_}if(v.done)return n(a,h),j&&qi(a,g),u;if(h===null){for(;!v.done;g++,v=c.next())v=f(a,v.value,l),v!==null&&(s=o(v,s,g),d===null?u=v:d.sibling=v,d=v);return j&&qi(a,g),u}for(h=r(h);!v.done;g++,v=c.next())v=m(h,a,g,v.value,l),v!==null&&(e&&v.alternate!==null&&h.delete(v.key===null?g:v.key),s=o(v,s,g),d===null?u=v:d.sibling=v,d=v);return e&&h.forEach(function(e){return t(a,e)}),j&&qi(a,g),u}function b(e,r,o,c){if(typeof o==`object`&&o&&o.type===y&&o.key===null&&(o=o.props.children),typeof o==`object`&&o){switch(o.$$typeof){case _:a:{for(var l=o.key;r!==null;){if(r.key===l){if(l=o.type,l===y){if(r.tag===7){n(e,r.sibling),c=a(r,o.props.children),c.return=e,e=c;break a}}else if(r.elementType===l||typeof l==`object`&&l&&l.$$typeof===ie&&qa(l)===r.type){n(e,r.sibling),c=a(r,o.props),eo(c,o),c.return=e,e=c;break a}n(e,r);break}else t(e,r);r=r.sibling}o.type===y?(c=Mi(o.props.children,e.mode,c,o.key),c.return=e,e=c):(c=ji(o.type,o.key,o.props,null,e.mode,c),eo(c,o),c.return=e,e=c)}return s(e);case v:a:{for(l=o.key;r!==null;){if(r.key===l)if(r.tag===4&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),c=a(r,o.children||[]),c.return=e,e=c;break a}else{n(e,r);break}else t(e,r);r=r.sibling}c=Fi(o,e.mode,c),c.return=e,e=c}return s(e);case ie:return o=qa(o),b(e,r,o,c)}if(de(o))return h(e,r,o,c);if(ce(o)){if(l=ce(o),typeof l!=`function`)throw Error(i(150));return o=l.call(o),g(e,r,o,c)}if(typeof o.then==`function`)return b(e,r,$a(o),c);if(o.$$typeof===te)return b(e,r,xa(e,o),c);to(e,o)}return typeof o==`string`&&o!==``||typeof o==`number`||typeof o==`bigint`?(o=``+o,r!==null&&r.tag===6?(n(e,r.sibling),c=a(r,o),c.return=e,e=c):(n(e,r),c=Ni(o,e.mode,c),c.return=e,e=c),s(e)):n(e,r)}return function(e,t,n,r){try{Qa=0;var i=b(e,t,n,r);return Za=null,i}catch(t){if(t===Va||t===Ua)throw t;var a=Di(29,t,null,e.mode);return a.lanes=r,a.return=e,a}}}var ro=no(!0),io=no(!1),ao=!1;function oo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function so(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function co(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function lo(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,du&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=wi(e),Ci(e,null,n),t}return bi(e,r,t,n),wi(e)}function uo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,n&4194048)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,dt(e,n)}}function fo(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var po=!1;function mo(){if(po){var e=Ma;if(e!==null)throw e}}function ho(e,t,n,r){po=!1;var i=e.updateQueue;ao=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var c=s,l=c.next;c.next=null,o===null?a=l:o.next=l,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==o&&(s===null?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c))}if(a!==null){var d=i.baseState;o=0,u=l=c=null,s=a;do{var f=s.lane&-536870913,p=f!==s.lane;if(p?(P&f)===f:(r&f)===f){f!==0&&f===ja&&(po=!0),u!==null&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});a:{var m=e,g=s;f=t;var _=n;switch(g.tag){case 1:if(m=g.payload,typeof m==`function`){d=m.call(_,d,f);break a}d=m;break a;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m==`function`?m.call(_,d,f):m,f==null)break a;d=h({},d,f);break a;case 2:ao=!0}}f=s.callback,f!==null&&(e.flags|=64,p&&(e.flags|=8192),p=i.callbacks,p===null?i.callbacks=[f]:p.push(f))}else p={lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(l=u=p,c=d):u=u.next=p,o|=f;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;p=s,s=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,a===null&&(i.shared.lanes=0),bu|=o,e.lanes=o,e.memoizedState=d}}function go(e,t){if(typeof e!=`function`)throw Error(i(191,e));e.call(t)}function _o(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)go(n[e],t)}var vo=he(null),yo=he(0);function bo(e,t){e=vu,_e(yo,e),_e(vo,t),vu=e|t.baseLanes}function xo(){_e(yo,vu),_e(vo,vo.current)}function So(){vu=yo.current,ge(vo),ge(yo)}var Co=he(null),wo=null;function To(e){var t=e.alternate;_e(Ao,Ao.current&1),_e(Co,e),wo===null&&(t===null||vo.current!==null||t.memoizedState!==null)&&(wo=e)}function Eo(e){_e(Ao,Ao.current),_e(Co,e),wo===null&&(wo=e)}function Do(e){e.tag===22?(_e(Ao,Ao.current),_e(Co,e),wo===null&&(wo=e)):Oo(e)}function Oo(){_e(Ao,Ao.current),_e(Co,Co.current)}function ko(e){ge(Co),wo===e&&(wo=null),ge(Ao)}var Ao=he(0);function jo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Nf(n)||Pf(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder===`forwards`||t.memoizedProps.revealOrder===`backwards`||t.memoizedProps.revealOrder===`unstable_legacy-backwards`||t.memoizedProps.revealOrder===`together`)){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Mo=0,M=null,No=null,Po=null,Fo=!1,Io=!1,Lo=!1,Ro=0,zo=0,Bo=null,Vo=0;function Ho(){throw Error(i(321))}function Uo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Hr(e[n],t[n]))return!1;return!0}function Wo(e,t,n,r,i,a){return Mo=a,M=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,w.H=e===null||e.memoizedState===null?lc:uc,Lo=!1,a=n(r,i),Lo=!1,Io&&(a=Ko(t,n,r,i)),Go(e),a}function Go(e){w.H=cc;var t=No!==null&&No.next!==null;if(Mo=0,Po=No=M=null,Fo=!1,zo=0,Bo=null,t)throw Error(i(300));e===null||Dc||(e=e.dependencies,e!==null&&va(e)&&(Dc=!0))}function Ko(e,t,n,r){M=e;var a=0;do{if(Io&&(Bo=null),zo=0,Io=!1,25<=a)throw Error(i(301));if(a+=1,Po=No=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}w.H=dc,o=t(n,r)}while(Io);return o}function qo(){var e=w.H,t=e.useState()[0];return t=typeof t.then==`function`?es(t):t,e=e.useState()[0],(No===null?null:No.memoizedState)!==e&&(M.flags|=1024),t}function Jo(){var e=Ro!==0;return Ro=0,e}function Yo(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Xo(e){if(Fo){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Fo=!1}Mo=0,Po=No=M=null,Io=!1,zo=Ro=0,Bo=null}function Zo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Po===null?M.memoizedState=Po=e:Po=Po.next=e,Po}function Qo(){if(No===null){var e=M.alternate;e=e===null?null:e.memoizedState}else e=No.next;var t=Po===null?M.memoizedState:Po.next;if(t!==null)Po=t,No=e;else{if(e===null)throw M.alternate===null?Error(i(467)):Error(i(310));No=e,e={memoizedState:No.memoizedState,baseState:No.baseState,baseQueue:No.baseQueue,queue:No.queue,next:null},Po===null?M.memoizedState=Po=e:Po=Po.next=e}return Po}function $o(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function es(e){var t=zo;return zo+=1,Bo===null&&(Bo=[]),e=Ka(Bo,e,t),t=M,(Po===null?t.memoizedState:Po.next)===null&&(t=t.alternate,w.H=t===null||t.memoizedState===null?lc:uc),e}function ts(e){if(typeof e==`object`&&e){if(typeof e.then==`function`)return es(e);if(e.$$typeof===te)return ba(e)}throw Error(i(438,String(e)))}function ns(e){var t=null,n=M.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var r=M.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(t??={data:[],index:0},n===null&&(n=$o(),M.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=oe;return t.index++,n}function rs(e,t){return typeof t==`function`?t(e):t}function os(e){var t=Qo();return ss(t,No,e)}function ss(e,t,n){var r=e.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=n;var a=e.baseQueue,o=r.pending;if(o!==null){if(a!==null){var s=a.next;a.next=o.next,o.next=s}t.baseQueue=a=o,r.pending=null}if(o=e.baseState,a===null)e.memoizedState=o;else{t=a.next;var c=s=null,l=null,u=t,d=!1;do{var f=u.lane&-536870913;if(f===u.lane?(Mo&f)===f:(P&f)===f){var p=u.revertLane;if(p===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),f===ja&&(d=!0);else if((Mo&p)===p){u=u.next,p===ja&&(d=!0);continue}else f={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=f,s=o):l=l.next=f,M.lanes|=p,bu|=p;f=u.action,Lo&&n(o,f),o=u.hasEagerState?u.eagerState:n(o,f)}else p={lane:f,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=p,s=o):l=l.next=p,M.lanes|=f,bu|=f;u=u.next}while(u!==null&&u!==t);if(l===null?s=o:l.next=c,!Hr(o,e.memoizedState)&&(Dc=!0,d&&(n=Ma,n!==null)))throw n;e.memoizedState=o,e.baseState=s,e.baseQueue=l,r.lastRenderedState=o}return a===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function cs(e){var t=Qo(),n=t.queue;if(n===null)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(a!==null){n.pending=null;var s=a=a.next;do o=e(o,s.action),s=s.next;while(s!==a);Hr(o,t.memoizedState)||(Dc=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function ls(e,t,n){var r=M,a=Qo(),o=j;if(o){if(n===void 0)throw Error(i(407));n=n()}else n=t();var s=!Hr((No||a).memoizedState,n);if(s&&(a.memoizedState=n,Dc=!0),a=a.queue,Ps(fs.bind(null,r,a,e),[e]),a.getSnapshot!==t||s||Po!==null&&Po.memoizedState.tag&1){if(r.flags|=2048,ks(9,{destroy:void 0},ds.bind(null,r,a,n,t),null),fu===null)throw Error(i(349));o||Mo&127||us(r,t,n)}return n}function us(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=M.updateQueue,t===null?(t=$o(),M.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ds(e,t,n,r){t.value=n,t.getSnapshot=r,ps(t)&&ms(e)}function fs(e,t,n){return n(function(){ps(t)&&ms(e)})}function ps(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Hr(e,n)}catch{return!0}}function ms(e){var t=Si(e,2);t!==null&&Bu(t,e,2)}function hs(e){var t=Zo();if(typeof e==`function`){var n=e;if(e=n(),Lo){Je(!0);try{n()}finally{Je(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:e},t}function gs(e,t,n,r){return e.baseState=n,ss(e,No,typeof r==`function`?r:rs)}function _s(e,t,n,r,a){if(ac(e))throw Error(i(485));if(e=t.action,e!==null){var o={payload:a,action:e,next:null,isTransition:!0,status:`pending`,value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};w.T===null?o.isTransition=!1:n(!0),r(o),n=t.pending,n===null?(o.next=t.pending=o,vs(t,o)):(o.next=n.next,t.pending=n.next=o)}}function vs(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var a=w.T,o={};w.T=o;try{var s=n(i,r),c=w.S;c!==null&&c(o,s),ys(e,t,s)}catch(n){xs(e,t,n)}finally{a!==null&&o.types!==null&&(a.types=o.types),w.T=a}}else try{a=n(i,r),ys(e,t,a)}catch(n){xs(e,t,n)}}function ys(e,t,n){typeof n==`object`&&n&&typeof n.then==`function`?n.then(function(n){bs(e,t,n)},function(n){return xs(e,t,n)}):bs(e,t,n)}function bs(e,t,n){t.status=`fulfilled`,t.value=n,Ss(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,vs(e,n)))}function xs(e,t,n){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status=`rejected`,t.reason=n,Ss(t),t=t.next;while(t!==r)}e.action=null}function Ss(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Cs(e,t){return t}function ws(e,t){if(j){var n=fu.formState;if(n!==null){a:{var r=M;if(j){if($i){b:{for(var i=$i,a=ta;i.nodeType!==8;){if(!a){i=null;break b}if(i=If(i.nextSibling),i===null){i=null;break b}}a=i.data,i=a===`F!`||a===`F`?i:null}if(i){$i=If(i.nextSibling),r=i.data===`F!`;break a}}ra(r)}r=!1}r&&(t=n[0])}}return n=Zo(),n.memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cs,lastRenderedState:t},n.queue=r,n=nc.bind(null,M,r),r.dispatch=n,r=hs(!1),a=ic.bind(null,M,!1,r.queue),r=Zo(),i={state:t,dispatch:null,action:e,pending:null},r.queue=i,n=_s.bind(null,M,i,a,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function Ts(e){var t=Qo();return Es(t,No,e)}function Es(e,t,n){if(t=ss(e,t,Cs)[0],e=os(rs)[0],typeof t==`object`&&t&&typeof t.then==`function`)try{var r=es(t)}catch(e){throw e===Va?Ua:e}else r=t;t=Qo();var i=t.queue,a=i.dispatch;return n!==t.memoizedState&&(M.flags|=2048,ks(9,{destroy:void 0},Ds.bind(null,i,n),null)),[r,a,e]}function Ds(e,t){e.action=t}function Os(e){var t=Qo(),n=No;if(n!==null)return Es(t,n,e);Qo(),t=t.memoizedState,n=Qo();var r=n.queue.dispatch;return n.memoizedState=e,[t,r,!1]}function ks(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},t=M.updateQueue,t===null&&(t=$o(),M.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function As(){return Qo().memoizedState}function js(e,t,n,r){var i=Zo();M.flags|=e,i.memoizedState=ks(1|t,{destroy:void 0},n,r===void 0?null:r)}function Ms(e,t,n,r){var i=Qo();r=r===void 0?null:r;var a=i.memoizedState.inst;No!==null&&r!==null&&Uo(r,No.memoizedState.deps)?i.memoizedState=ks(t,a,n,r):(M.flags|=e,i.memoizedState=ks(1|t,a,n,r))}function Ns(e,t){js(8390656,8,e,t)}function Ps(e,t){Ms(2048,8,e,t)}function Fs(e){M.flags|=4;var t=M.updateQueue;if(t===null)t=$o(),M.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Is(e){var t=Qo().memoizedState;return Fs({ref:t,nextImpl:e}),function(){if(du&2)throw Error(i(440));return t.impl.apply(void 0,arguments)}}function Ls(e,t){return Ms(4,2,e,t)}function Rs(e,t){return Ms(4,4,e,t)}function zs(e,t){if(typeof t==`function`){e=e();var n=t(e);return function(){typeof n==`function`?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Bs(e,t,n){n=n==null?null:n.concat([e]),Ms(4,4,zs.bind(null,t,e),n)}function Vs(){}function Hs(e,t){var n=Qo();t=t===void 0?null:t;var r=n.memoizedState;return t!==null&&Uo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Us(e,t){var n=Qo();t=t===void 0?null:t;var r=n.memoizedState;if(t!==null&&Uo(t,r[1]))return r[0];if(r=e(),Lo){Je(!0);try{e()}finally{Je(!1)}}return n.memoizedState=[r,t],r}function Ws(e,t,n){return n===void 0||Mo&1073741824&&!(P&261930)?e.memoizedState=t:(e.memoizedState=n,e=zu(),M.lanes|=e,bu|=e,n)}function Gs(e,t,n,r){return Hr(n,t)?n:vo.current===null?!(Mo&42)||Mo&1073741824&&!(P&261930)?(Dc=!0,e.memoizedState=n):(e=zu(),M.lanes|=e,bu|=e,t):(e=Ws(e,n,r),Hr(e,t)||(Dc=!0),e)}function Ks(e,t,n,r,i){var a=T.p;T.p=a!==0&&8>a?a:8;var o=w.T,s={};w.T=s,ic(e,!1,t,n);try{var c=i(),l=w.S;if(l!==null&&l(s,c),typeof c==`object`&&c&&typeof c.then==`function`){var u=Fa(c,r);rc(e,t,u,Ru(e))}else rc(e,t,r,Ru(e))}catch(n){rc(e,t,{then:function(){},status:`rejected`,reason:n},Ru())}finally{T.p=a,o!==null&&s.types!==null&&(o.types=s.types),w.T=o}}function qs(){}function Js(e,t,n,r){if(e.tag!==5)throw Error(i(476));var a=Ys(e).queue;Ks(e,a,t,fe,n===null?qs:function(){return Xs(e),n(r)})}function Ys(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:fe},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Xs(e){var t=Ys(e);t.next===null&&(t=e.alternate.memoizedState),rc(e,t.next.queue,{},Ru())}function Zs(){return ba(Ep)}function Qs(){return Qo().memoizedState}function $s(){return Qo().memoizedState}function ec(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Ru();e=co(n);var r=lo(t,e,n);r!==null&&(Bu(r,t,n),uo(r,t,n)),t={cache:Da()},e.payload=t;return}t=t.return}}function tc(e,t,n){var r=Ru();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},ac(e)?oc(t,n):(n=xi(e,t,n,r),n!==null&&(Bu(n,e,r),sc(n,t,r)))}function nc(e,t,n){var r=Ru();rc(e,t,n,r)}function rc(e,t,n,r){var i={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(ac(e))oc(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,Hr(s,o))return bi(e,t,i,0),fu===null&&yi(),!1}catch{}if(n=xi(e,t,i,r),n!==null)return Bu(n,e,r),sc(n,t,r),!0}return!1}function ic(e,t,n,r){if(r={lane:2,revertLane:Fd(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},ac(e)){if(t)throw Error(i(479))}else t=xi(e,n,r,2),t!==null&&Bu(t,e,2)}function ac(e){var t=e.alternate;return e===M||t!==null&&t===M}function oc(e,t){Io=Fo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sc(e,t,n){if(n&4194048){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,dt(e,n)}}var cc={readContext:ba,use:ts,useCallback:Ho,useContext:Ho,useEffect:Ho,useImperativeHandle:Ho,useLayoutEffect:Ho,useInsertionEffect:Ho,useMemo:Ho,useReducer:Ho,useRef:Ho,useState:Ho,useDebugValue:Ho,useDeferredValue:Ho,useTransition:Ho,useSyncExternalStore:Ho,useId:Ho,useHostTransitionStatus:Ho,useFormState:Ho,useActionState:Ho,useOptimistic:Ho,useMemoCache:Ho,useCacheRefresh:Ho};cc.useEffectEvent=Ho;var lc={readContext:ba,use:ts,useCallback:function(e,t){return Zo().memoizedState=[e,t===void 0?null:t],e},useContext:ba,useEffect:Ns,useImperativeHandle:function(e,t,n){n=n==null?null:n.concat([e]),js(4194308,4,zs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return js(4194308,4,e,t)},useInsertionEffect:function(e,t){js(4,2,e,t)},useMemo:function(e,t){var n=Zo();t=t===void 0?null:t;var r=e();if(Lo){Je(!0);try{e()}finally{Je(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Zo();if(n!==void 0){var i=n(t);if(Lo){Je(!0);try{n(t)}finally{Je(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=tc.bind(null,M,e),[r.memoizedState,e]},useRef:function(e){var t=Zo();return e={current:e},t.memoizedState=e},useState:function(e){e=hs(e);var t=e.queue,n=nc.bind(null,M,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Vs,useDeferredValue:function(e,t){var n=Zo();return Ws(n,e,t)},useTransition:function(){var e=hs(!1);return e=Ks.bind(null,M,e.queue,!0,!1),Zo().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=M,a=Zo();if(j){if(n===void 0)throw Error(i(407));n=n()}else{if(n=t(),fu===null)throw Error(i(349));P&127||us(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,Ns(fs.bind(null,r,o,e),[e]),r.flags|=2048,ks(9,{destroy:void 0},ds.bind(null,r,o,n,t),null),n},useId:function(){var e=Zo(),t=fu.identifierPrefix;if(j){var n=Ki,r=Gi;n=(r&~(1<<32-Ye(r)-1)).toString(32)+n,t=`_`+t+`R_`+n,n=Ro++,0<n&&(t+=`H`+n.toString(32)),t+=`_`}else n=Vo++,t=`_`+t+`r_`+n.toString(32)+`_`;return e.memoizedState=t},useHostTransitionStatus:Zs,useFormState:ws,useActionState:ws,useOptimistic:function(e){var t=Zo();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=ic.bind(null,M,!0,n),n.dispatch=t,[e,t]},useMemoCache:ns,useCacheRefresh:function(){return Zo().memoizedState=ec.bind(null,M)},useEffectEvent:function(e){var t=Zo(),n={impl:e};return t.memoizedState=n,function(){if(du&2)throw Error(i(440));return n.impl.apply(void 0,arguments)}}},uc={readContext:ba,use:ts,useCallback:Hs,useContext:ba,useEffect:Ps,useImperativeHandle:Bs,useInsertionEffect:Ls,useLayoutEffect:Rs,useMemo:Us,useReducer:os,useRef:As,useState:function(){return os(rs)},useDebugValue:Vs,useDeferredValue:function(e,t){var n=Qo();return Gs(n,No.memoizedState,e,t)},useTransition:function(){var e=os(rs)[0],t=Qo().memoizedState;return[typeof e==`boolean`?e:es(e),t]},useSyncExternalStore:ls,useId:Qs,useHostTransitionStatus:Zs,useFormState:Ts,useActionState:Ts,useOptimistic:function(e,t){var n=Qo();return gs(n,No,e,t)},useMemoCache:ns,useCacheRefresh:$s};uc.useEffectEvent=Is;var dc={readContext:ba,use:ts,useCallback:Hs,useContext:ba,useEffect:Ps,useImperativeHandle:Bs,useInsertionEffect:Ls,useLayoutEffect:Rs,useMemo:Us,useReducer:cs,useRef:As,useState:function(){return cs(rs)},useDebugValue:Vs,useDeferredValue:function(e,t){var n=Qo();return No===null?Ws(n,e,t):Gs(n,No.memoizedState,e,t)},useTransition:function(){var e=cs(rs)[0],t=Qo().memoizedState;return[typeof e==`boolean`?e:es(e),t]},useSyncExternalStore:ls,useId:Qs,useHostTransitionStatus:Zs,useFormState:Os,useActionState:Os,useOptimistic:function(e,t){var n=Qo();return No===null?(n.baseState=e,[e,n.queue.dispatch]):gs(n,No,e,t)},useMemoCache:ns,useCacheRefresh:$s};dc.useEffectEvent=Is;function fc(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:h({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var pc={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ru(),i=co(r);i.payload=t,n!=null&&(i.callback=n),t=lo(e,i,r),t!==null&&(Bu(t,e,r),uo(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ru(),i=co(r);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=lo(e,i,r),t!==null&&(Bu(t,e,r),uo(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ru(),r=co(n);r.tag=2,t!=null&&(r.callback=t),t=lo(e,r,n),t!==null&&(Bu(t,e,n),uo(t,e,n))}};function mc(e,t,n,r,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate==`function`?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!Ur(n,r)||!Ur(i,a):!0}function hc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps==`function`&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps==`function`&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&pc.enqueueReplaceState(t,t.state,null)}function gc(e,t){var n=t;if(`ref`in t)for(var r in n={},t)r!==`ref`&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=h({},n)),e)n[i]===void 0&&(n[i]=e[i]);return n}function _c(e){hi(e)}function vc(e){console.error(e)}function yc(e){hi(e)}function bc(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(e){setTimeout(function(){throw e})}}function xc(e,t,n){try{var r=e.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(e){setTimeout(function(){throw e})}}function Sc(e,t,n){return n=co(n),n.tag=3,n.payload={element:null},n.callback=function(){bc(e,t)},n}function Cc(e){return e=co(e),e.tag=3,e}function wc(e,t,n,r){var i=n.type.getDerivedStateFromError;if(typeof i==`function`){var a=r.value;e.payload=function(){return i(a)},e.callback=function(){xc(t,n,r)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch==`function`&&(e.callback=function(){xc(t,n,r),typeof i!=`function`&&(ku===null?ku=new Set([this]):ku.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:e===null?``:e})})}function Tc(e,t,n,r,a){if(n.flags|=32768,typeof r==`object`&&r&&typeof r.then==`function`){if(t=n.alternate,t!==null&&_a(t,n,a,!0),n=Co.current,n!==null){switch(n.tag){case 31:case 13:return wo===null?Zu():n.alternate===null&&yu===0&&(yu=3),n.flags&=-257,n.flags|=65536,n.lanes=a,r===Wa?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([r]):t.add(r),gd(e,r,a)),!1;case 22:return n.flags|=65536,r===Wa?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([r]):n.add(r)),gd(e,r,a)),!1}throw Error(i(435,n.tag))}return gd(e,r,a),Zu(),!1}if(j)return t=Co.current,t===null?(r!==na&&(t=Error(i(423),{cause:r}),la(Li(t,n))),e=e.current.alternate,e.flags|=65536,a&=-a,e.lanes|=a,r=Li(r,n),a=Sc(e.stateNode,r,a),fo(e,a),yu!==4&&(yu=2)):(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=a,r!==na&&(e=Error(i(422),{cause:r}),la(Li(e,n)))),!1;var o=Error(i(520),{cause:r});if(o=Li(o,n),Tu===null?Tu=[o]:Tu.push(o),yu!==4&&(yu=2),t===null)return!0;r=Li(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,e=Sc(n.stateNode,r,e),fo(n,e),!1;case 1:if(t=n.type,o=n.stateNode,!(n.flags&128)&&(typeof t.getDerivedStateFromError==`function`||o!==null&&typeof o.componentDidCatch==`function`&&(ku===null||!ku.has(o))))return n.flags|=65536,a&=-a,n.lanes|=a,a=Cc(a),wc(a,e,n,r),fo(n,a),!1}n=n.return}while(n!==null);return!1}var Ec=Error(i(461)),Dc=!1;function Oc(e,t,n,r){t.child=e===null?io(t,null,n,r):ro(t,e.child,n,r)}function kc(e,t,n,r,i){n=n.render;var a=t.ref;if(`ref`in r){var o={};for(var s in r)s!==`ref`&&(o[s]=r[s])}else o=r;return ya(t),r=Wo(e,t,n,o,a,i),s=Jo(),e!==null&&!Dc?(Yo(e,t,i),$c(e,t,i)):(j&&s&&Yi(t),t.flags|=1,Oc(e,t,r,i),t.child)}function Ac(e,t,n,r,i){if(e===null){var a=n.type;return typeof a==`function`&&!Oi(a)&&a.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=a,jc(e,t,a,r,i)):(e=ji(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!el(e,i)){var o=a.memoizedProps;if(n=n.compare,n=n===null?Ur:n,n(o,r)&&e.ref===t.ref)return $c(e,t,i)}return t.flags|=1,e=ki(a,r),e.ref=t.ref,e.return=t,t.child=e}function jc(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(Ur(a,r)&&e.ref===t.ref)if(Dc=!1,t.pendingProps=r=a,el(e,i))e.flags&131072&&(Dc=!0);else return t.lanes=e.lanes,$c(e,t,i)}return zc(e,t,n,r,i)}function Mc(e,t,n,r){var i=r.children,a=e===null?null:e.memoizedState;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode===`hidden`){if(t.flags&128){if(a=a===null?n:a.baseLanes|n,e!==null){for(r=t.child=e.child,i=0;r!==null;)i=i|r.lanes|r.childLanes,r=r.sibling;r=i&~a}else r=0,t.child=null;return Pc(e,t,a,n,r)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&za(t,a===null?null:a.cachePool),a===null?xo():bo(t,a),Do(t);else return r=t.lanes=536870912,Pc(e,t,a===null?n:a.baseLanes|n,n,r)}else a===null?(e!==null&&za(t,null),xo(),Oo(t)):(za(t,a.cachePool),bo(t,a),Oo(t),t.memoizedState=null);return Oc(e,t,i,n),t.child}function Nc(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Pc(e,t,n,r,i){var a=Ra();return a=a===null?null:{parent:Ea._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},e!==null&&za(t,null),xo(),Do(t),e!==null&&_a(e,t,r,!0),t.childLanes=i,null}function Fc(e,t){return t=Jc({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Ic(e,t,n){return ro(t,e.child,null,n),e=Fc(t,t.pendingProps),e.flags|=2,ko(t),t.memoizedState=null,e}function Lc(e,t,n){var r=t.pendingProps,a=(t.flags&128)!=0;if(t.flags&=-129,e===null){if(j){if(r.mode===`hidden`)return e=Fc(t,r),t.lanes=536870912,Nc(null,e);if(Eo(t),(e=$i)?(e=Mf(e,ta),e=e!==null&&e.data===`&`?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Wi===null?null:{id:Gi,overflow:Ki},retryLane:536870912,hydrationErrors:null},n=Pi(e),n.return=t,t.child=n,Qi=t,$i=null)):e=null,e===null)throw ra(t);return t.lanes=536870912,null}return Fc(t,r)}var o=e.memoizedState;if(o!==null){var s=o.dehydrated;if(Eo(t),a)if(t.flags&256)t.flags&=-257,t=Ic(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(i(558));else if(Dc||_a(e,t,n,!1),a=(n&e.childLanes)!==0,Dc||a){if(r=fu,r!==null&&(s=ft(r,n),s!==0&&s!==o.retryLane))throw o.retryLane=s,Si(e,s),Bu(r,e,s),Ec;Zu(),t=Ic(e,t,n)}else e=o.treeContext,$i=If(s.nextSibling),Qi=t,j=!0,ea=null,ta=!1,e!==null&&Zi(t,e),t=Fc(t,r),t.flags|=4096;return t}return e=ki(e.child,{mode:r.mode,children:r.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Rc(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!=`function`&&typeof n!=`object`)throw Error(i(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function zc(e,t,n,r,i){return ya(t),n=Wo(e,t,n,r,void 0,i),r=Jo(),e!==null&&!Dc?(Yo(e,t,i),$c(e,t,i)):(j&&r&&Yi(t),t.flags|=1,Oc(e,t,n,i),t.child)}function Bc(e,t,n,r,i,a){return ya(t),t.updateQueue=null,n=Ko(t,r,n,i),Go(e),r=Jo(),e!==null&&!Dc?(Yo(e,t,a),$c(e,t,a)):(j&&r&&Yi(t),t.flags|=1,Oc(e,t,n,a),t.child)}function Vc(e,t,n,r,i){if(ya(t),t.stateNode===null){var a=Ti,o=n.contextType;typeof o==`object`&&o&&(a=ba(o)),a=new n(r,a),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=pc,t.stateNode=a,a._reactInternals=t,a=t.stateNode,a.props=r,a.state=t.memoizedState,a.refs={},oo(t),o=n.contextType,a.context=typeof o==`object`&&o?ba(o):Ti,a.state=t.memoizedState,o=n.getDerivedStateFromProps,typeof o==`function`&&(fc(t,n,o,r),a.state=t.memoizedState),typeof n.getDerivedStateFromProps==`function`||typeof a.getSnapshotBeforeUpdate==`function`||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(o=a.state,typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount(),o!==a.state&&pc.enqueueReplaceState(a,a.state,null),ho(t,r,a,i),mo(),a.state=t.memoizedState),typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!0}else if(e===null){a=t.stateNode;var s=t.memoizedProps,c=gc(n,s);a.props=c;var l=a.context,u=n.contextType;o=Ti,typeof u==`object`&&u&&(o=ba(u));var d=n.getDerivedStateFromProps;u=typeof d==`function`||typeof a.getSnapshotBeforeUpdate==`function`,s=t.pendingProps!==s,u||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(s||l!==o)&&hc(t,a,r,o),ao=!1;var f=t.memoizedState;a.state=f,ho(t,r,a,i),mo(),l=t.memoizedState,s||f!==l||ao?(typeof d==`function`&&(fc(t,n,d,r),l=t.memoizedState),(c=ao||mc(t,n,c,r,f,l,o))?(u||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount==`function`&&(t.flags|=4194308)):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=o,r=c):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,so(e,t),o=t.memoizedProps,u=gc(n,o),a.props=u,d=t.pendingProps,f=a.context,l=n.contextType,c=Ti,typeof l==`object`&&l&&(c=ba(l)),s=n.getDerivedStateFromProps,(l=typeof s==`function`||typeof a.getSnapshotBeforeUpdate==`function`)||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(o!==d||f!==c)&&hc(t,a,r,c),ao=!1,f=t.memoizedState,a.state=f,ho(t,r,a,i),mo();var p=t.memoizedState;o!==d||f!==p||ao||e!==null&&e.dependencies!==null&&va(e.dependencies)?(typeof s==`function`&&(fc(t,n,s,r),p=t.memoizedState),(u=ao||mc(t,n,u,r,f,p,c)||e!==null&&e.dependencies!==null&&va(e.dependencies))?(l||typeof a.UNSAFE_componentWillUpdate!=`function`&&typeof a.componentWillUpdate!=`function`||(typeof a.componentWillUpdate==`function`&&a.componentWillUpdate(r,p,c),typeof a.UNSAFE_componentWillUpdate==`function`&&a.UNSAFE_componentWillUpdate(r,p,c)),typeof a.componentDidUpdate==`function`&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate==`function`&&(t.flags|=1024)):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=c,r=u):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,Rc(e,t),r=(t.flags&128)!=0,a||r?(a=t.stateNode,n=r&&typeof n.getDerivedStateFromError!=`function`?null:a.render(),t.flags|=1,e!==null&&r?(t.child=ro(t,e.child,null,i),t.child=ro(t,null,n,i)):Oc(e,t,n,i),t.memoizedState=a.state,e=t.child):e=$c(e,t,i),e}function Hc(e,t,n,r){return sa(),t.flags|=256,Oc(e,t,n,r),t.child}var Uc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wc(e){return{baseLanes:e,cachePool:Ba()}}function Gc(e,t,n){return e=e===null?0:e.childLanes&~n,t&&(e|=Cu),e}function Kc(e,t,n){var r=t.pendingProps,a=!1,o=(t.flags&128)!=0,s;if((s=o)||(s=e!==null&&e.memoizedState===null?!1:(Ao.current&2)!=0),s&&(a=!0,t.flags&=-129),s=(t.flags&32)!=0,t.flags&=-33,e===null){if(j){if(a?To(t):Oo(t),(e=$i)?(e=Mf(e,ta),e=e!==null&&e.data!==`&`?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Wi===null?null:{id:Gi,overflow:Ki},retryLane:536870912,hydrationErrors:null},n=Pi(e),n.return=t,t.child=n,Qi=t,$i=null)):e=null,e===null)throw ra(t);return Pf(e)?t.lanes=32:t.lanes=536870912,null}var c=r.children;return r=r.fallback,a?(Oo(t),a=t.mode,c=Jc({mode:`hidden`,children:c},a),r=Mi(r,a,n,null),c.return=t,r.return=t,c.sibling=r,t.child=c,r=t.child,r.memoizedState=Wc(n),r.childLanes=Gc(e,s,n),t.memoizedState=Uc,Nc(null,r)):(To(t),qc(t,c))}var l=e.memoizedState;if(l!==null&&(c=l.dehydrated,c!==null)){if(o)t.flags&256?(To(t),t.flags&=-257,t=Yc(e,t,n)):t.memoizedState===null?(Oo(t),c=r.fallback,a=t.mode,r=Jc({mode:`visible`,children:r.children},a),c=Mi(c,a,n,null),c.flags|=2,r.return=t,c.return=t,r.sibling=c,t.child=r,ro(t,e.child,null,n),r=t.child,r.memoizedState=Wc(n),r.childLanes=Gc(e,s,n),t.memoizedState=Uc,t=Nc(null,r)):(Oo(t),t.child=e.child,t.flags|=128,t=null);else if(To(t),Pf(c)){if(s=c.nextSibling&&c.nextSibling.dataset,s)var u=s.dgst;s=u,r=Error(i(419)),r.stack=``,r.digest=s,la({value:r,source:null,stack:null}),t=Yc(e,t,n)}else if(Dc||_a(e,t,n,!1),s=(n&e.childLanes)!==0,Dc||s){if(s=fu,s!==null&&(r=ft(s,n),r!==0&&r!==l.retryLane))throw l.retryLane=r,Si(e,r),Bu(s,e,r),Ec;Nf(c)||Zu(),t=Yc(e,t,n)}else Nf(c)?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,$i=If(c.nextSibling),Qi=t,j=!0,ea=null,ta=!1,e!==null&&Zi(t,e),t=qc(t,r.children),t.flags|=4096);return t}return a?(Oo(t),c=r.fallback,a=t.mode,l=e.child,u=l.sibling,r=ki(l,{mode:`hidden`,children:r.children}),r.subtreeFlags=l.subtreeFlags&65011712,u===null?(c=Mi(c,a,n,null),c.flags|=2):c=ki(u,c),c.return=t,r.return=t,r.sibling=c,t.child=r,Nc(null,r),r=t.child,c=e.child.memoizedState,c===null?c=Wc(n):(a=c.cachePool,a===null?a=Ba():(l=Ea._currentValue,a=a.parent===l?a:{parent:l,pool:l}),c={baseLanes:c.baseLanes|n,cachePool:a}),r.memoizedState=c,r.childLanes=Gc(e,s,n),t.memoizedState=Uc,Nc(e.child,r)):(To(t),n=e.child,e=n.sibling,n=ki(n,{mode:`visible`,children:r.children}),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n)}function qc(e,t){return t=Jc({mode:`visible`,children:t},e.mode),t.return=e,e.child=t}function Jc(e,t){return e=Di(22,e,null,t),e.lanes=0,e}function Yc(e,t,n){return ro(t,e.child,null,n),e=qc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Xc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ha(e.return,t,n)}function Zc(e,t,n,r,i,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,treeForkCount:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.treeForkCount=a)}function Qc(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;r=r.children;var o=Ao.current,s=(o&2)!=0;if(s?(o=o&1|2,t.flags|=128):o&=1,_e(Ao,o),Oc(e,t,r,n),r=j?Vi:0,!s&&e!==null&&e.flags&128)a:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Xc(e,n,t);else if(e.tag===19)Xc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break a;for(;e.sibling===null;){if(e.return===null||e.return===t)break a;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case`forwards`:for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&jo(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Zc(t,!1,i,n,a,r);break;case`backwards`:case`unstable_legacy-backwards`:for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&jo(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Zc(t,!0,n,null,a,r);break;case`together`:Zc(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function $c(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),bu|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(_a(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,n=ki(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ki(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function el(e,t){return(e.lanes&t)===0?(e=e.dependencies,!!(e!==null&&va(e))):!0}function tl(e,t,n){switch(t.tag){case 3:Se(t,t.stateNode.containerInfo),pa(t,Ea,e.memoizedState.cache),sa();break;case 27:case 5:we(t);break;case 4:Se(t,t.stateNode.containerInfo);break;case 10:pa(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Eo(t),null;break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated===null?(n&t.child.childLanes)===0?(To(t),e=$c(e,t,n),e===null?null:e.sibling):Kc(e,t,n):(To(t),t.flags|=128,null);To(t);break;case 19:var i=(e.flags&128)!=0;if(r=(n&t.childLanes)!==0,r||=(_a(e,t,n,!1),(n&t.childLanes)!==0),i){if(r)return Qc(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),_e(Ao,Ao.current),r)break;return null;case 22:return t.lanes=0,Mc(e,t,n,t.pendingProps);case 24:pa(t,Ea,e.memoizedState.cache)}return $c(e,t,n)}function nl(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Dc=!0;else{if(!el(e,n)&&!(t.flags&128))return Dc=!1,tl(e,t,n);Dc=!!(e.flags&131072)}else Dc=!1,j&&t.flags&1048576&&Ji(t,Vi,t.index);switch(t.lanes=0,t.tag){case 16:a:{var r=t.pendingProps;if(e=qa(t.elementType),t.type=e,typeof e==`function`)Oi(e)?(r=gc(e,r),t.tag=1,t=Vc(null,t,e,r,n)):(t.tag=0,t=zc(null,t,e,r,n));else{if(e!=null){var a=e.$$typeof;if(a===S){t.tag=11,t=kc(null,t,e,r,n);break a}else if(a===re){t.tag=14,t=Ac(null,t,e,r,n);break a}}throw t=ue(e)||e,Error(i(306,t,``))}}return t;case 0:return zc(e,t,t.type,t.pendingProps,n);case 1:return r=t.type,a=gc(r,t.pendingProps),Vc(e,t,r,a,n);case 3:a:{if(Se(t,t.stateNode.containerInfo),e===null)throw Error(i(387));r=t.pendingProps;var o=t.memoizedState;a=o.element,so(e,t),ho(t,r,null,n);var s=t.memoizedState;if(r=s.cache,pa(t,Ea,r),r!==o.cache&&ga(t,[Ea],n,!0),mo(),r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=Hc(e,t,r,n);break a}else if(r!==a){a=Li(Error(i(424)),t),la(a),t=Hc(e,t,r,n);break a}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName===`HTML`?e.ownerDocument.body:e}for($i=If(e.firstChild),Qi=t,j=!0,ea=null,ta=!0,n=io(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(sa(),r===a){t=$c(e,t,n);break a}Oc(e,t,r,n)}t=t.child}return t;case 26:return Rc(e,t),e===null?(n=rp(t.type,null,t.pendingProps,null))?t.memoizedState=n:j||(n=t.type,e=t.pendingProps,r=hf(be.current).createElement(n),r[vt]=t,r[yt]=e,lf(r,n,e),jt(r),t.stateNode=r):t.memoizedState=rp(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return we(t),e===null&&j&&(r=t.stateNode=Bf(t.type,t.pendingProps,be.current),Qi=t,ta=!0,a=$i,Ef(t.type)?(Lf=a,$i=If(r.firstChild)):$i=a),Oc(e,t,t.pendingProps.children,n),Rc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&j&&((a=r=$i)&&(r=Af(r,t.type,t.pendingProps,ta),r===null?a=!1:(t.stateNode=r,Qi=t,$i=If(r.firstChild),ta=!1,a=!0)),a||ra(t)),we(t),a=t.type,o=t.pendingProps,s=e===null?null:e.memoizedProps,r=o.children,vf(a,o)?r=null:s!==null&&vf(a,s)&&(t.flags|=32),t.memoizedState!==null&&(a=Wo(e,t,qo,null,null,n),Ep._currentValue=a),Rc(e,t),Oc(e,t,r,n),t.child;case 6:return e===null&&j&&((e=n=$i)&&(n=jf(n,t.pendingProps,ta),n===null?e=!1:(t.stateNode=n,Qi=t,$i=null,e=!0)),e||ra(t)),null;case 13:return Kc(e,t,n);case 4:return Se(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ro(t,null,r,n):Oc(e,t,r,n),t.child;case 11:return kc(e,t,t.type,t.pendingProps,n);case 7:return Oc(e,t,t.pendingProps,n),t.child;case 8:return Oc(e,t,t.pendingProps.children,n),t.child;case 12:return Oc(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,pa(t,t.type,r.value),Oc(e,t,r.children,n),t.child;case 9:return a=t.type._context,r=t.pendingProps.children,ya(t),a=ba(a),r=r(a),t.flags|=1,Oc(e,t,r,n),t.child;case 14:return Ac(e,t,t.type,t.pendingProps,n);case 15:return jc(e,t,t.type,t.pendingProps,n);case 19:return Qc(e,t,n);case 31:return Lc(e,t,n);case 22:return Mc(e,t,n,t.pendingProps);case 24:return ya(t),r=ba(Ea),e===null?(a=Ra(),a===null&&(a=fu,o=Da(),a.pooledCache=o,o.refCount++,o!==null&&(a.pooledCacheLanes|=n),a=o),t.memoizedState={parent:r,cache:a},oo(t),pa(t,Ea,a)):((e.lanes&n)!==0&&(so(e,t),ho(t,null,null,n),mo()),a=e.memoizedState,o=t.memoizedState,a.parent===r?(r=o.cache,pa(t,Ea,r),r!==a.cache&&ga(t,[Ea],n,!0)):(a={parent:r,cache:r},t.memoizedState=a,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=a),pa(t,Ea,r))),Oc(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function rl(e){e.flags|=4}function il(e,t,n,r,i){if((t=(e.mode&32)!=0)&&(t=!1),t){if(e.flags|=16777216,(i&335544128)===i)if(e.stateNode.complete)e.flags|=8192;else if(Yu())e.flags|=8192;else throw Ja=Wa,Ha}else e.flags&=-16777217}function al(e,t){if(t.type!==`stylesheet`||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!vp(t))if(Yu())e.flags|=8192;else throw Ja=Wa,Ha}function ol(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag===22?536870912:ot(),e.lanes|=t,wu|=t)}function sl(e,t){if(!j)switch(e.tailMode){case`hidden`:t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case`collapsed`:n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function cl(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&65011712,r|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ll(e,t,n){var r=t.pendingProps;switch(Xi(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cl(t),null;case 1:return cl(t),null;case 3:return n=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),ma(Ea),Ce(),n.pendingContext&&=(n.context=n.pendingContext,null),(e===null||e.child===null)&&(oa(t)?rl(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ca())),cl(t),null;case 26:var a=t.type,o=t.memoizedState;return e===null?(rl(t),o===null?(cl(t),il(t,a,null,r,n)):(cl(t),al(t,o))):o?o===e.memoizedState?(cl(t),t.flags&=-16777217):(rl(t),cl(t),al(t,o)):(e=e.memoizedProps,e!==r&&rl(t),cl(t),il(t,a,e,r,n)),null;case 27:if(Te(t),n=be.current,a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&rl(t);else{if(!r){if(t.stateNode===null)throw Error(i(166));return cl(t),null}e=ve.current,oa(t)?ia(t,e):(e=Bf(a,r,n),t.stateNode=e,rl(t))}return cl(t),null;case 5:if(Te(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&rl(t);else{if(!r){if(t.stateNode===null)throw Error(i(166));return cl(t),null}if(o=ve.current,oa(t))ia(t,o);else{var s=hf(be.current);switch(o){case 1:o=s.createElementNS(`http://www.w3.org/2000/svg`,a);break;case 2:o=s.createElementNS(`http://www.w3.org/1998/Math/MathML`,a);break;default:switch(a){case`svg`:o=s.createElementNS(`http://www.w3.org/2000/svg`,a);break;case`math`:o=s.createElementNS(`http://www.w3.org/1998/Math/MathML`,a);break;case`script`:o=s.createElement(`div`),o.innerHTML=`<script><\/script>`,o=o.removeChild(o.firstChild);break;case`select`:o=typeof r.is==`string`?s.createElement(`select`,{is:r.is}):s.createElement(`select`),r.multiple?o.multiple=!0:r.size&&(o.size=r.size);break;default:o=typeof r.is==`string`?s.createElement(a,{is:r.is}):s.createElement(a)}}o[vt]=t,o[yt]=r;a:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)o.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break a;for(;s.sibling===null;){if(s.return===null||s.return===t)break a;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=o;a:switch(lf(o,a,r),a){case`button`:case`input`:case`select`:case`textarea`:r=!!r.autoFocus;break a;case`img`:r=!0;break a;default:r=!1}r&&rl(t)}}return cl(t),il(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&rl(t);else{if(typeof r!=`string`&&t.stateNode===null)throw Error(i(166));if(e=be.current,oa(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,a=Qi,a!==null)switch(a.tag){case 27:case 5:r=a.memoizedProps}e[vt]=t,e=!!(e.nodeValue===n||r!==null&&!0===r.suppressHydrationWarning||af(e.nodeValue,n)),e||ra(t,!0)}else e=hf(e).createTextNode(r),e[vt]=t,t.stateNode=e}return cl(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(r=oa(t),n!==null){if(e===null){if(!r)throw Error(i(318));if(e=t.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(557));e[vt]=t}else sa(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;cl(t),e=!1}else n=ca(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(ko(t),t):(ko(t),null);if(t.flags&128)throw Error(i(558))}return cl(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(a=oa(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(i(318));if(a=t.memoizedState,a=a===null?null:a.dehydrated,!a)throw Error(i(317));a[vt]=t}else sa(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;cl(t),a=!1}else a=ca(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return t.flags&256?(ko(t),t):(ko(t),null)}return ko(t),t.flags&128?(t.lanes=n,t):(n=r!==null,e=e!==null&&e.memoizedState!==null,n&&(r=t.child,a=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(a=r.alternate.memoizedState.cachePool.pool),o=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),o!==a&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),ol(t,t.updateQueue),cl(t),null);case 4:return Ce(),e===null&&Jd(t.stateNode.containerInfo),cl(t),null;case 10:return ma(t.type),cl(t),null;case 19:if(ge(Ao),r=t.memoizedState,r===null)return cl(t),null;if(a=(t.flags&128)!=0,o=r.rendering,o===null)if(a)sl(r,!1);else{if(yu!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=jo(e),o!==null){for(t.flags|=128,sl(r,!1),e=o.updateQueue,t.updateQueue=e,ol(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Ai(n,e),n=n.sibling;return _e(Ao,Ao.current&1|2),j&&qi(t,r.treeForkCount),t.child}e=e.sibling}r.tail!==null&&Le()>Du&&(t.flags|=128,a=!0,sl(r,!1),t.lanes=4194304)}else{if(!a)if(e=jo(o),e!==null){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,ol(t,e),sl(r,!0),r.tail===null&&r.tailMode===`hidden`&&!o.alternate&&!j)return cl(t),null}else 2*Le()-r.renderingStartTime>Du&&n!==536870912&&(t.flags|=128,a=!0,sl(r,!1),t.lanes=4194304);r.isBackwards?(o.sibling=t.child,t.child=o):(e=r.last,e===null?t.child=o:e.sibling=o,r.last=o)}return r.tail===null?(cl(t),null):(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Le(),e.sibling=null,n=Ao.current,_e(Ao,a?n&1|2:n&1),j&&qi(t,r.treeForkCount),e);case 22:case 23:return ko(t),So(),r=t.memoizedState!==null,e===null?r&&(t.flags|=8192):e.memoizedState!==null!==r&&(t.flags|=8192),r?n&536870912&&!(t.flags&128)&&(cl(t),t.subtreeFlags&6&&(t.flags|=8192)):cl(t),n=t.updateQueue,n!==null&&ol(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),e!==null&&ge(La),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ma(Ea),cl(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function ul(e,t){switch(Xi(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ma(Ea),Ce(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Te(t),null;case 31:if(t.memoizedState!==null){if(ko(t),t.alternate===null)throw Error(i(340));sa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(ko(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));sa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ge(Ao),null;case 4:return Ce(),null;case 10:return ma(t.type),null;case 22:case 23:return ko(t),So(),e!==null&&ge(La),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ma(Ea),null;case 25:return null;default:return null}}function dl(e,t){switch(Xi(t),t.tag){case 3:ma(Ea),Ce();break;case 26:case 27:case 5:Te(t);break;case 4:Ce();break;case 31:t.memoizedState!==null&&ko(t);break;case 13:ko(t);break;case 19:ge(Ao);break;case 10:ma(t.type);break;case 22:case 23:ko(t),So(),e!==null&&ge(La);break;case 24:ma(Ea)}}function fl(e,t){try{var n=t.updateQueue,r=n===null?null:n.lastEffect;if(r!==null){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var a=n.create,o=n.inst;r=a(),o.destroy=r}n=n.next}while(n!==i)}}catch(e){hd(t,t.return,e)}}function pl(e,t,n){try{var r=t.updateQueue,i=r===null?null:r.lastEffect;if(i!==null){var a=i.next;r=a;do{if((r.tag&e)===e){var o=r.inst,s=o.destroy;if(s!==void 0){o.destroy=void 0,i=t;var c=n,l=s;try{l()}catch(e){hd(i,c,e)}}}r=r.next}while(r!==a)}}catch(e){hd(t,t.return,e)}}function ml(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{_o(t,n)}catch(t){hd(e,e.return,t)}}}function hl(e,t,n){n.props=gc(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(n){hd(e,t,n)}}function gl(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof n==`function`?e.refCleanup=n(r):n.current=r}}catch(n){hd(e,t,n)}}function _l(e,t){var n=e.ref,r=e.refCleanup;if(n!==null)if(typeof r==`function`)try{r()}catch(n){hd(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n==`function`)try{n(null)}catch(n){hd(e,t,n)}else n.current=null}function vl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{a:switch(t){case`button`:case`input`:case`select`:case`textarea`:n.autoFocus&&r.focus();break a;case`img`:n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(t){hd(e,e.return,t)}}function yl(e,t,n){try{var r=e.stateNode;uf(r,e.type,n,t),r[yt]=t}catch(t){hd(e,e.return,t)}}function bl(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ef(e.type)||e.tag===4}function xl(e){a:for(;;){for(;e.sibling===null;){if(e.return===null||bl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ef(e.type)||e.flags&2||e.child===null||e.tag===4)continue a;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Sl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName===`HTML`?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName===`HTML`?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ln));else if(r!==4&&(r===27&&Ef(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Sl(e,t,n),e=e.sibling;e!==null;)Sl(e,t,n),e=e.sibling}function Cl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(r===27&&Ef(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Cl(e,t,n),e=e.sibling;e!==null;)Cl(e,t,n),e=e.sibling}function wl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);lf(t,r,n),t[vt]=e,t[yt]=n}catch(t){hd(e,e.return,t)}}var Tl=!1,El=!1,Dl=!1,Ol=typeof WeakSet==`function`?WeakSet:Set,kl=null;function Al(e,t){if(e=e.containerInfo,pf=Fp,e=qr(e),Jr(e)){if(`selectionStart`in e)var n={start:e.selectionStart,end:e.selectionEnd};else a:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break a}var s=0,c=-1,l=-1,u=0,d=0,f=e,p=null;b:for(;;){for(var m;f!==n||a!==0&&f.nodeType!==3||(c=s+a),f!==o||r!==0&&f.nodeType!==3||(l=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===e)break b;if(p===n&&++u===a&&(c=s),p===o&&++d===r&&(l=s),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=c===-1||l===-1?null:{start:c,end:l}}else n=null}n||={start:0,end:0}}else n=null;for(mf={focusedElem:e,selectionRange:n},Fp=!1,kl=t;kl!==null;)if(t=kl,e=t.child,t.subtreeFlags&1028&&e!==null)e.return=t,kl=e;else for(;kl!==null;){switch(t=kl,o=t.alternate,e=t.flags,t.tag){case 0:if(e&4&&(e=t.updateQueue,e=e===null?null:e.events,e!==null))for(n=0;n<e.length;n++)a=e[n],a.ref.impl=a.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&o!==null){e=void 0,n=t,a=o.memoizedProps,o=o.memoizedState,r=n.stateNode;try{var h=gc(n.type,a);e=r.getSnapshotBeforeUpdate(h,o),r.__reactInternalSnapshotBeforeUpdate=e}catch(e){hd(n,n.return,e)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)kf(e);else if(n===1)switch(e.nodeName){case`HEAD`:case`HTML`:case`BODY`:kf(e);break;default:e.textContent=``}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,kl=e;break}kl=t.return}}function jl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Kl(e,n),r&4&&fl(5,n);break;case 1:if(Kl(e,n),r&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(e){hd(n,n.return,e)}else{var i=gc(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){hd(n,n.return,e)}}r&64&&ml(n),r&512&&gl(n,n.return);break;case 3:if(Kl(e,n),r&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{_o(e,t)}catch(e){hd(n,n.return,e)}}break;case 27:t===null&&r&4&&wl(n);case 26:case 5:Kl(e,n),t===null&&r&4&&vl(n),r&512&&gl(n,n.return);break;case 12:Kl(e,n);break;case 31:Kl(e,n),r&4&&Ll(e,n);break;case 13:Kl(e,n),r&4&&Rl(e,n),r&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=yd.bind(null,n),Ff(e,n))));break;case 22:if(r=n.memoizedState!==null||Tl,!r){t=t!==null&&t.memoizedState!==null||El,i=Tl;var a=El;Tl=r,(El=t)&&!a?Jl(e,n,(n.subtreeFlags&8772)!=0):Kl(e,n),Tl=i,El=a}break;case 30:break;default:Kl(e,n)}}function Ml(e){var t=e.alternate;t!==null&&(e.alternate=null,Ml(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Et(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Nl=null,Pl=!1;function Fl(e,t,n){for(n=n.child;n!==null;)Il(e,t,n),n=n.sibling}function Il(e,t,n){if(qe&&typeof qe.onCommitFiberUnmount==`function`)try{qe.onCommitFiberUnmount(Ke,n)}catch{}switch(n.tag){case 26:El||_l(n,t),Fl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:El||_l(n,t);var r=Nl,i=Pl;Ef(n.type)&&(Nl=n.stateNode,Pl=!1),Fl(e,t,n),Vf(n.stateNode),Nl=r,Pl=i;break;case 5:El||_l(n,t);case 6:if(r=Nl,i=Pl,Nl=null,Fl(e,t,n),Nl=r,Pl=i,Nl!==null)if(Pl)try{(Nl.nodeType===9?Nl.body:Nl.nodeName===`HTML`?Nl.ownerDocument.body:Nl).removeChild(n.stateNode)}catch(e){hd(n,t,e)}else try{Nl.removeChild(n.stateNode)}catch(e){hd(n,t,e)}break;case 18:Nl!==null&&(Pl?(e=Nl,Df(e.nodeType===9?e.body:e.nodeName===`HTML`?e.ownerDocument.body:e,n.stateNode),sm(e)):Df(Nl,n.stateNode));break;case 4:r=Nl,i=Pl,Nl=n.stateNode.containerInfo,Pl=!0,Fl(e,t,n),Nl=r,Pl=i;break;case 0:case 11:case 14:case 15:pl(2,n,t),El||pl(4,n,t),Fl(e,t,n);break;case 1:El||(_l(n,t),r=n.stateNode,typeof r.componentWillUnmount==`function`&&hl(n,t,r)),Fl(e,t,n);break;case 21:Fl(e,t,n);break;case 22:El=(r=El)||n.memoizedState!==null,Fl(e,t,n),El=r;break;default:Fl(e,t,n)}}function Ll(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{sm(e)}catch(e){hd(t,t.return,e)}}}function Rl(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{sm(e)}catch(e){hd(t,t.return,e)}}function zl(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Ol),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Ol),t;default:throw Error(i(435,e.tag))}}function Bl(e,t){var n=zl(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=bd.bind(null,e,t);t.then(r,r)}})}function Vl(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r],o=e,s=t,c=s;a:for(;c!==null;){switch(c.tag){case 27:if(Ef(c.type)){Nl=c.stateNode,Pl=!1;break a}break;case 5:Nl=c.stateNode,Pl=!1;break a;case 3:case 4:Nl=c.stateNode.containerInfo,Pl=!0;break a}c=c.return}if(Nl===null)throw Error(i(160));Il(o,s,a),Nl=null,Pl=!1,o=a.alternate,o!==null&&(o.return=null),a.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Ul(t,e),t=t.sibling}var Hl=null;function Ul(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Vl(t,e),Wl(e),r&4&&(pl(3,e,e.return),fl(3,e),pl(5,e,e.return));break;case 1:Vl(t,e),Wl(e),r&512&&(El||n===null||_l(n,n.return)),r&64&&Tl&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var a=Hl;if(Vl(t,e),Wl(e),r&512&&(El||n===null||_l(n,n.return)),r&4){var o=n===null?null:n.memoizedState;if(r=e.memoizedState,n===null)if(r===null)if(e.stateNode===null){a:{r=e.type,n=e.memoizedProps,a=a.ownerDocument||a;b:switch(r){case`title`:o=a.getElementsByTagName(`title`)[0],(!o||o[Tt]||o[vt]||o.namespaceURI===`http://www.w3.org/2000/svg`||o.hasAttribute(`itemprop`))&&(o=a.createElement(r),a.head.insertBefore(o,a.querySelector(`head > title`))),lf(o,r,n),o[vt]=e,jt(o),r=o;break a;case`link`:var s=hp(`link`,`href`,a).get(r+(n.href||``));if(s){for(var c=0;c<s.length;c++)if(o=s[c],o.getAttribute(`href`)===(n.href==null||n.href===``?null:n.href)&&o.getAttribute(`rel`)===(n.rel==null?null:n.rel)&&o.getAttribute(`title`)===(n.title==null?null:n.title)&&o.getAttribute(`crossorigin`)===(n.crossOrigin==null?null:n.crossOrigin)){s.splice(c,1);break b}}o=a.createElement(r),lf(o,r,n),a.head.appendChild(o);break;case`meta`:if(s=hp(`meta`,`content`,a).get(r+(n.content||``))){for(c=0;c<s.length;c++)if(o=s[c],o.getAttribute(`content`)===(n.content==null?null:``+n.content)&&o.getAttribute(`name`)===(n.name==null?null:n.name)&&o.getAttribute(`property`)===(n.property==null?null:n.property)&&o.getAttribute(`http-equiv`)===(n.httpEquiv==null?null:n.httpEquiv)&&o.getAttribute(`charset`)===(n.charSet==null?null:n.charSet)){s.splice(c,1);break b}}o=a.createElement(r),lf(o,r,n),a.head.appendChild(o);break;default:throw Error(i(468,r))}o[vt]=e,jt(o),r=o}e.stateNode=r}else gp(a,e.type,e.stateNode);else e.stateNode=up(a,r,e.memoizedProps);else o===r?r===null&&e.stateNode!==null&&yl(e,e.memoizedProps,n.memoizedProps):(o===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):o.count--,r===null?gp(a,e.type,e.stateNode):up(a,r,e.memoizedProps))}break;case 27:Vl(t,e),Wl(e),r&512&&(El||n===null||_l(n,n.return)),n!==null&&r&4&&yl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Vl(t,e),Wl(e),r&512&&(El||n===null||_l(n,n.return)),e.flags&32){a=e.stateNode;try{k(a,``)}catch(t){hd(e,e.return,t)}}r&4&&e.stateNode!=null&&(a=e.memoizedProps,yl(e,a,n===null?a:n.memoizedProps)),r&1024&&(Dl=!0);break;case 6:if(Vl(t,e),Wl(e),r&4){if(e.stateNode===null)throw Error(i(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(t){hd(e,e.return,t)}}break;case 3:if(mp=null,a=Hl,Hl=Wf(t.containerInfo),Vl(t,e),Hl=a,Wl(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{sm(t.containerInfo)}catch(t){hd(e,e.return,t)}Dl&&(Dl=!1,Gl(e));break;case 4:r=Hl,Hl=Wf(e.stateNode.containerInfo),Vl(t,e),Wl(e),Hl=r;break;case 12:Vl(t,e),Wl(e);break;case 31:Vl(t,e),Wl(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Bl(e,r)));break;case 13:Vl(t,e),Wl(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(L=Le()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Bl(e,r)));break;case 22:a=e.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,u=Tl,d=El;if(Tl=u||a,El=d||l,Vl(t,e),El=d,Tl=u,Wl(e),r&8192)a:for(t=e.stateNode,t._visibility=a?t._visibility&-2:t._visibility|1,a&&(n===null||l||Tl||El||ql(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){l=n=t;try{if(o=l.stateNode,a)s=o.style,typeof s.setProperty==`function`?s.setProperty(`display`,`none`,`important`):s.display=`none`;else{c=l.stateNode;var f=l.memoizedProps.style,p=f!=null&&f.hasOwnProperty(`display`)?f.display:null;c.style.display=p==null||typeof p==`boolean`?``:(``+p).trim()}}catch(e){hd(l,l.return,e)}}}else if(t.tag===6){if(n===null){l=t;try{l.stateNode.nodeValue=a?``:l.memoizedProps}catch(e){hd(l,l.return,e)}}}else if(t.tag===18){if(n===null){l=t;try{var m=l.stateNode;a?Of(m,!0):Of(l.stateNode,!1)}catch(e){hd(l,l.return,e)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break a;for(;t.sibling===null;){if(t.return===null||t.return===e)break a;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,Bl(e,n))));break;case 19:Vl(t,e),Wl(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Bl(e,r)));break;case 30:break;case 21:break;default:Vl(t,e),Wl(e)}}function Wl(e){var t=e.flags;if(t&2){try{for(var n,r=e.return;r!==null;){if(bl(r)){n=r;break}r=r.return}if(n==null)throw Error(i(160));switch(n.tag){case 27:var a=n.stateNode,o=xl(e);Cl(e,o,a);break;case 5:var s=n.stateNode;n.flags&32&&(k(s,``),n.flags&=-33);var c=xl(e);Cl(e,c,s);break;case 3:case 4:var l=n.stateNode.containerInfo,u=xl(e);Sl(e,u,l);break;default:throw Error(i(161))}}catch(t){hd(e,e.return,t)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Gl(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Gl(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Kl(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)jl(e,t.alternate,t),t=t.sibling}function ql(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:pl(4,t,t.return),ql(t);break;case 1:_l(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount==`function`&&hl(t,t.return,n),ql(t);break;case 27:Vf(t.stateNode);case 26:case 5:_l(t,t.return),ql(t);break;case 22:t.memoizedState===null&&ql(t);break;case 30:ql(t);break;default:ql(t)}e=e.sibling}}function Jl(e,t,n){for(n&&=(t.subtreeFlags&8772)!=0,t=t.child;t!==null;){var r=t.alternate,i=e,a=t,o=a.flags;switch(a.tag){case 0:case 11:case 15:Jl(i,a,n),fl(4,a);break;case 1:if(Jl(i,a,n),r=a,i=r.stateNode,typeof i.componentDidMount==`function`)try{i.componentDidMount()}catch(e){hd(r,r.return,e)}if(r=a,i=r.updateQueue,i!==null){var s=r.stateNode;try{var c=i.shared.hiddenCallbacks;if(c!==null)for(i.shared.hiddenCallbacks=null,i=0;i<c.length;i++)go(c[i],s)}catch(e){hd(r,r.return,e)}}n&&o&64&&ml(a),gl(a,a.return);break;case 27:wl(a);case 26:case 5:Jl(i,a,n),n&&r===null&&o&4&&vl(a),gl(a,a.return);break;case 12:Jl(i,a,n);break;case 31:Jl(i,a,n),n&&o&4&&Ll(i,a);break;case 13:Jl(i,a,n),n&&o&4&&Rl(i,a);break;case 22:a.memoizedState===null&&Jl(i,a,n),gl(a,a.return);break;case 30:break;default:Jl(i,a,n)}t=t.sibling}}function Yl(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Oa(n))}function Xl(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Oa(e))}function Zl(e,t,n,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ql(e,t,n,r),t=t.sibling}function Ql(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Zl(e,t,n,r),i&2048&&fl(9,t);break;case 1:Zl(e,t,n,r);break;case 3:Zl(e,t,n,r),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Oa(e)));break;case 12:if(i&2048){Zl(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,o=a.id,s=a.onPostCommit;typeof s==`function`&&s(o,t.alternate===null?`mount`:`update`,e.passiveEffectDuration,-0)}catch(e){hd(t,t.return,e)}}else Zl(e,t,n,r);break;case 31:Zl(e,t,n,r);break;case 13:Zl(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,o=t.alternate,t.memoizedState===null?a._visibility&2?Zl(e,t,n,r):(a._visibility|=2,$l(e,t,n,r,(t.subtreeFlags&10256)!=0||!1)):a._visibility&2?Zl(e,t,n,r):eu(e,t),i&2048&&Yl(o,t);break;case 24:Zl(e,t,n,r),i&2048&&Xl(t.alternate,t);break;default:Zl(e,t,n,r)}}function $l(e,t,n,r,i){for(i&&=(t.subtreeFlags&10256)!=0||!1,t=t.child;t!==null;){var a=e,o=t,s=n,c=r,l=o.flags;switch(o.tag){case 0:case 11:case 15:$l(a,o,s,c,i),fl(8,o);break;case 23:break;case 22:var u=o.stateNode;o.memoizedState===null?(u._visibility|=2,$l(a,o,s,c,i)):u._visibility&2?$l(a,o,s,c,i):eu(a,o),i&&l&2048&&Yl(o.alternate,o);break;case 24:$l(a,o,s,c,i),i&&l&2048&&Xl(o.alternate,o);break;default:$l(a,o,s,c,i)}t=t.sibling}}function eu(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:eu(n,r),i&2048&&Yl(r.alternate,r);break;case 24:eu(n,r),i&2048&&Xl(r.alternate,r);break;default:eu(n,r)}t=t.sibling}}var tu=8192;function nu(e,t,n){if(e.subtreeFlags&tu)for(e=e.child;e!==null;)ru(e,t,n),e=e.sibling}function ru(e,t,n){switch(e.tag){case 26:nu(e,t,n),e.flags&tu&&e.memoizedState!==null&&yp(n,Hl,e.memoizedState,e.memoizedProps);break;case 5:nu(e,t,n);break;case 3:case 4:var r=Hl;Hl=Wf(e.stateNode.containerInfo),nu(e,t,n),Hl=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=tu,tu=16777216,nu(e,t,n),tu=r):nu(e,t,n));break;default:nu(e,t,n)}}function iu(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function au(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];kl=r,cu(r,e)}iu(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)ou(e),e=e.sibling}function ou(e){switch(e.tag){case 0:case 11:case 15:au(e),e.flags&2048&&pl(9,e,e.return);break;case 3:au(e);break;case 12:au(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,su(e)):au(e);break;default:au(e)}}function su(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];kl=r,cu(r,e)}iu(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:pl(8,t,t.return),su(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,su(t));break;default:su(t)}e=e.sibling}}function cu(e,t){for(;kl!==null;){var n=kl;switch(n.tag){case 0:case 11:case 15:pl(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:Oa(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,kl=r;else a:for(n=e;kl!==null;){r=kl;var i=r.sibling,a=r.return;if(Ml(r),r===n){kl=null;break a}if(i!==null){i.return=a,kl=i;break a}kl=a}}}var lu={getCacheForType:function(e){var t=ba(Ea),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return ba(Ea).controller.signal}},uu=typeof WeakMap==`function`?WeakMap:Map,du=0,fu=null,N=null,P=0,pu=0,mu=null,hu=!1,gu=!1,_u=!1,vu=0,yu=0,bu=0,xu=0,Su=0,Cu=0,wu=0,Tu=null,F=null,I=!1,L=0,Eu=0,Du=1/0,Ou=null,ku=null,Au=0,ju=null,Mu=null,R=0,Nu=0,Pu=null,Fu=null,Iu=0,Lu=null;function Ru(){return du&2&&P!==0?P&-P:w.T===null?ht():Fd()}function zu(){if(Cu===0)if(!(P&536870912)||j){var e=et;et<<=1,!(et&3932160)&&(et=262144),Cu=e}else Cu=536870912;return e=Co.current,e!==null&&(e.flags|=32),Cu}function Bu(e,t,n){(e===fu&&(pu===2||pu===9)||e.cancelPendingCommit!==null)&&(qu(e,0),Wu(e,P,Cu,!1)),ct(e,n),(!(du&2)||e!==fu)&&(e===fu&&(!(du&2)&&(xu|=n),yu===4&&Wu(e,P,Cu,!1)),Dd(e))}function Vu(e,t,n){if(du&6)throw Error(i(327));var r=!n&&(t&127)==0&&(t&e.expiredLanes)===0||it(e,t),a=r?ed(e,t):Qu(e,t,!0),o=r;do{if(a===0){gu&&!r&&Wu(e,t,0,!1);break}else{if(n=e.current.alternate,o&&!Uu(n)){a=Qu(e,t,!1),o=!1;continue}if(a===2){if(o=t,e.errorRecoveryDisabledLanes&o)var s=0;else s=e.pendingLanes&-536870913,s=s===0?s&536870912?536870912:0:s;if(s!==0){t=s;a:{var c=e;a=Tu;var l=c.current.memoizedState.isDehydrated;if(l&&(qu(c,s).flags|=256),s=Qu(c,s,!1),s!==2){if(_u&&!l){c.errorRecoveryDisabledLanes|=o,xu|=o,a=4;break a}o=F,F=a,o!==null&&(F===null?F=o:F.push.apply(F,o))}a=s}if(o=!1,a!==2)continue}}if(a===1){qu(e,0),Wu(e,t,0,!0);break}a:{switch(r=e,o=a,o){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:Wu(r,t,Cu,!hu);break a;case 2:F=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(a=L+300-Le(),10<a)){if(Wu(r,t,Cu,!hu),rt(r,0,!0)!==0)break a;R=t,r.timeoutHandle=xf(Hu.bind(null,r,n,F,Ou,I,t,Cu,xu,wu,hu,o,`Throttled`,-0,0),a);break a}Hu(r,n,F,Ou,I,t,Cu,xu,wu,hu,o,null,-0,0)}}break}while(1);Dd(e)}function Hu(e,t,n,r,i,a,o,s,c,l,u,d,f,p){if(e.timeoutHandle=-1,d=t.subtreeFlags,d&8192||(d&16785408)==16785408){d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ln},ru(t,a,d);var m=(a&62914560)===a?L-Le():(a&4194048)===a?Eu-Le():0;if(m=xp(d,m),m!==null){R=a,e.cancelPendingCommit=m(sd.bind(null,e,t,a,n,r,i,o,s,c,u,d,null,f,p)),Wu(e,a,o,!l);return}}sd(e,t,a,n,r,i,o,s,c)}function Uu(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Hr(a(),i))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Wu(e,t,n,r){t&=~Su,t&=~xu,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var a=31-Ye(i),o=1<<a;r[a]=-1,i&=~o}n!==0&&ut(e,n,t)}function Gu(){return du&6?!0:(Od(0,!1),!1)}function Ku(){if(N!==null){if(pu===0)var e=N.return;else e=N,fa=da=null,Xo(e),Za=null,Qa=0,e=N;for(;e!==null;)dl(e.alternate,e),e=e.return;N=null}}function qu(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Sf(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),R=0,Ku(),fu=e,N=n=ki(e.current,null),P=t,pu=0,mu=null,hu=!1,gu=it(e,t),_u=!1,wu=Cu=Su=xu=bu=yu=0,F=Tu=null,I=!1,t&8&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var i=31-Ye(r),a=1<<i;t|=e[i],r&=~a}return vu=t,yi(),n}function Ju(e,t){M=null,w.H=cc,t===Va||t===Ua?(t=Ya(),pu=3):t===Ha?(t=Ya(),pu=4):pu=t===Ec?8:typeof t==`object`&&t&&typeof t.then==`function`?6:1,mu=t,N===null&&(yu=1,bc(e,Li(t,e.current)))}function Yu(){var e=Co.current;return e===null?!0:(P&4194048)===P?wo===null:(P&62914560)===P||P&536870912?e===wo:!1}function Xu(){var e=w.H;return w.H=cc,e===null?cc:e}function z(){var e=w.A;return w.A=lu,e}function Zu(){yu=4,hu||(P&4194048)!==P&&Co.current!==null||(gu=!0),!(bu&134217727)&&!(xu&134217727)||fu===null||Wu(fu,P,Cu,!1)}function Qu(e,t,n){var r=du;du|=2;var i=Xu(),a=z();(fu!==e||P!==t)&&(Ou=null,qu(e,t)),t=!1;var o=yu;a:do try{if(pu!==0&&N!==null){var s=N,c=mu;switch(pu){case 8:Ku(),o=6;break a;case 3:case 2:case 9:case 6:Co.current===null&&(t=!0);var l=pu;if(pu=0,mu=null,id(e,s,c,l),n&&gu){o=0;break a}break;default:l=pu,pu=0,mu=null,id(e,s,c,l)}}$u(),o=yu;break}catch(t){Ju(e,t)}while(1);return t&&e.shellSuspendCounter++,fa=da=null,du=r,w.H=i,w.A=a,N===null&&(fu=null,P=0,yi()),o}function $u(){for(;N!==null;)nd(N)}function ed(e,t){var n=du;du|=2;var r=Xu(),a=z();fu!==e||P!==t?(Ou=null,Du=Le()+500,qu(e,t)):gu=it(e,t);a:do try{if(pu!==0&&N!==null){t=N;var o=mu;b:switch(pu){case 1:pu=0,mu=null,id(e,t,o,1);break;case 2:case 9:if(Ga(o)){pu=0,mu=null,rd(t);break}t=function(){pu!==2&&pu!==9||fu!==e||(pu=7),Dd(e)},o.then(t,t);break a;case 3:pu=7;break a;case 4:pu=5;break a;case 7:Ga(o)?(pu=0,mu=null,rd(t)):(pu=0,mu=null,id(e,t,o,7));break;case 5:var s=null;switch(N.tag){case 26:s=N.memoizedState;case 5:case 27:var c=N;if(s?vp(s):c.stateNode.complete){pu=0,mu=null;var l=c.sibling;if(l!==null)N=l;else{var u=c.return;u===null?N=null:(N=u,ad(u))}break b}}pu=0,mu=null,id(e,t,o,5);break;case 6:pu=0,mu=null,id(e,t,o,6);break;case 8:Ku(),yu=6;break a;default:throw Error(i(462))}}td();break}catch(t){Ju(e,t)}while(1);return fa=da=null,w.H=r,w.A=a,du=n,N===null?(fu=null,P=0,yi(),yu):0}function td(){for(;N!==null&&!Fe();)nd(N)}function nd(e){var t=nl(e.alternate,e,vu);e.memoizedProps=e.pendingProps,t===null?ad(e):N=t}function rd(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Bc(n,t,t.pendingProps,t.type,void 0,P);break;case 11:t=Bc(n,t,t.pendingProps,t.type.render,t.ref,P);break;case 5:Xo(t);default:dl(n,t),t=N=Ai(t,vu),t=nl(n,t,vu)}e.memoizedProps=e.pendingProps,t===null?ad(e):N=t}function id(e,t,n,r){fa=da=null,Xo(t),Za=null,Qa=0;var i=t.return;try{if(Tc(e,i,t,n,P)){yu=1,bc(e,Li(n,e.current)),N=null;return}}catch(t){if(i!==null)throw N=i,t;yu=1,bc(e,Li(n,e.current)),N=null;return}t.flags&32768?(j||r===1?e=!0:gu||P&536870912?e=!1:(hu=e=!0,(r===2||r===9||r===3||r===6)&&(r=Co.current,r!==null&&r.tag===13&&(r.flags|=16384))),od(t,e)):ad(t)}function ad(e){var t=e;do{if(t.flags&32768){od(t,hu);return}e=t.return;var n=ll(t.alternate,t,vu);if(n!==null){N=n;return}if(t=t.sibling,t!==null){N=t;return}N=t=e}while(t!==null);yu===0&&(yu=5)}function od(e,t){do{var n=ul(e.alternate,e);if(n!==null){n.flags&=32767,N=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){N=e;return}N=e=n}while(e!==null);yu=6,N=null}function sd(e,t,n,r,a,o,s,c,l){e.cancelPendingCommit=null;do fd();while(Au!==0);if(du&6)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(o=t.lanes|t.childLanes,o|=vi,lt(e,n,o,s,c,l),e===fu&&(N=fu=null,P=0),Mu=t,ju=e,R=n,Nu=o,Pu=a,Fu=r,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,xd(Ve,function(){return pd(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!=0,t.subtreeFlags&13878||r){r=w.T,w.T=null,a=T.p,T.p=2,s=du,du|=4;try{Al(e,t,n)}finally{du=s,T.p=a,w.T=r}}Au=1,cd(),ld(),ud()}}function cd(){if(Au===1){Au=0;var e=ju,t=Mu,n=(t.flags&13878)!=0;if(t.subtreeFlags&13878||n){n=w.T,w.T=null;var r=T.p;T.p=2;var i=du;du|=4;try{Ul(t,e);var a=mf,o=qr(e.containerInfo),s=a.focusedElem,c=a.selectionRange;if(o!==s&&s&&s.ownerDocument&&Kr(s.ownerDocument.documentElement,s)){if(c!==null&&Jr(s)){var l=c.start,u=c.end;if(u===void 0&&(u=l),`selectionStart`in s)s.selectionStart=l,s.selectionEnd=Math.min(u,s.value.length);else{var d=s.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var p=f.getSelection(),m=s.textContent.length,h=Math.min(c.start,m),g=c.end===void 0?h:Math.min(c.end,m);!p.extend&&h>g&&(o=g,g=h,h=o);var _=Gr(s,h),v=Gr(s,g);if(_&&v&&(p.rangeCount!==1||p.anchorNode!==_.node||p.anchorOffset!==_.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var y=d.createRange();y.setStart(_.node,_.offset),p.removeAllRanges(),h>g?(p.addRange(y),p.extend(v.node,v.offset)):(y.setEnd(v.node,v.offset),p.addRange(y))}}}}for(d=[],p=s;p=p.parentNode;)p.nodeType===1&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof s.focus==`function`&&s.focus(),s=0;s<d.length;s++){var b=d[s];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}Fp=!!pf,mf=pf=null}finally{du=i,T.p=r,w.T=n}}e.current=t,Au=2}}function ld(){if(Au===2){Au=0;var e=ju,t=Mu,n=(t.flags&8772)!=0;if(t.subtreeFlags&8772||n){n=w.T,w.T=null;var r=T.p;T.p=2;var i=du;du|=4;try{jl(e,t.alternate,t)}finally{du=i,T.p=r,w.T=n}}Au=3}}function ud(){if(Au===4||Au===3){Au=0,Ie();var e=ju,t=Mu,n=R,r=Fu;t.subtreeFlags&10256||t.flags&10256?Au=5:(Au=0,Mu=ju=null,dd(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(ku=null),mt(n),t=t.stateNode,qe&&typeof qe.onCommitFiberRoot==`function`)try{qe.onCommitFiberRoot(Ke,t,void 0,(t.current.flags&128)==128)}catch{}if(r!==null){t=w.T,i=T.p,T.p=2,w.T=null;try{for(var a=e.onRecoverableError,o=0;o<r.length;o++){var s=r[o];a(s.value,{componentStack:s.stack})}}finally{w.T=t,T.p=i}}R&3&&fd(),Dd(e),i=e.pendingLanes,n&261930&&i&42?e===Lu?Iu++:(Iu=0,Lu=e):Iu=0,Od(0,!1)}}function dd(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Oa(t)))}function fd(){return cd(),ld(),ud(),pd()}function pd(){if(Au!==5)return!1;var e=ju,t=Nu;Nu=0;var n=mt(R),r=w.T,a=T.p;try{T.p=32>n?32:n,w.T=null,n=Pu,Pu=null;var o=ju,s=R;if(Au=0,Mu=ju=null,R=0,du&6)throw Error(i(331));var c=du;if(du|=4,ou(o.current),Ql(o,o.current,s,n),du=c,Od(0,!1),qe&&typeof qe.onPostCommitFiberRoot==`function`)try{qe.onPostCommitFiberRoot(Ke,o)}catch{}return!0}finally{T.p=a,w.T=r,dd(e,t)}}function md(e,t,n){t=Li(n,t),t=Sc(e.stateNode,t,2),e=lo(e,t,2),e!==null&&(ct(e,2),Dd(e))}function hd(e,t,n){if(e.tag===3)md(e,e,n);else for(;t!==null;){if(t.tag===3){md(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError==`function`||typeof r.componentDidCatch==`function`&&(ku===null||!ku.has(r))){e=Li(n,e),n=Cc(2),r=lo(t,n,2),r!==null&&(wc(n,r,t,e),ct(r,2),Dd(r));break}}t=t.return}}function gd(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new uu;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(_u=!0,i.add(n),e=_d.bind(null,e,t,n),t.then(e,e))}function _d(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,fu===e&&(P&n)===n&&(yu===4||yu===3&&(P&62914560)===P&&300>Le()-L?!(du&2)&&qu(e,0):Su|=n,wu===P&&(wu=0)),Dd(e)}function vd(e,t){t===0&&(t=ot()),e=Si(e,t),e!==null&&(ct(e,t),Dd(e))}function yd(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),vd(e,n)}function bd(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(i(314))}r!==null&&r.delete(t),vd(e,n)}function xd(e,t){return Ne(e,t)}var Sd=null,Cd=null,wd=!1,B=!1,Td=!1,Ed=0;function Dd(e){e!==Cd&&e.next===null&&(Cd===null?Sd=Cd=e:Cd=Cd.next=e),B=!0,wd||(wd=!0,Pd())}function Od(e,t){if(!Td&&B){Td=!0;do for(var n=!1,r=Sd;r!==null;){if(!t)if(e!==0){var i=r.pendingLanes;if(i===0)var a=0;else{var o=r.suspendedLanes,s=r.pingedLanes;a=(1<<31-Ye(42|e)+1)-1,a&=i&~(o&~s),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(n=!0,Nd(r,a))}else a=P,a=rt(r,r===fu?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(a&3)||it(r,a)||(n=!0,Nd(r,a));r=r.next}while(n);Td=!1}}function kd(){Ad()}function Ad(){B=wd=!1;var e=0;Ed!==0&&bf()&&(e=Ed);for(var t=Le(),n=null,r=Sd;r!==null;){var i=r.next,a=jd(r,t);a===0?(r.next=null,n===null?Sd=i:n.next=i,i===null&&(Cd=n)):(n=r,(e!==0||a&3)&&(B=!0)),r=i}Au!==0&&Au!==5||Od(e,!1),Ed!==0&&(Ed=0)}function jd(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes&-62914561;0<a;){var o=31-Ye(a),s=1<<o,c=i[o];c===-1?((s&n)===0||(s&r)!==0)&&(i[o]=at(s,t)):c<=t&&(e.expiredLanes|=s),a&=~s}if(t=fu,n=P,n=rt(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,n===0||e===t&&(pu===2||pu===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&Pe(r),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||it(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(r!==null&&Pe(r),mt(n)){case 2:case 8:n=Be;break;case 32:n=Ve;break;case 268435456:n=Ue;break;default:n=Ve}return r=Md.bind(null,e),n=Ne(n,r),e.callbackPriority=t,e.callbackNode=n,t}return r!==null&&r!==null&&Pe(r),e.callbackPriority=2,e.callbackNode=null,2}function Md(e,t){if(Au!==0&&Au!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(fd()&&e.callbackNode!==n)return null;var r=P;return r=rt(e,e===fu?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(Vu(e,r,t),jd(e,Le()),e.callbackNode!=null&&e.callbackNode===n?Md.bind(null,e):null)}function Nd(e,t){if(fd())return null;Vu(e,t,!0)}function Pd(){wf(function(){du&6?Ne(ze,kd):Ad()})}function Fd(){if(Ed===0){var e=ja;e===0&&(e=$e,$e<<=1,!($e&261888)&&($e=256)),Ed=e}return Ed}function Id(e){return e==null||typeof e==`symbol`||typeof e==`boolean`?null:typeof e==`function`?e:cn(``+e)}function Ld(e,t){var n=t.ownerDocument.createElement(`input`);return n.name=t.name,n.value=t.value,e.id&&n.setAttribute(`form`,e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Rd(e,t,n,r,i){if(t===`submit`&&n&&n.stateNode===i){var a=Id((i[yt]||null).action),o=r.submitter;o&&(t=(t=o[yt]||null)?Id(t.formAction):o.getAttribute(`formAction`),t!==null&&(a=t,o=null));var s=new An(`action`,`action`,null,r,i);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(Ed!==0){var e=o?Ld(i,o):new FormData(i);Js(n,{pending:!0,data:e,method:i.method,action:a},null,e)}}else typeof a==`function`&&(s.preventDefault(),e=o?Ld(i,o):new FormData(i),Js(n,{pending:!0,data:e,method:i.method,action:a},a,e))},currentTarget:i}]})}}for(var zd=0;zd<pi.length;zd++){var Bd=pi[zd],Vd=Bd.toLowerCase(),Hd=Bd[0].toUpperCase()+Bd.slice(1);mi(Vd,`on`+Hd)}mi(ai,`onAnimationEnd`),mi(oi,`onAnimationIteration`),mi(si,`onAnimationStart`),mi(`dblclick`,`onDoubleClick`),mi(`focusin`,`onFocus`),mi(`focusout`,`onBlur`),mi(ci,`onTransitionRun`),mi(li,`onTransitionStart`),mi(ui,`onTransitionCancel`),mi(di,`onTransitionEnd`),Ft(`onMouseEnter`,[`mouseout`,`mouseover`]),Ft(`onMouseLeave`,[`mouseout`,`mouseover`]),Ft(`onPointerEnter`,[`pointerout`,`pointerover`]),Ft(`onPointerLeave`,[`pointerout`,`pointerover`]),Pt(`onChange`,`change click focusin focusout input keydown keyup selectionchange`.split(` `)),Pt(`onSelect`,`focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange`.split(` `)),Pt(`onBeforeInput`,[`compositionend`,`keypress`,`textInput`,`paste`]),Pt(`onCompositionEnd`,`compositionend focusout keydown keypress keyup mousedown`.split(` `)),Pt(`onCompositionStart`,`compositionstart focusout keydown keypress keyup mousedown`.split(` `)),Pt(`onCompositionUpdate`,`compositionupdate focusout keydown keypress keyup mousedown`.split(` `));var Ud=`abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting`.split(` `),Wd=new Set(`beforetoggle cancel close invalid load scroll scrollend toggle`.split(` `).concat(Ud));function Gd(e,t){t=(t&4)!=0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;a:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==a&&i.isPropagationStopped())break a;a=s,i.currentTarget=l;try{a(i)}catch(e){hi(e)}i.currentTarget=null,a=c}else for(o=0;o<r.length;o++){if(s=r[o],c=s.instance,l=s.currentTarget,s=s.listener,c!==a&&i.isPropagationStopped())break a;a=s,i.currentTarget=l;try{a(i)}catch(e){hi(e)}i.currentTarget=null,a=c}}}}function V(e,t){var n=t[xt];n===void 0&&(n=t[xt]=new Set);var r=e+`__bubble`;n.has(r)||(Yd(t,e,2,!1),n.add(r))}function Kd(e,t,n){var r=0;t&&(r|=4),Yd(n,e,r,t)}var qd=`_reactListening`+Math.random().toString(36).slice(2);function Jd(e){if(!e[qd]){e[qd]=!0,Mt.forEach(function(t){t!==`selectionchange`&&(Wd.has(t)||Kd(t,!1,e),Kd(t,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[qd]||(t[qd]=!0,Kd(`selectionchange`,!1,t))}}function Yd(e,t,n,r){switch(Hp(t)){case 2:var i=Ip;break;case 8:i=Lp;break;default:i=Rp}n=i.bind(null,t,n,e),i=void 0,!yn||t!==`touchstart`&&t!==`touchmove`&&t!==`wheel`||(i=!0),r?i===void 0?e.addEventListener(t,n,!0):e.addEventListener(t,n,{capture:!0,passive:i}):i===void 0?e.addEventListener(t,n,!1):e.addEventListener(t,n,{passive:i})}function Xd(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)a:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var c=r.stateNode.containerInfo;if(c===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&s.stateNode.containerInfo===i)return;s=s.return}for(;c!==null;){if(s=Dt(c),s===null)return;if(l=s.tag,l===5||l===6||l===26||l===27){r=a=s;continue a}c=c.parentNode}}r=r.return}gn(function(){var r=a,i=dn(n),s=[];a:{var c=fi.get(e);if(c!==void 0){var l=An,u=e;switch(e){case`keypress`:if(Tn(n)===0)break a;case`keydown`:case`keyup`:l=er;break;case`focusin`:u=`focus`,l=Vn;break;case`focusout`:u=`blur`,l=Vn;break;case`beforeblur`:case`afterblur`:l=Vn;break;case`click`:if(n.button===2)break a;case`auxclick`:case`dblclick`:case`mousedown`:case`mousemove`:case`mouseup`:case`mouseout`:case`mouseover`:case`contextmenu`:l=Ln;break;case`drag`:case`dragend`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`dragstart`:case`drop`:l=zn;break;case`touchcancel`:case`touchend`:case`touchmove`:case`touchstart`:l=ir;break;case ai:case oi:case si:l=Un;break;case di:l=or;break;case`scroll`:case`scrollend`:l=Mn;break;case`wheel`:l=cr;break;case`copy`:case`cut`:case`paste`:l=Gn;break;case`gotpointercapture`:case`lostpointercapture`:case`pointercancel`:case`pointerdown`:case`pointermove`:case`pointerout`:case`pointerover`:case`pointerup`:l=nr;break;case`toggle`:case`beforetoggle`:l=ur}var d=(t&4)!=0,f=!d&&(e===`scroll`||e===`scrollend`),p=d?c===null?null:c+`Capture`:c;d=[];for(var m=r,h;m!==null;){var g=m;if(h=g.stateNode,g=g.tag,g!==5&&g!==26&&g!==27||h===null||p===null||(g=_n(m,p),g!=null&&d.push(Zd(m,g,h))),f)break;m=m.return}0<d.length&&(c=new l(c,u,null,n,i),s.push({event:c,listeners:d}))}}if(!(t&7)){a:{if(c=e===`mouseover`||e===`pointerover`,l=e===`mouseout`||e===`pointerout`,c&&n!==un&&(u=n.relatedTarget||n.fromElement)&&(Dt(u)||u[bt]))break a;if((l||c)&&(c=i.window===i?i:(c=i.ownerDocument)?c.defaultView||c.parentWindow:window,l?(u=n.relatedTarget||n.toElement,l=r,u=u?Dt(u):null,u!==null&&(f=o(u),d=u.tag,u!==f||d!==5&&d!==27&&d!==6)&&(u=null)):(l=null,u=r),l!==u)){if(d=Ln,g=`onMouseLeave`,p=`onMouseEnter`,m=`mouse`,(e===`pointerout`||e===`pointerover`)&&(d=nr,g=`onPointerLeave`,p=`onPointerEnter`,m=`pointer`),f=l==null?c:kt(l),h=u==null?c:kt(u),c=new d(g,m+`leave`,l,n,i),c.target=f,c.relatedTarget=h,g=null,Dt(i)===r&&(d=new d(p,m+`enter`,u,n,i),d.target=h,d.relatedTarget=f,g=d),f=g,l&&u)b:{for(d=$d,p=l,m=u,h=0,g=p;g;g=d(g))h++;g=0;for(var _=m;_;_=d(_))g++;for(;0<h-g;)p=d(p),h--;for(;0<g-h;)m=d(m),g--;for(;h--;){if(p===m||m!==null&&p===m.alternate){d=p;break b}p=d(p),m=d(m)}d=null}else d=null;l!==null&&ef(s,c,l,d,!1),u!==null&&f!==null&&ef(s,f,u,d,!0)}}a:{if(c=r?kt(r):window,l=c.nodeName&&c.nodeName.toLowerCase(),l===`select`||l===`input`&&c.type===`file`)var v=Ar;else if(wr(c))if(jr)v=Br;else{v=Rr;var y=Lr}else l=c.nodeName,!l||l.toLowerCase()!==`input`||c.type!==`checkbox`&&c.type!==`radio`?r&&an(r.elementType)&&(v=Ar):v=zr;if(v&&=v(e,r)){Tr(s,v,n,i);break a}y&&y(e,c,r),e===`focusout`&&r&&c.type===`number`&&r.memoizedProps.value!=null&&Zt(c,`number`,c.value)}switch(y=r?kt(r):window,e){case`focusin`:(wr(y)||y.contentEditable===`true`)&&(Xr=y,Zr=r,A=null);break;case`focusout`:A=Zr=Xr=null;break;case`mousedown`:Qr=!0;break;case`contextmenu`:case`mouseup`:case`dragend`:Qr=!1,$r(s,n,i);break;case`selectionchange`:if(Yr)break;case`keydown`:case`keyup`:$r(s,n,i)}var b;if(fr)b:{switch(e){case`compositionstart`:var x=`onCompositionStart`;break b;case`compositionend`:x=`onCompositionEnd`;break b;case`compositionupdate`:x=`onCompositionUpdate`;break b}x=void 0}else br?vr(e,n)&&(x=`onCompositionEnd`):e===`keydown`&&n.keyCode===229&&(x=`onCompositionStart`);x&&(hr&&n.locale!==`ko`&&(br||x!==`onCompositionStart`?x===`onCompositionEnd`&&br&&(b=wn()):(xn=i,Sn=`value`in xn?xn.value:xn.textContent,br=!0)),y=Qd(r,x),0<y.length&&(x=new qn(x,e,null,n,i),s.push({event:x,listeners:y}),b?x.data=b:(b=yr(n),b!==null&&(x.data=b)))),(b=mr?xr(e,n):Sr(e,n))&&(x=Qd(r,`onBeforeInput`),0<x.length&&(y=new qn(`onBeforeInput`,`beforeinput`,null,n,i),s.push({event:y,listeners:x}),y.data=b)),Rd(s,e,r,n,i)}Gd(s,t)})}function Zd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Qd(e,t){for(var n=t+`Capture`,r=[];e!==null;){var i=e,a=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||a===null||(i=_n(e,n),i!=null&&r.unshift(Zd(e,i,a)),i=_n(e,t),i!=null&&r.push(Zd(e,i,a))),e.tag===3)return r;e=e.return}return[]}function $d(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function ef(e,t,n,r,i){for(var a=t._reactName,o=[];n!==null&&n!==r;){var s=n,c=s.alternate,l=s.stateNode;if(s=s.tag,c!==null&&c===r)break;s!==5&&s!==26&&s!==27||l===null||(c=l,i?(l=_n(n,a),l!=null&&o.unshift(Zd(n,l,c))):i||(l=_n(n,a),l!=null&&o.push(Zd(n,l,c)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var tf=/\r\n?/g,nf=/\u0000|\uFFFD/g;function rf(e){return(typeof e==`string`?e:``+e).replace(tf,`
`).replace(nf,``)}function af(e,t){return t=rf(t),rf(e)===t}function sf(e,t,n,r,a,o){switch(n){case`children`:typeof r==`string`?t===`body`||t===`textarea`&&r===``||k(e,r):(typeof r==`number`||typeof r==`bigint`)&&t!==`body`&&k(e,``+r);break;case`className`:Vt(e,`class`,r);break;case`tabIndex`:Vt(e,`tabindex`,r);break;case`dir`:case`role`:case`viewBox`:case`width`:case`height`:Vt(e,n,r);break;case`style`:rn(e,r,o);break;case`data`:if(t!==`object`){Vt(e,`data`,r);break}case`src`:case`href`:if(r===``&&(t!==`a`||n!==`href`)){e.removeAttribute(n);break}if(r==null||typeof r==`function`||typeof r==`symbol`||typeof r==`boolean`){e.removeAttribute(n);break}r=cn(``+r),e.setAttribute(n,r);break;case`action`:case`formAction`:if(typeof r==`function`){e.setAttribute(n,`javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')`);break}else typeof o==`function`&&(n===`formAction`?(t!==`input`&&sf(e,t,`name`,a.name,a,null),sf(e,t,`formEncType`,a.formEncType,a,null),sf(e,t,`formMethod`,a.formMethod,a,null),sf(e,t,`formTarget`,a.formTarget,a,null)):(sf(e,t,`encType`,a.encType,a,null),sf(e,t,`method`,a.method,a,null),sf(e,t,`target`,a.target,a,null)));if(r==null||typeof r==`symbol`||typeof r==`boolean`){e.removeAttribute(n);break}r=cn(``+r),e.setAttribute(n,r);break;case`onClick`:r!=null&&(e.onclick=ln);break;case`onScroll`:r!=null&&V(`scroll`,e);break;case`onScrollEnd`:r!=null&&V(`scrollend`,e);break;case`dangerouslySetInnerHTML`:if(r!=null){if(typeof r!=`object`||!(`__html`in r))throw Error(i(61));if(n=r.__html,n!=null){if(a.children!=null)throw Error(i(60));e.innerHTML=n}}break;case`multiple`:e.multiple=r&&typeof r!=`function`&&typeof r!=`symbol`;break;case`muted`:e.muted=r&&typeof r!=`function`&&typeof r!=`symbol`;break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`defaultValue`:case`defaultChecked`:case`innerHTML`:case`ref`:break;case`autoFocus`:break;case`xlinkHref`:if(r==null||typeof r==`function`||typeof r==`boolean`||typeof r==`symbol`){e.removeAttribute(`xlink:href`);break}n=cn(``+r),e.setAttributeNS(`http://www.w3.org/1999/xlink`,`xlink:href`,n);break;case`contentEditable`:case`spellCheck`:case`draggable`:case`value`:case`autoReverse`:case`externalResourcesRequired`:case`focusable`:case`preserveAlpha`:r!=null&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,``+r):e.removeAttribute(n);break;case`inert`:case`allowFullScreen`:case`async`:case`autoPlay`:case`controls`:case`default`:case`defer`:case`disabled`:case`disablePictureInPicture`:case`disableRemotePlayback`:case`formNoValidate`:case`hidden`:case`loop`:case`noModule`:case`noValidate`:case`open`:case`playsInline`:case`readOnly`:case`required`:case`reversed`:case`scoped`:case`seamless`:case`itemScope`:r&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,``):e.removeAttribute(n);break;case`capture`:case`download`:!0===r?e.setAttribute(n,``):!1!==r&&r!=null&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,r):e.removeAttribute(n);break;case`cols`:case`rows`:case`size`:case`span`:r!=null&&typeof r!=`function`&&typeof r!=`symbol`&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case`rowSpan`:case`start`:r==null||typeof r==`function`||typeof r==`symbol`||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case`popover`:V(`beforetoggle`,e),V(`toggle`,e),Bt(e,`popover`,r);break;case`xlinkActuate`:Ht(e,`http://www.w3.org/1999/xlink`,`xlink:actuate`,r);break;case`xlinkArcrole`:Ht(e,`http://www.w3.org/1999/xlink`,`xlink:arcrole`,r);break;case`xlinkRole`:Ht(e,`http://www.w3.org/1999/xlink`,`xlink:role`,r);break;case`xlinkShow`:Ht(e,`http://www.w3.org/1999/xlink`,`xlink:show`,r);break;case`xlinkTitle`:Ht(e,`http://www.w3.org/1999/xlink`,`xlink:title`,r);break;case`xlinkType`:Ht(e,`http://www.w3.org/1999/xlink`,`xlink:type`,r);break;case`xmlBase`:Ht(e,`http://www.w3.org/XML/1998/namespace`,`xml:base`,r);break;case`xmlLang`:Ht(e,`http://www.w3.org/XML/1998/namespace`,`xml:lang`,r);break;case`xmlSpace`:Ht(e,`http://www.w3.org/XML/1998/namespace`,`xml:space`,r);break;case`is`:Bt(e,`is`,r);break;case`innerText`:case`textContent`:break;default:(!(2<n.length)||n[0]!==`o`&&n[0]!==`O`||n[1]!==`n`&&n[1]!==`N`)&&(n=on.get(n)||n,Bt(e,n,r))}}function cf(e,t,n,r,a,o){switch(n){case`style`:rn(e,r,o);break;case`dangerouslySetInnerHTML`:if(r!=null){if(typeof r!=`object`||!(`__html`in r))throw Error(i(61));if(n=r.__html,n!=null){if(a.children!=null)throw Error(i(60));e.innerHTML=n}}break;case`children`:typeof r==`string`?k(e,r):(typeof r==`number`||typeof r==`bigint`)&&k(e,``+r);break;case`onScroll`:r!=null&&V(`scroll`,e);break;case`onScrollEnd`:r!=null&&V(`scrollend`,e);break;case`onClick`:r!=null&&(e.onclick=ln);break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`innerHTML`:case`ref`:break;case`innerText`:case`textContent`:break;default:if(!Nt.hasOwnProperty(n))a:{if(n[0]===`o`&&n[1]===`n`&&(a=n.endsWith(`Capture`),t=n.slice(2,a?n.length-7:void 0),o=e[yt]||null,o=o==null?null:o[n],typeof o==`function`&&e.removeEventListener(t,o,a),typeof r==`function`)){typeof o!=`function`&&o!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,a);break a}n in e?e[n]=r:!0===r?e.setAttribute(n,``):Bt(e,n,r)}}}function lf(e,t,n){switch(t){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`img`:V(`error`,e),V(`load`,e);var r=!1,a=!1,o;for(o in n)if(n.hasOwnProperty(o)){var s=n[o];if(s!=null)switch(o){case`src`:r=!0;break;case`srcSet`:a=!0;break;case`children`:case`dangerouslySetInnerHTML`:throw Error(i(137,t));default:sf(e,t,o,s,n,null)}}a&&sf(e,t,`srcSet`,n.srcSet,n,null),r&&sf(e,t,`src`,n.src,n,null);return;case`input`:V(`invalid`,e);var c=o=s=a=null,l=null,u=null;for(r in n)if(n.hasOwnProperty(r)){var d=n[r];if(d!=null)switch(r){case`name`:a=d;break;case`type`:s=d;break;case`checked`:l=d;break;case`defaultChecked`:u=d;break;case`value`:o=d;break;case`defaultValue`:c=d;break;case`children`:case`dangerouslySetInnerHTML`:if(d!=null)throw Error(i(137,t));break;default:sf(e,t,r,d,n,null)}}Xt(e,o,c,l,u,s,a,!1);return;case`select`:for(a in V(`invalid`,e),r=s=o=null,n)if(n.hasOwnProperty(a)&&(c=n[a],c!=null))switch(a){case`value`:o=c;break;case`defaultValue`:s=c;break;case`multiple`:r=c;default:sf(e,t,a,c,n,null)}t=o,n=s,e.multiple=!!r,t==null?n!=null&&Qt(e,!!r,n,!0):Qt(e,!!r,t,!1);return;case`textarea`:for(s in V(`invalid`,e),o=a=r=null,n)if(n.hasOwnProperty(s)&&(c=n[s],c!=null))switch(s){case`value`:r=c;break;case`defaultValue`:a=c;break;case`children`:o=c;break;case`dangerouslySetInnerHTML`:if(c!=null)throw Error(i(91));break;default:sf(e,t,s,c,n,null)}en(e,r,a,o);return;case`option`:for(l in n)if(n.hasOwnProperty(l)&&(r=n[l],r!=null))switch(l){case`selected`:e.selected=r&&typeof r!=`function`&&typeof r!=`symbol`;break;default:sf(e,t,l,r,n,null)}return;case`dialog`:V(`beforetoggle`,e),V(`toggle`,e),V(`cancel`,e),V(`close`,e);break;case`iframe`:case`object`:V(`load`,e);break;case`video`:case`audio`:for(r=0;r<Ud.length;r++)V(Ud[r],e);break;case`image`:V(`error`,e),V(`load`,e);break;case`details`:V(`toggle`,e);break;case`embed`:case`source`:case`link`:V(`error`,e),V(`load`,e);case`area`:case`base`:case`br`:case`col`:case`hr`:case`keygen`:case`meta`:case`param`:case`track`:case`wbr`:case`menuitem`:for(u in n)if(n.hasOwnProperty(u)&&(r=n[u],r!=null))switch(u){case`children`:case`dangerouslySetInnerHTML`:throw Error(i(137,t));default:sf(e,t,u,r,n,null)}return;default:if(an(t)){for(d in n)n.hasOwnProperty(d)&&(r=n[d],r!==void 0&&cf(e,t,d,r,n,void 0));return}}for(c in n)n.hasOwnProperty(c)&&(r=n[c],r!=null&&sf(e,t,c,r,n,null))}function uf(e,t,n,r){switch(t){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`input`:var a=null,o=null,s=null,c=null,l=null,u=null,d=null;for(m in n){var f=n[m];if(n.hasOwnProperty(m)&&f!=null)switch(m){case`checked`:break;case`value`:break;case`defaultValue`:l=f;default:r.hasOwnProperty(m)||sf(e,t,m,null,r,f)}}for(var p in r){var m=r[p];if(f=n[p],r.hasOwnProperty(p)&&(m!=null||f!=null))switch(p){case`type`:o=m;break;case`name`:a=m;break;case`checked`:u=m;break;case`defaultChecked`:d=m;break;case`value`:s=m;break;case`defaultValue`:c=m;break;case`children`:case`dangerouslySetInnerHTML`:if(m!=null)throw Error(i(137,t));break;default:m!==f&&sf(e,t,p,m,r,f)}}Yt(e,s,c,l,u,d,o,a);return;case`select`:for(o in m=s=c=p=null,n)if(l=n[o],n.hasOwnProperty(o)&&l!=null)switch(o){case`value`:break;case`multiple`:m=l;default:r.hasOwnProperty(o)||sf(e,t,o,null,r,l)}for(a in r)if(o=r[a],l=n[a],r.hasOwnProperty(a)&&(o!=null||l!=null))switch(a){case`value`:p=o;break;case`defaultValue`:c=o;break;case`multiple`:s=o;default:o!==l&&sf(e,t,a,o,r,l)}t=c,n=s,r=m,p==null?!!r!=!!n&&(t==null?Qt(e,!!n,n?[]:``,!1):Qt(e,!!n,t,!0)):Qt(e,!!n,p,!1);return;case`textarea`:for(c in m=p=null,n)if(a=n[c],n.hasOwnProperty(c)&&a!=null&&!r.hasOwnProperty(c))switch(c){case`value`:break;case`children`:break;default:sf(e,t,c,null,r,a)}for(s in r)if(a=r[s],o=n[s],r.hasOwnProperty(s)&&(a!=null||o!=null))switch(s){case`value`:p=a;break;case`defaultValue`:m=a;break;case`children`:break;case`dangerouslySetInnerHTML`:if(a!=null)throw Error(i(91));break;default:a!==o&&sf(e,t,s,a,r,o)}$t(e,p,m);return;case`option`:for(var h in n)if(p=n[h],n.hasOwnProperty(h)&&p!=null&&!r.hasOwnProperty(h))switch(h){case`selected`:e.selected=!1;break;default:sf(e,t,h,null,r,p)}for(l in r)if(p=r[l],m=n[l],r.hasOwnProperty(l)&&p!==m&&(p!=null||m!=null))switch(l){case`selected`:e.selected=p&&typeof p!=`function`&&typeof p!=`symbol`;break;default:sf(e,t,l,p,r,m)}return;case`img`:case`link`:case`area`:case`base`:case`br`:case`col`:case`embed`:case`hr`:case`keygen`:case`meta`:case`param`:case`source`:case`track`:case`wbr`:case`menuitem`:for(var g in n)p=n[g],n.hasOwnProperty(g)&&p!=null&&!r.hasOwnProperty(g)&&sf(e,t,g,null,r,p);for(u in r)if(p=r[u],m=n[u],r.hasOwnProperty(u)&&p!==m&&(p!=null||m!=null))switch(u){case`children`:case`dangerouslySetInnerHTML`:if(p!=null)throw Error(i(137,t));break;default:sf(e,t,u,p,r,m)}return;default:if(an(t)){for(var _ in n)p=n[_],n.hasOwnProperty(_)&&p!==void 0&&!r.hasOwnProperty(_)&&cf(e,t,_,void 0,r,p);for(d in r)p=r[d],m=n[d],!r.hasOwnProperty(d)||p===m||p===void 0&&m===void 0||cf(e,t,d,p,r,m);return}}for(var v in n)p=n[v],n.hasOwnProperty(v)&&p!=null&&!r.hasOwnProperty(v)&&sf(e,t,v,null,r,p);for(f in r)p=r[f],m=n[f],!r.hasOwnProperty(f)||p===m||p==null&&m==null||sf(e,t,f,p,r,m)}function df(e){switch(e){case`css`:case`script`:case`font`:case`img`:case`image`:case`input`:case`link`:return!0;default:return!1}}function ff(){if(typeof performance.getEntriesByType==`function`){for(var e=0,t=0,n=performance.getEntriesByType(`resource`),r=0;r<n.length;r++){var i=n[r],a=i.transferSize,o=i.initiatorType,s=i.duration;if(a&&s&&df(o)){for(o=0,s=i.responseEnd,r+=1;r<n.length;r++){var c=n[r],l=c.startTime;if(l>s)break;var u=c.transferSize,d=c.initiatorType;u&&df(d)&&(c=c.responseEnd,o+=u*(c<s?1:(s-l)/(c-l)))}if(--r,t+=8*(a+o)/(i.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e==`number`)?e:5}var pf=null,mf=null;function hf(e){return e.nodeType===9?e:e.ownerDocument}function gf(e){switch(e){case`http://www.w3.org/2000/svg`:return 1;case`http://www.w3.org/1998/Math/MathML`:return 2;default:return 0}}function _f(e,t){if(e===0)switch(t){case`svg`:return 1;case`math`:return 2;default:return 0}return e===1&&t===`foreignObject`?0:e}function vf(e,t){return e===`textarea`||e===`noscript`||typeof t.children==`string`||typeof t.children==`number`||typeof t.children==`bigint`||typeof t.dangerouslySetInnerHTML==`object`&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var yf=null;function bf(){var e=window.event;return e&&e.type===`popstate`?e===yf?!1:(yf=e,!0):(yf=null,!1)}var xf=typeof setTimeout==`function`?setTimeout:void 0,Sf=typeof clearTimeout==`function`?clearTimeout:void 0,Cf=typeof Promise==`function`?Promise:void 0,wf=typeof queueMicrotask==`function`?queueMicrotask:Cf===void 0?xf:function(e){return Cf.resolve(null).then(e).catch(Tf)};function Tf(e){setTimeout(function(){throw e})}function Ef(e){return e===`head`}function Df(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n===`/$`||n===`/&`){if(r===0){e.removeChild(i),sm(t);return}r--}else if(n===`$`||n===`$?`||n===`$~`||n===`$!`||n===`&`)r++;else if(n===`html`)Vf(e.ownerDocument.documentElement);else if(n===`head`){n=e.ownerDocument.head,Vf(n);for(var a=n.firstChild;a;){var o=a.nextSibling,s=a.nodeName;a[Tt]||s===`SCRIPT`||s===`STYLE`||s===`LINK`&&a.rel.toLowerCase()===`stylesheet`||n.removeChild(a),a=o}}else n===`body`&&Vf(e.ownerDocument.body);n=i}while(n);sm(t)}function Of(e,t){var n=e;e=0;do{var r=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display=`none`):(n.style.display=n._stashedDisplay||``,n.getAttribute(`style`)===``&&n.removeAttribute(`style`)):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=``):n.nodeValue=n._stashedText||``),r&&r.nodeType===8)if(n=r.data,n===`/$`){if(e===0)break;e--}else n!==`$`&&n!==`$?`&&n!==`$~`&&n!==`$!`||e++;n=r}while(n)}function kf(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case`HTML`:case`HEAD`:case`BODY`:kf(n),Et(n);continue;case`SCRIPT`:case`STYLE`:continue;case`LINK`:if(n.rel.toLowerCase()===`stylesheet`)continue}e.removeChild(n)}}function Af(e,t,n,r){for(;e.nodeType===1;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!==`INPUT`||e.type!==`hidden`))break}else if(r){if(!e[Tt])switch(t){case`meta`:if(!e.hasAttribute(`itemprop`))break;return e;case`link`:if(a=e.getAttribute(`rel`),a===`stylesheet`&&e.hasAttribute(`data-precedence`)||a!==i.rel||e.getAttribute(`href`)!==(i.href==null||i.href===``?null:i.href)||e.getAttribute(`crossorigin`)!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute(`title`)!==(i.title==null?null:i.title))break;return e;case`style`:if(e.hasAttribute(`data-precedence`))break;return e;case`script`:if(a=e.getAttribute(`src`),(a!==(i.src==null?null:i.src)||e.getAttribute(`type`)!==(i.type==null?null:i.type)||e.getAttribute(`crossorigin`)!==(i.crossOrigin==null?null:i.crossOrigin))&&a&&e.hasAttribute(`async`)&&!e.hasAttribute(`itemprop`))break;return e;default:return e}}else if(t===`input`&&e.type===`hidden`){var a=i.name==null?null:``+i.name;if(i.type===`hidden`&&e.getAttribute(`name`)===a)return e}else return e;if(e=If(e.nextSibling),e===null)break}return null}function jf(e,t,n){if(t===``)return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!==`INPUT`||e.type!==`hidden`)&&!n||(e=If(e.nextSibling),e===null))return null;return e}function Mf(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!==`INPUT`||e.type!==`hidden`)&&!t||(e=If(e.nextSibling),e===null))return null;return e}function Nf(e){return e.data===`$?`||e.data===`$~`}function Pf(e){return e.data===`$!`||e.data===`$?`&&e.ownerDocument.readyState!==`loading`}function Ff(e,t){var n=e.ownerDocument;if(e.data===`$~`)e._reactRetry=t;else if(e.data!==`$?`||n.readyState!==`loading`)t();else{var r=function(){t(),n.removeEventListener(`DOMContentLoaded`,r)};n.addEventListener(`DOMContentLoaded`,r),e._reactRetry=r}}function If(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t===`$`||t===`$!`||t===`$?`||t===`$~`||t===`&`||t===`F!`||t===`F`)break;if(t===`/$`||t===`/&`)return null}}return e}var Lf=null;function Rf(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===`/$`||n===`/&`){if(t===0)return If(e.nextSibling);t--}else n!==`$`&&n!==`$!`&&n!==`$?`&&n!==`$~`&&n!==`&`||t++}e=e.nextSibling}return null}function zf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===`$`||n===`$!`||n===`$?`||n===`$~`||n===`&`){if(t===0)return e;t--}else n!==`/$`&&n!==`/&`||t++}e=e.previousSibling}return null}function Bf(e,t,n){switch(t=hf(n),e){case`html`:if(e=t.documentElement,!e)throw Error(i(452));return e;case`head`:if(e=t.head,!e)throw Error(i(453));return e;case`body`:if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function Vf(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Et(e)}var Hf=new Map,Uf=new Set;function Wf(e){return typeof e.getRootNode==`function`?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Gf=T.d;T.d={f:Kf,r:qf,D:Xf,C:Zf,L:Qf,m:$f,X:tp,S:ep,M:np};function Kf(){var e=Gf.f(),t=Gu();return e||t}function qf(e){var t=Ot(e);t!==null&&t.tag===5&&t.type===`form`?Xs(t):Gf.r(e)}var Jf=typeof document>`u`?null:document;function Yf(e,t,n){var r=Jf;if(r&&typeof t==`string`&&t){var i=Jt(t);i=`link[rel="`+e+`"][href="`+i+`"]`,typeof n==`string`&&(i+=`[crossorigin="`+n+`"]`),Uf.has(i)||(Uf.add(i),e={rel:e,crossOrigin:n,href:t},r.querySelector(i)===null&&(t=r.createElement(`link`),lf(t,`link`,e),jt(t),r.head.appendChild(t)))}}function Xf(e){Gf.D(e),Yf(`dns-prefetch`,e,null)}function Zf(e,t){Gf.C(e,t),Yf(`preconnect`,e,t)}function Qf(e,t,n){Gf.L(e,t,n);var r=Jf;if(r&&e&&t){var i=`link[rel="preload"][as="`+Jt(t)+`"]`;t===`image`&&n&&n.imageSrcSet?(i+=`[imagesrcset="`+Jt(n.imageSrcSet)+`"]`,typeof n.imageSizes==`string`&&(i+=`[imagesizes="`+Jt(n.imageSizes)+`"]`)):i+=`[href="`+Jt(e)+`"]`;var a=i;switch(t){case`style`:a=ip(e);break;case`script`:a=cp(e)}Hf.has(a)||(e=h({rel:`preload`,href:t===`image`&&n&&n.imageSrcSet?void 0:e,as:t},n),Hf.set(a,e),r.querySelector(i)!==null||t===`style`&&r.querySelector(ap(a))||t===`script`&&r.querySelector(lp(a))||(t=r.createElement(`link`),lf(t,`link`,e),jt(t),r.head.appendChild(t)))}}function $f(e,t){Gf.m(e,t);var n=Jf;if(n&&e){var r=t&&typeof t.as==`string`?t.as:`script`,i=`link[rel="modulepreload"][as="`+Jt(r)+`"][href="`+Jt(e)+`"]`,a=i;switch(r){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:a=cp(e)}if(!Hf.has(a)&&(e=h({rel:`modulepreload`,href:e},t),Hf.set(a,e),n.querySelector(i)===null)){switch(r){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:if(n.querySelector(lp(a)))return}r=n.createElement(`link`),lf(r,`link`,e),jt(r),n.head.appendChild(r)}}}function ep(e,t,n){Gf.S(e,t,n);var r=Jf;if(r&&e){var i=At(r).hoistableStyles,a=ip(e);t||=`default`;var o=i.get(a);if(!o){var s={loading:0,preload:null};if(o=r.querySelector(ap(a)))s.loading=5;else{e=h({rel:`stylesheet`,href:e,"data-precedence":t},n),(n=Hf.get(a))&&fp(e,n);var c=o=r.createElement(`link`);jt(c),lf(c,`link`,e),c._p=new Promise(function(e,t){c.onload=e,c.onerror=t}),c.addEventListener(`load`,function(){s.loading|=1}),c.addEventListener(`error`,function(){s.loading|=2}),s.loading|=4,dp(o,t,r)}o={type:`stylesheet`,instance:o,count:1,state:s},i.set(a,o)}}}function tp(e,t){Gf.X(e,t);var n=Jf;if(n&&e){var r=At(n).hoistableScripts,i=cp(e),a=r.get(i);a||(a=n.querySelector(lp(i)),a||(e=h({src:e,async:!0},t),(t=Hf.get(i))&&pp(e,t),a=n.createElement(`script`),jt(a),lf(a,`link`,e),n.head.appendChild(a)),a={type:`script`,instance:a,count:1,state:null},r.set(i,a))}}function np(e,t){Gf.M(e,t);var n=Jf;if(n&&e){var r=At(n).hoistableScripts,i=cp(e),a=r.get(i);a||(a=n.querySelector(lp(i)),a||(e=h({src:e,async:!0,type:`module`},t),(t=Hf.get(i))&&pp(e,t),a=n.createElement(`script`),jt(a),lf(a,`link`,e),n.head.appendChild(a)),a={type:`script`,instance:a,count:1,state:null},r.set(i,a))}}function rp(e,t,n,r){var a=(a=be.current)?Wf(a):null;if(!a)throw Error(i(446));switch(e){case`meta`:case`title`:return null;case`style`:return typeof n.precedence==`string`&&typeof n.href==`string`?(t=ip(n.href),n=At(a).hoistableStyles,r=n.get(t),r||(r={type:`style`,instance:null,count:0,state:null},n.set(t,r)),r):{type:`void`,instance:null,count:0,state:null};case`link`:if(n.rel===`stylesheet`&&typeof n.href==`string`&&typeof n.precedence==`string`){e=ip(n.href);var o=At(a).hoistableStyles,s=o.get(e);if(s||(a=a.ownerDocument||a,s={type:`stylesheet`,instance:null,count:0,state:{loading:0,preload:null}},o.set(e,s),(o=a.querySelector(ap(e)))&&!o._p&&(s.instance=o,s.state.loading=5),Hf.has(e)||(n={rel:`preload`,as:`style`,href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Hf.set(e,n),o||sp(a,e,n,s.state))),t&&r===null)throw Error(i(528,``));return s}if(t&&r!==null)throw Error(i(529,``));return null;case`script`:return t=n.async,n=n.src,typeof n==`string`&&t&&typeof t!=`function`&&typeof t!=`symbol`?(t=cp(n),n=At(a).hoistableScripts,r=n.get(t),r||(r={type:`script`,instance:null,count:0,state:null},n.set(t,r)),r):{type:`void`,instance:null,count:0,state:null};default:throw Error(i(444,e))}}function ip(e){return`href="`+Jt(e)+`"`}function ap(e){return`link[rel="stylesheet"][`+e+`]`}function op(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function sp(e,t,n,r){e.querySelector(`link[rel="preload"][as="style"][`+t+`]`)?r.loading=1:(t=e.createElement(`link`),r.preload=t,t.addEventListener(`load`,function(){return r.loading|=1}),t.addEventListener(`error`,function(){return r.loading|=2}),lf(t,`link`,n),jt(t),e.head.appendChild(t))}function cp(e){return`[src="`+Jt(e)+`"]`}function lp(e){return`script[async]`+e}function up(e,t,n){if(t.count++,t.instance===null)switch(t.type){case`style`:var r=e.querySelector(`style[data-href~="`+Jt(n.href)+`"]`);if(r)return t.instance=r,jt(r),r;var a=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement(`style`),jt(r),lf(r,`style`,a),dp(r,n.precedence,e),t.instance=r;case`stylesheet`:a=ip(n.href);var o=e.querySelector(ap(a));if(o)return t.state.loading|=4,t.instance=o,jt(o),o;r=op(n),(a=Hf.get(a))&&fp(r,a),o=(e.ownerDocument||e).createElement(`link`),jt(o);var s=o;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),lf(o,`link`,r),t.state.loading|=4,dp(o,n.precedence,e),t.instance=o;case`script`:return o=cp(n.src),(a=e.querySelector(lp(o)))?(t.instance=a,jt(a),a):(r=n,(a=Hf.get(o))&&(r=h({},n),pp(r,a)),e=e.ownerDocument||e,a=e.createElement(`script`),jt(a),lf(a,`link`,r),e.head.appendChild(a),t.instance=a);case`void`:return null;default:throw Error(i(443,t.type))}else t.type===`stylesheet`&&!(t.state.loading&4)&&(r=t.instance,t.state.loading|=4,dp(r,n.precedence,e));return t.instance}function dp(e,t,n){for(var r=n.querySelectorAll(`link[rel="stylesheet"][data-precedence],style[data-precedence]`),i=r.length?r[r.length-1]:null,a=i,o=0;o<r.length;o++){var s=r[o];if(s.dataset.precedence===t)a=s;else if(a!==i)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function fp(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.title??=t.title}function pp(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.integrity??=t.integrity}var mp=null;function hp(e,t,n){if(mp===null){var r=new Map,i=mp=new Map;i.set(n,r)}else i=mp,r=i.get(n),r||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var a=n[i];if(!(a[Tt]||a[vt]||e===`link`&&a.getAttribute(`rel`)===`stylesheet`)&&a.namespaceURI!==`http://www.w3.org/2000/svg`){var o=a.getAttribute(t)||``;o=e+o;var s=r.get(o);s?s.push(a):r.set(o,[a])}}return r}function gp(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t===`title`?e.querySelector(`head > title`):null)}function _p(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case`meta`:case`title`:return!0;case`style`:if(typeof t.precedence!=`string`||typeof t.href!=`string`||t.href===``)break;return!0;case`link`:if(typeof t.rel!=`string`||typeof t.href!=`string`||t.href===``||t.onLoad||t.onError)break;switch(t.rel){case`stylesheet`:return e=t.disabled,typeof t.precedence==`string`&&e==null;default:return!0}case`script`:if(t.async&&typeof t.async!=`function`&&typeof t.async!=`symbol`&&!t.onLoad&&!t.onError&&t.src&&typeof t.src==`string`)return!0}return!1}function vp(e){return!(e.type===`stylesheet`&&!(e.state.loading&3))}function yp(e,t,n,r){if(n.type===`stylesheet`&&(typeof r.media!=`string`||!1!==matchMedia(r.media).matches)&&!(n.state.loading&4)){if(n.instance===null){var i=ip(r.href),a=t.querySelector(ap(i));if(a){t=a._p,typeof t==`object`&&t&&typeof t.then==`function`&&(e.count++,e=Sp.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=a,jt(a);return}a=t.ownerDocument||t,r=op(r),(i=Hf.get(i))&&fp(r,i),a=a.createElement(`link`),jt(a);var o=a;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),lf(a,`link`,r),n.instance=a}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(n.state.loading&3)&&(e.count++,n=Sp.bind(e),t.addEventListener(`load`,n),t.addEventListener(`error`,n))}}var bp=0;function xp(e,t){return e.stylesheets&&e.count===0&&wp(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&wp(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&bp===0&&(bp=62500*ff());var i=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&wp(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>bp?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(i)}}:null}function Sp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)wp(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Cp=null;function wp(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Cp=new Map,t.forEach(Tp,e),Cp=null,Sp.call(e))}function Tp(e,t){if(!(t.state.loading&4)){var n=Cp.get(e);if(n)var r=n.get(null);else{n=new Map,Cp.set(e,n);for(var i=e.querySelectorAll(`link[data-precedence],style[data-precedence]`),a=0;a<i.length;a++){var o=i[a];(o.nodeName===`LINK`||o.getAttribute(`media`)!==`not all`)&&(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}i=t.instance,o=i.getAttribute(`data-precedence`),a=n.get(o)||r,a===r&&n.set(null,i),n.set(o,i),this.count++,r=Sp.bind(this),i.addEventListener(`load`,r),i.addEventListener(`error`,r),a?a.parentNode.insertBefore(i,a.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),t.state.loading|=4}}var Ep={$$typeof:te,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function Dp(e,t,n,r,i,a,o,s,c){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=st(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=st(0),this.hiddenUpdates=st(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function Op(e,t,n,r,i,a,o,s,c,l,u,d){return e=new Dp(e,t,n,o,c,l,u,d,s),t=1,!0===a&&(t|=24),a=Di(3,null,null,t),e.current=a,a.stateNode=e,t=Da(),t.refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:t},oo(a),e}function kp(e){return e?(e=Ti,e):Ti}function Ap(e,t,n,r,i,a){i=kp(i),r.context===null?r.context=i:r.pendingContext=i,r=co(t),r.payload={element:n},a=a===void 0?null:a,a!==null&&(r.callback=a),n=lo(e,r,t),n!==null&&(Bu(n,e,t),uo(n,e,t))}function jp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Mp(e,t){jp(e,t),(e=e.alternate)&&jp(e,t)}function Np(e){if(e.tag===13||e.tag===31){var t=Si(e,67108864);t!==null&&Bu(t,e,67108864),Mp(e,67108864)}}function Pp(e){if(e.tag===13||e.tag===31){var t=Ru();t=pt(t);var n=Si(e,t);n!==null&&Bu(n,e,t),Mp(e,t)}}var Fp=!0;function Ip(e,t,n,r){var i=w.T;w.T=null;var a=T.p;try{T.p=2,Rp(e,t,n,r)}finally{T.p=a,w.T=i}}function Lp(e,t,n,r){var i=w.T;w.T=null;var a=T.p;try{T.p=8,Rp(e,t,n,r)}finally{T.p=a,w.T=i}}function Rp(e,t,n,r){if(Fp){var i=zp(r);if(i===null)Xd(e,t,r,Bp,n),Zp(e,r);else if($p(i,e,t,n,r))r.stopPropagation();else if(Zp(e,r),t&4&&-1<Xp.indexOf(e)){for(;i!==null;){var a=Ot(i);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var o=nt(a.pendingLanes);if(o!==0){var s=a;for(s.pendingLanes|=2,s.entangledLanes|=2;o;){var c=1<<31-Ye(o);s.entanglements[1]|=c,o&=~c}Dd(a),!(du&6)&&(Du=Le()+500,Od(0,!1))}}break;case 31:case 13:s=Si(a,2),s!==null&&Bu(s,a,2),Gu(),Mp(a,2)}if(a=zp(r),a===null&&Xd(e,t,r,Bp,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Xd(e,t,r,null,n)}}function zp(e){return e=dn(e),Vp(e)}var Bp=null;function Vp(e){if(Bp=null,e=Dt(e),e!==null){var t=o(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=s(t),e!==null)return e;e=null}else if(n===31){if(e=c(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Bp=e,null}function Hp(e){switch(e){case`beforetoggle`:case`cancel`:case`click`:case`close`:case`contextmenu`:case`copy`:case`cut`:case`auxclick`:case`dblclick`:case`dragend`:case`dragstart`:case`drop`:case`focusin`:case`focusout`:case`input`:case`invalid`:case`keydown`:case`keypress`:case`keyup`:case`mousedown`:case`mouseup`:case`paste`:case`pause`:case`play`:case`pointercancel`:case`pointerdown`:case`pointerup`:case`ratechange`:case`reset`:case`resize`:case`seeked`:case`submit`:case`toggle`:case`touchcancel`:case`touchend`:case`touchstart`:case`volumechange`:case`change`:case`selectionchange`:case`textInput`:case`compositionstart`:case`compositionend`:case`compositionupdate`:case`beforeblur`:case`afterblur`:case`beforeinput`:case`blur`:case`fullscreenchange`:case`focus`:case`hashchange`:case`popstate`:case`select`:case`selectstart`:return 2;case`drag`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`mousemove`:case`mouseout`:case`mouseover`:case`pointermove`:case`pointerout`:case`pointerover`:case`scroll`:case`touchmove`:case`wheel`:case`mouseenter`:case`mouseleave`:case`pointerenter`:case`pointerleave`:return 8;case`message`:switch(Re()){case ze:return 2;case Be:return 8;case Ve:case He:return 32;case Ue:return 268435456;default:return 32}default:return 32}}var Up=!1,Wp=null,Gp=null,Kp=null,qp=new Map,Jp=new Map,Yp=[],Xp=`mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset`.split(` `);function Zp(e,t){switch(e){case`focusin`:case`focusout`:Wp=null;break;case`dragenter`:case`dragleave`:Gp=null;break;case`mouseover`:case`mouseout`:Kp=null;break;case`pointerover`:case`pointerout`:qp.delete(t.pointerId);break;case`gotpointercapture`:case`lostpointercapture`:Jp.delete(t.pointerId)}}function Qp(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Ot(t),t!==null&&Np(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function $p(e,t,n,r,i){switch(t){case`focusin`:return Wp=Qp(Wp,e,t,n,r,i),!0;case`dragenter`:return Gp=Qp(Gp,e,t,n,r,i),!0;case`mouseover`:return Kp=Qp(Kp,e,t,n,r,i),!0;case`pointerover`:var a=i.pointerId;return qp.set(a,Qp(qp.get(a)||null,e,t,n,r,i)),!0;case`gotpointercapture`:return a=i.pointerId,Jp.set(a,Qp(Jp.get(a)||null,e,t,n,r,i)),!0}return!1}function em(e){var t=Dt(e.target);if(t!==null){var n=o(t);if(n!==null){if(t=n.tag,t===13){if(t=s(n),t!==null){e.blockedOn=t,gt(e.priority,function(){Pp(n)});return}}else if(t===31){if(t=c(n),t!==null){e.blockedOn=t,gt(e.priority,function(){Pp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function tm(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=zp(e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);un=r,n.target.dispatchEvent(r),un=null}else return t=Ot(n),t!==null&&Np(t),e.blockedOn=n,!1;t.shift()}return!0}function nm(e,t,n){tm(e)&&n.delete(t)}function rm(){Up=!1,Wp!==null&&tm(Wp)&&(Wp=null),Gp!==null&&tm(Gp)&&(Gp=null),Kp!==null&&tm(Kp)&&(Kp=null),qp.forEach(nm),Jp.forEach(nm)}function im(e,n){e.blockedOn===n&&(e.blockedOn=null,Up||(Up=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,rm)))}var am=null;function om(e){am!==e&&(am=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){am===e&&(am=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if(typeof r!=`function`){if(Vp(r||n)===null)continue;break}var a=Ot(n);a!==null&&(e.splice(t,3),t-=3,Js(a,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function sm(e){function t(t){return im(t,e)}Wp!==null&&im(Wp,e),Gp!==null&&im(Gp,e),Kp!==null&&im(Kp,e),qp.forEach(t),Jp.forEach(t);for(var n=0;n<Yp.length;n++){var r=Yp[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Yp.length&&(n=Yp[0],n.blockedOn===null);)em(n),n.blockedOn===null&&Yp.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var i=n[r],a=n[r+1],o=i[yt]||null;if(typeof a==`function`)o||om(n);else if(o){var s=null;if(a&&a.hasAttribute(`formAction`)){if(i=a,o=a[yt]||null)s=o.formAction;else if(Vp(i)!==null)continue}else s=o.action;typeof s==`function`?n[r+1]=s:(n.splice(r,3),r-=3),om(n)}}}function cm(){function e(e){e.canIntercept&&e.info===`react-transition`&&e.intercept({handler:function(){return new Promise(function(e){return i=e})},focusReset:`manual`,scroll:`manual`})}function t(){i!==null&&(i(),i=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&e.url!=null&&navigation.navigate(e.url,{state:e.getState(),info:`react-transition`,history:`replace`})}}if(typeof navigation==`object`){var r=!1,i=null;return navigation.addEventListener(`navigate`,e),navigation.addEventListener(`navigatesuccess`,t),navigation.addEventListener(`navigateerror`,t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener(`navigate`,e),navigation.removeEventListener(`navigatesuccess`,t),navigation.removeEventListener(`navigateerror`,t),i!==null&&(i(),i=null)}}}function lm(e){this._internalRoot=e}um.prototype.render=lm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var n=t.current,r=Ru();Ap(n,r,e,t,null,null)},um.prototype.unmount=lm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ap(e.current,2,null,e,null,null),Gu(),t[bt]=null}};function um(e){this._internalRoot=e}um.prototype.unstable_scheduleHydration=function(e){if(e){var t=ht();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Yp.length&&t!==0&&t<Yp[n].priority;n++);Yp.splice(n,0,e),n===0&&em(e)}};var dm=n.version;if(dm!==`19.2.0`)throw Error(i(527,dm,`19.2.0`));T.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render==`function`?Error(i(188)):(e=Object.keys(e).join(`,`),Error(i(268,e)));return e=d(t),e=e===null?null:p(e),e=e===null?null:e.stateNode,e};var fm={bundleType:0,version:`19.2.0`,rendererPackageName:`react-dom`,currentDispatcherRef:w,reconcilerVersion:`19.2.0`};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<`u`){var pm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pm.isDisabled&&pm.supportsFiber)try{Ke=pm.inject(fm),qe=pm}catch{}}e.createRoot=function(e,t){if(!a(e))throw Error(i(299));var n=!1,r=``,o=_c,s=vc,c=yc;return t!=null&&(!0===t.unstable_strictMode&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=Op(e,1,!1,null,null,n,r,null,o,s,c,cm),e[bt]=t.current,Jd(e),new lm(t)}})),g=c(o(((e,t)=>{function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=h()}))()),_=c(u()),v=e=>e.replace(/([a-z0-9])([A-Z])/g,`$1-$2`).toLowerCase(),y=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),b=e=>{let t=y(e);return t.charAt(0).toUpperCase()+t.slice(1)},x=(...e)=>e.filter((e,t,n)=>!!e&&e.trim()!==``&&n.indexOf(e)===t).join(` `).trim(),ee=e=>{for(let t in e)if(t.startsWith(`aria-`)||t===`role`||t===`title`)return!0},te={xmlns:`http://www.w3.org/2000/svg`,width:24,height:24,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:2,strokeLinecap:`round`,strokeLinejoin:`round`},S=(0,_.forwardRef)(({color:e=`currentColor`,size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i=``,children:a,iconNode:o,...s},c)=>(0,_.createElement)(`svg`,{ref:c,...te,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:x(`lucide`,i),...!a&&!ee(s)&&{"aria-hidden":`true`},...s},[...o.map(([e,t])=>(0,_.createElement)(e,t)),...Array.isArray(a)?a:[a]])),C=(e,t)=>{let n=(0,_.forwardRef)(({className:n,...r},i)=>(0,_.createElement)(S,{ref:i,iconNode:t,className:x(`lucide-${v(b(e))}`,`lucide-${e}`,n),...r}));return n.displayName=b(e),n},ne=C(`arrow-left`,[[`path`,{d:`m12 19-7-7 7-7`,key:`1l729n`}],[`path`,{d:`M19 12H5`,key:`x3x0zl`}]]),re=C(`building`,[[`path`,{d:`M12 10h.01`,key:`1nrarc`}],[`path`,{d:`M12 14h.01`,key:`1etili`}],[`path`,{d:`M12 6h.01`,key:`1vi96p`}],[`path`,{d:`M16 10h.01`,key:`1m94wz`}],[`path`,{d:`M16 14h.01`,key:`1gbofw`}],[`path`,{d:`M16 6h.01`,key:`1x0f13`}],[`path`,{d:`M8 10h.01`,key:`19clt8`}],[`path`,{d:`M8 14h.01`,key:`6423bh`}],[`path`,{d:`M8 6h.01`,key:`1dz90k`}],[`path`,{d:`M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3`,key:`cabbwy`}],[`rect`,{x:`4`,y:`2`,width:`16`,height:`20`,rx:`2`,key:`1uxh74`}]]),ie=C(`chevron-down`,[[`path`,{d:`m6 9 6 6 6-6`,key:`qrunsl`}]]),ae=C(`circle-alert`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`line`,{x1:`12`,x2:`12`,y1:`8`,y2:`12`,key:`1pkeuh`}],[`line`,{x1:`12`,x2:`12.01`,y1:`16`,y2:`16`,key:`4dfq90`}]]),oe=C(`circle-check-big`,[[`path`,{d:`M21.801 10A10 10 0 1 1 17 3.335`,key:`yps3ct`}],[`path`,{d:`m9 11 3 3L22 4`,key:`1pflzl`}]]),se=C(`clock`,[[`path`,{d:`M12 6v6l4 2`,key:`mmk7yg`}],[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}]]),ce=C(`dollar-sign`,[[`line`,{x1:`12`,x2:`12`,y1:`2`,y2:`22`,key:`7eqyqh`}],[`path`,{d:`M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6`,key:`1b0p4s`}]]),le=C(`file-text`,[[`path`,{d:`M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z`,key:`1rqfz7`}],[`path`,{d:`M14 2v4a2 2 0 0 0 2 2h4`,key:`tnqrlb`}],[`path`,{d:`M10 9H8`,key:`b1mrlr`}],[`path`,{d:`M16 13H8`,key:`t4e002`}],[`path`,{d:`M16 17H8`,key:`z1uh3a`}]]),ue=C(`house`,[[`path`,{d:`M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8`,key:`5wwlr5`}],[`path`,{d:`M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z`,key:`r6nss1`}]]),de=C(`image`,[[`rect`,{width:`18`,height:`18`,x:`3`,y:`3`,rx:`2`,ry:`2`,key:`1m3agn`}],[`circle`,{cx:`9`,cy:`9`,r:`2`,key:`af1f0g`}],[`path`,{d:`m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21`,key:`1xmnt7`}]]),w=C(`info`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`M12 16v-4`,key:`1dtifu`}],[`path`,{d:`M12 8h.01`,key:`e9boi3`}]]),T=C(`log-out`,[[`path`,{d:`m16 17 5-5-5-5`,key:`1bji2h`}],[`path`,{d:`M21 12H9`,key:`dn1m92`}],[`path`,{d:`M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4`,key:`1uf3rs`}]]),fe=C(`map-pin`,[[`path`,{d:`M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0`,key:`1r0f0z`}],[`circle`,{cx:`12`,cy:`10`,r:`3`,key:`ilqhr7`}]]),pe=C(`menu`,[[`path`,{d:`M4 5h16`,key:`1tepv9`}],[`path`,{d:`M4 12h16`,key:`1lakjw`}],[`path`,{d:`M4 19h16`,key:`1djgab`}]]),me=C(`message-circle`,[[`path`,{d:`M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719`,key:`1sd12s`}]]),he=C(`navigation`,[[`polygon`,{points:`3 11 22 2 13 21 11 13 3 11`,key:`1ltx0t`}]]),ge=C(`package`,[[`path`,{d:`M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z`,key:`1a0edw`}],[`path`,{d:`M12 22V12`,key:`d0xqtd`}],[`polyline`,{points:`3.29 7 12 12 20.71 7`,key:`ousv84`}],[`path`,{d:`m7.5 4.27 9 5.15`,key:`1c824w`}]]),_e=C(`phone`,[[`path`,{d:`M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384`,key:`9njp5v`}]]),ve=C(`save`,[[`path`,{d:`M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z`,key:`1c8476`}],[`path`,{d:`M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7`,key:`1ydtos`}],[`path`,{d:`M7 3v4a1 1 0 0 0 1 1h7`,key:`t51u73`}]]),ye=C(`search`,[[`path`,{d:`m21 21-4.34-4.34`,key:`14j7rj`}],[`circle`,{cx:`11`,cy:`11`,r:`8`,key:`4ej97u`}]]),be=C(`settings`,[[`path`,{d:`M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915`,key:`1i5ecw`}],[`circle`,{cx:`12`,cy:`12`,r:`3`,key:`1v7zrd`}]]),xe=C(`shopping-basket`,[[`path`,{d:`m15 11-1 9`,key:`5wnq3a`}],[`path`,{d:`m19 11-4-7`,key:`cnml18`}],[`path`,{d:`M2 11h20`,key:`3eubbj`}],[`path`,{d:`m3.5 11 1.6 7.4a2 2 0 0 0 2 1.6h9.8a2 2 0 0 0 2-1.6l1.7-7.4`,key:`yiazzp`}],[`path`,{d:`M4.5 15.5h15`,key:`13mye1`}],[`path`,{d:`m5 11 4-7`,key:`116ra9`}],[`path`,{d:`m9 11 1 9`,key:`1ojof7`}]]),Se=C(`square-pen`,[[`path`,{d:`M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7`,key:`1m0v6g`}],[`path`,{d:`M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z`,key:`ohrbg2`}]]),Ce=C(`store`,[[`path`,{d:`M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5`,key:`slp6dd`}],[`path`,{d:`M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244`,key:`o0xfot`}],[`path`,{d:`M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05`,key:`wn3emo`}]]),we=C(`trash-2`,[[`path`,{d:`M10 11v6`,key:`nco0om`}],[`path`,{d:`M14 11v6`,key:`outv1u`}],[`path`,{d:`M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6`,key:`miytrc`}],[`path`,{d:`M3 6h18`,key:`d0wm0j`}],[`path`,{d:`M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2`,key:`e791ji`}]]),Te=C(`truck`,[[`path`,{d:`M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2`,key:`wrbu53`}],[`path`,{d:`M15 18H9`,key:`1lyqi6`}],[`path`,{d:`M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14`,key:`lysw3i`}],[`circle`,{cx:`17`,cy:`18`,r:`2`,key:`332jqn`}],[`circle`,{cx:`7`,cy:`18`,r:`2`,key:`19iecd`}]]),Ee=C(`user`,[[`path`,{d:`M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2`,key:`975kel`}],[`circle`,{cx:`12`,cy:`7`,r:`4`,key:`17ys0d`}]]),De=C(`x`,[[`path`,{d:`M18 6 6 18`,key:`1bl5f8`}],[`path`,{d:`m6 6 12 12`,key:`d8bk6v`}]]),Oe=()=>void 0,ke={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},E=function(e,t){if(!e)throw Ae(t)},Ae=function(e){return Error(`Firebase Database (`+ke.SDK_VERSION+`) INTERNAL ASSERT FAILED: `+e)},je=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)==55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)==56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},Me=function(e){let t=[],n=0,r=0;for(;n<e.length;){let i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){let a=e[n++];t[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){let a=e[n++],o=e[n++],s=e[n++],c=((i&7)<<18|(a&63)<<12|(o&63)<<6|s&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{let a=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return t.join(``)},Ne={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`,get ENCODED_VALS(){return this.ENCODED_VALS_BASE+`+/=`},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+`-_.`},HAS_NATIVE_SUPPORT:typeof atob==`function`,encodeByteArray(e,t){if(!Array.isArray(e))throw Error(`encodeByteArray takes an array as a parameter`);this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){let i=e[t],a=t+1<e.length,o=a?e[t+1]:0,s=t+2<e.length,c=s?e[t+2]:0,l=i>>2,u=(i&3)<<4|o>>4,d=(o&15)<<2|c>>6,f=c&63;s||(f=64,a||(d=64)),r.push(n[l],n[u],n[d],n[f])}return r.join(``)},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(je(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Me(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){let i=n[e.charAt(t++)],a=t<e.length?n[e.charAt(t)]:0;++t;let o=t<e.length?n[e.charAt(t)]:64;++t;let s=t<e.length?n[e.charAt(t)]:64;if(++t,i==null||a==null||o==null||s==null)throw new Pe;let c=i<<2|a>>4;if(r.push(c),o!==64){let e=a<<4&240|o>>2;if(r.push(e),s!==64){let e=o<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Pe=class extends Error{constructor(){super(...arguments),this.name=`DecodeBase64StringError`}},Fe=function(e){let t=je(e);return Ne.encodeByteArray(t,!0)},Ie=function(e){return Fe(e).replace(/\./g,``)},Le=function(e){try{return Ne.decodeString(e,!0)}catch(e){console.error(`base64Decode failed: `,e)}return null};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Re(e){return ze(void 0,e)}function ze(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:let n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(let n in t)!t.hasOwnProperty(n)||!Be(n)||(e[n]=ze(e[n],t[n]));return e}function Be(e){return e!==`__proto__`}
/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Ve(){if(typeof self<`u`)return self;if(typeof window<`u`)return window;if(typeof global<`u`)return global;throw Error(`Unable to locate global object.`)}
/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var He=()=>Ve().__FIREBASE_DEFAULTS__,Ue=()=>{if(typeof process>`u`)return;let e={}.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},We=()=>{if(typeof document>`u`)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=e&&Le(e[1]);return t&&JSON.parse(t)},Ge=()=>{try{return Oe()||He()||Ue()||We()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Ke=e=>Ge()?.emulatorHosts?.[e],qe=e=>{let t=Ke(e);if(!t)return;let n=t.lastIndexOf(`:`);if(n<=0||n+1===t.length)throw Error(`Invalid host ${t} with no separate hostname and port!`);let r=parseInt(t.substring(n+1),10);return t[0]===`[`?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Je=()=>Ge()?.config,Ye=e=>Ge()?.[`_${e}`],Xe=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e==`function`&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}};
/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Ze(e){try{return(e.startsWith(`http://`)||e.startsWith(`https://`)?new URL(e).hostname:e).endsWith(`.cloudworkstations.dev`)}catch{return!1}}async function Qe(e){return(await fetch(e,{credentials:`include`})).ok}
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function $e(e,t){if(e.uid)throw Error(`The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.`);let n={alg:`none`,type:`JWT`},r=t||`demo-project`,i=e.iat||0,a=e.sub||e.user_id;if(!a)throw Error(`mockUserToken must contain 'sub' or 'user_id' field!`);let o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:`custom`,identities:{}},...e};return[Ie(JSON.stringify(n)),Ie(JSON.stringify(o)),``].join(`.`)}var et={};function tt(){let e={prod:[],emulator:[]};for(let t of Object.keys(et))et[t]?e.emulator.push(t):e.prod.push(t);return e}function nt(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement(`div`),t.setAttribute(`id`,e),n=!0),{created:n,element:t}}var rt=!1;function it(e,t){if(typeof window>`u`||typeof document>`u`||!Ze(window.location.host)||et[e]===t||et[e]||rt)return;et[e]=t;function n(e){return`__firebase__banner__${e}`}let r=`__firebase__banner`,i=tt().prod.length>0;function a(){let e=document.getElementById(r);e&&e.remove()}function o(e){e.style.display=`flex`,e.style.background=`#7faaf0`,e.style.position=`fixed`,e.style.bottom=`5px`,e.style.left=`5px`,e.style.padding=`.5em`,e.style.borderRadius=`5px`,e.style.alignItems=`center`}function s(e,t){e.setAttribute(`width`,`24`),e.setAttribute(`id`,t),e.setAttribute(`height`,`24`),e.setAttribute(`viewBox`,`0 0 24 24`),e.setAttribute(`fill`,`none`),e.style.marginLeft=`-6px`}function c(){let e=document.createElement(`span`);return e.style.cursor=`pointer`,e.style.marginLeft=`16px`,e.style.fontSize=`24px`,e.innerHTML=` &times;`,e.onclick=()=>{rt=!0,a()},e}function l(e,t){e.setAttribute(`id`,t),e.innerText=`Learn more`,e.href=`https://firebase.google.com/docs/studio/preview-apps#preview-backend`,e.setAttribute(`target`,`__blank`),e.style.paddingLeft=`5px`,e.style.textDecoration=`underline`}function u(){let e=nt(r),t=n(`text`),a=document.getElementById(t)||document.createElement(`span`),u=n(`learnmore`),d=document.getElementById(u)||document.createElement(`a`),f=n(`preprendIcon`),p=document.getElementById(f)||document.createElementNS(`http://www.w3.org/2000/svg`,`svg`);if(e.created){let t=e.element;o(t),l(d,u);let n=c();s(p,f),t.append(p,a,d,n),document.body.appendChild(t)}i?(a.innerText=`Preview backend disconnected.`,p.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(p.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,a.innerText=`Preview backend running in this workspace.`),a.setAttribute(`id`,t)}document.readyState===`loading`?window.addEventListener(`DOMContentLoaded`,u):u()}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function at(){return typeof navigator<`u`&&typeof navigator.userAgent==`string`?navigator.userAgent:``}function ot(){return typeof window<`u`&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(at())}function st(){let e=Ge()?.forceEnvironment;if(e===`node`)return!0;if(e===`browser`)return!1;try{return Object.prototype.toString.call(global.process)===`[object process]`}catch{return!1}}function ct(){return typeof navigator<`u`&&navigator.userAgent===`Cloudflare-Workers`}function lt(){let e=typeof chrome==`object`?chrome.runtime:typeof browser==`object`?browser.runtime:void 0;return typeof e==`object`&&e.id!==void 0}function ut(){return typeof navigator==`object`&&navigator.product===`ReactNative`}function dt(){let e=at();return e.indexOf(`MSIE `)>=0||e.indexOf(`Trident/`)>=0}function ft(){return ke.NODE_CLIENT===!0||ke.NODE_ADMIN===!0}function pt(){return!st()&&!!navigator.userAgent&&navigator.userAgent.includes(`Safari`)&&!navigator.userAgent.includes(`Chrome`)}function mt(){try{return typeof indexedDB==`object`}catch{return!1}}function ht(){return new Promise((e,t)=>{try{let n=!0,r=`validate-browser-context-for-indexeddb-analytics-module`,i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||``)}}catch(e){t(e)}})}function gt(){return!(typeof navigator>`u`||!navigator.cookieEnabled)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var _t=`FirebaseError`,vt=class e extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=_t,Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yt.prototype.create)}},yt=class{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){let n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],a=i?bt(i,n):`Error`,o=`${this.serviceName}: ${a} (${r}).`;return new vt(r,o,n)}};function bt(e,t){return e.replace(xt,(e,n)=>{let r=t[n];return r==null?`<${n}?>`:String(r)})}var xt=/\{\$([^}]+)}/g;
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function St(e){return JSON.parse(e)}function Ct(e){return JSON.stringify(e)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var wt=function(e){let t={},n={},r={},i=``;try{let a=e.split(`.`);t=St(Le(a[0])||``),n=St(Le(a[1])||``),i=a[2],r=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:r,signature:i}},Tt=function(e){let t=wt(e).claims;return!!t&&typeof t==`object`&&t.hasOwnProperty(`iat`)},Et=function(e){let t=wt(e).claims;return typeof t==`object`&&t.admin===!0};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Dt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ot(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function kt(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function At(e,t,n){let r={};for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function jt(e,t){if(e===t)return!0;let n=Object.keys(e),r=Object.keys(t);for(let i of n){if(!r.includes(i))return!1;let n=e[i],a=t[i];if(Mt(n)&&Mt(a)){if(!jt(n,a))return!1}else if(n!==a)return!1}for(let e of r)if(!n.includes(e))return!1;return!0}function Mt(e){return typeof e==`object`&&!!e}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Nt(e){let t=[];for(let[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+`=`+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+`=`+encodeURIComponent(r));return t.length?`&`+t.join(`&`):``}function Pt(e){let t={};return e.replace(/^\?/,``).split(`&`).forEach(e=>{if(e){let[n,r]=e.split(`=`);t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function Ft(e){let t=e.indexOf(`?`);if(!t)return``;let n=e.indexOf(`#`,t);return e.substring(t,n>0?n:void 0)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var It=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||=0;let n=this.W_;if(typeof e==`string`)for(let r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let e=16;e<80;e++){let t=n[e-3]^n[e-8]^n[e-14]^n[e-16];n[e]=(t<<1|t>>>31)&4294967295}let r=this.chain_[0],i=this.chain_[1],a=this.chain_[2],o=this.chain_[3],s=this.chain_[4],c,l;for(let e=0;e<80;e++){e<40?e<20?(c=o^i&(a^o),l=1518500249):(c=i^a^o,l=1859775393):e<60?(c=i&a|o&(i|a),l=2400959708):(c=i^a^o,l=3395469782);let t=(r<<5|r>>>27)+c+s+l+n[e]&4294967295;s=o,o=a,a=(i<<30|i>>>2)&4294967295,i=r,r=t}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+o&4294967295,this.chain_[4]=this.chain_[4]+s&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);let n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;for(;r<t;){if(a===0)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if(typeof e==`string`){for(;r<t;)if(i[a]=e.charCodeAt(r),++a,++r,a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++a,++r,a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}digest(){let e=[],t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let e=this.blockSize-1;e>=56;e--)this.buf_[e]=t&255,t/=256;this.compress_(this.buf_);let n=0;for(let t=0;t<5;t++)for(let r=24;r>=0;r-=8)e[n]=this.chain_[t]>>r&255,++n;return e}};function Lt(e,t){let n=new Rt(e,t);return n.subscribe.bind(n)}var Rt=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(e===void 0&&t===void 0&&n===void 0)throw Error(`Missing Observer.`);r=zt(e,[`next`,`error`,`complete`])?e:{next:e,error:t,complete:n},r.next===void 0&&(r.next=Bt),r.error===void 0&&(r.error=Bt),r.complete===void 0&&(r.complete=Bt);let i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],--this.observerCount,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(e){typeof console<`u`&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function zt(e,t){if(typeof e!=`object`||!e)return!1;for(let n of t)if(n in e&&typeof e[n]==`function`)return!0;return!1}function Bt(){}function Vt(e,t){return`${e} failed: ${t} argument `}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Ht=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){let t=i-55296;r++,E(r<e.length,`Surrogate pair missing trail surrogate.`);let n=e.charCodeAt(r)-56320;i=65536+(t<<10)+n}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},D=function(e){let t=0;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},Ut=1e3,Wt=2,Gt=14400*1e3,Kt=.5;function qt(e,t=Ut,n=Wt){let r=t*n**+e,i=Math.round(Kt*r*(Math.random()-.5)*2);return Math.min(Gt,r+i)}
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function O(e){return e&&e._delegate?e._delegate:e}var Jt=class{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode=`LAZY`,this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}},Yt=`[DEFAULT]`,Xt=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new Xe;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(e){if(n)return null;throw e}else if(n)return null;else throw Error(`Service ${this.name} is not available`)}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(Qt(e))try{this.getOrInitializeService({instanceIdentifier:Yt})}catch{}for(let[e,t]of this.instancesDeferred.entries()){let n=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch{}}}}clearInstance(e=Yt){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>`INTERNAL`in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>`_delete`in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Yt){return this.instances.has(e)}getOptions(e=Yt){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(let[e,t]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(e);n===i&&t.resolve(r)}return r}onInit(e,t){let n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);let i=this.instances.get(n);return i&&e(i,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){let n=this.onInitCallbacks.get(t);if(n)for(let r of n)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Zt(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Yt){return this.component?this.component.multipleInstances?e:Yt:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!==`EXPLICIT`}};function Zt(e){return e===Yt?void 0:e}function Qt(e){return e.instantiationMode===`EAGER`}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var $t=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Xt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}},en=[],k;(function(e){e[e.DEBUG=0]=`DEBUG`,e[e.VERBOSE=1]=`VERBOSE`,e[e.INFO=2]=`INFO`,e[e.WARN=3]=`WARN`,e[e.ERROR=4]=`ERROR`,e[e.SILENT=5]=`SILENT`})(k||={});var tn={debug:k.DEBUG,verbose:k.VERBOSE,info:k.INFO,warn:k.WARN,error:k.ERROR,silent:k.SILENT},nn=k.INFO,rn={[k.DEBUG]:`log`,[k.VERBOSE]:`log`,[k.INFO]:`info`,[k.WARN]:`warn`,[k.ERROR]:`error`},an=(e,t,...n)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),i=rn[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)},on=class{constructor(e){this.name=e,this._logLevel=nn,this._logHandler=an,this._userLogHandler=null,en.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in k))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e==`string`?tn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!=`function`)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,k.DEBUG,...e),this._logHandler(this,k.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,k.VERBOSE,...e),this._logHandler(this,k.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,k.INFO,...e),this._logHandler(this,k.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,k.WARN,...e),this._logHandler(this,k.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,k.ERROR,...e),this._logHandler(this,k.ERROR,...e)}},sn=(e,t)=>t.some(t=>e instanceof t),cn,ln;function un(){return cn||=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]}function dn(){return ln||=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey]}var fn=new WeakMap,pn=new WeakMap,mn=new WeakMap,hn=new WeakMap,gn=new WeakMap;function _n(e){let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`success`,i),e.removeEventListener(`error`,a)},i=()=>{t(Cn(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener(`success`,i),e.addEventListener(`error`,a)});return t.then(t=>{t instanceof IDBCursor&&fn.set(t,e)}).catch(()=>{}),gn.set(t,e),t}function vn(e){if(pn.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`complete`,i),e.removeEventListener(`error`,a),e.removeEventListener(`abort`,a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException(`AbortError`,`AbortError`)),r()};e.addEventListener(`complete`,i),e.addEventListener(`error`,a),e.addEventListener(`abort`,a)});pn.set(e,t)}var yn={get(e,t,n){if(e instanceof IDBTransaction){if(t===`done`)return pn.get(e);if(t===`objectStoreNames`)return e.objectStoreNames||mn.get(e);if(t===`store`)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Cn(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t===`done`||t===`store`)?!0:t in e}};function bn(e){yn=e(yn)}function xn(e){return e===IDBDatabase.prototype.transaction&&!(`objectStoreNames`in IDBTransaction.prototype)?function(t,...n){let r=e.call(wn(this),t,...n);return mn.set(r,t.sort?t.sort():[t]),Cn(r)}:dn().includes(e)?function(...t){return e.apply(wn(this),t),Cn(fn.get(this))}:function(...t){return Cn(e.apply(wn(this),t))}}function Sn(e){return typeof e==`function`?xn(e):(e instanceof IDBTransaction&&vn(e),sn(e,un())?new Proxy(e,yn):e)}function Cn(e){if(e instanceof IDBRequest)return _n(e);if(hn.has(e))return hn.get(e);let t=Sn(e);return t!==e&&(hn.set(e,t),gn.set(t,e)),t}var wn=e=>gn.get(e);function Tn(e,t,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){let o=indexedDB.open(e,t),s=Cn(o);return r&&o.addEventListener(`upgradeneeded`,e=>{r(Cn(o.result),e.oldVersion,e.newVersion,Cn(o.transaction),e)}),n&&o.addEventListener(`blocked`,e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{a&&e.addEventListener(`close`,()=>a()),i&&e.addEventListener(`versionchange`,e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}var En=[`get`,`getKey`,`getAll`,`getAllKeys`,`count`],Dn=[`put`,`add`,`delete`,`clear`],On=new Map;function kn(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t==`string`))return;if(On.get(t))return On.get(t);let n=t.replace(/FromIndex$/,``),r=t!==n,i=Dn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||En.includes(n)))return;let a=async function(e,...t){let a=this.transaction(e,i?`readwrite`:`readonly`),o=a.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&a.done]))[0]};return On.set(t,a),a}bn(e=>({...e,get:(t,n,r)=>kn(t,n)||e.get(t,n,r),has:(t,n)=>!!kn(t,n)||e.has(t,n)}));
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var An=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(jn(e)){let t=e.getImmediate();return`${t.library}/${t.version}`}else return null}).filter(e=>e).join(` `)}};function jn(e){return e.getComponent()?.type===`VERSION`}var Mn=`@firebase/app`,Nn=`0.14.4`,Pn=new on(`@firebase/app`),Fn=`@firebase/app-compat`,In=`@firebase/analytics-compat`,Ln=`@firebase/analytics`,Rn=`@firebase/app-check-compat`,zn=`@firebase/app-check`,Bn=`@firebase/auth`,Vn=`@firebase/auth-compat`,Hn=`@firebase/database`,Un=`@firebase/data-connect`,Wn=`@firebase/database-compat`,Gn=`@firebase/functions`,Kn=`@firebase/functions-compat`,qn=`@firebase/installations`,Jn=`@firebase/installations-compat`,Yn=`@firebase/messaging`,Xn=`@firebase/messaging-compat`,Zn=`@firebase/performance`,Qn=`@firebase/performance-compat`,$n=`@firebase/remote-config`,er=`@firebase/remote-config-compat`,tr=`@firebase/storage`,nr=`@firebase/storage-compat`,rr=`@firebase/firestore`,ir=`@firebase/ai`,ar=`@firebase/firestore-compat`,or=`firebase`,sr=`12.4.0`,cr=`[DEFAULT]`,lr={[Mn]:`fire-core`,[Fn]:`fire-core-compat`,[Ln]:`fire-analytics`,[In]:`fire-analytics-compat`,[zn]:`fire-app-check`,[Rn]:`fire-app-check-compat`,[Bn]:`fire-auth`,[Vn]:`fire-auth-compat`,[Hn]:`fire-rtdb`,[Un]:`fire-data-connect`,[Wn]:`fire-rtdb-compat`,[Gn]:`fire-fn`,[Kn]:`fire-fn-compat`,[qn]:`fire-iid`,[Jn]:`fire-iid-compat`,[Yn]:`fire-fcm`,[Xn]:`fire-fcm-compat`,[Zn]:`fire-perf`,[Qn]:`fire-perf-compat`,[$n]:`fire-rc`,[er]:`fire-rc-compat`,[tr]:`fire-gcs`,[nr]:`fire-gcs-compat`,[rr]:`fire-fst`,[ar]:`fire-fst-compat`,[ir]:`fire-vertex`,"fire-js":`fire-js`,[or]:`fire-js-all`},ur=new Map,dr=new Map,fr=new Map;function pr(e,t){try{e.container.addComponent(t)}catch(n){Pn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function mr(e){let t=e.name;if(fr.has(t))return Pn.debug(`There were multiple attempts to register component ${t}.`),!1;fr.set(t,e);for(let t of ur.values())pr(t,e);for(let t of dr.values())pr(t,e);return!0}function hr(e,t){let n=e.container.getProvider(`heartbeat`).getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function gr(e){return e==null?!1:e.settings!==void 0}var _r=new yt(`app`,`Firebase`,{"no-app":`No Firebase App '{$appName}' has been created - call initializeApp() first`,"bad-app-name":`Illegal App name: '{$appName}'`,"duplicate-app":`Firebase App named '{$appName}' already exists with different options or config`,"app-deleted":`Firebase App named '{$appName}' already deleted`,"server-app-deleted":`Firebase Server App has been deleted`,"no-options":`Need to provide options, when not being deployed to hosting via source.`,"invalid-app-argument":`firebase.{$appName}() takes either no argument or a Firebase App instance.`,"invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":`Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.`,"idb-get":`Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.`,"idb-set":`Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.`,"idb-delete":`Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.`,"finalization-registry-not-supported":`FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.`,"invalid-server-app-environment":`FirebaseServerApp is not for use in browser environments.`}),vr=class{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Jt(`app`,()=>this,`PUBLIC`))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _r.create(`app-deleted`,{appName:this._name})}},yr=sr;function br(e,t={}){let n=e;typeof t!=`object`&&(t={name:t});let r={name:cr,automaticDataCollectionEnabled:!0,...t},i=r.name;if(typeof i!=`string`||!i)throw _r.create(`bad-app-name`,{appName:String(i)});if(n||=Je(),!n)throw _r.create(`no-options`);let a=ur.get(i);if(a){if(jt(n,a.options)&&jt(r,a.config))return a;throw _r.create(`duplicate-app`,{appName:i})}let o=new $t(i);for(let e of fr.values())o.addComponent(e);let s=new vr(n,r,o);return ur.set(i,s),s}function xr(e=cr){let t=ur.get(e);if(!t&&e===`[DEFAULT]`&&Je())return br();if(!t)throw _r.create(`no-app`,{appName:e});return t}function Sr(e,t,n){let r=lr[e]??e;n&&(r+=`-${n}`);let i=r.match(/\s|\//),a=t.match(/\s|\//);if(i||a){let e=[`Unable to register library "${r}" with version "${t}":`];i&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&e.push(`and`),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Pn.warn(e.join(` `));return}mr(new Jt(`${r}-version`,()=>({library:r,version:t}),`VERSION`))}
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Cr=`firebase-heartbeat-database`,wr=1,Tr=`firebase-heartbeat-store`,Er=null;function Dr(){return Er||=Tn(Cr,wr,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Tr)}catch(e){console.warn(e)}}}}).catch(e=>{throw _r.create(`idb-open`,{originalErrorMessage:e.message})}),Er}async function Or(e){try{let t=(await Dr()).transaction(Tr),n=await t.objectStore(Tr).get(Ar(e));return await t.done,n}catch(e){if(e instanceof vt)Pn.warn(e.message);else{let t=_r.create(`idb-get`,{originalErrorMessage:e?.message});Pn.warn(t.message)}}}async function kr(e,t){try{let n=(await Dr()).transaction(Tr,`readwrite`);await n.objectStore(Tr).put(t,Ar(e)),await n.done}catch(e){if(e instanceof vt)Pn.warn(e.message);else{let t=_r.create(`idb-set`,{originalErrorMessage:e?.message});Pn.warn(t.message)}}}function Ar(e){return`${e.name}!${e.options.appId}`}
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var jr=1024,Mr=30,Nr=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider(`app`).getImmediate();this._storage=new Ir(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{let e=this.container.getProvider(`platform-logger`).getImmediate().getPlatformInfoString(),t=Pr();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))return;if(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats.length>Mr){let e=Rr(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Pn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return``;let e=Pr(),{heartbeatsToSend:t,unsentEntries:n}=Fr(this._heartbeatsCache.heartbeats),r=Ie(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return Pn.warn(e),``}}};function Pr(){return new Date().toISOString().substring(0,10)}function Fr(e,t=jr){let n=[],r=e.slice();for(let i of e){let e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),Lr(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Lr(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Ir=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mt()?ht().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let e=await Or(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return kr(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return kr(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}else return}};function Lr(e){return Ie(JSON.stringify({version:2,heartbeats:e})).length}function Rr(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function zr(e){mr(new Jt(`platform-logger`,e=>new An(e),`PRIVATE`)),mr(new Jt(`heartbeat`,e=>new Nr(e),`PRIVATE`)),Sr(Mn,Nn,e),Sr(Mn,Nn,`esm2020`),Sr(`fire-js`,``)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
zr(``),Sr(`firebase`,`12.4.0`,`app`);function Br(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Vr=Br,Hr=new yt(`auth`,`Firebase`,Br()),Ur=new on(`@firebase/auth`);function Wr(e,...t){Ur.logLevel<=k.WARN&&Ur.warn(`Auth (${yr}): ${e}`,...t)}function Gr(e,...t){Ur.logLevel<=k.ERROR&&Ur.error(`Auth (${yr}): ${e}`,...t)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Kr(e,...t){throw Zr(e,...t)}function qr(e,...t){return Zr(e,...t)}function Jr(e,t,n){let r={...Vr(),[t]:n};return new yt(`auth`,`Firebase`,r).create(t,{appName:e.name})}function Yr(e){return Jr(e,`operation-not-supported-in-this-environment`,`Operations that alter the current user are not supported in conjunction with FirebaseServerApp`)}function Xr(e,t,n){let r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&Kr(e,`argument-error`),Jr(e,`argument-error`,`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Zr(e,...t){if(typeof e!=`string`){let n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return Hr.create(e,...t)}function A(e,t,...n){if(!e)throw Zr(t,...n)}function Qr(e){let t=`INTERNAL ASSERTION FAILED: `+e;throw Gr(t),Error(t)}function $r(e,t){e||Qr(t)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function ei(){return typeof self<`u`&&self.location?.href||``}function ti(){return ni()===`http:`||ni()===`https:`}function ni(){return typeof self<`u`&&self.location?.protocol||null}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function ri(){return typeof navigator<`u`&&navigator&&`onLine`in navigator&&typeof navigator.onLine==`boolean`&&(ti()||lt()||`connection`in navigator)?navigator.onLine:!0}function ii(){if(typeof navigator>`u`)return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var ai=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,$r(t>e,`Short delay should be less than long delay!`),this.isMobile=ot()||ut()}get(){return ri()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function oi(e,t){$r(e.emulator,`Emulator should always be set here`);let{url:n}=e.emulator;return t?`${n}${t.startsWith(`/`)?t.slice(1):t}`:n}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var si=class{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<`u`&&`fetch`in self)return self.fetch;if(typeof globalThis<`u`&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<`u`)return fetch;Qr(`Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<`u`&&`Headers`in self)return self.Headers;if(typeof globalThis<`u`&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<`u`)return Headers;Qr(`Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<`u`&&`Response`in self)return self.Response;if(typeof globalThis<`u`&&globalThis.Response)return globalThis.Response;if(typeof Response<`u`)return Response;Qr(`Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}},ci={CREDENTIAL_MISMATCH:`custom-token-mismatch`,MISSING_CUSTOM_TOKEN:`internal-error`,INVALID_IDENTIFIER:`invalid-email`,MISSING_CONTINUE_URI:`internal-error`,INVALID_PASSWORD:`wrong-password`,MISSING_PASSWORD:`missing-password`,INVALID_LOGIN_CREDENTIALS:`invalid-credential`,EMAIL_EXISTS:`email-already-in-use`,PASSWORD_LOGIN_DISABLED:`operation-not-allowed`,INVALID_IDP_RESPONSE:`invalid-credential`,INVALID_PENDING_TOKEN:`invalid-credential`,FEDERATED_USER_ID_ALREADY_LINKED:`credential-already-in-use`,MISSING_REQ_TYPE:`internal-error`,EMAIL_NOT_FOUND:`user-not-found`,RESET_PASSWORD_EXCEED_LIMIT:`too-many-requests`,EXPIRED_OOB_CODE:`expired-action-code`,INVALID_OOB_CODE:`invalid-action-code`,MISSING_OOB_CODE:`internal-error`,CREDENTIAL_TOO_OLD_LOGIN_AGAIN:`requires-recent-login`,INVALID_ID_TOKEN:`invalid-user-token`,TOKEN_EXPIRED:`user-token-expired`,USER_NOT_FOUND:`user-token-expired`,TOO_MANY_ATTEMPTS_TRY_LATER:`too-many-requests`,PASSWORD_DOES_NOT_MEET_REQUIREMENTS:`password-does-not-meet-requirements`,INVALID_CODE:`invalid-verification-code`,INVALID_SESSION_INFO:`invalid-verification-id`,INVALID_TEMPORARY_PROOF:`invalid-credential`,MISSING_SESSION_INFO:`missing-verification-id`,SESSION_EXPIRED:`code-expired`,MISSING_ANDROID_PACKAGE_NAME:`missing-android-pkg-name`,UNAUTHORIZED_DOMAIN:`unauthorized-continue-uri`,INVALID_OAUTH_CLIENT_ID:`invalid-oauth-client-id`,ADMIN_ONLY_OPERATION:`admin-restricted-operation`,INVALID_MFA_PENDING_CREDENTIAL:`invalid-multi-factor-session`,MFA_ENROLLMENT_NOT_FOUND:`multi-factor-info-not-found`,MISSING_MFA_ENROLLMENT_ID:`missing-multi-factor-info`,MISSING_MFA_PENDING_CREDENTIAL:`missing-multi-factor-session`,SECOND_FACTOR_EXISTS:`second-factor-already-in-use`,SECOND_FACTOR_LIMIT_EXCEEDED:`maximum-second-factor-count-exceeded`,BLOCKING_FUNCTION_ERROR_RESPONSE:`internal-error`,RECAPTCHA_NOT_ENABLED:`recaptcha-not-enabled`,MISSING_RECAPTCHA_TOKEN:`missing-recaptcha-token`,INVALID_RECAPTCHA_TOKEN:`invalid-recaptcha-token`,INVALID_RECAPTCHA_ACTION:`invalid-recaptcha-action`,MISSING_CLIENT_TYPE:`missing-client-type`,MISSING_RECAPTCHA_VERSION:`missing-recaptcha-version`,INVALID_RECAPTCHA_VERSION:`invalid-recaptcha-version`,INVALID_REQ_TYPE:`invalid-req-type`},li=[`/v1/accounts:signInWithCustomToken`,`/v1/accounts:signInWithEmailLink`,`/v1/accounts:signInWithIdp`,`/v1/accounts:signInWithPassword`,`/v1/accounts:signInWithPhoneNumber`,`/v1/token`],ui=new ai(3e4,6e4);function di(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function fi(e,t,n,r,i={}){return pi(e,i,async()=>{let i={},a={};r&&(t===`GET`?a=r:i={body:JSON.stringify(r)});let o=Nt({key:e.config.apiKey,...a}).slice(1),s=await e._getAdditionalHeaders();s[`Content-Type`]=`application/json`,e.languageCode&&(s[`X-Firebase-Locale`]=e.languageCode);let c={method:t,headers:s,...i};return ct()||(c.referrerPolicy=`no-referrer`),e.emulatorConfig&&Ze(e.emulatorConfig.host)&&(c.credentials=`include`),si.fetch()(await hi(e,e.config.apiHost,n,o),c)})}async function pi(e,t,n){e._canInitEmulator=!1;let r={...ci,...t};try{let t=new _i(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();let a=await i.json();if(`needConfirmation`in a)throw vi(e,`account-exists-with-different-credential`,a);if(i.ok&&!(`errorMessage`in a))return a;{let[t,n]=(i.ok?a.errorMessage:a.error.message).split(` : `);if(t===`FEDERATED_USER_ID_ALREADY_LINKED`)throw vi(e,`credential-already-in-use`,a);if(t===`EMAIL_EXISTS`)throw vi(e,`email-already-in-use`,a);if(t===`USER_DISABLED`)throw vi(e,`user-disabled`,a);let o=r[t]||t.toLowerCase().replace(/[_\s]+/g,`-`);if(n)throw Jr(e,o,n);Kr(e,o)}}catch(t){if(t instanceof vt)throw t;Kr(e,`network-request-failed`,{message:String(t)})}}async function mi(e,t,n,r,i={}){let a=await fi(e,t,n,r,i);return`mfaPendingCredential`in a&&Kr(e,`multi-factor-auth-required`,{_serverResponse:a}),a}async function hi(e,t,n,r){let i=`${t}${n}?${r}`,a=e,o=a.config.emulator?oi(e.config,i):`${e.config.apiScheme}://${i}`;return li.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()===`COOKIE`)?a._getPersistence()._getFinalTarget(o).toString():o}function gi(e){switch(e){case`ENFORCE`:return`ENFORCE`;case`AUDIT`:return`AUDIT`;case`OFF`:return`OFF`;default:return`ENFORCEMENT_STATE_UNSPECIFIED`}}var _i=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(qr(this.auth,`network-request-failed`)),ui.get())})}};function vi(e,t,n){let r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=qr(e,t,r);return i.customData._tokenResponse=n,i}function yi(e){return e!==void 0&&e.enterprise!==void 0}var bi=class{constructor(e){if(this.siteKey=``,this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw Error(`recaptchaKey undefined`);this.siteKey=e.recaptchaKey.split(`/`)[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return gi(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)===`ENFORCE`||this.getProviderEnforcementState(e)===`AUDIT`}isAnyProviderEnabled(){return this.isProviderEnabled(`EMAIL_PASSWORD_PROVIDER`)||this.isProviderEnabled(`PHONE_PROVIDER`)}};async function xi(e,t){return fi(e,`GET`,`/v2/recaptchaConfig`,di(e,t))}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function Si(e,t){return fi(e,`POST`,`/v1/accounts:delete`,t)}async function Ci(e,t){return fi(e,`POST`,`/v1/accounts:lookup`,t)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function wi(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Ti(e,t=!1){let n=O(e),r=await n.getIdToken(t),i=Di(r);A(i&&i.exp&&i.auth_time&&i.iat,n.auth,`internal-error`);let a=typeof i.firebase==`object`?i.firebase:void 0,o=a?.sign_in_provider;return{claims:i,token:r,authTime:wi(Ei(i.auth_time)),issuedAtTime:wi(Ei(i.iat)),expirationTime:wi(Ei(i.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function Ei(e){return Number(e)*1e3}function Di(e){let[t,n,r]=e.split(`.`);if(t===void 0||n===void 0||r===void 0)return Gr(`JWT malformed, contained fewer than 3 sections`),null;try{let e=Le(n);return e?JSON.parse(e):(Gr(`Failed to decode base64 JWT payload`),null)}catch(e){return Gr(`Caught error parsing JWT payload as JSON`,e?.toString()),null}}function Oi(e){let t=Di(e);return A(t,`internal-error`),A(t.exp!==void 0,`internal-error`),A(t.iat!==void 0,`internal-error`),Number(t.exp)-Number(t.iat)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function ki(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof vt&&Ai(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}function Ai({code:e}){return e===`auth/user-disabled`||e===`auth/user-token-expired`}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var ji=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;let e=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code===`auth/network-request-failed`&&this.schedule(!0);return}this.schedule()}},Mi=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=wi(this.lastLoginAt),this.creationTime=wi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function Ni(e){let t=e.auth,n=await e.getIdToken(),r=await ki(e,Ci(t,{idToken:n}));A(r?.users.length,t,`internal-error`);let i=r.users[0];e._notifyReloadListener(i);let a=i.providerUserInfo?.length?Ii(i.providerUserInfo):[],o=Fi(e.providerData,a),s=e.isAnonymous,c=!(e.email&&i.passwordHash)&&!o?.length,l=s?c:!1,u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Mi(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(e,u)}async function Pi(e){let t=O(e);await Ni(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Fi(e,t){return[...e.filter(e=>!t.some(t=>t.providerId===e.providerId)),...t]}function Ii(e){return e.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||``,displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function Li(e,t){let n=await pi(e,{},async()=>{let n=Nt({grant_type:`refresh_token`,refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,a=await hi(e,r,`/v1/token`,`key=${i}`),o=await e._getAdditionalHeaders();o[`Content-Type`]=`application/x-www-form-urlencoded`;let s={method:`POST`,headers:o,body:n};return e.emulatorConfig&&Ze(e.emulatorConfig.host)&&(s.credentials=`include`),si.fetch()(a,s)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Ri(e,t){return fi(e,`POST`,`/v2/accounts:revokeToken`,di(e,t))}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var zi=class e{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){A(e.idToken,`internal-error`),A(e.idToken!==void 0,`internal-error`),A(e.refreshToken!==void 0,`internal-error`);let t=`expiresIn`in e&&e.expiresIn!==void 0?Number(e.expiresIn):Oi(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){A(e.length!==0,`internal-error`);let t=Oi(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(A(this.refreshToken,e,`user-token-expired`),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:n,refreshToken:r,expiresIn:i}=await Li(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,n){let{refreshToken:r,accessToken:i,expirationTime:a}=n,o=new e;return r&&(A(typeof r==`string`,`internal-error`,{appName:t}),o.refreshToken=r),i&&(A(typeof i==`string`,`internal-error`,{appName:t}),o.accessToken=i),a&&(A(typeof a==`number`,`internal-error`,{appName:t}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new e,this.toJSON())}_performRefresh(){return Qr(`not implemented`)}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Bi(e,t){A(typeof e==`string`||e===void 0,`internal-error`,{appName:t})}var Vi=class e{constructor({uid:e,auth:t,stsTokenManager:n,...r}){this.providerId=`firebase`,this.proactiveRefresh=new ji(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Mi(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){let t=await ki(this,this.stsTokenManager.getToken(this.auth,e));return A(t,this.auth,`internal-error`),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Ti(this,e)}reload(){return Pi(this)}_assign(e){this!==e&&(A(this.uid===e.uid,this.auth,`internal-error`),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>({...e})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(t){let n=new e({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){A(!this.reloadListener,this.auth,`internal-error`),this.reloadListener=e,this.reloadUserInfo&&=(this._notifyReloadListener(this.reloadUserInfo),null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Ni(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gr(this.auth.app))return Promise.reject(Yr(this.auth));let e=await this.getIdToken();return await ki(this,Si(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||``}static _fromJSON(t,n){let r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,o=n.photoURL??void 0,s=n.tenantId??void 0,c=n._redirectEventId??void 0,l=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:p,providerData:m,stsTokenManager:h}=n;A(d&&h,t,`internal-error`);let g=zi.fromJSON(this.name,h);A(typeof d==`string`,t,`internal-error`),Bi(r,t.name),Bi(i,t.name),A(typeof f==`boolean`,t,`internal-error`),A(typeof p==`boolean`,t,`internal-error`),Bi(a,t.name),Bi(o,t.name),Bi(s,t.name),Bi(c,t.name),Bi(l,t.name),Bi(u,t.name);let _=new e({uid:d,auth:t,email:i,emailVerified:f,displayName:r,isAnonymous:p,photoURL:o,phoneNumber:a,tenantId:s,stsTokenManager:g,createdAt:l,lastLoginAt:u});return m&&Array.isArray(m)&&(_.providerData=m.map(e=>({...e}))),c&&(_._redirectEventId=c),_}static async _fromIdTokenResponse(t,n,r=!1){let i=new zi;i.updateFromServerResponse(n);let a=new e({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await Ni(a),a}static async _fromGetAccountInfoResponse(t,n,r){let i=n.users[0];A(i.localId!==void 0,`internal-error`);let a=i.providerUserInfo===void 0?[]:Ii(i.providerUserInfo),o=!(i.email&&i.passwordHash)&&!a?.length,s=new zi;s.updateFromIdToken(r);let c=new e({uid:i.localId,auth:t,stsTokenManager:s,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Mi(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(c,l),c}},Hi=new Map;function Ui(e){$r(e instanceof Function,`Expected a class definition`);let t=Hi.get(e);return t?($r(t instanceof e,`Instance stored in cache mismatched with class`),t):(t=new e,Hi.set(e,t),t)}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Wi=class{constructor(){this.type=`NONE`,this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){let t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}};Wi.type=`NONE`;var Gi=Wi;
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Ki(e,t,n){return`firebase:${e}:${t}:${n}`}var qi=class e{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;let{config:r,name:i}=this.auth;this.fullUserKey=Ki(this.userKey,r.apiKey,i),this.fullPersistenceKey=Ki(`persistence`,r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e==`string`){let t=await Ci(this.auth,{idToken:e}).catch(()=>void 0);return t?Vi._fromGetAccountInfoResponse(this.auth,t,e):null}return Vi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r=`authUser`){if(!n.length)return new e(Ui(Gi),t,r);let i=(await Promise.all(n.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e),a=i[0]||Ui(Gi),o=Ki(r,t.config.apiKey,t.name),s=null;for(let e of n)try{let n=await e._get(o);if(n){let r;if(typeof n==`string`){let e=await Ci(t,{idToken:n}).catch(()=>void 0);if(!e)break;r=await Vi._fromGetAccountInfoResponse(t,e,n)}else r=Vi._fromJSON(t,n);e!==a&&(s=r),a=e;break}}catch{}let c=i.filter(e=>e._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new e(a,t,r):(a=c[0],s&&await a._set(o,s.toJSON()),await Promise.all(n.map(async e=>{if(e!==a)try{await e._remove(o)}catch{}})),new e(a,t,r))}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Ji(e){let t=e.toLowerCase();if(t.includes(`opera/`)||t.includes(`opr/`)||t.includes(`opios/`))return`Opera`;if(Qi(t))return`IEMobile`;if(t.includes(`msie`)||t.includes(`trident/`))return`IE`;if(t.includes(`edge/`))return`Edge`;if(Yi(t))return`Firefox`;if(t.includes(`silk/`))return`Silk`;if(j(t))return`Blackberry`;if(ea(t))return`Webos`;if(Xi(t))return`Safari`;if((t.includes(`chrome/`)||Zi(t))&&!t.includes(`edge/`))return`Chrome`;if($i(t))return`Android`;{let t=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(t?.length===2)return t[1]}return`Other`}function Yi(e=at()){return/firefox\//i.test(e)}function Xi(e=at()){let t=e.toLowerCase();return t.includes(`safari/`)&&!t.includes(`chrome/`)&&!t.includes(`crios/`)&&!t.includes(`android`)}function Zi(e=at()){return/crios\//i.test(e)}function Qi(e=at()){return/iemobile/i.test(e)}function $i(e=at()){return/android/i.test(e)}function j(e=at()){return/blackberry/i.test(e)}function ea(e=at()){return/webos/i.test(e)}function ta(e=at()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function na(e=at()){return ta(e)&&!!window.navigator?.standalone}function ra(){return dt()&&document.documentMode===10}function ia(e=at()){return ta(e)||$i(e)||ea(e)||j(e)||/windows phone/i.test(e)||Qi(e)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function aa(e,t=[]){let n;switch(e){case`Browser`:n=Ji(at());break;case`Worker`:n=`${Ji(at())}-${e}`;break;default:n=e}let r=t.length?t.join(`,`):`FirebaseCore-web`;return`${n}/JsCore/${yr}/${r}`}
/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var oa=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let n=t=>new Promise((n,r)=>{try{let r=e(t);n(r)}catch(e){r(e)}});n.onAbort=t,this.queue.push(n);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){t.reverse();for(let e of t)try{e()}catch{}throw this.auth._errorFactory.create(`login-blocked`,{originalMessage:e?.message})}}};
/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function sa(e,t={}){return fi(e,`GET`,`/v2/passwordPolicy`,di(e,t))}
/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var ca=6,la=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??ca,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState===`ENFORCEMENT_STATE_UNSPECIFIED`&&(this.enforcementState=`OFF`),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join(``)??``,this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&=t.meetsMinPasswordLength??!0,t.isValid&&=t.meetsMaxPasswordLength??!0,t.isValid&&=t.containsLowercaseLetter??!0,t.isValid&&=t.containsUppercaseLetter??!0,t.isValid&&=t.containsNumericCharacter??!0,t.isValid&&=t.containsNonAlphanumericCharacter??!0,t}validatePasswordLengthOptions(e,t){let n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>=`a`&&n<=`z`,n>=`A`&&n<=`Z`,n>=`0`&&n<=`9`,this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||=t),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||=n),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||=r),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||=i)}},ua=class{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fa(this),this.idTokenSubscription=new fa(this),this.beforeStateQueue=new oa(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Hr,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ui(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await qi.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await Ci(this,{idToken:e}),n=await Vi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(e){console.warn(`FirebaseServerApp could not login user with provided authIdToken: `,e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(gr(this.app)){let e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),n=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let t=this.redirectUser?._redirectEventId,i=n?._redirectEventId,a=await this.tryRedirectSignIn(e);(!t||t===i)&&a?.user&&(n=a.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(e){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return A(this._popupRedirectResolver,this,`argument-error`),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ni(e)}catch(e){if(e?.code!==`auth/network-request-failed`)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ii()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(gr(this.app))return Promise.reject(Yr(this));let t=e?O(e):null;return t&&A(t.auth.config.apiKey===this.config.apiKey,this,`invalid-user-token`),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&A(this.tenantId===e.tenantId,this,`tenant-id-mismatch`),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return gr(this.app)?Promise.reject(Yr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return gr(this.app)?Promise.reject(Yr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ui(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion===this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?t.validatePassword(e):Promise.reject(this._errorFactory.create(`unsupported-password-policy-schema-version`,{}))}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await sa(this),t=new la(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new yt(`auth`,`Firebase`,e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),n={providerId:`apple.com`,tokenType:`ACCESS_TOKEN`,token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await Ri(this,n)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&Ui(e)||this._popupRedirectResolver;A(t,this,`argument-error`),this.redirectPersistenceManager=await qi.create(this,[Ui(t._redirectPersistence)],`redirectUser`),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};let i=typeof t==`function`?t:t.next.bind(t),a=!1,o=this._isInitialized?Promise.resolve():this._initializationPromise;if(A(o,this,`internal-error`),o.then(()=>{a||i(this.currentUser)}),typeof t==`function`){let i=e.addObserver(t,n,r);return()=>{a=!0,i()}}else{let n=e.addObserver(t);return()=>{a=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return A(this.persistenceManager,this,`internal-error`),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=aa(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e[`X-Firebase-gmpid`]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e[`X-Firebase-Client`]=t);let n=await this._getAppCheckToken();return n&&(e[`X-Firebase-AppCheck`]=n),e}async _getAppCheckToken(){if(gr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Wr(`Error while retrieving App Check token: ${e.error}`),e?.token}};function da(e){return O(e)}var fa=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Lt(e=>this.observer=e)}get next(){return A(this.observer,this.auth,`internal-error`),this.observer.next.bind(this.observer)}},pa={async loadJS(){throw Error(`Unable to load external scripts`)},recaptchaV2Script:``,recaptchaEnterpriseScript:``,gapiScript:``};function ma(e){pa=e}function ha(e){return pa.loadJS(e)}function ga(){return pa.recaptchaEnterpriseScript}function _a(){return pa.gapiScript}function va(e){return`__${e}${Math.floor(Math.random()*1e6)}`}var ya=class{constructor(){this.enterprise=new ba}ready(e){e()}execute(e,t){return Promise.resolve(`token`)}render(e,t){return``}},ba=class{ready(e){e()}execute(e,t){return Promise.resolve(`token`)}render(e,t){return``}},xa=`recaptcha-enterprise`,Sa=`NO_RECAPTCHA`,Ca=class{constructor(e){this.type=xa,this.auth=da(e)}async verify(e=`verify`,t=!1){async function n(e){if(!t){if(e.tenantId==null&&e._agentRecaptchaConfig!=null)return e._agentRecaptchaConfig.siteKey;if(e.tenantId!=null&&e._tenantRecaptchaConfigs[e.tenantId]!==void 0)return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{xi(e,{clientType:`CLIENT_TYPE_WEB`,version:`RECAPTCHA_ENTERPRISE`}).then(r=>{if(r.recaptchaKey===void 0)n(Error(`recaptcha Enterprise site key undefined`));else{let n=new bi(r);return e.tenantId==null?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}}).catch(e=>{n(e)})})}function r(t,n,r){let i=window.grecaptcha;yi(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Sa)})}):r(Error(`No reCAPTCHA enterprise script loaded.`))}return this.auth.settings.appVerificationDisabledForTesting?new ya().execute(`siteKey`,{action:`verify`}):new Promise((e,i)=>{n(this.auth).then(n=>{if(!t&&yi(window.grecaptcha))r(n,e,i);else{if(typeof window>`u`){i(Error(`RecaptchaVerifier is only supported in browser`));return}let t=ga();t.length!==0&&(t+=n),ha(t).then(()=>{r(n,e,i)}).catch(e=>{i(e)})}}).catch(e=>{i(e)})})}};async function wa(e,t,n,r=!1,i=!1){let a=new Ca(e),o;if(i)o=Sa;else try{o=await a.verify(n)}catch{o=await a.verify(n,!0)}let s={...t};if(n===`mfaSmsEnrollment`||n===`mfaSmsSignIn`){if(`phoneEnrollmentInfo`in s){let e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.recaptchaToken;Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:`CLIENT_TYPE_WEB`,recaptchaVersion:`RECAPTCHA_ENTERPRISE`}})}else if(`phoneSignInInfo`in s){let e=s.phoneSignInInfo.recaptchaToken;Object.assign(s,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:`CLIENT_TYPE_WEB`,recaptchaVersion:`RECAPTCHA_ENTERPRISE`}})}return s}return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:`CLIENT_TYPE_WEB`}),Object.assign(s,{recaptchaVersion:`RECAPTCHA_ENTERPRISE`}),s}async function Ta(e,t,n,r,i){if(i===`EMAIL_PASSWORD_PROVIDER`)if(e._getRecaptchaConfig()?.isProviderEnabled(`EMAIL_PASSWORD_PROVIDER`)){let i=await wa(e,t,n,n===`getOobCode`);return r(e,i)}else return r(e,t).catch(async i=>{if(i.code===`auth/missing-recaptcha-token`){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let i=await wa(e,t,n,n===`getOobCode`);return r(e,i)}else return Promise.reject(i)});else if(i===`PHONE_PROVIDER`)if(e._getRecaptchaConfig()?.isProviderEnabled(`PHONE_PROVIDER`)){let i=await wa(e,t,n);return r(e,i).catch(async i=>{if(e._getRecaptchaConfig()?.getProviderEnforcementState(`PHONE_PROVIDER`)===`AUDIT`&&(i.code===`auth/missing-recaptcha-token`||i.code===`auth/invalid-app-credential`)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let i=await wa(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}else{let i=await wa(e,t,n,!1,!0);return r(e,i)}else return Promise.reject(i+` provider is not supported.`)}async function Ea(e){let t=da(e),n=await xi(t,{clientType:`CLIENT_TYPE_WEB`,version:`RECAPTCHA_ENTERPRISE`}),r=new bi(n);t.tenantId==null?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()&&new Ca(t).verify()}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Da(e,t){let n=hr(e,`auth`);if(n.isInitialized()){let e=n.getImmediate(),r=n.getOptions();if(jt(r,t??{}))return e;Kr(e,`already-initialized`)}return n.initialize({options:t})}function Oa(e,t){let n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ui);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}function ka(e,t,n){let r=da(e);A(/^https?:\/\//.test(t),r,`invalid-emulator-scheme`);let i=!!n?.disableWarnings,a=Aa(t),{host:o,port:s}=ja(t),c=s===null?``:`:${s}`,l={url:`${a}//${o}${c}/`},u=Object.freeze({host:o,port:s,protocol:a.replace(`:`,``),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){A(r.config.emulator&&r.emulatorConfig,r,`emulator-config-failed`),A(jt(l,r.config.emulator)&&jt(u,r.emulatorConfig),r,`emulator-config-failed`);return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Ze(o)?(Qe(`${a}//${o}${c}`),it(`Auth`,!0)):i||Na()}function Aa(e){let t=e.indexOf(`:`);return t<0?``:e.substr(0,t+1)}function ja(e){let t=Aa(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:``,port:null};let r=n[2].split(`@`).pop()||``,i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let e=i[1];return{host:e,port:Ma(r.substr(e.length+1))}}else{let[e,t]=r.split(`:`);return{host:e,port:Ma(t)}}}function Ma(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}function Na(){function e(){let e=document.createElement(`p`),t=e.style;e.innerText=`Running in emulator mode. Do not use with production credentials.`,t.position=`fixed`,t.width=`100%`,t.backgroundColor=`#ffffff`,t.border=`.1em solid #000000`,t.color=`#b50000`,t.bottom=`0px`,t.left=`0px`,t.margin=`0px`,t.zIndex=`10000`,t.textAlign=`center`,e.classList.add(`firebase-emulator-warning`),document.body.appendChild(e)}typeof console<`u`&&typeof console.info==`function`&&console.info(`WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.`),typeof window<`u`&&typeof document<`u`&&(document.readyState===`loading`?window.addEventListener(`DOMContentLoaded`,e):e())}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Pa=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Qr(`not implemented`)}_getIdTokenResponse(e){return Qr(`not implemented`)}_linkToIdToken(e,t){return Qr(`not implemented`)}_getReauthenticationResolver(e){return Qr(`not implemented`)}};async function Fa(e,t){return fi(e,`POST`,`/v1/accounts:signUp`,t)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function Ia(e,t){return mi(e,`POST`,`/v1/accounts:signInWithPassword`,di(e,t))}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function La(e,t){return mi(e,`POST`,`/v1/accounts:signInWithEmailLink`,di(e,t))}async function Ra(e,t){return mi(e,`POST`,`/v1/accounts:signInWithEmailLink`,di(e,t))}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var za=class e extends Pa{constructor(e,t,n,r=null){super(`password`,n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(t,n){return new e(t,n,`password`)}static _fromEmailAndCode(t,n,r=null){return new e(t,n,`emailLink`,r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e==`string`?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod===`password`)return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod===`emailLink`)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case`password`:let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:`CLIENT_TYPE_WEB`};return Ta(e,t,`signInWithPassword`,Ia,`EMAIL_PASSWORD_PROVIDER`);case`emailLink`:return La(e,{email:this._email,oobCode:this._password});default:Kr(e,`internal-error`)}}async _linkToIdToken(e,t){switch(this.signInMethod){case`password`:let n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:`CLIENT_TYPE_WEB`};return Ta(e,n,`signUpPassword`,Fa,`EMAIL_PASSWORD_PROVIDER`);case`emailLink`:return Ra(e,{idToken:t,email:this._email,oobCode:this._password});default:Kr(e,`internal-error`)}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function Ba(e,t){return mi(e,`POST`,`/v1/accounts:signInWithIdp`,di(e,t))}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Va=`http://localhost`,Ha=class e extends Pa{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){let n=new e(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Kr(`argument-error`),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){let{providerId:n,signInMethod:r,...i}=typeof t==`string`?JSON.parse(t):t;if(!n||!r)return null;let a=new e(n,r);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){let t=this.buildRequest();return Ba(e,t)}_linkToIdToken(e,t){let n=this.buildRequest();return n.idToken=t,Ba(e,n)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Ba(e,t)}buildRequest(){let e={requestUri:Va,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Nt(t)}return e}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function Ua(e,t){return fi(e,`POST`,`/v1/accounts:sendVerificationCode`,di(e,t))}async function Wa(e,t){return mi(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,di(e,t))}async function Ga(e,t){let n=await mi(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,di(e,t));if(n.temporaryProof)throw vi(e,`account-exists-with-different-credential`,n);return n}var Ka={USER_NOT_FOUND:`user-not-found`};async function qa(e,t){let n={...t,operation:`REAUTH`};return mi(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,di(e,n),Ka)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Ja=class e extends Pa{constructor(e){super(`phone`,`phone`),this.params=e}static _fromVerification(t,n){return new e({verificationId:t,verificationCode:n})}static _fromTokenResponse(t,n){return new e({phoneNumber:t,temporaryProof:n})}_getIdTokenResponse(e){return Wa(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return Ga(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return qa(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(t){typeof t==`string`&&(t=JSON.parse(t));let{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:a}=t;return!r&&!n&&!i&&!a?null:new e({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:a})}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Ya(e){switch(e){case`recoverEmail`:return`RECOVER_EMAIL`;case`resetPassword`:return`PASSWORD_RESET`;case`signIn`:return`EMAIL_SIGNIN`;case`verifyEmail`:return`VERIFY_EMAIL`;case`verifyAndChangeEmail`:return`VERIFY_AND_CHANGE_EMAIL`;case`revertSecondFactorAddition`:return`REVERT_SECOND_FACTOR_ADDITION`;default:return null}}function Xa(e){let t=Pt(Ft(e)).link,n=t?Pt(Ft(t)).deep_link_id:null,r=Pt(Ft(e)).deep_link_id;return(r?Pt(Ft(r)).link:null)||r||n||t||e}var Za=class e{constructor(e){let t=Pt(Ft(e)),n=t.apiKey??null,r=t.oobCode??null,i=Ya(t.mode??null);A(n&&r&&i,`argument-error`),this.apiKey=n,this.operation=i,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(t){let n=Xa(t);try{return new e(n)}catch{return null}}},Qa=class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(e,t){return za._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){let n=Za.parseLink(t);return A(n,`argument-error`),za._fromEmailAndCode(e,n.code,n.tenantId)}};Qa.PROVIDER_ID=`password`,Qa.EMAIL_PASSWORD_SIGN_IN_METHOD=`password`,Qa.EMAIL_LINK_SIGN_IN_METHOD=`emailLink`;
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var $a=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}},eo=class extends $a{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}},to=class e extends eo{constructor(){super(`facebook.com`)}static credential(t){return Ha._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!(`oauthAccessToken`in t)||!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch{return null}}};to.FACEBOOK_SIGN_IN_METHOD=`facebook.com`,to.PROVIDER_ID=`facebook.com`;
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var no=class e extends eo{constructor(){super(`google.com`),this.addScope(`profile`)}static credential(t,n){return Ha._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return e.credential(n,r)}catch{return null}}};no.GOOGLE_SIGN_IN_METHOD=`google.com`,no.PROVIDER_ID=`google.com`;
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var ro=class e extends eo{constructor(){super(`github.com`)}static credential(t){return Ha._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!(`oauthAccessToken`in t)||!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch{return null}}};ro.GITHUB_SIGN_IN_METHOD=`github.com`,ro.PROVIDER_ID=`github.com`;
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var io=class e extends eo{constructor(){super(`twitter.com`)}static credential(t,n){return Ha._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return e.credential(n,r)}catch{return null}}};io.TWITTER_SIGN_IN_METHOD=`twitter.com`,io.PROVIDER_ID=`twitter.com`;
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var ao=class e{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){let a=await Vi._fromIdTokenResponse(t,r,i),o=oo(r);return new e({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);let i=oo(r);return new e({user:t,providerId:i,_tokenResponse:r,operationType:n})}};function oo(e){return e.providerId?e.providerId:`phoneNumber`in e?`phone`:null}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var so=class e extends vt{constructor(t,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,e.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new e(t,n,r,i)}};function co(e,t,n,r){return(t===`reauthenticate`?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{throw n.code===`auth/multi-factor-auth-required`?so._fromErrorAndOperation(e,n,t,r):n})}async function lo(e,t,n=!1){let r=await ki(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return ao._forOperation(e,`link`,r)}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function uo(e,t,n=!1){let{auth:r}=e;if(gr(r.app))return Promise.reject(Yr(r));let i=`reauthenticate`;try{let a=await ki(e,co(r,i,t,e),n);A(a.idToken,r,`internal-error`);let o=Di(a.idToken);A(o,r,`internal-error`);let{sub:s}=o;return A(e.uid===s,r,`user-mismatch`),ao._forOperation(e,i,a)}catch(e){throw e?.code===`auth/user-not-found`&&Kr(r,`user-mismatch`),e}}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function fo(e,t,n=!1){if(gr(e.app))return Promise.reject(Yr(e));let r=`signIn`,i=await co(e,r,t),a=await ao._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(a.user),a}function po(e,t,n,r){return O(e).onIdTokenChanged(t,n,r)}function mo(e,t,n){return O(e).beforeAuthStateChanged(t,n)}function ho(e,t,n,r){return O(e).onAuthStateChanged(t,n,r)}function go(e){return O(e).signOut()}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function _o(e,t){return fi(e,`POST`,`/v2/accounts/mfaEnrollment:start`,di(e,t))}function vo(e,t){return fi(e,`POST`,`/v2/accounts/mfaEnrollment:finalize`,di(e,t))}function yo(e,t){return fi(e,`POST`,`/v2/accounts/mfaEnrollment:start`,di(e,t))}function bo(e,t){return fi(e,`POST`,`/v2/accounts/mfaEnrollment:finalize`,di(e,t))}var xo=`__sak`,So=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(xo,`1`),this.storage.removeItem(xo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}},Co=1e3,wo=10,To=class extends So{constructor(){super(()=>window.localStorage,`LOCAL`),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ia(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let t of Object.keys(this.listeners)){let n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});return}let n=e.key;t?this.detachListener():this.stopPolling();let r=()=>{let e=this.storage.getItem(n);!t&&this.localCache[n]===e||this.notifyListeners(n,e)},i=this.storage.getItem(n);ra()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,wo):r()}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent(`storage`,{key:e,oldValue:t,newValue:n}),!0)})},Co)}stopPolling(){this.pollTimer&&=(clearInterval(this.pollTimer),null)}attachListener(){window.addEventListener(`storage`,this.boundEventHandler)}detachListener(){window.removeEventListener(`storage`,this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){let t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}};To.type=`LOCAL`;var Eo=To,Do=1e3;function Oo(e){let t=e.replace(/[\\^$.*+?()[\]{}|]/g,`\\$&`),n=RegExp(`${t}=([^;]+)`);return document.cookie.match(n)?.[1]??null}function ko(e){return`${window.location.protocol===`http:`?`__dev_`:`__HOST-`}FIREBASE_${e.split(`:`)[3]}`}var Ao=class{constructor(){this.type=`COOKIE`,this.listenerUnsubscribes=new Map}_getFinalTarget(e){let t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set(`finalTarget`,e),t}async _isAvailable(){return typeof isSecureContext==`boolean`&&!isSecureContext||typeof navigator>`u`||typeof document>`u`?!1:navigator.cookieEnabled??!0}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;let t=ko(e);return window.cookieStore?(await window.cookieStore.get(t))?.value:Oo(t)}async _remove(e){if(!this._isAvailable()||!await this._get(e))return;let t=ko(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch(`/__cookies__`,{method:`DELETE`}).catch(()=>void 0)}_addListener(e,t){if(!this._isAvailable())return;let n=ko(e);if(window.cookieStore){let e=(e=>{let r=e.changed.find(e=>e.name===n);r&&t(r.value),e.deleted.find(e=>e.name===n)&&t(null)});return this.listenerUnsubscribes.set(t,()=>window.cookieStore.removeEventListener(`change`,e)),window.cookieStore.addEventListener(`change`,e)}let r=Oo(n),i=setInterval(()=>{let e=Oo(n);e!==r&&(t(e),r=e)},Do);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){let n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}};Ao.type=`COOKIE`;
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var jo=class extends So{constructor(){super(()=>window.sessionStorage,`SESSION`)}_addListener(e,t){}_removeListener(e,t){}};jo.type=`SESSION`;var Mo=jo;
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function M(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}}))}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var No=class e{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let n=this.receivers.find(e=>e.isListeningto(t));if(n)return n;let r=new e(t);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let t=e,{eventId:n,eventType:r,data:i}=t.data,a=this.handlersMap[r];if(!a?.size)return;t.ports[0].postMessage({status:`ack`,eventId:n,eventType:r});let o=Array.from(a).map(async e=>e(t.origin,i)),s=await M(o);t.ports[0].postMessage({status:`done`,eventId:n,eventType:r,response:s})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener(`message`,this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener(`message`,this.boundEventHandler)}};No.receivers=[];
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Po(e=``,t=10){let n=``;for(let e=0;e<t;e++)n+=Math.floor(Math.random()*10);return e+n}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Fo=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener(`message`,e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){let r=typeof MessageChannel<`u`?new MessageChannel:null;if(!r)throw Error(`connection_unavailable`);let i,a;return new Promise((o,s)=>{let c=Po(``,20);r.port1.start();let l=setTimeout(()=>{s(Error(`unsupported_event`))},n);a={messageChannel:r,onMessage(e){let t=e;if(t.data.eventId===c)switch(t.data.status){case`ack`:clearTimeout(l),i=setTimeout(()=>{s(Error(`timeout`))},3e3);break;case`done`:clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),s(Error(`invalid_response`));break}}},this.handlers.add(a),r.port1.addEventListener(`message`,a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Io(){return window}function Lo(e){Io().location.href=e}
/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Ro(){return Io().WorkerGlobalScope!==void 0&&typeof Io().importScripts==`function`}async function zo(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Bo(){return navigator?.serviceWorker?.controller||null}function Vo(){return Ro()?self:null}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Ho=`firebaseLocalStorageDb`,Uo=1,Wo=`firebaseLocalStorage`,Go=`fbase_key`,Ko=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener(`success`,()=>{e(this.request.result)}),this.request.addEventListener(`error`,()=>{t(this.request.error)})})}};function qo(e,t){return e.transaction([Wo],t?`readwrite`:`readonly`).objectStore(Wo)}function Jo(){let e=indexedDB.deleteDatabase(Ho);return new Ko(e).toPromise()}function Yo(){let e=indexedDB.open(Ho,Uo);return new Promise((t,n)=>{e.addEventListener(`error`,()=>{n(e.error)}),e.addEventListener(`upgradeneeded`,()=>{let t=e.result;try{t.createObjectStore(Wo,{keyPath:Go})}catch(e){n(e)}}),e.addEventListener(`success`,async()=>{let n=e.result;n.objectStoreNames.contains(Wo)?t(n):(n.close(),await Jo(),t(await Yo()))})})}async function Xo(e,t,n){let r=qo(e,!0).put({[Go]:t,value:n});return new Ko(r).toPromise()}async function Zo(e,t){let n=qo(e,!1).get(t),r=await new Ko(n).toPromise();return r===void 0?null:r.value}function Qo(e,t){let n=qo(e,!0).delete(t);return new Ko(n).toPromise()}var $o=800,es=3,ts=class{constructor(){this.type=`LOCAL`,this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||=await Yo(),this.db}async _withRetries(e){let t=0;for(;;)try{let t=await this._openDb();return await e(t)}catch(e){if(t++>es)throw e;this.db&&=(this.db.close(),void 0)}}async initializeServiceWorkerMessaging(){return Ro()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=No._getInstance(Vo()),this.receiver._subscribe(`keyChanged`,async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe(`ping`,async(e,t)=>[`keyChanged`])}async initializeSender(){if(this.activeServiceWorker=await zo(),!this.activeServiceWorker)return;this.sender=new Fo(this.activeServiceWorker);let e=await this.sender._send(`ping`,{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes(`keyChanged`)&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Bo()!==this.activeServiceWorker))try{await this.sender._send(`keyChanged`,{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await Yo();return await Xo(e,xo,`1`),await Qo(e,xo),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Xo(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){let t=await this._withRetries(t=>Zo(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Qo(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(e=>{let t=qo(e,!1).getAll();return new Ko(t).toPromise()});if(!e||this.pendingWrites!==0)return[];let t=[],n=new Set;if(e.length!==0)for(let{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(let e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$o)}stopPolling(){this.pollTimer&&=(clearInterval(this.pollTimer),null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}};ts.type=`LOCAL`;var ns=ts;
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function rs(e,t){return fi(e,`POST`,`/v2/accounts/mfaSignIn:start`,di(e,t))}function os(e,t){return fi(e,`POST`,`/v2/accounts/mfaSignIn:finalize`,di(e,t))}function ss(e,t){return fi(e,`POST`,`/v2/accounts/mfaSignIn:finalize`,di(e,t))}va(`rcb`),new ai(3e4,6e4);
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var cs=`recaptcha`;async function ls(e,t,n){if(!e._getRecaptchaConfig())try{await Ea(e)}catch{console.log(`Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.`)}try{let r;if(r=typeof t==`string`?{phoneNumber:t}:t,`session`in r){let t=r.session;if(`phoneNumber`in r){A(t.type===`enroll`,e,`internal-error`);let i={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:`CLIENT_TYPE_WEB`}};return(await Ta(e,i,`mfaSmsEnrollment`,async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Sa){A(n?.type===cs,e,`argument-error`);let r=await us(e,t,n);return _o(e,r)}return _o(e,t)},`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}else{A(t.type===`signin`,e,`internal-error`);let i=r.multiFactorHint?.uid||r.multiFactorUid;A(i,e,`missing-multi-factor-info`);let a={mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:`CLIENT_TYPE_WEB`}};return(await Ta(e,a,`mfaSmsSignIn`,async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Sa){A(n?.type===cs,e,`argument-error`);let r=await us(e,t,n);return rs(e,r)}return rs(e,t)},`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}else{let t={phoneNumber:r.phoneNumber,clientType:`CLIENT_TYPE_WEB`};return(await Ta(e,t,`sendVerificationCode`,async(e,t)=>{if(t.captchaResponse===Sa){A(n?.type===cs,e,`argument-error`);let r=await us(e,t,n);return Ua(e,r)}return Ua(e,t)},`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).sessionInfo}}finally{n?._reset()}}async function us(e,t,n){A(n.type===cs,e,`argument-error`);let r=await n.verify();A(typeof r==`string`,e,`argument-error`);let i={...t};if(`phoneEnrollmentInfo`in i){let e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,a=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:a}}),i}else if(`phoneSignInInfo`in i){let e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}else return Object.assign(i,{recaptchaToken:r}),i}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var ds=class e{constructor(t){this.providerId=e.PROVIDER_ID,this.auth=da(t)}verifyPhoneNumber(e,t){return ls(this.auth,e,O(t))}static credential(e,t){return Ja._fromVerification(e,t)}static credentialFromResult(t){let n=t;return e.credentialFromTaggedObject(n)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:t,temporaryProof:n}=e;return t&&n?Ja._fromTokenResponse(t,n):null}};ds.PROVIDER_ID=`phone`,ds.PHONE_SIGN_IN_METHOD=`phone`;
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function fs(e,t){return t?Ui(t):(A(e._popupRedirectResolver,e,`argument-error`),e._popupRedirectResolver)}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var ps=class extends Pa{constructor(e){super(`custom`,`custom`),this.params=e}_getIdTokenResponse(e){return Ba(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ba(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ba(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function ms(e){return fo(e.auth,new ps(e),e.bypassAuthState)}function hs(e){let{auth:t,user:n}=e;return A(n,t,`internal-error`),uo(n,new ps(e),e.bypassAuthState)}async function gs(e){let{auth:t,user:n}=e;return A(n,t,`internal-error`),lo(n,new ps(e),e.bypassAuthState)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var _s=class{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}let s={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(s))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case`signInViaPopup`:case`signInViaRedirect`:return ms;case`linkViaPopup`:case`linkViaRedirect`:return gs;case`reauthViaPopup`:case`reauthViaRedirect`:return hs;default:Kr(this.auth,`internal-error`)}}resolve(e){$r(this.pendingPromise,`Pending promise was never set`),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$r(this.pendingPromise,`Pending promise was never set`),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}},vs=new ai(2e3,1e4);async function ys(e,t,n){if(gr(e.app))return Promise.reject(qr(e,`operation-not-supported-in-this-environment`));let r=da(e);Xr(e,t,$a);let i=fs(r,n);return new bs(r,`signInViaPopup`,t,i).executeNotNull()}var bs=class e extends _s{constructor(t,n,r,i,a){super(t,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,e.currentPopupAction&&e.currentPopupAction.cancel(),e.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return A(e,this.auth,`internal-error`),e}async onExecution(){$r(this.filter.length===1,`Popup operations only handle one event`);let e=Po();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(qr(this.auth,`web-storage-unsupported`))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(qr(this.auth,`cancelled-popup-request`))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,e.currentPopupAction=null}pollUserCancellation(){let e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qr(this.auth,`popup-closed-by-user`))},8e3);return}this.pollId=window.setTimeout(e,vs.get())};e()}};bs.currentPopupAction=null;
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var xs=`pendingRedirect`,Ss=new Map,Cs=class extends _s{constructor(e,t,n=!1){super(e,[`signInViaRedirect`,`linkViaRedirect`,`reauthViaRedirect`,`unknown`],t,void 0,n),this.eventId=null}async execute(){let e=Ss.get(this.auth._key());if(!e){try{let t=await ws(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}Ss.set(this.auth._key(),e)}return this.bypassAuthState||Ss.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type===`signInViaRedirect`)return super.onAuthEvent(e);if(e.type===`unknown`){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function ws(e,t){let n=Ds(t),r=Es(e);if(!await r._isAvailable())return!1;let i=await r._get(n)===`true`;return await r._remove(n),i}function Ts(e,t){Ss.set(e._key(),t)}function Es(e){return Ui(e._redirectPersistence)}function Ds(e){return Ki(xs,e.config.apiKey,e.name)}async function Os(e,t,n=!1){if(gr(e.app))return Promise.reject(Yr(e));let r=da(e),i=fs(r,t),a=await new Cs(r,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var ks=600*1e3,As=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Ns(e)?t:(this.hasHandledPotentialRedirect=!0,t||=(this.queuedRedirectEvent=e,!0),t)}sendToConsumer(e,t){if(e.error&&!Ms(e)){let n=e.error.code?.split(`auth/`)[1]||`internal-error`;t.onError(qr(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ks&&this.cachedEventUids.clear(),this.cachedEventUids.has(js(e))}saveEventToCache(e){this.cachedEventUids.add(js(e)),this.lastProcessedEventTime=Date.now()}};function js(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join(`-`)}function Ms({type:e,error:t}){return e===`unknown`&&t?.code===`auth/no-auth-event`}function Ns(e){switch(e.type){case`signInViaRedirect`:case`linkViaRedirect`:case`reauthViaRedirect`:return!0;case`unknown`:return Ms(e);default:return!1}}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function Ps(e,t={}){return fi(e,`GET`,`/v1/projects`,t)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Fs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Is=/^https?/;async function Ls(e){if(e.config.emulator)return;let{authorizedDomains:t}=await Ps(e);for(let e of t)try{if(Rs(e))return}catch{}Kr(e,`unauthorized-domain`)}function Rs(e){let t=ei(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith(`chrome-extension://`)){let i=new URL(e);return i.hostname===``&&r===``?n===`chrome-extension:`&&e.replace(`chrome-extension://`,``)===t.replace(`chrome-extension://`,``):n===`chrome-extension:`&&i.hostname===r}if(!Is.test(n))return!1;if(Fs.test(e))return r===e;let i=e.replace(/\./g,`\\.`);return RegExp(`^(.+\\.`+i+`|`+i+`)$`,`i`).test(r)}
/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var zs=new ai(3e4,6e4);function Bs(){let e=Io().___jsl;if(e?.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}}function Vs(e){return new Promise((t,n)=>{function r(){Bs(),gapi.load(`gapi.iframes`,{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Bs(),n(qr(e,`network-request-failed`))},timeout:zs.get()})}if(Io().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(Io().gapi?.load)r();else{let t=va(`iframefcb`);return Io()[t]=()=>{gapi.load?r():n(qr(e,`network-request-failed`))},ha(`${_a()}?onload=${t}`).catch(e=>n(e))}}).catch(e=>{throw Hs=null,e})}var Hs=null;function Us(e){return Hs||=Vs(e),Hs}
/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Ws=new ai(5e3,15e3),Gs=`__/auth/iframe`,Ks=`emulator/auth/iframe`,qs={style:{position:`absolute`,top:`-100px`,width:`1px`,height:`1px`},"aria-hidden":`true`,tabindex:`-1`},Js=new Map([[`identitytoolkit.googleapis.com`,`p`],[`staging-identitytoolkit.sandbox.googleapis.com`,`s`],[`test-identitytoolkit.sandbox.googleapis.com`,`t`]]);function Ys(e){let t=e.config;A(t.authDomain,e,`auth-domain-config-required`);let n=t.emulator?oi(t,Ks):`https://${e.config.authDomain}/${Gs}`,r={apiKey:t.apiKey,appName:e.name,v:yr},i=Js.get(e.config.apiHost);i&&(r.eid=i);let a=e._getFrameworks();return a.length&&(r.fw=a.join(`,`)),`${n}?${Nt(r).slice(1)}`}async function Xs(e){let t=await Us(e),n=Io().gapi;return A(n,e,`internal-error`),t.open({where:document.body,url:Ys(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qs,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});let i=qr(e,`network-request-failed`),a=Io().setTimeout(()=>{r(i)},Ws.get());function o(){Io().clearTimeout(a),n(t)}t.ping(o).then(o,()=>{r(i)})}))}
/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Zs={location:`yes`,resizable:`yes`,statusbar:`yes`,toolbar:`no`},Qs=500,$s=600,ec=`_blank`,tc=`http://localhost`,nc=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function rc(e,t,n,r=Qs,i=$s){let a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s=``,c={...Zs,width:r.toString(),height:i.toString(),top:a,left:o},l=at().toLowerCase();n&&(s=Zi(l)?ec:n),Yi(l)&&(t||=tc,c.scrollbars=`yes`);let u=Object.entries(c).reduce((e,[t,n])=>`${e}${t}=${n},`,``);if(na(l)&&s!==`_self`)return ic(t||``,s),new nc(null);let d=window.open(t||``,s,u);A(d,e,`popup-blocked`);try{d.focus()}catch{}return new nc(d)}function ic(e,t){let n=document.createElement(`a`);n.href=e,n.target=t;let r=document.createEvent(`MouseEvent`);r.initMouseEvent(`click`,!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var ac=`__/auth/handler`,oc=`emulator/auth/handler`,sc=`fac`;async function cc(e,t,n,r,i,a){A(e.config.authDomain,e,`auth-domain-config-required`),A(e.config.apiKey,e,`invalid-api-key`);let o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:yr,eventId:i};if(t instanceof $a){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||``,kt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(let[e,t]of Object.entries(a||{}))o[e]=t}if(t instanceof eo){let e=t.getScopes().filter(e=>e!==``);e.length>0&&(o.scopes=e.join(`,`))}e.tenantId&&(o.tid=e.tenantId);let s=o;for(let e of Object.keys(s))s[e]===void 0&&delete s[e];let c=await e._getAppCheckToken(),l=c?`#${sc}=${encodeURIComponent(c)}`:``;return`${lc(e)}?${Nt(s).slice(1)}${l}`}function lc({config:e}){return e.emulator?oi(e,oc):`https://${e.authDomain}/${ac}`}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var uc=`webStorageSupport`,dc=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Mo,this._completeRedirectFn=Os,this._overrideRedirectResult=Ts}async _openPopup(e,t,n,r){$r(this.eventManagers[e._key()]?.manager,`_initialize() not called before _openPopup()`);let i=await cc(e,t,n,ei(),r);return rc(e,i,Po())}async _openRedirect(e,t,n,r){await this._originValidation(e);let i=await cc(e,t,n,ei(),r);return Lo(i),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):($r(n,`If manager is not set, promise should be`),n)}let n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){let t=await Xs(e),n=new As(e);return t.register(`authEvent`,t=>(A(t?.authEvent,e,`invalid-auth-event`),{status:n.onEvent(t.authEvent)?`ACK`:`ERROR`}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(uc,{type:uc},n=>{let r=n?.[0]?.[uc];r!==void 0&&t(!!r),Kr(e,`internal-error`)},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ls(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ia()||Xi()||ta()}},fc=class{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case`enroll`:return this._finalizeEnroll(e,t.credential,n);case`signin`:return this._finalizeSignIn(e,t.credential);default:return Qr(`unexpected MultiFactorSessionType`)}}},pc=class e extends fc{constructor(e){super(`phone`),this.credential=e}static _fromCredential(t){return new e(t)}_finalizeEnroll(e,t,n){return vo(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return os(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},mc=class{constructor(){}static assertion(e){return pc._fromCredential(e)}};mc.FACTOR_ID=`phone`;var hc=class{static assertionForEnrollment(e,t){return gc._fromSecret(e,t)}static assertionForSignIn(e,t){return gc._fromEnrollmentId(e,t)}static async generateSecret(e){let t=e;A(t.user?.auth!==void 0,`internal-error`);let n=await yo(t.user.auth,{idToken:t.credential,totpEnrollmentInfo:{}});return _c._fromStartTotpMfaEnrollmentResponse(n,t.user.auth)}};hc.FACTOR_ID=`totp`;var gc=class e extends fc{constructor(e,t,n){super(`totp`),this.otp=e,this.enrollmentId=t,this.secret=n}static _fromSecret(t,n){return new e(n,void 0,t)}static _fromEnrollmentId(t,n){return new e(n,t)}async _finalizeEnroll(e,t,n){return A(this.secret!==void 0,e,`argument-error`),bo(e,{idToken:t,displayName:n,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,t){A(this.enrollmentId!==void 0&&this.otp!==void 0,e,`argument-error`);let n={verificationCode:this.otp};return ss(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:n})}},_c=class e{constructor(e,t,n,r,i,a,o){this.sessionInfo=a,this.auth=o,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=n,this.codeIntervalSeconds=r,this.enrollmentCompletionDeadline=i}static _fromStartTotpMfaEnrollmentResponse(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){let n=!1;return(vc(e)||vc(t))&&(n=!0),n&&(vc(e)&&(e=this.auth.currentUser?.email||`unknownuser`),vc(t)&&(t=this.auth.name)),`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}};function vc(e){return e===void 0||e?.length===0}var yc=`@firebase/auth`,bc=`1.11.0`,xc=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(t=>{e(t?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){A(this.auth._initializationPromise,`dependent-sdk-initialized-before-auth`)}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Sc(e){switch(e){case`Node`:return`node`;case`ReactNative`:return`rn`;case`Worker`:return`webworker`;case`Cordova`:return`cordova`;case`WebExtension`:return`web-extension`;default:return}}function Cc(e){mr(new Jt(`auth`,(t,{options:n})=>{let r=t.getProvider(`app`).getImmediate(),i=t.getProvider(`heartbeat`),a=t.getProvider(`app-check-internal`),{apiKey:o,authDomain:s}=r.options;A(o&&!o.includes(`:`),`invalid-api-key`,{appName:r.name});let c={apiKey:o,authDomain:s,clientPlatform:e,apiHost:`identitytoolkit.googleapis.com`,tokenApiHost:`securetoken.googleapis.com`,apiScheme:`https`,sdkClientVersion:aa(e)},l=new ua(r,i,a,c);return Oa(l,n),l},`PUBLIC`).setInstantiationMode(`EXPLICIT`).setInstanceCreatedCallback((e,t,n)=>{e.getProvider(`auth-internal`).initialize()})),mr(new Jt(`auth-internal`,e=>(e=>new xc(e))(da(e.getProvider(`auth`).getImmediate())),`PRIVATE`).setInstantiationMode(`EXPLICIT`)),Sr(yc,bc,Sc(e)),Sr(yc,bc,`esm2020`)}var wc=Ye(`authIdTokenMaxAge`)||300,Tc=null,Ec=e=>async t=>{let n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>wc)return;let i=n?.token;Tc!==i&&(Tc=i,await fetch(e,{method:i?`POST`:`DELETE`,headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Dc(e=xr()){let t=hr(e,`auth`);if(t.isInitialized())return t.getImmediate();let n=Da(e,{popupRedirectResolver:dc,persistence:[ns,Eo,Mo]}),r=Ye(`authTokenSyncURL`);if(r&&typeof isSecureContext==`boolean`&&isSecureContext){let e=new URL(r,location.origin);if(location.origin===e.origin){let t=Ec(e.toString());mo(n,t,()=>t(n.currentUser)),po(n,e=>t(e))}}let i=Ke(`auth`);return i&&ka(n,`http://${i}`),n}function Oc(){return document.getElementsByTagName(`head`)?.[0]??document}ma({loadJS(e){return new Promise((t,n)=>{let r=document.createElement(`script`);r.setAttribute(`src`,e),r.onload=t,r.onerror=e=>{let t=qr(`internal-error`);t.customData=e,n(t)},r.type=`text/javascript`,r.charset=`UTF-8`,Oc().appendChild(r)})},gapiScript:`https://apis.google.com/js/api.js`,recaptchaV2Script:`https://www.google.com/recaptcha/api.js`,recaptchaEnterpriseScript:`https://www.google.com/recaptcha/enterprise.js?render=`}),Cc(`Browser`);var kc=`@firebase/database`,Ac=`1.1.0`,jc=``;function Mc(e){jc=e}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Nc=class{constructor(e){this.domStorage_=e,this.prefix_=`firebase:`}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ct(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:St(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}},Pc=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Dt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}},Fc=function(e){try{if(typeof window<`u`&&window[e]!==void 0){let t=window[e];return t.setItem(`firebase:sentinel`,`cache`),t.removeItem(`firebase:sentinel`),new Nc(t)}}catch{}return new Pc},Ic=Fc(`localStorage`),Lc=Fc(`sessionStorage`),Rc=new on(`@firebase/database`),zc=(function(){let e=1;return function(){return e++}})(),Bc=function(e){let t=Ht(e),n=new It;n.update(t);let r=n.digest();return Ne.encodeByteArray(r)},Vc=function(...e){let t=``;for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)||r&&typeof r==`object`&&typeof r.length==`number`?t+=Vc.apply(null,r):typeof r==`object`?t+=Ct(r):t+=r,t+=` `}return t},Hc=null,Uc=!0,Wc=function(e,t){E(!t||e===!0||e===!1,`Can't turn on custom loggers persistently.`),e===!0?(Rc.logLevel=k.VERBOSE,Hc=Rc.log.bind(Rc),t&&Lc.set(`logging_enabled`,!0)):typeof e==`function`?Hc=e:(Hc=null,Lc.remove(`logging_enabled`))},Gc=function(...e){if(Uc===!0&&(Uc=!1,Hc===null&&Lc.get(`logging_enabled`)===!0&&Wc(!0)),Hc){let t=Vc.apply(null,e);Hc(t)}},Kc=function(e){return function(...t){Gc(e,...t)}},qc=function(...e){let t=`FIREBASE INTERNAL ERROR: `+Vc(...e);Rc.error(t)},Jc=function(...e){let t=`FIREBASE FATAL ERROR: ${Vc(...e)}`;throw Rc.error(t),Error(t)},Yc=function(...e){let t=`FIREBASE WARNING: `+Vc(...e);Rc.warn(t)},Xc=function(){typeof window<`u`&&window.location&&window.location.protocol&&window.location.protocol.indexOf(`https:`)!==-1&&Yc(`Insecure Firebase access from a secure page. Please use https in calls to new Firebase().`)},Zc=function(e){return typeof e==`number`&&(e!==e||e===1/0||e===-1/0)},Qc=function(e){if(ft()||document.readyState===`complete`)e();else{let t=!1,n=function(){if(!document.body){setTimeout(n,10);return}t||(t=!0,e())};document.addEventListener?(document.addEventListener(`DOMContentLoaded`,n,!1),window.addEventListener(`load`,n,!1)):document.attachEvent&&(document.attachEvent(`onreadystatechange`,()=>{document.readyState===`complete`&&n()}),window.attachEvent(`onload`,n))}},$c=`[MIN_NAME]`,el=`[MAX_NAME]`,tl=function(e,t){if(e===t)return 0;if(e===$c||t===el)return-1;if(t===$c||e===el)return 1;{let n=ml(e),r=ml(t);return n===null?r===null&&e<t?-1:1:r===null?-1:n-r===0?e.length-t.length:n-r}},nl=function(e,t){return e===t?0:e<t?-1:1},rl=function(e,t){if(t&&e in t)return t[e];throw Error(`Missing required key (`+e+`) in object: `+Ct(t))},il=function(e){if(typeof e!=`object`||!e)return Ct(e);let t=[];for(let n in e)t.push(n);t.sort();let n=`{`;for(let r=0;r<t.length;r++)r!==0&&(n+=`,`),n+=Ct(t[r]),n+=`:`,n+=il(e[t[r]]);return n+=`}`,n},al=function(e,t){let n=e.length;if(n<=t)return[e];let r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function ol(e,t){for(let n in e)e.hasOwnProperty(n)&&t(n,e[n])}var sl=function(e){E(!Zc(e),`Invalid JSON number`);let t=1023,n,r,i,a,o;e===0?(r=0,i=0,n=1/e==-1/0?1:0):(n=e<0,e=Math.abs(e),e>=2**(1-t)?(a=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=a+t,i=Math.round(e*2**(52-a)-2**52)):(r=0,i=Math.round(e/2**(1-t-52))));let s=[];for(o=52;o;--o)s.push(i%2?1:0),i=Math.floor(i/2);for(o=11;o;--o)s.push(r%2?1:0),r=Math.floor(r/2);s.push(n?1:0),s.reverse();let c=s.join(``),l=``;for(o=0;o<64;o+=8){let e=parseInt(c.substr(o,8),2).toString(16);e.length===1&&(e=`0`+e),l+=e}return l.toLowerCase()},cl=function(){return!!(typeof window==`object`&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},ll=function(){return typeof Windows==`object`&&typeof Windows.UI==`object`};function ul(e,t){let n=`Unknown Error`;e===`too_big`?n=`The data requested exceeds the maximum size that can be accessed with a single request.`:e===`permission_denied`?n=`Client doesn't have permission to access the desired data.`:e===`unavailable`&&(n=`The service is unavailable`);let r=Error(e+` at `+t._path.toString()+`: `+n);return r.code=e.toUpperCase(),r}var dl=RegExp(`^-?(0*)\\d{1,10}$`),fl=-2147483648,pl=2147483647,ml=function(e){if(dl.test(e)){let t=Number(e);if(t>=fl&&t<=pl)return t}return null},hl=function(e){try{e()}catch(e){setTimeout(()=>{let t=e.stack||``;throw Yc(`Exception was thrown by user callback.`,t),e},0)}},gl=function(){return(typeof window==`object`&&window.navigator&&window.navigator.userAgent||``).search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},_l=function(e,t){let n=setTimeout(e,t);return typeof n==`number`&&typeof Deno<`u`&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n==`object`&&n.unref&&n.unref(),n},vl=class{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,gr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(e=>this.appCheck=e)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){Yc(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}},yl=class{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(e=>this.auth_=e)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(e=>e&&e.code===`auth/token-not-initialized`?(Gc(`Got auth/token-not-initialized error.  Treating as null token.`),null):Promise.reject(e)):new Promise((t,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e=`Provided authentication credentials for the app named "`+this.appName_+`" are invalid. This usually indicates your app was not initialized correctly. `;`credential`in this.firebaseOptions_?e+=`Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.`:`serviceAccount`in this.firebaseOptions_?e+=`Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.`:e+=`Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.`,Yc(e)}},bl=class{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}};bl.OWNER=`owner`;
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var xl=`5`,Sl=`v`,Cl=`s`,wl=`r`,Tl=`f`,El=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Dl=`ls`,Ol=`p`,kl=`ac`,Al=`websocket`,jl=`long_polling`,Ml=class{constructor(e,t,n,r,i=!1,a=``,o=!1,s=!1,c=null){this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=a,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=s,this.emulatorOptions=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(`.`)+1),this.internalHost=Ic.get(`host:`+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)===`s-`}isCustomHost(){return this._domain!==`firebaseio.com`&&this._domain!==`firebaseio-demo.com`}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ic.set(`host:`+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+=`<`+this.persistenceKey+`>`),e}toURLString(){let e=this.secure?`https://`:`http://`,t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:``;return`${e}${this.host}/${t}`}};function Nl(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function Pl(e,t,n){E(typeof t==`string`,`typeof type must == string`),E(typeof n==`object`,`typeof params must == object`);let r;if(t===Al)r=(e.secure?`wss://`:`ws://`)+e.internalHost+`/.ws?`;else if(t===jl)r=(e.secure?`https://`:`http://`)+e.internalHost+`/.lp?`;else throw Error(`Unknown connection type: `+t);Nl(e)&&(n.ns=e.namespace);let i=[];return ol(n,(e,t)=>{i.push(e+`=`+t)}),r+i.join(`&`)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Fl=class{constructor(){this.counters_={}}incrementCounter(e,t=1){Dt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Re(this.counters_)}},Il={},Ll={};function Rl(e){let t=e.toString();return Il[t]||(Il[t]=new Fl),Il[t]}function zl(e,t){let n=e.toString();return Ll[n]||(Ll[n]=t()),Ll[n]}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Bl=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&hl(()=>{this.onMessage_(e[t])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&=(this.onClose(),null);break}this.currentResponseNum++}}},Vl=`start`,Hl=`close`,Ul=`pLPCommand`,Wl=`pRTLPCB`,Gl=`id`,Kl=`pw`,ql=`ser`,Jl=`cb`,Yl=`dframe`,Xl=1870,Zl=30,Ql=Xl-Zl,$l=25e3,eu=3e4,tu=class e{constructor(e,t,n,r,i,a,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=a,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Kc(e),this.stats_=Rl(t),this.urlFn=e=>(this.appCheckToken&&(e[kl]=this.appCheckToken),Pl(t,jl,e))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Bl(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_(`Timed out trying to connect.`),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(eu)),Qc(()=>{if(this.isClosed_)return;this.scriptTagHolder=new nu((...e)=>{let[t,n,r,i,a]=e;if(this.incrementIncomingBytes_(e),this.scriptTagHolder)if(this.connectTimeoutTimer_&&=(clearTimeout(this.connectTimeoutTimer_),null),this.everConnected_=!0,t===Vl)this.id=n,this.password=r;else if(t===Hl)n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,()=>{this.onClosed_()})):this.onClosed_();else throw Error(`Unrecognized command received: `+t)},(...e)=>{let[t,n]=e;this.incrementIncomingBytes_(e),this.myPacketOrderer.handleResponse(t,n)},()=>{this.onClosed_()},this.urlFn);let e={};e[Vl]=`t`,e[ql]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(e[Jl]=this.scriptTagHolder.uniqueCallbackIdentifier),e[Sl]=xl,this.transportSessionId&&(e[Cl]=this.transportSessionId),this.lastSessionId&&(e[Dl]=this.lastSessionId),this.applicationId&&(e[Ol]=this.applicationId),this.appCheckToken&&(e[kl]=this.appCheckToken),typeof location<`u`&&location.hostname&&El.test(location.hostname)&&(e[wl]=Tl);let t=this.urlFn(e);this.log_(`Connecting via long-poll to `+t),this.scriptTagHolder.addTag(t,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){e.forceAllow_=!0}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){return ft()?!1:e.forceAllow_?!0:!e.forceDisallow_&&typeof document<`u`&&document.createElement!=null&&!cl()&&!ll()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&=(this.scriptTagHolder.close(),null),this.myDisconnFrame&&=(document.body.removeChild(this.myDisconnFrame),null),this.connectTimeoutTimer_&&=(clearTimeout(this.connectTimeoutTimer_),null)}onClosed_(){this.isClosed_||(this.log_(`Longpoll is closing itself`),this.shutdown_(),this.onDisconnect_&&=(this.onDisconnect_(this.everConnected_),null))}close(){this.isClosed_||(this.log_(`Longpoll is being closed.`),this.shutdown_())}send(e){let t=Ct(e);this.bytesSent+=t.length,this.stats_.incrementCounter(`bytes_sent`,t.length);let n=Fe(t),r=al(n,Ql);for(let e=0;e<r.length;e++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[e]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(ft())return;this.myDisconnFrame=document.createElement(`iframe`);let n={};n[Yl]=`t`,n[Gl]=e,n[Kl]=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display=`none`,document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=Ct(e).length;this.bytesReceived+=t,this.stats_.incrementCounter(`bytes_received`,t)}},nu=class e{constructor(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,ft())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=zc(),window[Ul+this.uniqueCallbackIdentifier]=t,window[Wl+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();let r=``;this.myIFrame.src&&this.myIFrame.src.substr(0,11)===`javascript:`&&(r=`<script>document.domain="`+document.domain+`";<\/script>`);let i=`<html><body>`+r+`</body></html>`;try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(e){Gc(`frame writing exception`),e.stack&&Gc(e.stack),Gc(e)}}}static createIFrame_(){let e=document.createElement(`iframe`);if(e.style.display=`none`,document.body){document.body.appendChild(e);try{e.contentWindow.document||Gc(`No IE domain setting required`)}catch{e.src=`javascript:void((function(){document.open();document.domain='`+document.domain+`';document.close();})())`}}else throw`Document body has not initialized. Wait to initialize Firebase until after the document is ready.`;return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent=``,setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},0));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[Gl]=this.myID,e[Kl]=this.myPW,e[ql]=this.currentSerial;let t=this.urlFn(e),n=``,r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Zl+n.length<=Xl;){let e=this.pendingSegs.shift();n=n+`&seg`+r+`=`+e.seg+`&ts`+r+`=`+e.ts+`&d`+r+`=`+e.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor($l));this.addTag(e,()=>{clearTimeout(r),n()})}addTag(e,t){ft()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let n=this.myIFrame.doc.createElement(`script`);n.type=`text/javascript`,n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){let e=n.readyState;(!e||e===`loaded`||e===`complete`)&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{Gc(`Long-poll script failed to load: `+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch{}},1)}},ru=16384,iu=45e3,au=null;typeof MozWebSocket<`u`?au=MozWebSocket:typeof WebSocket<`u`&&(au=WebSocket);var ou=class e{constructor(t,n,r,i,a,o,s){this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Kc(this.connId),this.stats_=Rl(n),this.connURL=e.connectionURL_(n,o,s,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,t,n,r,i){let a={};return a[Sl]=xl,!ft()&&typeof location<`u`&&location.hostname&&El.test(location.hostname)&&(a[wl]=Tl),t&&(a[Cl]=t),n&&(a[Dl]=n),r&&(a[kl]=r),i&&(a[Ol]=i),Pl(e,Al,a)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_(`Websocket connecting to `+this.connURL),this.everConnected_=!1,Ic.set(`previous_websocket_failure`,!0);try{let e;if(ft()){let t=this.nodeAdmin?`AdminNode`:`Node`;e={headers:{"User-Agent":`Firebase/${xl}/${jc}/${process.platform}/${t}`,"X-Firebase-GMPID":this.applicationId||``}},this.authToken&&(e.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(e.headers[`X-Firebase-AppCheck`]=this.appCheckToken);let n={},r=this.connURL.indexOf(`wss://`)===0?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new au(this.connURL,[],e)}catch(e){this.log_(`Error instantiating WebSocket.`);let t=e.message||e.data;t&&this.log_(t),this.onClosed_();return}this.mySock.onopen=()=>{this.log_(`Websocket connected.`),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_(`Websocket connection was disconnected.`),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_(`WebSocket error.  Closing connection.`);let t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<`u`&&navigator.userAgent){let e=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);e&&e.length>1&&parseFloat(e[1])<4.4&&(t=!0)}return!t&&au!==null&&!e.forceDisallow_}static previouslyFailed(){return Ic.isInMemoryStorage||Ic.get(`previous_websocket_failure`)===!0}markConnectionHealthy(){Ic.remove(`previous_websocket_failure`)}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){let e=this.frames.join(``);this.frames=null;let t=St(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(E(this.frames===null,`We already have a frame buffer`),e.length<=6){let t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;let t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter(`bytes_received`,t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{let e=this.extractFrameCount_(t);e!==null&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();let t=Ct(e);this.bytesSent+=t.length,this.stats_.incrementCounter(`bytes_sent`,t.length);let n=al(t,ru);n.length>1&&this.sendString_(String(n.length));for(let e=0;e<n.length;e++)this.sendString_(n[e])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&=(clearInterval(this.keepaliveTimer),null),this.mySock&&=(this.mySock.close(),null)}onClosed_(){this.isClosed_||(this.log_(`WebSocket is closing itself`),this.shutdown_(),this.onDisconnect&&=(this.onDisconnect(this.everConnected_),null))}close(){this.isClosed_||(this.log_(`WebSocket is being closed`),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_(`0`),this.resetKeepAlive()},Math.floor(iu))}sendString_(e){try{this.mySock.send(e)}catch(e){this.log_(`Exception thrown from WebSocket.send():`,e.message||e.data,`Closing connection.`),setTimeout(this.onClosed_.bind(this),0)}}};ou.responsesRequiredToBeHealthy=2,ou.healthyTimeout=3e4;
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var su=class e{static get ALL_TRANSPORTS(){return[tu,ou]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(t){let n=ou&&ou.isAvailable(),r=n&&!ou.previouslyFailed();if(t.webSocketOnly&&(n||Yc(`wss:// URL used, but browser isn't known to support websockets.  Trying anyway.`),r=!0),r)this.transports_=[ou];else{let t=this.transports_=[];for(let n of e.ALL_TRANSPORTS)n&&n.isAvailable()&&t.push(n);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw Error(`No transports available`)}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}};su.globalTransportInitialized_=!1;
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var cu=6e4,lu=5e3,uu=10*1024,du=100*1024,fu=`t`,N=`d`,P=`s`,pu=`r`,mu=`e`,hu=`o`,gu=`a`,_u=`n`,vu=`p`,yu=`h`,bu=class{constructor(e,t,n,r,i,a,o,s,c,l){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=a,this.onReady_=o,this.onDisconnect_=s,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Kc(`c:`+this.id+`:`),this.transportManager_=new su(t),this.log_(`Connection created`),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,n)},0);let r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=_l(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>du?(this.log_(`Connection exceeded healthy timeout but has received `+this.conn_.bytesReceived+` bytes.  Marking connection healthy.`),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>uu?this.log_(`Connection exceeded healthy timeout but has sent `+this.conn_.bytesSent+` bytes.  Leaving connection alive.`):(this.log_(`Closing unhealthy connection after timeout.`),this.close()))},Math.floor(r)))}nextTransportId_(){return`c:`+this.id+`:`+ this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_(`Secondary connection lost.`),this.onSecondaryConnectionLost_()):this.log_(`closing an old connection`)}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_(`message on old connection`))}}sendRequest(e){let t={t:`d`,d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_(`cleaning up and promoting a connection: `+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(fu in e){let t=e[fu];t===gu?this.upgradeIfSecondaryHealthy_():t===pu?(this.log_(`Got a reset on secondary, closing it`),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===hu&&(this.log_(`got pong on secondary.`),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=rl(`t`,e),n=rl(`d`,e);if(t===`c`)this.onSecondaryControl_(n);else if(t===`d`)this.pendingDataMessages.push(n);else throw Error(`Unknown protocol layer: `+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_(`Secondary connection is healthy.`),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_(`sending ping on secondary.`),this.secondaryConn_.send({t:`c`,d:{t:vu,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_(`sending client ack on secondary`),this.secondaryConn_.send({t:`c`,d:{t:gu,d:{}}}),this.log_(`Ending transmission on primary`),this.conn_.send({t:`c`,d:{t:_u,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=rl(`t`,e),n=rl(`d`,e);t===`c`?this.onControl_(n):t===`d`&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_(`Primary connection is healthy.`),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=rl(fu,e);if(N in e){let n=e[N];if(t===yu){let e={...n};this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if(t===_u){this.log_(`recvd end transmission on primary`),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===P?this.onConnectionShutdown_(n):t===pu?this.onReset_(n):t===mu?qc(`Server Error: `+n):t===hu?(this.log_(`got pong on primary.`),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):qc(`Unknown control packet command: `+t)}}onHandshake_(e){let t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),xl!==n&&Yc(`Protocol version mismatch detected`),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),_l(()=>{this.secondaryConn_&&(this.log_(`Timed out trying to upgrade.`),this.secondaryConn_.close())},Math.floor(cu))}onReset_(e){this.log_(`Reset packet received.  New host: `+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_(`Realtime connection established.`),this.conn_=e,this.state_=1,this.onReady_&&=(this.onReady_(t,this.sessionId),null),this.primaryResponsesRequired_===0?(this.log_(`Primary connection is healthy.`),this.isHealthy_=!0):_l(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(lu))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_(`sending ping on primary.`),this.sendData_({t:`c`,d:{t:vu,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_(`Realtime connection failed.`),this.repoInfo_.isCacheableHost()&&(Ic.remove(`host:`+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_(`Realtime connection lost.`),this.close()}onConnectionShutdown_(e){this.log_(`Connection shutdown command received. Shutting down...`),this.onKill_&&=(this.onKill_(e),null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw`Connection is not connected`;this.tx_.send(e)}close(){this.state_!==2&&(this.log_(`Closing realtime connection.`),this.state_=2,this.closeConnections_(),this.onDisconnect_&&=(this.onDisconnect_(),null))}closeConnections_(){this.log_(`Shutting down all connections`),this.conn_&&=(this.conn_.close(),null),this.secondaryConn_&&=(this.secondaryConn_.close(),null),this.healthyTimeout_&&=(clearTimeout(this.healthyTimeout_),null)}},xu=class{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}},Su=class{constructor(e){this.allowedEvents_=e,this.listeners_={},E(Array.isArray(e)&&e.length>0,`Requires a non-empty array`)}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let n=[...this.listeners_[e]];for(let e=0;e<n.length;e++)n[e].callback.apply(n[e].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});let r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);let r=this.listeners_[e]||[];for(let e=0;e<r.length;e++)if(r[e].callback===t&&(!n||n===r[e].context)){r.splice(e,1);return}}validateEventType_(e){E(this.allowedEvents_.find(t=>t===e),`Unknown event: `+e)}},Cu=class e extends Su{static getInstance(){return new e}constructor(){super([`online`]),this.online_=!0,typeof window<`u`&&window.addEventListener!==void 0&&!ot()&&(window.addEventListener(`online`,()=>{this.online_||(this.online_=!0,this.trigger(`online`,!0))},!1),window.addEventListener(`offline`,()=>{this.online_&&(this.online_=!1,this.trigger(`online`,!1))},!1))}getInitialEvent(e){return E(e===`online`,`Unknown event type: `+e),[this.online_]}currentlyOnline(){return this.online_}},wu=32,Tu=768,F=class{constructor(e,t){if(t===void 0){this.pieces_=e.split(`/`);let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e=``;for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==``&&(e+=`/`+this.pieces_[t]);return e||`/`}};function I(){return new F(``)}function L(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Eu(e){return e.pieces_.length-e.pieceNum_}function Du(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new F(e.pieces_,t)}function Ou(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function ku(e){let t=``;for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==``&&(t+=`/`+encodeURIComponent(String(e.pieces_[n])));return t||`/`}function Au(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function ju(e){if(e.pieceNum_>=e.pieces_.length)return null;let t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new F(t,0)}function Mu(e,t){let n=[];for(let t=e.pieceNum_;t<e.pieces_.length;t++)n.push(e.pieces_[t]);if(t instanceof F)for(let e=t.pieceNum_;e<t.pieces_.length;e++)n.push(t.pieces_[e]);else{let e=t.split(`/`);for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new F(n,0)}function R(e){return e.pieceNum_>=e.pieces_.length}function Nu(e,t){let n=L(e),r=L(t);if(n===null)return t;if(n===r)return Nu(Du(e),Du(t));throw Error(`INTERNAL ERROR: innerPath (`+t+`) is not within outerPath (`+e+`)`)}function Pu(e,t){let n=Au(e,0),r=Au(t,0);for(let e=0;e<n.length&&e<r.length;e++){let t=tl(n[e],r[e]);if(t!==0)return t}return n.length===r.length?0:n.length<r.length?-1:1}function Fu(e,t){if(Eu(e)!==Eu(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Iu(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(Eu(e)>Eu(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Lu=class{constructor(e,t){this.errorPrefix_=t,this.parts_=Au(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let e=0;e<this.parts_.length;e++)this.byteLength_+=D(this.parts_[e]);Bu(this)}};function Ru(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=D(t),Bu(e)}function zu(e){let t=e.parts_.pop();e.byteLength_-=D(t),e.parts_.length>0&&--e.byteLength_}function Bu(e){if(e.byteLength_>Tu)throw Error(e.errorPrefix_+`has a key path longer than 768 bytes (`+e.byteLength_+`).`);if(e.parts_.length>wu)throw Error(e.errorPrefix_+`path specified exceeds the maximum depth that can be written (32) or object contains a cycle `+Vu(e))}function Vu(e){return e.parts_.length===0?``:`in property '`+e.parts_.join(`.`)+`'`}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Hu=class e extends Su{static getInstance(){return new e}constructor(){super([`visible`]);let e,t;typeof document<`u`&&document.addEventListener!==void 0&&(document.hidden===void 0?document.mozHidden===void 0?document.msHidden===void 0?document.webkitHidden!==void 0&&(t=`webkitvisibilitychange`,e=`webkitHidden`):(t=`msvisibilitychange`,e=`msHidden`):(t=`mozvisibilitychange`,e=`mozHidden`):(t=`visibilitychange`,e=`hidden`)),this.visible_=!0,t&&document.addEventListener(t,()=>{let t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger(`visible`,t))},!1)}getInitialEvent(e){return E(e===`visible`,`Unknown event type: `+e),[this.visible_]}},Uu=1e3,Wu=300*1e3,Gu=30*1e3,Ku=1.3,qu=3e4,Ju=`server_kill`,Yu=3,Xu=class e extends xu{constructor(t,n,r,i,a,o,s,c){if(super(),this.repoInfo_=t,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=a,this.authTokenProvider_=o,this.appCheckTokenProvider_=s,this.authOverride_=c,this.id=e.nextPersistentConnectionId_++,this.log_=Kc(`p:`+this.id+`:`),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Uu,this.maxReconnectDelay_=Wu,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!ft())throw Error(`Auth override specified in options, but not supported on non Node.js platforms`);Hu.getInstance().on(`visible`,this.onVisible_,this),t.host.indexOf(`fblocal`)===-1&&Cu.getInstance().on(`online`,this.onOnline_,this)}sendRequest(e,t,n){let r=++this.requestNumber_,i={r,a:e,b:t};this.log_(Ct(i)),E(this.connected_,`sendRequest call when we're not connected not allowed.`),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();let t=new Xe,n={action:`g`,request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{let n=e.d;e.s===`ok`?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;let r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();let i=e._queryIdentifier,a=e._path.toString();this.log_(`Listen called for `+a+` `+i),this.listens.has(a)||this.listens.set(a,new Map),E(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),`listen() called for non-default but complete query`),E(!this.listens.get(a).has(i),`listen() called twice for same path/queryId.`);let o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}sendGet_(e){let t=this.outstandingGets_[e];this.sendRequest(`g`,t.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)})}sendListen_(t){let n=t.query,r=n._path.toString(),i=n._queryIdentifier;this.log_(`Listen on `+r+` for `+i);let a={p:r};t.tag&&(a.q=n._queryObject,a.t=t.tag),a.h=t.hashFn(),this.sendRequest(`q`,a,a=>{let o=a.d,s=a.s;e.warnOnListenWarnings_(o,n),(this.listens.get(r)&&this.listens.get(r).get(i))===t&&(this.log_(`listen response`,a),s!==`ok`&&this.removeListen_(r,i),t.onComplete&&t.onComplete(s,o))})}static warnOnListenWarnings_(e,t){if(e&&typeof e==`object`&&Dt(e,`w`)){let n=Ot(e,`w`);if(Array.isArray(n)&&~n.indexOf(`no_index`)){let e=`".indexOn": "`+t._queryParams.getIndex().toString()+`"`,n=t._path.toString();Yc(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_(`Auth token refreshed`),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest(`unauth`,{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Et(e))&&(this.log_(`Admin auth credential detected.  Reducing max reconnect time.`),this.maxReconnectDelay_=Gu)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_(`App check token refreshed`),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest(`unappeck`,{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let e=this.authToken_,t=Tt(e)?`auth`:`gauth`,n={cred:e};this.authOverride_===null?n.noauth=!0:typeof this.authOverride_==`object`&&(n.authvar=this.authOverride_),this.sendRequest(t,n,t=>{let n=t.s,r=t.d||`error`;this.authToken_===e&&(n===`ok`?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest(`appcheck`,{token:this.appCheckToken_},e=>{let t=e.s,n=e.d||`error`;t===`ok`?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)})}unlisten(e,t){let n=e._path.toString(),r=e._queryIdentifier;this.log_(`Unlisten called for `+n+` `+r),E(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),`unlisten() called for non-default but complete query`),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_(`Unlisten on `+e+` for `+t);let i={p:e};r&&(i.q=n,i.t=r),this.sendRequest(`n`,i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_(`o`,e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:`o`,data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_(`om`,e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:`om`,data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_(`oc`,e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:`oc`,data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){let i={p:t,d:n};this.log_(`onDisconnect `+e,i),this.sendRequest(e,i,e=>{r&&setTimeout(()=>{r(e.s,e.d)},0)})}put(e,t,n,r){this.putInternal(`p`,e,t,n,r)}merge(e,t,n,r){this.putInternal(`m`,e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();let a={p:t,d:n};i!==void 0&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;let o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_(`Buffering put: `+t)}sendPut_(e){let t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,n=>{this.log_(t+` response`,n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)})}reportStats(e){if(this.connected_){let t={c:e};this.log_(`reportStats`,t),this.sendRequest(`s`,t,e=>{if(e.s!==`ok`){let t=e.d;this.log_(`reportStats`,`Error sending stats: `+t)}})}}onDataMessage_(e){if(`r`in e){this.log_(`from server: `+Ct(e));let t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else if(`error`in e)throw`A server-side error has occurred: `+e.error;else `a`in e&&this.onDataPush_(e.a,e.b)}onDataPush_(e,t){this.log_(`handleServerMessage`,e,t),e===`d`?this.onDataUpdate_(t.p,t.d,!1,t.t):e===`m`?this.onDataUpdate_(t.p,t.d,!0,t.t):e===`c`?this.onListenRevoked_(t.p,t.q):e===`ac`?this.onAuthRevoked_(t.s,t.d):e===`apc`?this.onAppCheckRevoked_(t.s,t.d):e===`sd`?this.onSecurityDebugPacket_(t):qc(`Unrecognized action received from server: `+Ct(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_(`connection ready`),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){E(!this.realtime_,`Scheduling a connect when we're already connected/ing?`),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_(`Window became visible.  Reducing delay.`),this.reconnectDelay_=Uu,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_(`Browser went online.`),this.reconnectDelay_=Uu,this.realtime_||this.scheduleConnect_(0)):(this.log_(`Browser went offline.  Killing connection.`),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_(`data client disconnected`),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&=(new Date().getTime()-this.lastConnectionEstablishedTime_>qu&&(this.reconnectDelay_=Uu),null):(this.log_(`Window isn't visible.  Delaying reconnect.`),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_),t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_(`Trying to reconnect in `+t+`ms`),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Ku)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_(`Making a connection attempt`),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+`:`+ e.nextConnectionId_++,a=this.lastSessionId,o=!1,s=null,c=function(){s?s.close():(o=!0,r())};this.realtime_={close:c,sendRequest:function(e){E(s,`sendRequest call when we're not connected not allowed.`),s.sendRequest(e)}};let l=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[e,c]=await Promise.all([this.authTokenProvider_.getToken(l),this.appCheckTokenProvider_.getToken(l)]);o?Gc(`getToken() completed but was canceled`):(Gc(`getToken() completed. Creating connection.`),this.authToken_=e&&e.accessToken,this.appCheckToken_=c&&c.token,s=new bu(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,e=>{Yc(e+` (`+this.repoInfo_.toString()+`)`),this.interrupt(Ju)},a))}catch(e){this.log_(`Failed to get token: `+e),o||(this.repoInfo_.nodeAdmin&&Yc(e),c())}}}interrupt(e){Gc(`Interrupting connection for reason: `+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&=(clearTimeout(this.establishConnectionTimer_),null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Gc(`Resuming connection for reason: `+e),delete this.interruptReasons_[e],kt(this.interruptReasons_)&&(this.reconnectDelay_=Uu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){let t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){let t=this.outstandingPuts_[e];t&&`h`in t.request&&t.queued&&(t.onComplete&&t.onComplete(`disconnect`),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map(e=>il(e)).join(`$`):`default`;let r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete(`permission_denied`)}removeListen_(e,t){let n=new F(e).toString(),r;if(this.listens.has(n)){let e=this.listens.get(n);r=e.get(t),e.delete(t),e.size===0&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){Gc(`Auth token revoked: `+e+`/`+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e===`invalid_token`||e===`permission_denied`)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Yu&&(this.reconnectDelay_=Gu,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Gc(`App check token revoked: `+e+`/`+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e===`invalid_token`||e===`permission_denied`)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Yu&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):`msg`in e&&console.log(`FIREBASE: `+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let e of this.listens.values())for(let t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){let e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){let e={},t=`js`;ft()&&(t=this.repoInfo_.nodeAdmin?`admin_node`:`node`),e[`sdk.`+t+`.`+jc.replace(/\./g,`-`)]=1,ot()?e[`framework.cordova`]=1:ut()&&(e[`framework.reactnative`]=1),this.reportStats(e)}shouldReconnect_(){let e=Cu.getInstance().currentlyOnline();return kt(this.interruptReasons_)&&e}};Xu.nextPersistentConnectionId_=0,Xu.nextConnectionId_=0;
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var z=class e{constructor(e,t){this.name=e,this.node=t}static Wrap(t,n){return new e(t,n)}},Zu=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let n=new z($c,e),r=new z($c,t);return this.compare(n,r)!==0}minPost(){return z.MIN}},Qu,$u=class extends Zu{static get __EMPTY_NODE(){return Qu}static set __EMPTY_NODE(e){Qu=e}compare(e,t){return tl(e.name,t.name)}isDefinedOn(e){throw Ae(`KeyIndex.isDefinedOn not expected to be called.`)}indexedValueChanged(e,t){return!1}minPost(){return z.MIN}maxPost(){return new z(el,Qu)}makePost(e,t){return E(typeof e==`string`,`KeyIndex indexValue must always be a string.`),new z(e,Qu)}toString(){return`.key`}},ed=new $u,td=class{constructor(e,t,n,r,i=null){this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let a=1;for(;!e.isEmpty();)if(e=e,a=t?n(e.key,t):1,r&&(a*=-1),a<0)e=this.isReverse_?e.left:e.right;else if(a===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},nd=class e{constructor(t,n,r,i,a){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??id.EMPTY_NODE,this.right=a??id.EMPTY_NODE}copy(t,n,r,i,a){return new e(t??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this,i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):i===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return id.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)!n.left.isEmpty()&&!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),!n.right.isEmpty()&&!n.right.isRed_()&&!n.right.left.isRed_()&&(n=n.moveRedRight_()),t(e,n.key)===0){if(n.right.isEmpty())return id.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){let t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){return 2**this.check_()<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw Error(`Red node has red child(`+this.key+`,`+this.value+`)`);if(this.right.isRed_())throw Error(`Right child of (`+this.key+`,`+this.value+`) is red`);let e=this.left.check_();if(e!==this.right.check_())throw Error(`Black depths differ`);return e+(this.isRed_()?0:1)}};nd.RED=!0,nd.BLACK=!1;var rd=class{copy(e,t,n,r,i){return this}insert(e,t,n){return new nd(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},id=class e{constructor(t,n=e.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,nd.BLACK,null,null))}remove(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,nd.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),t===0)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();)if(t=this.comparator_(e,n.key),t===0){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}else t<0?n=n.left:t>0&&(r=n,n=n.right);throw Error(`Attempted to find predecessor key for a nonexistent key.  What gives?`)}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new td(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new td(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new td(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new td(this.root_,null,this.comparator_,!0,e)}};id.EMPTY_NODE=new rd;
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function ad(e,t){return tl(e.name,t.name)}function od(e,t){return tl(e,t)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var sd;function cd(e){sd=e}var ld=function(e){return typeof e==`number`?`number:`+sl(e):`string:`+e},ud=function(e){if(e.isLeafNode()){let t=e.val();E(typeof t==`string`||typeof t==`number`||typeof t==`object`&&Dt(t,`.sv`),`Priority must be a string or number.`)}else E(e===sd||e.isEmpty(),`priority of unexpected type.`);E(e===sd||e.getPriority().isEmpty(),`Priority nodes can't have a priority of their own.`)},dd,fd=class e{static set __childrenNodeConstructor(e){dd=e}static get __childrenNodeConstructor(){return dd}constructor(t,n=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=n,this.lazyHash_=null,E(this.value_!==void 0&&this.value_!==null,`LeafNode shouldn't be created with null/undefined value.`),ud(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new e(this.value_,t)}getImmediateChild(t){return t===`.priority`?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return R(t)?this:L(t)===`.priority`?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(t,n){return t===`.priority`?this.updatePriority(n):n.isEmpty()&&t!==`.priority`?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}updateChild(t,n){let r=L(t);return r===null?n:n.isEmpty()&&r!==`.priority`?this:(E(r!==`.priority`||Eu(t)===1,`.priority must be the last token in a path`),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Du(t),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e=``;this.priorityNode_.isEmpty()||(e+=`priority:`+ld(this.priorityNode_.val())+`:`);let t=typeof this.value_;e+=t+`:`,t===`number`?e+=sl(this.value_):e+=this.value_,this.lazyHash_=Bc(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(E(t.isLeafNode(),`Unknown node type`),this.compareToLeafNode_(t))}compareToLeafNode_(t){let n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return E(i>=0,`Unknown leaf type: `+n),E(a>=0,`Unknown leaf type: `+r),i===a?r===`object`?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){let t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}};fd.VALUE_TYPE_ORDER=[`object`,`boolean`,`number`,`string`];
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var pd,md;function hd(e){pd=e}function gd(e){md=e}var _d=new class extends Zu{compare(e,t){let n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return i===0?tl(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return z.MIN}maxPost(){return new z(el,new fd(`[PRIORITY-POST]`,md))}makePost(e,t){let n=pd(e);return new z(t,new fd(`[PRIORITY-POST]`,n))}toString(){return`.priority`}},vd=Math.log(2),yd=class{constructor(e){let t=e=>parseInt(Math.log(e)/vd,10),n=e=>parseInt(Array(e+1).join(`1`),2);this.count=t(e+1),this.current_=this.count-1;let r=n(this.count);this.bits_=e+1&r}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},bd=function(e,t,n,r){e.sort(t);let i=function(t,r){let a=r-t,o,s;if(a===0)return null;if(a===1)return o=e[t],s=n?n(o):o,new nd(s,o.node,nd.BLACK,null,null);{let c=parseInt(a/2,10)+t,l=i(t,c),u=i(c+1,r);return o=e[c],s=n?n(o):o,new nd(s,o.node,nd.BLACK,l,u)}},a=function(t){let r=null,a=null,o=e.length,s=function(t,r){let a=o-t,s=o;o-=t;let l=i(a+1,s),u=e[a],d=n?n(u):u;c(new nd(d,u.node,r,null,l))},c=function(e){r?(r.left=e,r=e):(a=e,r=e)};for(let e=0;e<t.count;++e){let n=t.nextBitIsOne(),r=2**(t.count-(e+1));n?s(r,nd.BLACK):(s(r,nd.BLACK),s(r,nd.RED))}return a},o=new yd(e.length),s=a(o);return new id(r||t,s)},xd,Sd={},Cd=class e{static get Default(){return E(Sd&&_d,`ChildrenNode.ts has not been loaded`),xd||=new e({".priority":Sd},{".priority":_d}),xd}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){let t=Ot(this.indexes_,e);if(!t)throw Error(`No index defined for `+e);return t instanceof id?t:null}hasIndex(e){return Dt(this.indexSet_,e.toString())}addIndex(t,n){E(t!==ed,`KeyIndex always exists and isn't meant to be added to the IndexMap.`);let r=[],i=!1,a=n.getIterator(z.Wrap),o=a.getNext();for(;o;)i||=t.isDefinedOn(o.node),r.push(o),o=a.getNext();let s;s=i?bd(r,t.getCompare()):Sd;let c=t.toString(),l={...this.indexSet_};l[c]=t;let u={...this.indexes_};return u[c]=s,new e(u,l)}addToIndexes(t,n){let r=At(this.indexes_,(e,r)=>{let i=Ot(this.indexSet_,r);if(E(i,`Missing index implementation for `+r),e===Sd)if(i.isDefinedOn(t.node)){let e=[],r=n.getIterator(z.Wrap),a=r.getNext();for(;a;)a.name!==t.name&&e.push(a),a=r.getNext();return e.push(t),bd(e,i.getCompare())}else return Sd;else{let r=n.get(t.name),i=e;return r&&(i=i.remove(new z(t.name,r))),i.insert(t,t.node)}});return new e(r,this.indexSet_)}removeFromIndexes(t,n){let r=At(this.indexes_,e=>{if(e===Sd)return e;{let r=n.get(t.name);return r?e.remove(new z(t.name,r)):e}});return new e(r,this.indexSet_)}},wd,B=class e{static get EMPTY_NODE(){return wd||=new e(new id(od),null,Cd.Default)}constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&ud(this.priorityNode_),this.children_.isEmpty()&&E(!this.priorityNode_||this.priorityNode_.isEmpty(),`An empty node cannot have a priority`)}isLeafNode(){return!1}getPriority(){return this.priorityNode_||wd}updatePriority(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}getImmediateChild(e){if(e===`.priority`)return this.getPriority();{let t=this.children_.get(e);return t===null?wd:t}}getChild(e){let t=L(e);return t===null?this:this.getImmediateChild(t).getChild(Du(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(t,n){if(E(n,`We should always be passing snapshot nodes`),t===`.priority`)return this.updatePriority(n);{let r=new z(t,n),i,a;n.isEmpty()?(i=this.children_.remove(t),a=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(t,n),a=this.indexMap_.addToIndexes(r,this.children_));let o=i.isEmpty()?wd:this.priorityNode_;return new e(i,o,a)}}updateChild(e,t){let n=L(e);if(n===null)return t;{E(L(e)!==`.priority`||Eu(e)===1,`.priority must be the last token in a path`);let r=this.getImmediateChild(n).updateChild(Du(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let n={},r=0,i=0,a=!0;if(this.forEachChild(_d,(o,s)=>{n[o]=s.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1}),!t&&a&&i<2*r){let e=[];for(let t in n)e[t]=n[t];return e}else return t&&!this.getPriority().isEmpty()&&(n[`.priority`]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e=``;this.getPriority().isEmpty()||(e+=`priority:`+ld(this.getPriority().val())+`:`),this.forEachChild(_d,(t,n)=>{let r=n.hash();r!==``&&(e+=`:`+t+`:`+r)}),this.lazyHash_=e===``?``:Bc(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){let r=this.resolveIndex_(n);if(r){let n=r.getPredecessorKey(new z(e,t));return n?n.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){let t=this.resolveIndex_(e);if(t){let e=t.minKey();return e&&e.name}else return this.children_.minKey()}getFirstChild(e){let t=this.getFirstChildName(e);return t?new z(t,this.children_.get(t)):null}getLastChildName(e){let t=this.resolveIndex_(e);if(t){let e=t.maxKey();return e&&e.name}else return this.children_.maxKey()}getLastChild(e){let t=this.getLastChildName(e);return t?new z(t,this.children_.get(t)):null}forEachChild(e,t){let n=this.resolveIndex_(e);return n?n.inorderTraversal(e=>t(e.name,e.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){let n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,e=>e);{let n=this.children_.getIteratorFrom(e.name,z.Wrap),r=n.peek();for(;r!=null&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){let n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,e=>e);{let n=this.children_.getReverseIteratorFrom(e.name,z.Wrap),r=n.peek();for(;r!=null&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Td?-1:0}withIndex(t){if(t===ed||this.indexMap_.hasIndex(t))return this;{let n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===ed||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{let t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){let e=this.getIterator(_d),n=t.getIterator(_d),r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return r===null&&i===null}else return!1;else return!1}}resolveIndex_(e){return e===ed?null:this.indexMap_.get(e.toString())}};B.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var Td=new class extends B{constructor(){super(new id(od),B.EMPTY_NODE,Cd.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return B.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(z,{MIN:{value:new z($c,B.EMPTY_NODE)},MAX:{value:new z(el,Td)}}),$u.__EMPTY_NODE=B.EMPTY_NODE,fd.__childrenNodeConstructor=B,cd(Td),gd(Td);
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Ed=!0;function Dd(e,t=null){if(e===null)return B.EMPTY_NODE;if(typeof e==`object`&&`.priority`in e&&(t=e[`.priority`]),E(t===null||typeof t==`string`||typeof t==`number`||typeof t==`object`&&`.sv`in t,`Invalid priority type found: `+typeof t),typeof e==`object`&&`.value`in e&&e[`.value`]!==null&&(e=e[`.value`]),typeof e!=`object`||`.sv`in e)return new fd(e,Dd(t));if(!(e instanceof Array)&&Ed){let n=[],r=!1;if(ol(e,(e,t)=>{if(e.substring(0,1)!==`.`){let i=Dd(t);i.isEmpty()||(r||=!i.getPriority().isEmpty(),n.push(new z(e,i)))}}),n.length===0)return B.EMPTY_NODE;let i=bd(n,ad,e=>e.name,od);if(r){let e=bd(n,_d.getCompare());return new B(i,Dd(t),new Cd({".priority":e},{".priority":_d}))}else return new B(i,Dd(t),Cd.Default)}else{let n=B.EMPTY_NODE;return ol(e,(t,r)=>{if(Dt(e,t)&&t.substring(0,1)!==`.`){let e=Dd(r);(e.isLeafNode()||!e.isEmpty())&&(n=n.updateImmediateChild(t,e))}}),n.updatePriority(Dd(t))}}hd(Dd);
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Od=class extends Zu{constructor(e){super(),this.indexPath_=e,E(!R(e)&&L(e)!==`.priority`,`Can't create PathIndex with empty path or .priority key`)}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return i===0?tl(e.name,t.name):i}makePost(e,t){let n=Dd(e),r=B.EMPTY_NODE.updateChild(this.indexPath_,n);return new z(t,r)}maxPost(){let e=B.EMPTY_NODE.updateChild(this.indexPath_,Td);return new z(el,e)}toString(){return Au(this.indexPath_,0).join(`/`)}},kd=new class extends Zu{compare(e,t){let n=e.node.compareTo(t.node);return n===0?tl(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return z.MIN}maxPost(){return z.MAX}makePost(e,t){let n=Dd(e);return new z(t,n)}toString(){return`.value`}};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Ad(e){return{type:`value`,snapshotNode:e}}function jd(e,t){return{type:`child_added`,snapshotNode:t,childName:e}}function Md(e,t){return{type:`child_removed`,snapshotNode:t,childName:e}}function Nd(e,t,n){return{type:`child_changed`,snapshotNode:t,childName:e,oldSnap:n}}function Pd(e,t){return{type:`child_moved`,snapshotNode:t,childName:e}}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Fd=class{constructor(e){this.index_=e}updateChild(e,t,n,r,i,a){E(e.isIndexed(this.index_),`A node must be indexed if only a child is updated`);let o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()||(a!=null&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(Md(t,o)):E(e.isLeafNode(),`A child remove without an old child only makes sense on a leaf node`):o.isEmpty()?a.trackChildChange(jd(t,n)):a.trackChildChange(Nd(t,n,o))),e.isLeafNode()&&n.isEmpty())?e:e.updateImmediateChild(t,n).withIndex(this.index_)}updateFullNode(e,t,n){return n!=null&&(e.isLeafNode()||e.forEachChild(_d,(e,r)=>{t.hasChild(e)||n.trackChildChange(Md(e,r))}),t.isLeafNode()||t.forEachChild(_d,(t,r)=>{if(e.hasChild(t)){let i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Nd(t,r,i))}else n.trackChildChange(jd(t,r))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?B.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}},Id=class e{constructor(t){this.indexedFilter_=new Fd(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,a){return this.matches(new z(t,n))||(n=B.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}updateFullNode(e,t,n){t.isLeafNode()&&(t=B.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(B.EMPTY_NODE);let i=this;return t.forEachChild(_d,(e,t)=>{i.matches(new z(e,t))||(r=r.updateImmediateChild(e,B.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}},Ld=class{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{let t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{let t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new Id(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,a){return this.rangedFilter_.matches(new z(t,n))||(n=B.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=B.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){r=B.EMPTY_NODE.withIndex(this.index_);let e;e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){let t=e.getNext();if(this.withinDirectionalStart(t))if(this.withinDirectionalEnd(t))r=r.updateImmediateChild(t.name,t.node),n++;else break;else continue}}else{r=t.withIndex(this.index_),r=r.updatePriority(B.EMPTY_NODE);let e;e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){let t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,B.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let a;if(this.reverse_){let e=this.index_.getCompare();a=(t,n)=>e(n,t)}else a=this.index_.getCompare();let o=e;E(o.numChildren()===this.limit_,``);let s=new z(t,n),c=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),l=this.rangedFilter_.matches(s);if(o.hasChild(t)){let e=o.getImmediateChild(t),u=r.getChildAfterChild(this.index_,c,this.reverse_);for(;u!=null&&(u.name===t||o.hasChild(u.name));)u=r.getChildAfterChild(this.index_,u,this.reverse_);let d=u==null?1:a(u,s);if(l&&!n.isEmpty()&&d>=0)return i?.trackChildChange(Nd(t,n,e)),o.updateImmediateChild(t,n);{i?.trackChildChange(Md(t,e));let n=o.updateImmediateChild(t,B.EMPTY_NODE);return u!=null&&this.rangedFilter_.matches(u)?(i?.trackChildChange(jd(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}else if(n.isEmpty())return e;else if(l)return a(c,s)>=0?(i!=null&&(i.trackChildChange(Md(c.name,c.node)),i.trackChildChange(jd(t,n))),o.updateImmediateChild(t,n).updateImmediateChild(c.name,B.EMPTY_NODE)):e;else return e}},Rd=class e{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_=``,this.indexStartValue_=null,this.indexStartName_=``,this.indexEndValue_=null,this.indexEndName_=``,this.index_=_d}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===``?this.startSet_:this.viewFrom_===`l`}getIndexStartValue(){return E(this.startSet_,`Only valid if start has been set`),this.indexStartValue_}getIndexStartName(){return E(this.startSet_,`Only valid if start has been set`),this.startNameSet_?this.indexStartName_:$c}hasEnd(){return this.endSet_}getIndexEndValue(){return E(this.endSet_,`Only valid if end has been set`),this.indexEndValue_}getIndexEndName(){return E(this.endSet_,`Only valid if end has been set`),this.endNameSet_?this.indexEndName_:el}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==``}getLimit(){return E(this.limitSet_,`Only valid if limit has been set`),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===_d}copy(){let t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function zd(e){return e.loadsAllData()?new Fd(e.getIndex()):e.hasLimit()?new Ld(e):new Id(e)}function Bd(e){let t={};if(e.isDefault())return t;let n;if(e.index_===_d?n=`$priority`:e.index_===kd?n=`$value`:e.index_===ed?n=`$key`:(E(e.index_ instanceof Od,`Unrecognized index type!`),n=e.index_.toString()),t.orderBy=Ct(n),e.startSet_){let n=e.startAfterSet_?`startAfter`:`startAt`;t[n]=Ct(e.indexStartValue_),e.startNameSet_&&(t[n]+=`,`+Ct(e.indexStartName_))}if(e.endSet_){let n=e.endBeforeSet_?`endBefore`:`endAt`;t[n]=Ct(e.indexEndValue_),e.endNameSet_&&(t[n]+=`,`+Ct(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function Vd(e){let t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===``&&(n=e.isViewFromLeft()?`l`:`r`),t.vf=n}return e.index_!==_d&&(t.i=e.index_.toString()),t}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Hd=class e extends xu{reportStats(e){throw Error(`Method not implemented.`)}static getListenId_(e,t){return t===void 0?(E(e._queryParams.isDefault(),`should have a tag if it's not a default query.`),e._path.toString()):`tag$`+t}constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=Kc(`p:rest:`),this.listens_={}}listen(t,n,r,i){let a=t._path.toString();this.log_(`Listen called for `+a+` `+t._queryIdentifier);let o=e.getListenId_(t,r),s={};this.listens_[o]=s;let c=Bd(t._queryParams);this.restRequest_(a+`.json`,c,(e,t)=>{let n=t;if(e===404&&(n=null,e=null),e===null&&this.onDataUpdate_(a,n,!1,r),Ot(this.listens_,o)===s){let t;t=e?e===401?`permission_denied`:`rest_error:`+e:`ok`,i(t,null)}})}unlisten(t,n){let r=e.getListenId_(t,n);delete this.listens_[r]}get(e){let t=Bd(e._queryParams),n=e._path.toString(),r=new Xe;return this.restRequest_(n+`.json`,t,(e,t)=>{let i=t;e===404&&(i=null,e=null),e===null?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(Error(i))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},n){return t.format=`export`,Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,i])=>{r&&r.accessToken&&(t.auth=r.accessToken),i&&i.token&&(t.ac=i.token);let a=(this.repoInfo_.secure?`https://`:`http://`)+this.repoInfo_.host+e+`?ns=`+this.repoInfo_.namespace+Nt(t);this.log_(`Sending REST request for `+a);let o=new XMLHttpRequest;o.onreadystatechange=()=>{if(n&&o.readyState===4){this.log_(`REST Response for `+a+` received. status:`,o.status,`response:`,o.responseText);let e=null;if(o.status>=200&&o.status<300){try{e=St(o.responseText)}catch{Yc(`Failed to parse JSON response for `+a+`: `+o.responseText)}n(null,e)}else o.status!==401&&o.status!==404&&Yc(`Got unsuccessful REST response for `+a+` Status: `+o.status),n(o.status);n=null}},o.open(`GET`,a,!0),o.send()})}},Ud=class{constructor(){this.rootNode_=B.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Wd(){return{value:null,children:new Map}}function Gd(e,t,n){if(R(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{let r=L(t);e.children.has(r)||e.children.set(r,Wd());let i=e.children.get(r);t=Du(t),Gd(i,t,n)}}function V(e,t,n){e.value===null?Kd(e,(e,r)=>{let i=new F(t.toString()+`/`+e);V(r,i,n)}):n(t,e.value)}function Kd(e,t){e.children.forEach((e,n)=>{t(n,e)})}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var qd=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t={...e};return this.last_&&ol(this.last_,(e,n)=>{t[e]=t[e]-n}),this.last_=e,t}},Jd=10*1e3,Yd=30*1e3,Xd=300*1e3,Zd=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new qd(e);let n=Jd+(Yd-Jd)*Math.random();_l(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){let e=this.statsListener_.get(),t={},n=!1;ol(e,(e,r)=>{r>0&&Dt(this.statsToReport_,e)&&(t[e]=r,n=!0)}),n&&this.server_.reportStats(t),_l(this.reportStats_.bind(this),Math.floor(Math.random()*2*Xd))}},Qd;(function(e){e[e.OVERWRITE=0]=`OVERWRITE`,e[e.MERGE=1]=`MERGE`,e[e.ACK_USER_WRITE=2]=`ACK_USER_WRITE`,e[e.LISTEN_COMPLETE=3]=`LISTEN_COMPLETE`})(Qd||={});function $d(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function ef(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function tf(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var nf=class e{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Qd.ACK_USER_WRITE,this.source=$d()}operationForChild(t){if(R(this.path)){if(this.affectedTree.value!=null)return E(this.affectedTree.children.isEmpty(),`affectedTree should not have overlapping affected paths.`),this;{let n=this.affectedTree.subtree(new F(t));return new e(I(),n,this.revert)}}else return E(L(this.path)===t,`operationForChild called for unrelated child.`),new e(Du(this.path),this.affectedTree,this.revert)}},rf=class e{constructor(e,t){this.source=e,this.path=t,this.type=Qd.LISTEN_COMPLETE}operationForChild(t){return R(this.path)?new e(this.source,I()):new e(this.source,Du(this.path))}},af=class e{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Qd.OVERWRITE}operationForChild(t){return R(this.path)?new e(this.source,I(),this.snap.getImmediateChild(t)):new e(this.source,Du(this.path),this.snap)}},sf=class e{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Qd.MERGE}operationForChild(t){if(R(this.path)){let n=this.children.subtree(new F(t));return n.isEmpty()?null:n.value?new af(this.source,I(),n.value):new e(this.source,I(),n)}else return E(L(this.path)===t,`Can't get a merge for a child not on the path of the operation`),new e(this.source,Du(this.path),this.children)}toString(){return`Operation(`+this.path+`: `+this.source.toString()+` merge: `+this.children.toString()+`)`}},cf=class{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(R(e))return this.isFullyInitialized()&&!this.filtered_;let t=L(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}},lf=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function uf(e,t,n,r){let i=[],a=[];return t.forEach(t=>{t.type===`child_changed`&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push(Pd(t.childName,t.snapshotNode))}),df(e,i,`child_removed`,t,r,n),df(e,i,`child_added`,t,r,n),df(e,i,`child_moved`,a,r,n),df(e,i,`child_changed`,t,r,n),df(e,i,`value`,t,r,n),i}function df(e,t,n,r,i,a){let o=r.filter(e=>e.type===n);o.sort((t,n)=>pf(e,t,n)),o.forEach(n=>{let r=ff(e,n,a);i.forEach(i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))})})}function ff(e,t,n){return t.type===`value`||t.type===`child_removed`||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function pf(e,t,n){if(t.childName==null||n.childName==null)throw Ae(`Should only compare child_ events.`);let r=new z(t.childName,t.snapshotNode),i=new z(n.childName,n.snapshotNode);return e.index_.compare(r,i)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function mf(e,t){return{eventCache:e,serverCache:t}}function hf(e,t,n,r){return mf(new cf(t,n,r),e.serverCache)}function gf(e,t,n,r){return mf(e.eventCache,new cf(t,n,r))}function _f(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function vf(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var yf,bf=()=>(yf||=new id(nl),yf),xf=class e{static fromObject(t){let n=new e(null);return ol(t,(e,t)=>{n=n.set(new F(e),t)}),n}constructor(e,t=bf()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:I(),value:this.value};if(R(e))return null;{let n=L(e),r=this.children.get(n);if(r!==null){let i=r.findRootMostMatchingPathAndValue(Du(e),t);return i==null?null:{path:Mu(new F(n),i.path),value:i.value}}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(t){if(R(t))return this;{let n=L(t),r=this.children.get(n);return r===null?new e(null):r.subtree(Du(t))}}set(t,n){if(R(t))return new e(n,this.children);{let r=L(t),i=(this.children.get(r)||new e(null)).set(Du(t),n),a=this.children.insert(r,i);return new e(this.value,a)}}remove(t){if(R(t))return this.children.isEmpty()?new e(null):new e(null,this.children);{let n=L(t),r=this.children.get(n);if(r){let i=r.remove(Du(t)),a;return a=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),this.value===null&&a.isEmpty()?new e(null):new e(this.value,a)}else return this}}get(e){if(R(e))return this.value;{let t=L(e),n=this.children.get(t);return n?n.get(Du(e)):null}}setTree(t,n){if(R(t))return n;{let r=L(t),i=(this.children.get(r)||new e(null)).setTree(Du(t),n),a;return a=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new e(this.value,a)}}fold(e){return this.fold_(I(),e)}fold_(e,t){let n={};return this.children.inorderTraversal((r,i)=>{n[r]=i.fold_(Mu(e,r),t)}),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,I(),t)}findOnPath_(e,t,n){let r=this.value?n(t,this.value):!1;if(r)return r;if(R(e))return null;{let r=L(e),i=this.children.get(r);return i?i.findOnPath_(Du(e),Mu(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,I(),t)}foreachOnPath_(t,n,r){if(R(t))return this;{this.value&&r(n,this.value);let i=L(t),a=this.children.get(i);return a?a.foreachOnPath_(Du(t),Mu(n,i),r):new e(null)}}foreach(e){this.foreach_(I(),e)}foreach_(e,t){this.children.inorderTraversal((n,r)=>{r.foreach_(Mu(e,n),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,n)=>{n.value&&e(t,n.value)})}},Sf=class e{constructor(e){this.writeTree_=e}static empty(){return new e(new xf(null))}};function Cf(e,t,n){if(R(t))return new Sf(new xf(n));{let r=e.writeTree_.findRootMostValueAndPath(t);if(r!=null){let i=r.path,a=r.value,o=Nu(i,t);return a=a.updateChild(o,n),new Sf(e.writeTree_.set(i,a))}else{let r=new xf(n),i=e.writeTree_.setTree(t,r);return new Sf(i)}}}function wf(e,t,n){let r=e;return ol(n,(e,n)=>{r=Cf(r,Mu(t,e),n)}),r}function Tf(e,t){if(R(t))return Sf.empty();{let n=e.writeTree_.setTree(t,new xf(null));return new Sf(n)}}function Ef(e,t){return Df(e,t)!=null}function Df(e,t){let n=e.writeTree_.findRootMostValueAndPath(t);return n==null?null:e.writeTree_.get(n.path).getChild(Nu(n.path,t))}function Of(e){let t=[],n=e.writeTree_.value;return n==null?e.writeTree_.children.inorderTraversal((e,n)=>{n.value!=null&&t.push(new z(e,n.value))}):n.isLeafNode()||n.forEachChild(_d,(e,n)=>{t.push(new z(e,n))}),t}function kf(e,t){if(R(t))return e;{let n=Df(e,t);return n==null?new Sf(e.writeTree_.subtree(t)):new Sf(new xf(n))}}function Af(e){return e.writeTree_.isEmpty()}function jf(e,t){return Mf(I(),e.writeTree_,t)}function Mf(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((t,i)=>{t===`.priority`?(E(i.value!==null,`Priority writes must always be leaf nodes`),r=i.value):n=Mf(Mu(e,t),i,n)}),!n.getChild(e).isEmpty()&&r!==null&&(n=n.updateChild(Mu(e,`.priority`),r)),n}}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Nf(e,t){return np(t,e)}function Pf(e,t,n,r,i){E(r>e.lastWriteId,`Stacking an older write on top of newer ones`),i===void 0&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Cf(e.visibleWrites,t,n)),e.lastWriteId=r}function Ff(e,t,n,r){E(r>e.lastWriteId,`Stacking an older merge on top of newer ones`),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=wf(e.visibleWrites,t,n),e.lastWriteId=r}function If(e,t){for(let n=0;n<e.allWrites.length;n++){let r=e.allWrites[n];if(r.writeId===t)return r}return null}function Lf(e,t){let n=e.allWrites.findIndex(e=>e.writeId===t);E(n>=0,`removeWrite called with nonexistent writeId.`);let r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,a=!1,o=e.allWrites.length-1;for(;i&&o>=0;){let t=e.allWrites[o];t.visible&&(o>=n&&Rf(t,r.path)?i=!1:Iu(r.path,t.path)&&(a=!0)),o--}if(i){if(a)return zf(e),!0;if(r.snap)e.visibleWrites=Tf(e.visibleWrites,r.path);else{let t=r.children;ol(t,t=>{e.visibleWrites=Tf(e.visibleWrites,Mu(r.path,t))})}return!0}else return!1}function Rf(e,t){if(e.snap)return Iu(e.path,t);for(let n in e.children)if(e.children.hasOwnProperty(n)&&Iu(Mu(e.path,n),t))return!0;return!1}function zf(e){e.visibleWrites=Vf(e.allWrites,Bf,I()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function Bf(e){return e.visible}function Vf(e,t,n){let r=Sf.empty();for(let i=0;i<e.length;++i){let a=e[i];if(t(a)){let e=a.path,t;if(a.snap)Iu(n,e)?(t=Nu(n,e),r=Cf(r,t,a.snap)):Iu(e,n)&&(t=Nu(e,n),r=Cf(r,I(),a.snap.getChild(t)));else if(a.children){if(Iu(n,e))t=Nu(n,e),r=wf(r,t,a.children);else if(Iu(e,n))if(t=Nu(e,n),R(t))r=wf(r,I(),a.children);else{let e=Ot(a.children,L(t));if(e){let n=e.getChild(Du(t));r=Cf(r,I(),n)}}}else throw Ae(`WriteRecord should have .snap or .children`)}}return r}function Hf(e,t,n,r,i){if(!r&&!i){let r=Df(e.visibleWrites,t);if(r!=null)return r;{let r=kf(e.visibleWrites,t);if(Af(r))return n;if(n==null&&!Ef(r,I()))return null;{let e=n||B.EMPTY_NODE;return jf(r,e)}}}else{let a=kf(e.visibleWrites,t);if(!i&&Af(a))return n;if(!i&&n==null&&!Ef(a,I()))return null;{let a=Vf(e.allWrites,function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Iu(e.path,t)||Iu(t,e.path))},t),o=n||B.EMPTY_NODE;return jf(a,o)}}}function Uf(e,t,n){let r=B.EMPTY_NODE,i=Df(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(_d,(e,t)=>{r=r.updateImmediateChild(e,t)}),r;if(n){let i=kf(e.visibleWrites,t);return n.forEachChild(_d,(e,t)=>{let n=jf(kf(i,new F(e)),t);r=r.updateImmediateChild(e,n)}),Of(i).forEach(e=>{r=r.updateImmediateChild(e.name,e.node)}),r}else{let n=kf(e.visibleWrites,t);return Of(n).forEach(e=>{r=r.updateImmediateChild(e.name,e.node)}),r}}function Wf(e,t,n,r,i){E(r||i,`Either existingEventSnap or existingServerSnap must exist`);let a=Mu(t,n);if(Ef(e.visibleWrites,a))return null;{let t=kf(e.visibleWrites,a);return Af(t)?i.getChild(n):jf(t,i.getChild(n))}}function Gf(e,t,n,r){let i=Mu(t,n),a=Df(e.visibleWrites,i);if(a!=null)return a;if(r.isCompleteForChild(n)){let t=kf(e.visibleWrites,i);return jf(t,r.getNode().getImmediateChild(n))}else return null}function Kf(e,t){return Df(e.visibleWrites,t)}function qf(e,t,n,r,i,a,o){let s,c=kf(e.visibleWrites,t),l=Df(c,I());if(l!=null)s=l;else if(n!=null)s=jf(c,n);else return[];if(s=s.withIndex(o),!s.isEmpty()&&!s.isLeafNode()){let e=[],t=o.getCompare(),n=a?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o),c=n.getNext();for(;c&&e.length<i;)t(c,r)!==0&&e.push(c),c=n.getNext();return e}else return[]}function Jf(){return{visibleWrites:Sf.empty(),allWrites:[],lastWriteId:-1}}function Yf(e,t,n,r){return Hf(e.writeTree,e.treePath,t,n,r)}function Xf(e,t){return Uf(e.writeTree,e.treePath,t)}function Zf(e,t,n,r){return Wf(e.writeTree,e.treePath,t,n,r)}function Qf(e,t){return Kf(e.writeTree,Mu(e.treePath,t))}function $f(e,t,n,r,i,a){return qf(e.writeTree,e.treePath,t,n,r,i,a)}function ep(e,t,n){return Gf(e.writeTree,e.treePath,t,n)}function tp(e,t){return np(Mu(e.treePath,t),e.writeTree)}function np(e,t){return{treePath:e,writeTree:t}}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var rp=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,n=e.childName;E(t===`child_added`||t===`child_changed`||t===`child_removed`,`Only child changes supported for tracking`),E(n!==`.priority`,`Only non-priority child changes can be tracked.`);let r=this.changeMap.get(n);if(r){let i=r.type;if(t===`child_added`&&i===`child_removed`)this.changeMap.set(n,Nd(n,e.snapshotNode,r.snapshotNode));else if(t===`child_removed`&&i===`child_added`)this.changeMap.delete(n);else if(t===`child_removed`&&i===`child_changed`)this.changeMap.set(n,Md(n,r.oldSnap));else if(t===`child_changed`&&i===`child_added`)this.changeMap.set(n,jd(n,e.snapshotNode));else if(t===`child_changed`&&i===`child_changed`)this.changeMap.set(n,Nd(n,e.snapshotNode,r.oldSnap));else throw Ae(`Illegal combination of changes: `+e+` occurred after `+r)}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}},ip=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}},ap=class{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let t=this.optCompleteServerCache_==null?this.viewCache_.serverCache:new cf(this.optCompleteServerCache_,!0,!1);return ep(this.writes_,e,t)}}getChildAfterChild(e,t,n){let r=this.optCompleteServerCache_==null?vf(this.viewCache_):this.optCompleteServerCache_,i=$f(this.writes_,r,t,1,n,e);return i.length===0?null:i[0]}};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function op(e){return{filter:e}}function sp(e,t){E(t.eventCache.getNode().isIndexed(e.filter.getIndex()),`Event snap not indexed`),E(t.serverCache.getNode().isIndexed(e.filter.getIndex()),`Server snap not indexed`)}function cp(e,t,n,r,i){let a=new rp,o,s;if(n.type===Qd.OVERWRITE){let c=n;c.source.fromUser?o=fp(e,t,c.path,c.snap,r,i,a):(E(c.source.fromServer,`Unknown source.`),s=c.source.tagged||t.serverCache.isFiltered()&&!R(c.path),o=dp(e,t,c.path,c.snap,r,i,s,a))}else if(n.type===Qd.MERGE){let c=n;c.source.fromUser?o=mp(e,t,c.path,c.children,r,i,a):(E(c.source.fromServer,`Unknown source.`),s=c.source.tagged||t.serverCache.isFiltered(),o=gp(e,t,c.path,c.children,r,i,s,a))}else if(n.type===Qd.ACK_USER_WRITE){let s=n;o=s.revert?yp(e,t,s.path,r,i,a):_p(e,t,s.path,s.affectedTree,r,i,a)}else if(n.type===Qd.LISTEN_COMPLETE)o=vp(e,t,n.path,r,a);else throw Ae(`Unknown operation type: `+n.type);let c=a.getChanges();return lp(t,o,c),{viewCache:o,changes:c}}function lp(e,t,n){let r=t.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=_f(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(Ad(_f(t)))}}function up(e,t,n,r,i,a){let o=t.eventCache;if(Qf(r,n)!=null)return t;{let s,c;if(R(n))if(E(t.serverCache.isFullyInitialized(),`If change path is empty, we must have complete server data`),t.serverCache.isFiltered()){let n=vf(t),i=n instanceof B?n:B.EMPTY_NODE,o=Xf(r,i);s=e.filter.updateFullNode(t.eventCache.getNode(),o,a)}else{let n=Yf(r,vf(t));s=e.filter.updateFullNode(t.eventCache.getNode(),n,a)}else{let l=L(n);if(l===`.priority`){E(Eu(n)===1,`Can't have a priority with additional path components`);let i=o.getNode();c=t.serverCache.getNode();let a=Zf(r,n,i,c);s=a==null?o.getNode():e.filter.updatePriority(i,a)}else{let u=Du(n),d;if(o.isCompleteForChild(l)){c=t.serverCache.getNode();let e=Zf(r,n,o.getNode(),c);d=e==null?o.getNode().getImmediateChild(l):o.getNode().getImmediateChild(l).updateChild(u,e)}else d=ep(r,l,t.serverCache);s=d==null?o.getNode():e.filter.updateChild(o.getNode(),l,d,u,i,a)}}return hf(t,s,o.isFullyInitialized()||R(n),e.filter.filtersNodes())}}function dp(e,t,n,r,i,a,o,s){let c=t.serverCache,l,u=o?e.filter:e.filter.getIndexedFilter();if(R(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let e=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),e,null)}else{let e=L(n);if(!c.isCompleteForPath(n)&&Eu(n)>1)return t;let i=Du(n),a=c.getNode().getImmediateChild(e).updateChild(i,r);l=e===`.priority`?u.updatePriority(c.getNode(),a):u.updateChild(c.getNode(),e,a,i,ip,null)}let d=gf(t,l,c.isFullyInitialized()||R(n),u.filtersNodes()),f=new ap(i,d,a);return up(e,d,n,i,f,s)}function fp(e,t,n,r,i,a,o){let s=t.eventCache,c,l,u=new ap(i,t,a);if(R(n))l=e.filter.updateFullNode(t.eventCache.getNode(),r,o),c=hf(t,l,!0,e.filter.filtersNodes());else{let i=L(n);if(i===`.priority`)l=e.filter.updatePriority(t.eventCache.getNode(),r),c=hf(t,l,s.isFullyInitialized(),s.isFiltered());else{let a=Du(n),l=s.getNode().getImmediateChild(i),d;if(R(a))d=r;else{let e=u.getCompleteChild(i);d=e==null?B.EMPTY_NODE:Ou(a)===`.priority`&&e.getChild(ju(a)).isEmpty()?e:e.updateChild(a,r)}if(l.equals(d))c=t;else{let n=e.filter.updateChild(s.getNode(),i,d,a,u,o);c=hf(t,n,s.isFullyInitialized(),e.filter.filtersNodes())}}}return c}function pp(e,t){return e.eventCache.isCompleteForChild(t)}function mp(e,t,n,r,i,a,o){let s=t;return r.foreach((r,c)=>{let l=Mu(n,r);pp(t,L(l))&&(s=fp(e,s,l,c,i,a,o))}),r.foreach((r,c)=>{let l=Mu(n,r);pp(t,L(l))||(s=fp(e,s,l,c,i,a,o))}),s}function hp(e,t,n){return n.foreach((e,n)=>{t=t.updateChild(e,n)}),t}function gp(e,t,n,r,i,a,o,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c=t,l;l=R(n)?r:new xf(null).setTree(n,r);let u=t.serverCache.getNode();return l.children.inorderTraversal((n,r)=>{if(u.hasChild(n)){let l=t.serverCache.getNode().getImmediateChild(n),u=hp(e,l,r);c=dp(e,c,new F(n),u,i,a,o,s)}}),l.children.inorderTraversal((n,r)=>{let l=!t.serverCache.isCompleteForChild(n)&&r.value===null;if(!u.hasChild(n)&&!l){let l=t.serverCache.getNode().getImmediateChild(n),u=hp(e,l,r);c=dp(e,c,new F(n),u,i,a,o,s)}}),c}function _p(e,t,n,r,i,a,o){if(Qf(i,n)!=null)return t;let s=t.serverCache.isFiltered(),c=t.serverCache;if(r.value!=null){if(R(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return dp(e,t,n,c.getNode().getChild(n),i,a,s,o);if(R(n)){let r=new xf(null);return c.getNode().forEachChild(ed,(e,t)=>{r=r.set(new F(e),t)}),gp(e,t,n,r,i,a,s,o)}else return t}else{let l=new xf(null);return r.foreach((e,t)=>{let r=Mu(n,e);c.isCompleteForPath(r)&&(l=l.set(e,c.getNode().getChild(r)))}),gp(e,t,n,l,i,a,s,o)}}function vp(e,t,n,r,i){let a=t.serverCache,o=gf(t,a.getNode(),a.isFullyInitialized()||R(n),a.isFiltered());return up(e,o,n,r,ip,i)}function yp(e,t,n,r,i,a){let o;if(Qf(r,n)!=null)return t;{let s=new ap(r,t,i),c=t.eventCache.getNode(),l;if(R(n)||L(n)===`.priority`){let n;if(t.serverCache.isFullyInitialized())n=Yf(r,vf(t));else{let e=t.serverCache.getNode();E(e instanceof B,`serverChildren would be complete if leaf node`),n=Xf(r,e)}n=n,l=e.filter.updateFullNode(c,n,a)}else{let i=L(n),u=ep(r,i,t.serverCache);u==null&&t.serverCache.isCompleteForChild(i)&&(u=c.getImmediateChild(i)),l=u==null?t.eventCache.getNode().hasChild(i)?e.filter.updateChild(c,i,B.EMPTY_NODE,Du(n),s,a):c:e.filter.updateChild(c,i,u,Du(n),s,a),l.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Yf(r,vf(t)),o.isLeafNode()&&(l=e.filter.updateFullNode(l,o,a)))}return o=t.serverCache.isFullyInitialized()||Qf(r,I())!=null,hf(t,l,o,e.filter.filtersNodes())}}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var bp=class{constructor(e,t){this.query_=e,this.eventRegistrations_=[];let n=this.query_._queryParams,r=new Fd(n.getIndex()),i=zd(n);this.processor_=op(i);let a=t.serverCache,o=t.eventCache,s=r.updateFullNode(B.EMPTY_NODE,a.getNode(),null),c=i.updateFullNode(B.EMPTY_NODE,o.getNode(),null),l=new cf(s,a.isFullyInitialized(),r.filtersNodes()),u=new cf(c,o.isFullyInitialized(),i.filtersNodes());this.viewCache_=mf(u,l),this.eventGenerator_=new lf(this.query_)}get query(){return this.query_}};function xp(e){return e.viewCache_.serverCache.getNode()}function Sp(e,t){let n=vf(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!R(t)&&!n.getImmediateChild(L(t)).isEmpty())?n.getChild(t):null}function Cp(e){return e.eventRegistrations_.length===0}function wp(e,t){e.eventRegistrations_.push(t)}function Tp(e,t,n){let r=[];if(n){E(t==null,`A cancel should cancel all event registrations.`);let i=e.query._path;e.eventRegistrations_.forEach(e=>{let t=e.createCancelEvent(n,i);t&&r.push(t)})}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){let i=e.eventRegistrations_[r];if(!i.matches(t))n.push(i);else if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function Ep(e,t,n,r){t.type===Qd.MERGE&&t.source.queryId!==null&&(E(vf(e.viewCache_),`We should always have a full cache before handling merges`),E(_f(e.viewCache_),`Missing event cache, even though we have a server cache`));let i=e.viewCache_,a=cp(e.processor_,i,t,n,r);return sp(e.processor_,a.viewCache),E(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),`Once a server snap is complete, it should never go back`),e.viewCache_=a.viewCache,Op(e,a.changes,a.viewCache.eventCache.getNode(),null)}function Dp(e,t){let n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(_d,(e,t)=>{r.push(jd(e,t))}),n.isFullyInitialized()&&r.push(Ad(n.getNode())),Op(e,r,n.getNode(),t)}function Op(e,t,n,r){let i=r?[r]:e.eventRegistrations_;return uf(e.eventGenerator_,t,n,i)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var kp,Ap=class{constructor(){this.views=new Map}};function jp(e){E(!kp,`__referenceConstructor has already been defined`),kp=e}function Mp(){return E(kp,`Reference.ts has not been loaded`),kp}function Np(e){return e.views.size===0}function Pp(e,t,n,r){let i=t.source.queryId;if(i!==null){let a=e.views.get(i);return E(a!=null,`SyncTree gave us an op for an invalid query.`),Ep(a,t,n,r)}else{let i=[];for(let a of e.views.values())i=i.concat(Ep(a,t,n,r));return i}}function Fp(e,t,n,r,i){let a=t._queryIdentifier,o=e.views.get(a);if(!o){let e=Yf(n,i?r:null),a=!1;e?a=!0:r instanceof B?(e=Xf(n,r),a=!1):(e=B.EMPTY_NODE,a=!1);let o=mf(new cf(e,a,!1),new cf(r,i,!1));return new bp(t,o)}return o}function Ip(e,t,n,r,i,a){let o=Fp(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),wp(o,n),Dp(o,n)}function Lp(e,t,n,r){let i=t._queryIdentifier,a=[],o=[],s=Hp(e);if(i===`default`)for(let[t,i]of e.views.entries())o=o.concat(Tp(i,n,r)),Cp(i)&&(e.views.delete(t),i.query._queryParams.loadsAllData()||a.push(i.query));else{let t=e.views.get(i);t&&(o=o.concat(Tp(t,n,r)),Cp(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||a.push(t.query)))}return s&&!Hp(e)&&a.push(new(Mp())(t._repo,t._path)),{removed:a,events:o}}function Rp(e){let t=[];for(let n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function zp(e,t){let n=null;for(let r of e.views.values())n||=Sp(r,t);return n}function Bp(e,t){if(t._queryParams.loadsAllData())return Up(e);{let n=t._queryIdentifier;return e.views.get(n)}}function Vp(e,t){return Bp(e,t)!=null}function Hp(e){return Up(e)!=null}function Up(e){for(let t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Wp;function Gp(e){E(!Wp,`__referenceConstructor has already been defined`),Wp=e}function Kp(){return E(Wp,`Reference.ts has not been loaded`),Wp}var qp=1,Jp=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new xf(null),this.pendingWriteTree_=Jf(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function Yp(e,t,n,r,i){return Pf(e.pendingWriteTree_,t,n,r,i),i?sm(e,new af($d(),t,n)):[]}function Xp(e,t,n,r){Ff(e.pendingWriteTree_,t,n,r);let i=xf.fromObject(n);return sm(e,new sf($d(),t,i))}function Zp(e,t,n=!1){let r=If(e.pendingWriteTree_,t);if(Lf(e.pendingWriteTree_,t)){let t=new xf(null);return r.snap==null?ol(r.children,e=>{t=t.set(new F(e),!0)}):t=t.set(I(),!0),sm(e,new nf(r.path,t,n))}else return[]}function Qp(e,t,n){return sm(e,new af(ef(),t,n))}function $p(e,t,n){let r=xf.fromObject(n);return sm(e,new sf(ef(),t,r))}function em(e,t){return sm(e,new rf(ef(),t))}function tm(e,t,n){let r=pm(e,n);if(r){let n=mm(r),i=n.path,a=n.queryId,o=Nu(i,t),s=new rf(tf(a),o);return hm(e,i,s)}else return[]}function nm(e,t,n,r,i=!1){let a=t._path,o=e.syncPointTree_.get(a),s=[];if(o&&(t._queryIdentifier===`default`||Vp(o,t))){let c=Lp(o,t,n,r);Np(o)&&(e.syncPointTree_=e.syncPointTree_.remove(a));let l=c.removed;if(s=c.events,!i){let n=l.findIndex(e=>e._queryParams.loadsAllData())!==-1,i=e.syncPointTree_.findOnPath(a,(e,t)=>Hp(t));if(n&&!i){let t=e.syncPointTree_.subtree(a);if(!t.isEmpty()){let n=gm(t);for(let t=0;t<n.length;++t){let r=n[t],i=r.query,a=um(e,r);e.listenProvider_.startListening(_m(i),dm(e,i),a.hashFn,a.onComplete)}}}!i&&l.length>0&&!r&&(n?e.listenProvider_.stopListening(_m(t),null):l.forEach(t=>{let n=e.queryToTagMap.get(fm(t));e.listenProvider_.stopListening(_m(t),n)}))}vm(e,l)}return s}function rm(e,t,n,r){let i=pm(e,r);if(i!=null){let r=mm(i),a=r.path,o=r.queryId,s=Nu(a,t),c=new af(tf(o),s,n);return hm(e,a,c)}else return[]}function im(e,t,n,r){let i=pm(e,r);if(i){let r=mm(i),a=r.path,o=r.queryId,s=Nu(a,t),c=xf.fromObject(n),l=new sf(tf(o),s,c);return hm(e,a,l)}else return[]}function am(e,t,n,r=!1){let i=t._path,a=null,o=!1;e.syncPointTree_.foreachOnPath(i,(e,t)=>{let n=Nu(e,i);a||=zp(t,n),o||=Hp(t)});let s=e.syncPointTree_.get(i);s?(o||=Hp(s),a||=zp(s,I())):(s=new Ap,e.syncPointTree_=e.syncPointTree_.set(i,s));let c;a==null?(c=!1,a=B.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((e,t)=>{let n=zp(t,I());n&&(a=a.updateImmediateChild(e,n))})):c=!0;let l=Vp(s,t);if(!l&&!t._queryParams.loadsAllData()){let n=fm(t);E(!e.queryToTagMap.has(n),`View does not exist, but we have a tag`);let r=ym();e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let u=Nf(e.pendingWriteTree_,i),d=Ip(s,t,n,u,a,c);if(!l&&!o&&!r){let n=Bp(s,t);d=d.concat(bm(e,t,n))}return d}function om(e,t,n){let r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(e,n)=>{let r=Nu(e,t),i=zp(n,r);if(i)return i});return Hf(r,t,i,n,!0)}function sm(e,t){return cm(t,e.syncPointTree_,null,Nf(e.pendingWriteTree_,I()))}function cm(e,t,n,r){if(R(e.path))return lm(e,t,n,r);{let i=t.get(I());n==null&&i!=null&&(n=zp(i,I()));let a=[],o=L(e.path),s=e.operationForChild(o),c=t.children.get(o);if(c&&s){let e=n?n.getImmediateChild(o):null,t=tp(r,o);a=a.concat(cm(s,c,e,t))}return i&&(a=a.concat(Pp(i,e,r,n))),a}}function lm(e,t,n,r){let i=t.get(I());n==null&&i!=null&&(n=zp(i,I()));let a=[];return t.children.inorderTraversal((t,i)=>{let o=n?n.getImmediateChild(t):null,s=tp(r,t),c=e.operationForChild(t);c&&(a=a.concat(lm(c,i,o,s)))}),i&&(a=a.concat(Pp(i,e,r,n))),a}function um(e,t){let n=t.query,r=dm(e,n);return{hashFn:()=>(xp(t)||B.EMPTY_NODE).hash(),onComplete:t=>{if(t===`ok`)return r?tm(e,n._path,r):em(e,n._path);{let r=ul(t,n);return nm(e,n,null,r)}}}}function dm(e,t){let n=fm(t);return e.queryToTagMap.get(n)}function fm(e){return e._path.toString()+`$`+e._queryIdentifier}function pm(e,t){return e.tagToQueryMap.get(t)}function mm(e){let t=e.indexOf(`$`);return E(t!==-1&&t<e.length-1,`Bad queryKey.`),{queryId:e.substr(t+1),path:new F(e.substr(0,t))}}function hm(e,t,n){let r=e.syncPointTree_.get(t);E(r,`Missing sync point for query tag that we're tracking`);let i=Nf(e.pendingWriteTree_,t);return Pp(r,n,i,null)}function gm(e){return e.fold((e,t,n)=>{if(t&&Hp(t))return[Up(t)];{let e=[];return t&&(e=Rp(t)),ol(n,(t,n)=>{e=e.concat(n)}),e}})}function _m(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Kp())(e._repo,e._path):e}function vm(e,t){for(let n=0;n<t.length;++n){let r=t[n];if(!r._queryParams.loadsAllData()){let t=fm(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}function ym(){return qp++}function bm(e,t,n){let r=t._path,i=dm(e,t),a=um(e,n),o=e.listenProvider_.startListening(_m(t),i,a.hashFn,a.onComplete),s=e.syncPointTree_.subtree(r);if(i)E(!Hp(s.value),`If we're adding a query, it shouldn't be shadowed`);else{let t=s.fold((e,t,n)=>{if(!R(e)&&t&&Hp(t))return[Up(t).query];{let e=[];return t&&(e=e.concat(Rp(t).map(e=>e.query))),ol(n,(t,n)=>{e=e.concat(n)}),e}});for(let n=0;n<t.length;++n){let r=t[n];e.listenProvider_.stopListening(_m(r),dm(e,r))}}return o}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var xm=class e{constructor(e){this.node_=e}getImmediateChild(t){let n=this.node_.getImmediateChild(t);return new e(n)}node(){return this.node_}},Sm=class e{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(t){let n=Mu(this.path_,t);return new e(this.syncTree_,n)}node(){return om(this.syncTree_,this.path_)}},Cm=function(e){return e||={},e.timestamp=e.timestamp||new Date().getTime(),e},wm=function(e,t,n){if(!e||typeof e!=`object`)return e;if(E(`.sv`in e,`Unexpected leaf node or priority contents`),typeof e[`.sv`]==`string`)return Tm(e[`.sv`],t,n);if(typeof e[`.sv`]==`object`)return Em(e[`.sv`],t);E(!1,`Unexpected server value: `+JSON.stringify(e,null,2))},Tm=function(e,t,n){switch(e){case`timestamp`:return n.timestamp;default:E(!1,`Unexpected server value: `+e)}},Em=function(e,t,n){e.hasOwnProperty(`increment`)||E(!1,`Unexpected server value: `+JSON.stringify(e,null,2));let r=e.increment;typeof r!=`number`&&E(!1,`Unexpected increment value: `+r);let i=t.node();if(E(i!=null,`Expected ChildrenNode.EMPTY_NODE for nulls`),!i.isLeafNode())return r;let a=i.getValue();return typeof a==`number`?a+r:r},Dm=function(e,t,n,r){return km(t,new Sm(n,e),r)},Om=function(e,t,n){return km(e,new xm(t),n)};function km(e,t,n){let r=e.getPriority().val(),i=wm(r,t.getImmediateChild(`.priority`),n),a;if(e.isLeafNode()){let r=e,a=wm(r.getValue(),t,n);return a!==r.getValue()||i!==r.getPriority().val()?new fd(a,Dd(i)):e}else{let r=e;return a=r,i!==r.getPriority().val()&&(a=a.updatePriority(new fd(i))),r.forEachChild(_d,(e,r)=>{let i=km(r,t.getImmediateChild(e),n);i!==r&&(a=a.updateImmediateChild(e,i))}),a}}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Am=class{constructor(e=``,t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}};function jm(e,t){let n=t instanceof F?t:new F(t),r=e,i=L(n);for(;i!==null;){let e=Ot(r.node.children,i)||{children:{},childCount:0};r=new Am(i,r,e),n=Du(n),i=L(n)}return r}function Mm(e){return e.node.value}function Nm(e,t){e.node.value=t,Bm(e)}function Pm(e){return e.node.childCount>0}function Fm(e){return Mm(e)===void 0&&!Pm(e)}function Im(e,t){ol(e.node.children,(n,r)=>{t(new Am(n,e,r))})}function Lm(e,t,n,r){n&&!r&&t(e),Im(e,e=>{Lm(e,t,!0,r)}),n&&r&&t(e)}function Rm(e,t,n){let r=n?e:e.parent;for(;r!==null;){if(t(r))return!0;r=r.parent}return!1}function zm(e){return new F(e.parent===null?e.name:zm(e.parent)+`/`+e.name)}function Bm(e){e.parent!==null&&Vm(e.parent,e.name,e)}function Vm(e,t,n){let r=Fm(n),i=Dt(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Bm(e)):!r&&!i&&(e.node.children[t]=n.node,e.node.childCount++,Bm(e))}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Hm=/[\[\].#$\/\u0000-\u001F\u007F]/,Um=/[\[\].#$\u0000-\u001F\u007F]/,Wm=10*1024*1024,Gm=function(e){return typeof e==`string`&&e.length!==0&&!Hm.test(e)},Km=function(e){return typeof e==`string`&&e.length!==0&&!Um.test(e)},qm=function(e){return e&&=e.replace(/^\/*\.info(\/|$)/,`/`),Km(e)},Jm=function(e){return e===null||typeof e==`string`||typeof e==`number`&&!Zc(e)||e&&typeof e==`object`&&Dt(e,`.sv`)},Ym=function(e,t,n,r){r&&t===void 0||Xm(Vt(e,`value`),t,n)},Xm=function(e,t,n){let r=n instanceof F?new Lu(n,e):n;if(t===void 0)throw Error(e+`contains undefined `+Vu(r));if(typeof t==`function`)throw Error(e+`contains a function `+Vu(r)+` with contents = `+t.toString());if(Zc(t))throw Error(e+`contains `+t.toString()+` `+Vu(r));if(typeof t==`string`&&t.length>Wm/3&&D(t)>Wm)throw Error(e+`contains a string greater than 10485760 utf8 bytes `+Vu(r)+` ('`+t.substring(0,50)+`...')`);if(t&&typeof t==`object`){let n=!1,i=!1;if(ol(t,(t,a)=>{if(t===`.value`)n=!0;else if(t!==`.priority`&&t!==`.sv`&&(i=!0,!Gm(t)))throw Error(e+` contains an invalid key (`+t+`) `+Vu(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Ru(r,t),Xm(e,a,r),zu(r)}),n&&i)throw Error(e+` contains ".value" child `+Vu(r)+` in addition to actual children.`)}},Zm=function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];let i=Au(r);for(let t=0;t<i.length;t++)if(!(i[t]===`.priority`&&t===i.length-1)&&!Gm(i[t]))throw Error(e+`contains an invalid key (`+i[t]+`) in path `+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}t.sort(Pu);let i=null;for(n=0;n<t.length;n++){if(r=t[n],i!==null&&Iu(i,r))throw Error(e+`contains a path `+i.toString()+` that is ancestor of another path `+r.toString());i=r}},Qm=function(e,t,n,r){if(r&&t===void 0)return;let i=Vt(e,`values`);if(!(t&&typeof t==`object`)||Array.isArray(t))throw Error(i+` must be an object containing the children to replace.`);let a=[];ol(t,(e,t)=>{let r=new F(e);if(Xm(i,t,Mu(n,r)),Ou(r)===`.priority`&&!Jm(t))throw Error(i+`contains an invalid value for '`+r.toString()+`', which must be a valid Firebase priority (a string, finite number, server value, or null).`);a.push(r)}),Zm(i,a)},$m=function(e,t,n,r){if(!(r&&n===void 0)&&!Km(n))throw Error(Vt(e,t)+`was an invalid path = "`+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},eh=function(e,t,n,r){n&&=n.replace(/^\/*\.info(\/|$)/,`/`),$m(e,t,n,r)},th=function(e,t){if(L(t)===`.info`)throw Error(e+` failed = Can't modify data under /.info/`)},nh=function(e,t){let n=t.path.toString();if(typeof t.repoInfo.host!=`string`||t.repoInfo.host.length===0||!Gm(t.repoInfo.namespace)&&t.repoInfo.host.split(`:`)[0]!==`localhost`||n.length!==0&&!qm(n))throw Error(Vt(e,`url`)+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)},rh=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function ih(e,t){let n=null;for(let r=0;r<t.length;r++){let i=t[r],a=i.getPath();n!==null&&!Fu(a,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function ah(e,t,n){ih(e,n),sh(e,e=>Fu(e,t))}function oh(e,t,n){ih(e,n),sh(e,e=>Iu(e,t)||Iu(t,e))}function sh(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){let i=e.eventLists_[r];if(i){let a=i.path;t(a)?(ch(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function ch(e){for(let t=0;t<e.events.length;t++){let n=e.events[t];if(n!==null){e.events[t]=null;let r=n.getEventRunner();Hc&&Gc(`event: `+n.toString()),hl(r)}}}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var lh=`repo_interrupt`,uh=25,dh=class{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new rh,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Wd(),this.transactionQueueTree_=new Am,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?`https://`:`http://`)+this.repoInfo_.host}};function fh(e,t,n){if(e.stats_=Rl(e.repoInfo_),e.forceRestClient_||gl())e.server_=new Hd(e.repoInfo_,(t,n,r,i)=>{hh(e,t,n,r,i)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>gh(e,!0),0);else{if(n!=null){if(typeof n!=`object`)throw Error(`Only objects are supported for option databaseAuthVariableOverride`);try{Ct(n)}catch(e){throw Error(`Invalid authOverride provided: `+e)}}e.persistentConnection_=new Xu(e.repoInfo_,t,(t,n,r,i)=>{hh(e,t,n,r,i)},t=>{gh(e,t)},t=>{_h(e,t)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(t=>{e.server_.refreshAuthToken(t)}),e.appCheckProvider_.addTokenChangeListener(t=>{e.server_.refreshAppCheckToken(t.token)}),e.statsReporter_=zl(e.repoInfo_,()=>new Zd(e.stats_,e.server_)),e.infoData_=new Ud,e.infoSyncTree_=new Jp({startListening:(t,n,r,i)=>{let a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=Qp(e.infoSyncTree_,t._path,o),setTimeout(()=>{i(`ok`)},0)),a},stopListening:()=>{}}),vh(e,`connected`,!1),e.serverSyncTree_=new Jp({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,(n,r)=>{let a=i(n,r);oh(e.eventQueue_,t._path,a)}),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function ph(e){let t=e.infoData_.getNode(new F(`.info/serverTimeOffset`)).val()||0;return new Date().getTime()+t}function mh(e){return Cm({timestamp:ph(e)})}function hh(e,t,n,r,i){e.dataUpdateCount++;let a=new F(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(i)if(r){let t=At(n,e=>Dd(e));o=im(e.serverSyncTree_,a,t,i)}else{let t=Dd(n);o=rm(e.serverSyncTree_,a,t,i)}else if(r){let t=At(n,e=>Dd(e));o=$p(e.serverSyncTree_,a,t)}else{let t=Dd(n);o=Qp(e.serverSyncTree_,a,t)}let s=a;o.length>0&&(s=jh(e,a)),oh(e.eventQueue_,s,o)}function gh(e,t){vh(e,`connected`,t),t===!1&&Sh(e)}function _h(e,t){ol(t,(t,n)=>{vh(e,t,n)})}function vh(e,t,n){let r=new F(`/.info/`+t),i=Dd(n);e.infoData_.updateSnapshot(r,i);let a=Qp(e.infoSyncTree_,r,i);oh(e.eventQueue_,r,a)}function yh(e){return e.nextWriteId_++}function bh(e,t,n,r,i){Eh(e,`set`,{path:t.toString(),value:n,priority:r});let a=mh(e),o=Dd(n,r),s=om(e.serverSyncTree_,t),c=Om(o,s,a),l=yh(e),u=Yp(e.serverSyncTree_,t,c,l,!0);ih(e.eventQueue_,u),e.server_.put(t.toString(),o.val(!0),(n,r)=>{let a=n===`ok`;a||Yc(`set at `+t+` failed: `+n);let o=Zp(e.serverSyncTree_,l,!a);oh(e.eventQueue_,t,o),Dh(e,i,n,r)});let d=Lh(e,t);jh(e,d),oh(e.eventQueue_,d,[])}function xh(e,t,n,r){Eh(e,`update`,{path:t.toString(),value:n});let i=!0,a=mh(e),o={};if(ol(n,(n,r)=>{i=!1,o[n]=Dm(Mu(t,n),Dd(r),e.serverSyncTree_,a)}),i)Gc(`update() called with empty data.  Don't do anything.`),Dh(e,r,`ok`,void 0);else{let i=yh(e),a=Xp(e.serverSyncTree_,t,o,i);ih(e.eventQueue_,a),e.server_.merge(t.toString(),n,(n,a)=>{let o=n===`ok`;o||Yc(`update at `+t+` failed: `+n);let s=Zp(e.serverSyncTree_,i,!o),c=s.length>0?jh(e,t):t;oh(e.eventQueue_,c,s),Dh(e,r,n,a)}),ol(n,n=>{let r=Lh(e,Mu(t,n));jh(e,r)}),oh(e.eventQueue_,t,[])}}function Sh(e){Eh(e,`onDisconnectEvents`);let t=mh(e),n=Wd();V(e.onDisconnect_,I(),(r,i)=>{let a=Dm(r,i,e.serverSyncTree_,t);Gd(n,r,a)});let r=[];V(n,I(),(t,n)=>{r=r.concat(Qp(e.serverSyncTree_,t,n));let i=Lh(e,t);jh(e,i)}),e.onDisconnect_=Wd(),oh(e.eventQueue_,I(),r)}function Ch(e,t,n){let r;r=L(t._path)===`.info`?am(e.infoSyncTree_,t,n):am(e.serverSyncTree_,t,n),ah(e.eventQueue_,t._path,r)}function wh(e,t,n){let r;r=L(t._path)===`.info`?nm(e.infoSyncTree_,t,n):nm(e.serverSyncTree_,t,n),ah(e.eventQueue_,t._path,r)}function Th(e){e.persistentConnection_&&e.persistentConnection_.interrupt(lh)}function Eh(e,...t){let n=``;e.persistentConnection_&&(n=e.persistentConnection_.id+`:`),Gc(n,...t)}function Dh(e,t,n,r){t&&hl(()=>{if(n===`ok`)t(null);else{let e=(n||`error`).toUpperCase(),i=e;r&&(i+=`: `+r);let a=Error(i);a.code=e,t(a)}})}function Oh(e,t,n){return om(e.serverSyncTree_,t,n)||B.EMPTY_NODE}function kh(e,t=e.transactionQueueTree_){if(t||Ih(e,t),Mm(t)){let n=Ph(e,t);E(n.length>0,`Sending zero length transaction queue`),n.every(e=>e.status===0)&&Ah(e,zm(t),n)}else Pm(t)&&Im(t,t=>{kh(e,t)})}function Ah(e,t,n){let r=n.map(e=>e.currentWriteId),i=Oh(e,t,r),a=i,o=i.hash();for(let e=0;e<n.length;e++){let r=n[e];E(r.status===0,`tryToSendTransactionQueue_: items in queue should all be run.`),r.status=1,r.retryCount++;let i=Nu(t,r.path);a=a.updateChild(i,r.currentOutputSnapshotRaw)}let s=a.val(!0),c=t;e.server_.put(c.toString(),s,r=>{Eh(e,`transaction put response`,{path:c.toString(),status:r});let i=[];if(r===`ok`){let r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(Zp(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push(()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)),n[t].unwatcher();Ih(e,jm(e.transactionQueueTree_,t)),kh(e,e.transactionQueueTree_),oh(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)hl(r[e])}else{if(r===`datastale`)for(let e=0;e<n.length;e++)n[e].status===3?n[e].status=4:n[e].status=0;else{Yc(`transaction at `+c.toString()+` failed: `+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}jh(e,t)}},o)}function jh(e,t){let n=Nh(e,t),r=zm(n),i=Ph(e,n);return Mh(e,i,r),r}function Mh(e,t,n){if(t.length===0)return;let r=[],i=[],a=t.filter(e=>e.status===0).map(e=>e.currentWriteId);for(let o=0;o<t.length;o++){let s=t[o],c=Nu(n,s.path),l=!1,u;if(E(c!==null,`rerunTransactionsUnderNode_: relativePath should not be null.`),s.status===4)l=!0,u=s.abortReason,i=i.concat(Zp(e.serverSyncTree_,s.currentWriteId,!0));else if(s.status===0)if(s.retryCount>=uh)l=!0,u=`maxretry`,i=i.concat(Zp(e.serverSyncTree_,s.currentWriteId,!0));else{let n=Oh(e,s.path,a);s.currentInputSnapshot=n;let r=t[o].update(n.val());if(r!==void 0){Xm(`transaction failed: Data returned `,r,s.path);let t=Dd(r);typeof r==`object`&&r&&Dt(r,`.priority`)||(t=t.updatePriority(n.getPriority()));let o=s.currentWriteId,c=mh(e),l=Om(t,n,c);s.currentOutputSnapshotRaw=t,s.currentOutputSnapshotResolved=l,s.currentWriteId=yh(e),a.splice(a.indexOf(o),1),i=i.concat(Yp(e.serverSyncTree_,s.path,l,s.currentWriteId,s.applyLocally)),i=i.concat(Zp(e.serverSyncTree_,o,!0))}else l=!0,u=`nodata`,i=i.concat(Zp(e.serverSyncTree_,s.currentWriteId,!0))}oh(e.eventQueue_,n,i),i=[],l&&(t[o].status=2,(function(e){setTimeout(e,0)})(t[o].unwatcher),t[o].onComplete&&(u===`nodata`?r.push(()=>t[o].onComplete(null,!1,t[o].currentInputSnapshot)):r.push(()=>t[o].onComplete(Error(u),!1,null))))}Ih(e,e.transactionQueueTree_);for(let e=0;e<r.length;e++)hl(r[e]);kh(e,e.transactionQueueTree_)}function Nh(e,t){let n,r=e.transactionQueueTree_;for(n=L(t);n!==null&&Mm(r)===void 0;)r=jm(r,n),t=Du(t),n=L(t);return r}function Ph(e,t){let n=[];return Fh(e,t,n),n.sort((e,t)=>e.order-t.order),n}function Fh(e,t,n){let r=Mm(t);if(r)for(let e=0;e<r.length;e++)n.push(r[e]);Im(t,t=>{Fh(e,t,n)})}function Ih(e,t){let n=Mm(t);if(n){let e=0;for(let t=0;t<n.length;t++)n[t].status!==2&&(n[e]=n[t],e++);n.length=e,Nm(t,n.length>0?n:void 0)}Im(t,t=>{Ih(e,t)})}function Lh(e,t){let n=zm(Nh(e,t)),r=jm(e.transactionQueueTree_,t);return Rm(r,t=>{Rh(e,t)}),Rh(e,r),Lm(r,t=>{Rh(e,t)}),n}function Rh(e,t){let n=Mm(t);if(n){let r=[],i=[],a=-1;for(let t=0;t<n.length;t++)n[t].status===3||(n[t].status===1?(E(a===t-1,`All SENT items should be at beginning of queue.`),a=t,n[t].status=3,n[t].abortReason=`set`):(E(n[t].status===0,`Unexpected transaction status in abort`),n[t].unwatcher(),i=i.concat(Zp(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,Error(`set`),!1,null))));a===-1?Nm(t,void 0):n.length=a+1,oh(e.eventQueue_,zm(t),i);for(let e=0;e<r.length;e++)hl(r[e])}}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function zh(e){let t=``,n=e.split(`/`);for(let e=0;e<n.length;e++)if(n[e].length>0){let r=n[e];try{r=decodeURIComponent(r.replace(/\+/g,` `))}catch{}t+=`/`+r}return t}function Bh(e){let t={};e.charAt(0)===`?`&&(e=e.substring(1));for(let n of e.split(`&`)){if(n.length===0)continue;let r=n.split(`=`);r.length===2?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Yc(`Invalid query segment '${n}' in query '${e}'`)}return t}var Vh=function(e,t){let n=Hh(e),r=n.namespace;n.domain===`firebase.com`&&Jc(n.host+` is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead`),(!r||r===`undefined`)&&n.domain!==`localhost`&&Jc(`Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com`),n.secure||Xc();let i=n.scheme===`ws`||n.scheme===`wss`;return{repoInfo:new Ml(n.host,n.secure,r,i,t,``,r!==n.subdomain),path:new F(n.pathString)}},Hh=function(e){let t=``,n=``,r=``,i=``,a=``,o=!0,s=`https`,c=443;if(typeof e==`string`){let l=e.indexOf(`//`);l>=0&&(s=e.substring(0,l-1),e=e.substring(l+2));let u=e.indexOf(`/`);u===-1&&(u=e.length);let d=e.indexOf(`?`);d===-1&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(i=zh(e.substring(u,d)));let f=Bh(e.substring(Math.min(e.length,d)));l=t.indexOf(`:`),l>=0?(o=s===`https`||s===`wss`,c=parseInt(t.substring(l+1),10)):l=t.length;let p=t.slice(0,l);if(p.toLowerCase()===`localhost`)n=`localhost`;else if(p.split(`.`).length<=2)n=p;else{let e=t.indexOf(`.`);r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),a=r}`ns`in f&&(a=f.ns)}return{host:t,port:c,domain:n,subdomain:r,secure:o,scheme:s,pathString:i,namespace:a}},Uh=`-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz`;(function(){let e=0,t=[];return function(n){let r=n===e;e=n;let i,a=Array(8);for(i=7;i>=0;i--)a[i]=Uh.charAt(n%64),n=Math.floor(n/64);E(n===0,`Cannot push at time == 0`);let o=a.join(``);if(r){for(i=11;i>=0&&t[i]===63;i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=Uh.charAt(t[i]);return E(o.length===20,`nextPushId: Length should be 20.`),o}})();
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Wh=class{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){let e=this.snapshot.ref;return this.eventType===`value`?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+`:`+this.eventType+`:`+Ct(this.snapshot.exportVal())}},Gh=class{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return`cancel`}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+`:cancel`}},Kh=class{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return E(this.hasCancelCallback,`Raising a cancel event on a listener with no cancel callback`),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}},qh=class e{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return R(this._path)?null:Ou(this._path)}get ref(){return new Jh(this._repo,this._path)}get _queryIdentifier(){let e=Vd(this._queryParams),t=il(e);return t===`{}`?`default`:t}get _queryObject(){return Vd(this._queryParams)}isEqual(t){if(t=O(t),!(t instanceof e))return!1;let n=this._repo===t._repo,r=Fu(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+ku(this._path)}},Jh=class e extends qh{constructor(e,t){super(e,t,new Rd,!1)}get parent(){let t=ju(this._path);return t===null?null:new e(this._repo,t)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Yh=class e{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){let n=new F(t),r=Zh(this.ref,t);return new e(this._node.getChild(n),r,_d)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(n,r)=>t(new e(r,Zh(this.ref,n),_d)))}hasChild(e){let t=new F(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function Xh(e,t){return e=O(e),e._checkNotDeleted(`ref`),t===void 0?e._root:Zh(e._root,t)}function Zh(e,t){return e=O(e),L(e._path)===null?eh(`child`,`path`,t,!1):$m(`child`,`path`,t,!1),new Jh(e._repo,Mu(e._path,t))}function Qh(e){return th(`remove`,e._path),$h(e,null)}function $h(e,t){e=O(e),th(`set`,e._path),Ym(`set`,t,e._path,!1);let n=new Xe;return bh(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}function eg(e,t){Qm(`update`,t,e._path,!1);let n=new Xe;return xh(e._repo,e._path,t,n.wrapCallback(()=>{})),n.promise}var tg=class e{constructor(e){this.callbackContext=e}respondsTo(e){return e===`value`}createEvent(e,t){let n=t._queryParams.getIndex();return new Wh(`value`,this,new Yh(e.snapshotNode,new Jh(t._repo,t._path),n))}getEventRunner(e){return e.getEventType()===`cancel`?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Gh(this,e,t):null}matches(t){return t instanceof e?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},ng=class e{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t=e===`children_added`?`child_added`:e;return t=t===`children_removed`?`child_removed`:t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Gh(this,e,t):null}createEvent(e,t){E(e.childName!=null,`Child events should have a childName.`);let n=Zh(new Jh(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new Wh(e.type,this,new Yh(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return e.getEventType()===`cancel`?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(t){return t instanceof e?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function rg(e,t,n,r,i){let a;if(typeof r==`object`&&(a=void 0,i=r),typeof r==`function`&&(a=r),i&&i.onlyOnce){let t=n,r=(n,r)=>{wh(e._repo,e,s),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}let o=new Kh(n,a||void 0),s=t===`value`?new tg(o):new ng(t,o);return Ch(e._repo,e,s),()=>wh(e._repo,e,s)}function ig(e,t,n,r){return rg(e,`value`,t,n,r)}jp(Jh),Gp(Jh);
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var ag=`FIREBASE_DATABASE_EMULATOR_HOST`,og={},sg=!1;function cg(e,t,n,r){let i=t.lastIndexOf(`:`),a=t.substring(0,i),o=Ze(a);e.repoInfo_=new Ml(t,o,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(e.authTokenProvider_=r)}function lg(e,t,n,r,i){let a=r||e.options.databaseURL;a===void 0&&(e.options.projectId||Jc(`Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp().`),Gc(`Using default host for project `,e.options.projectId),a=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o=Vh(a,i),s=o.repoInfo,c,l;typeof process<`u`&&(l={}[ag]),l?(c=!0,a=`http://${l}?ns=${s.namespace}`,o=Vh(a,i),s=o.repoInfo):c=!o.repoInfo.secure;let u=i&&c?new bl(bl.OWNER):new yl(e.name,e.options,t);nh(`Invalid Firebase Database URL`,o),R(o.path)||Jc(`Database URL must point to the root of a Firebase Database (not including a child path).`);let d=dg(s,e,u,new vl(e,n));return new fg(d,e)}function ug(e,t){let n=og[t];(!n||n[e.key]!==e)&&Jc(`Database ${t}(${e.repoInfo_}) has already been deleted.`),Th(e),delete n[e.key]}function dg(e,t,n,r){let i=og[t.name];i||(i={},og[t.name]=i);let a=i[e.toURLString()];return a&&Jc(`Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.`),a=new dh(e,sg,n,r),i[e.toURLString()]=a,a}var fg=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type=`database`,this._instanceStarted=!1}get _repo(){return this._instanceStarted||=(fh(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),!0),this._repoInternal}get _root(){return this._rootInternal||=new Jh(this._repo,I()),this._rootInternal}_delete(){return this._rootInternal!==null&&(ug(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Jc(`Cannot call `+e+` on a deleted database.`)}};function pg(e=xr(),t){let n=hr(e,`database`).getImmediate({identifier:t});if(!n._instanceStarted){let e=qe(`database`);e&&mg(n,...e)}return n}function mg(e,t,n,r={}){e=O(e),e._checkNotDeleted(`useEmulator`);let i=`${t}:${n}`,a=e._repoInternal;if(e._instanceStarted){if(i===e._repoInternal.repoInfo_.host&&jt(r,a.repoInfo_.emulatorOptions))return;Jc(`connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.`)}let o;if(a.repoInfo_.nodeAdmin)r.mockUserToken&&Jc(`mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".`),o=new bl(bl.OWNER);else if(r.mockUserToken){let t=typeof r.mockUserToken==`string`?r.mockUserToken:$e(r.mockUserToken,e.app.options.projectId);o=new bl(t)}Ze(t)&&(Qe(t),it(`Database`,!0)),cg(a,i,r,o)}
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function hg(e){Mc(yr),mr(new Jt(`database`,(e,{instanceIdentifier:t})=>{let n=e.getProvider(`app`).getImmediate(),r=e.getProvider(`auth-internal`),i=e.getProvider(`app-check-internal`);return lg(n,r,i,t)},`PUBLIC`).setMultipleInstances(!0)),Sr(kc,Ac,e),Sr(kc,Ac,`esm2020`)}Xu.prototype.simpleListen=function(e,t){this.sendRequest(`q`,{p:e},t)},Xu.prototype.echo=function(e,t){this.sendRequest(`echo`,{d:e},t)},hg();var gg=`@firebase/installations`,_g=`0.6.19`,vg=1e4,yg=`w:${_g}`,bg=`FIS_v2`,xg=`https://firebaseinstallations.googleapis.com/v1`,Sg=3600*1e3,Cg=new yt(`installations`,`Installations`,{"missing-app-config-values":`Missing App configuration value: "{$valueName}"`,"not-registered":`Firebase Installation is not registered.`,"installation-not-found":`Firebase Installation not found.`,"request-failed":`{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"`,"app-offline":`Could not process request. Application offline.`,"delete-pending-registration":`Can't delete installation while there is a pending registration request.`});function wg(e){return e instanceof vt&&e.code.includes(`request-failed`)}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Tg({projectId:e}){return`${xg}/projects/${e}/installations`}function Eg(e){return{token:e.token,requestStatus:2,expiresIn:jg(e.expiresIn),creationTime:Date.now()}}async function Dg(e,t){let n=(await t.json()).error;return Cg.create(`request-failed`,{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Og({apiKey:e}){return new Headers({"Content-Type":`application/json`,Accept:`application/json`,"x-goog-api-key":e})}function kg(e,{refreshToken:t}){let n=Og(e);return n.append(`Authorization`,Mg(t)),n}async function Ag(e){let t=await e();return t.status>=500&&t.status<600?e():t}function jg(e){return Number(e.replace(`s`,`000`))}function Mg(e){return`${bg} ${e}`}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function Ng({appConfig:e,heartbeatServiceProvider:t},{fid:n}){let r=Tg(e),i=Og(e),a=t.getImmediate({optional:!0});if(a){let e=await a.getHeartbeatsHeader();e&&i.append(`x-firebase-client`,e)}let o={fid:n,authVersion:bg,appId:e.appId,sdkVersion:yg},s={method:`POST`,headers:i,body:JSON.stringify(o)},c=await Ag(()=>fetch(r,s));if(c.ok){let e=await c.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:Eg(e.authToken)}}else throw await Dg(`Create Installation`,c)}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Pg(e){return new Promise(t=>{setTimeout(t,e)})}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Fg(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,`-`).replace(/\//g,`_`)}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Ig=/^[cdef][\w-]{21}$/,Lg=``;function Rg(){try{let e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;let t=zg(e);return Ig.test(t)?t:Lg}catch{return Lg}}function zg(e){return Fg(e).substr(0,22)}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Bg(e){return`${e.appName}!${e.appId}`}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Vg=new Map;function Hg(e,t){let n=Bg(e);Ug(n,t),Wg(n,t)}function Ug(e,t){let n=Vg.get(e);if(n)for(let e of n)e(t)}function Wg(e,t){let n=Kg();n&&n.postMessage({key:e,fid:t}),qg()}var Gg=null;function Kg(){return!Gg&&`BroadcastChannel`in self&&(Gg=new BroadcastChannel(`[Firebase] FID Change`),Gg.onmessage=e=>{Ug(e.data.key,e.data.fid)}),Gg}function qg(){Vg.size===0&&Gg&&(Gg.close(),Gg=null)}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Jg=`firebase-installations-database`,Yg=1,Xg=`firebase-installations-store`,Zg=null;function Qg(){return Zg||=Tn(Jg,Yg,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(Xg)}}}),Zg}async function $g(e,t){let n=Bg(e),r=(await Qg()).transaction(Xg,`readwrite`),i=r.objectStore(Xg),a=await i.get(n);return await i.put(t,n),await r.done,(!a||a.fid!==t.fid)&&Hg(e,t.fid),t}async function e_(e){let t=Bg(e),n=(await Qg()).transaction(Xg,`readwrite`);await n.objectStore(Xg).delete(t),await n.done}async function t_(e,t){let n=Bg(e),r=(await Qg()).transaction(Xg,`readwrite`),i=r.objectStore(Xg),a=await i.get(n),o=t(a);return o===void 0?await i.delete(n):await i.put(o,n),await r.done,o&&(!a||a.fid!==o.fid)&&Hg(e,o.fid),o}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function n_(e){let t,n=await t_(e.appConfig,n=>{let r=r_(n),i=i_(e,r);return t=i.registrationPromise,i.installationEntry});return n.fid===Lg?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}function r_(e){let t=e||{fid:Rg(),registrationStatus:0};return c_(t)}function i_(e,t){if(t.registrationStatus===0){if(!navigator.onLine){let e=Promise.reject(Cg.create(`app-offline`));return{installationEntry:t,registrationPromise:e}}let n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=a_(e,n);return{installationEntry:n,registrationPromise:r}}else if(t.registrationStatus===1)return{installationEntry:t,registrationPromise:o_(e)};else return{installationEntry:t}}async function a_(e,t){try{let n=await Ng(e,t);return $g(e.appConfig,n)}catch(n){throw wg(n)&&n.customData.serverCode===409?await e_(e.appConfig):await $g(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}async function o_(e){let t=await s_(e.appConfig);for(;t.registrationStatus===1;)await Pg(100),t=await s_(e.appConfig);if(t.registrationStatus===0){let{installationEntry:t,registrationPromise:n}=await n_(e);return n||t}return t}function s_(e){return t_(e,e=>{if(!e)throw Cg.create(`installation-not-found`);return c_(e)})}function c_(e){return l_(e)?{fid:e.fid,registrationStatus:0}:e}function l_(e){return e.registrationStatus===1&&e.registrationTime+vg<Date.now()}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function u_({appConfig:e,heartbeatServiceProvider:t},n){let r=d_(e,n),i=kg(e,n),a=t.getImmediate({optional:!0});if(a){let e=await a.getHeartbeatsHeader();e&&i.append(`x-firebase-client`,e)}let o={installation:{sdkVersion:yg,appId:e.appId}},s={method:`POST`,headers:i,body:JSON.stringify(o)},c=await Ag(()=>fetch(r,s));if(c.ok){let e=await c.json();return Eg(e)}else throw await Dg(`Generate Auth Token`,c)}function d_(e,{fid:t}){return`${Tg(e)}/${t}/authTokens:generate`}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function f_(e,t=!1){let n,r=await t_(e.appConfig,r=>{if(!g_(r))throw Cg.create(`not-registered`);let i=r.authToken;if(!t&&__(i))return r;if(i.requestStatus===1)return n=p_(e,t),r;{if(!navigator.onLine)throw Cg.create(`app-offline`);let t=y_(r);return n=h_(e,t),t}});return n?await n:r.authToken}async function p_(e,t){let n=await m_(e.appConfig);for(;n.authToken.requestStatus===1;)await Pg(100),n=await m_(e.appConfig);let r=n.authToken;return r.requestStatus===0?f_(e,t):r}function m_(e){return t_(e,e=>{if(!g_(e))throw Cg.create(`not-registered`);let t=e.authToken;return b_(t)?{...e,authToken:{requestStatus:0}}:e})}async function h_(e,t){try{let n=await u_(e,t),r={...t,authToken:n};return await $g(e.appConfig,r),n}catch(n){if(wg(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await e_(e.appConfig);else{let n={...t,authToken:{requestStatus:0}};await $g(e.appConfig,n)}throw n}}function g_(e){return e!==void 0&&e.registrationStatus===2}function __(e){return e.requestStatus===2&&!v_(e)}function v_(e){let t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Sg}function y_(e){let t={requestStatus:1,requestTime:Date.now()};return{...e,authToken:t}}function b_(e){return e.requestStatus===1&&e.requestTime+vg<Date.now()}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function x_(e){let t=e,{installationEntry:n,registrationPromise:r}=await n_(t);return r?r.catch(console.error):f_(t).catch(console.error),n.fid}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function S_(e,t=!1){let n=e;return await C_(n),(await f_(n,t)).token}async function C_(e){let{registrationPromise:t}=await n_(e);t&&await t}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function w_(e){if(!e||!e.options)throw T_(`App Configuration`);if(!e.name)throw T_(`App Name`);for(let t of[`projectId`,`apiKey`,`appId`])if(!e.options[t])throw T_(t);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function T_(e){return Cg.create(`missing-app-config-values`,{valueName:e})}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var E_=`installations`,D_=`installations-internal`,O_=e=>{let t=e.getProvider(`app`).getImmediate(),n=w_(t),r=hr(t,`heartbeat`);return{app:t,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},k_=e=>{let t=e.getProvider(`app`).getImmediate(),n=hr(t,E_).getImmediate();return{getId:()=>x_(n),getToken:e=>S_(n,e)}};function A_(){mr(new Jt(E_,O_,`PUBLIC`)),mr(new Jt(D_,k_,`PRIVATE`))}A_(),Sr(gg,_g),Sr(gg,_g,`esm2020`);
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var j_=`analytics`,M_=`firebase_id`,N_=`origin`,P_=60*1e3,F_=`https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig`,I_=`https://www.googletagmanager.com/gtag/js`,L_=new on(`@firebase/analytics`),R_=new yt(`analytics`,`Analytics`,{"already-exists":`A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.`,"already-initialized":`initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.`,"already-initialized-settings":`Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.`,"interop-component-reg-failed":`Firebase Analytics Interop Component failed to instantiate: {$reason}`,"invalid-analytics-context":`Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}`,"indexeddb-unavailable":`IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}`,"fetch-throttle":`The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.`,"config-fetch-failed":`Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}`,"no-api-key":`The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.`,"no-app-id":`The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.`,"no-client-id":`The "client_id" field is empty.`,"invalid-gtag-resource":`Trusted Types detected an invalid gtag resource: {$gtagURL}.`});
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function z_(e){if(!e.startsWith(I_)){let t=R_.create(`invalid-gtag-resource`,{gtagURL:e});return L_.warn(t.message),``}return e}function B_(e){return Promise.all(e.map(e=>e.catch(e=>e)))}function V_(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}function H_(e,t){let n=V_(`firebase-js-sdk-policy`,{createScriptURL:z_}),r=document.createElement(`script`),i=`${I_}?l=${e}&id=${t}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function U_(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}async function W_(e,t,n,r,i,a){let o=r[i];try{if(o)await t[o];else{let e=(await B_(n)).find(e=>e.measurementId===i);e&&await t[e.appId]}}catch(e){L_.error(e)}e(`config`,i,a)}async function G_(e,t,n,r,i){try{let a=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);let r=await B_(n);for(let n of e){let e=r.find(e=>e.measurementId===n),i=e&&t[e.appId];if(i)a.push(i);else{a=[];break}}}a.length===0&&(a=Object.values(t)),await Promise.all(a),e(`event`,r,i||{})}catch(e){L_.error(e)}}function K_(e,t,n,r){async function i(i,...a){try{if(i===`event`){let[r,i]=a;await G_(e,t,n,r,i)}else if(i===`config`){let[i,o]=a;await W_(e,t,n,r,i,o)}else if(i===`consent`){let[t,n]=a;e(`consent`,t,n)}else if(i===`get`){let[t,n,r]=a;e(`get`,t,n,r)}else if(i===`set`){let[t]=a;e(`set`,t)}else e(i,...a)}catch(e){L_.error(e)}}return i}function q_(e,t,n,r,i){let a=function(...e){window[r].push(arguments)};return window[i]&&typeof window[i]==`function`&&(a=window[i]),window[i]=K_(a,e,t,n),{gtagCore:a,wrappedGtag:window[i]}}function J_(e){let t=window.document.getElementsByTagName(`script`);for(let n of Object.values(t))if(n.src&&n.src.includes(I_)&&n.src.includes(e))return n;return null}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Y_=30,X_=1e3,Z_=new class{constructor(e={},t=X_){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Q_(e){return new Headers({Accept:`application/json`,"x-goog-api-key":e})}async function $_(e){let{appId:t,apiKey:n}=e,r={method:`GET`,headers:Q_(n)},i=F_.replace(`{app-id}`,t),a=await fetch(i,r);if(a.status!==200&&a.status!==304){let e=``;try{let t=await a.json();t.error?.message&&(e=t.error.message)}catch{}throw R_.create(`config-fetch-failed`,{httpStatus:a.status,responseMessage:e})}return a.json()}async function ev(e,t=Z_,n){let{appId:r,apiKey:i,measurementId:a}=e.options;if(!r)throw R_.create(`no-app-id`);if(!i){if(a)return{measurementId:a,appId:r};throw R_.create(`no-api-key`)}let o=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},s=new iv;return setTimeout(async()=>{s.abort()},n===void 0?P_:n),tv({appId:r,apiKey:i,measurementId:a},o,s,t)}async function tv(e,{throttleEndTimeMillis:t,backoffCount:n},r,i=Z_){let{appId:a,measurementId:o}=e;try{await nv(r,t)}catch(e){if(o)return L_.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${e?.message}]`),{appId:a,measurementId:o};throw e}try{let t=await $_(e);return i.deleteThrottleMetadata(a),t}catch(t){let s=t;if(!rv(s)){if(i.deleteThrottleMetadata(a),o)return L_.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${s?.message}]`),{appId:a,measurementId:o};throw t}let c=Number(s?.customData?.httpStatus)===503?qt(n,i.intervalMillis,Y_):qt(n,i.intervalMillis),l={throttleEndTimeMillis:Date.now()+c,backoffCount:n+1};return i.setThrottleMetadata(a,l),L_.debug(`Calling attemptFetch again in ${c} millis`),tv(e,l,r,i)}}function nv(e,t){return new Promise((n,r)=>{let i=Math.max(t-Date.now(),0),a=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(a),r(R_.create(`fetch-throttle`,{throttleEndTimeMillis:t}))})})}function rv(e){if(!(e instanceof vt)||!e.customData)return!1;let t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}var iv=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}},av;async function ov(e,t,n,r,i){if(i&&i.global){e(`event`,n,r);return}else{let i=await t,a={...r,send_to:i};e(`event`,n,a)}}async function sv(e,t,n,r){if(r&&r.global){let t={};for(let e of Object.keys(n))t[`user_properties.${e}`]=n[e];return e(`set`,t),Promise.resolve()}else{let r=await t;e(`config`,r,{update:!0,user_properties:n})}}var cv;function lv(e){cv=e}function uv(e){av=e}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function dv(){if(mt())try{await ht()}catch(e){return L_.warn(R_.create(`indexeddb-unavailable`,{errorInfo:e?.toString()}).message),!1}else return L_.warn(R_.create(`indexeddb-unavailable`,{errorInfo:`IndexedDB is not available in this environment.`}).message),!1;return!0}async function fv(e,t,n,r,i,a,o){let s=ev(e);s.then(t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&L_.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(e=>L_.error(e)),t.push(s);let c=dv().then(e=>{if(e)return r.getId()}),[l,u]=await Promise.all([s,c]);J_(a)||H_(a,l.measurementId),cv&&(i(`consent`,`default`,cv),lv(void 0)),i(`js`,new Date);let d=o?.config??{};return d[N_]=`firebase`,d.update=!0,u!=null&&(d[M_]=u),i(`config`,l.measurementId,d),av&&(i(`set`,av),uv(void 0)),l.measurementId}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var pv=class{constructor(e){this.app=e}_delete(){return delete mv[this.app.options.appId],Promise.resolve()}},mv={},hv=[],gv={},_v=`dataLayer`,vv=`gtag`,yv,bv,xv=!1;function Sv(){let e=[];if(lt()&&e.push(`This is a browser extension environment.`),gt()||e.push(`Cookies are not available.`),e.length>0){let t=e.map((e,t)=>`(${t+1}) ${e}`).join(` `),n=R_.create(`invalid-analytics-context`,{errorInfo:t});L_.warn(n.message)}}function Cv(e,t,n){Sv();let r=e.options.appId;if(!r)throw R_.create(`no-app-id`);if(!e.options.apiKey)if(e.options.measurementId)L_.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw R_.create(`no-api-key`);if(mv[r]!=null)throw R_.create(`already-exists`,{id:r});if(!xv){U_(_v);let{wrappedGtag:e,gtagCore:t}=q_(mv,hv,gv,_v,vv);bv=e,yv=t,xv=!0}return mv[r]=fv(e,hv,gv,t,yv,_v,n),new pv(e)}function wv(e=xr()){e=O(e);let t=hr(e,j_);return t.isInitialized()?t.getImmediate():Tv(e)}function Tv(e,t={}){let n=hr(e,j_);if(n.isInitialized()){let e=n.getImmediate();if(jt(t,n.getOptions()))return e;throw R_.create(`already-initialized`)}return n.initialize({options:t})}function Ev(e,t,n){e=O(e),sv(bv,mv[e.app.options.appId],t,n).catch(e=>L_.error(e))}function Dv(e,t,n,r){e=O(e),ov(bv,mv[e.app.options.appId],t,n,r).catch(e=>L_.error(e))}var Ov=`@firebase/analytics`,kv=`0.10.19`;function Av(){mr(new Jt(j_,(e,{options:t})=>{let n=e.getProvider(`app`).getImmediate(),r=e.getProvider(`installations-internal`).getImmediate();return Cv(n,r,t)},`PUBLIC`)),mr(new Jt(`analytics-internal`,e,`PRIVATE`)),Sr(Ov,kv),Sr(Ov,kv,`esm2020`);function e(e){try{let t=e.getProvider(j_).getImmediate();return{logEvent:(e,n,r)=>Dv(t,e,n,r),setUserProperties:(e,n)=>Ev(t,e,n)}}catch(e){throw R_.create(`interop-component-reg-failed`,{reason:e})}}}Av();var jv=br({apiKey:`AIzaSyAv9bhH_haWDhNnVv2JoykXzi0NBRzTnpc`,authDomain:`chilitosramen-89223.firebaseapp.com`,databaseURL:`https://chilitosramen-89223-default-rtdb.firebaseio.com`,projectId:`chilitosramen-89223`,storageBucket:`chilitosramen-89223.appspot.com`,messagingSenderId:`980858860861`,appId:`1:980858860861:web:50efba800ea74546a08154`,measurementId:`G-23ZQE8834Z`}),Mv=pg(jv);wv(jv);var Nv=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{},Pv={},Fv,Iv;(function(){var e;function t(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(e,t,n){n||=0;let r=Array(16);if(typeof t==`string`)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let a=e.g[3],o;o=t+(a^n&(i^a))+r[0]+3614090360&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[1]+3905402710&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[2]+606105819&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[5]+1200080426&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[6]+2821735955&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[9]+2336552879&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[10]+4294925233&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[13]+4254626195&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[14]+2792965006&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(i^a&(n^i))+r[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[6]+3225465664&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[11]+643717713&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[10]+38016083&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[15]+3634488961&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[14]+3275163606&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[3]+4107603335&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[2]+4243563512&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[7]+1735328473&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(n^i^a)+r[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[8]+2272392833&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[11]+1839030562&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[4]+1272893353&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[7]+4139469664&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[0]+3936430074&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[3]+3572445317&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[12]+3873151461&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[15]+530742520&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(i^(n|~a))+r[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[7]+1126891415&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[14]+2878612391&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[3]+2399980690&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[10]+4293915773&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[15]+4264355552&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[6]+2734768916&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[11]+3174756917&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[2]+718787259&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}r.prototype.v=function(e,t){t===void 0&&(t=e.length);let n=t-this.blockSize,r=this.C,a=this.h,o=0;for(;o<t;){if(a==0)for(;o<=n;)i(this,e,o),o+=this.blockSize;if(typeof e==`string`){for(;o<t;)if(r[a++]=e.charCodeAt(o++),a==this.blockSize){i(this,r),a=0;break}}else for(;o<t;)if(r[a++]=e[o++],a==this.blockSize){i(this,r),a=0;break}}this.h=a,this.o+=t},r.prototype.A=function(){var e=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=this.o*8;for(var n=e.length-8;n<e.length;++n)e[n]=t&255,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};function a(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}function o(e,t){this.h=t;let n=[],r=!0;for(let i=e.length-1;i>=0;i--){let a=e[i]|0;r&&a==t||(n[i]=a,r=!1)}this.g=n}var s={};function c(e){return-128<=e&&e<128?a(e,function(e){return new o([e|0],e<0?-1:0)}):new o([e|0],e<0?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return d;if(e<0)return g(l(-e));let t=[],n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new o(t,0)}function u(e,t){if(e.length==0)throw Error(`number format error: empty string`);if(t||=10,t<2||36<t)throw Error(`radix out of range: `+t);if(e.charAt(0)==`-`)return g(u(e.substring(1),t));if(e.indexOf(`-`)>=0)throw Error(`number format error: interior "-" character`);let n=l(t**8),r=d;for(let a=0;a<e.length;a+=8){var i=Math.min(8,e.length-a);let o=parseInt(e.substring(a,a+i),t);i<8?(i=l(t**+i),r=r.j(i).add(l(o))):(r=r.j(n),r=r.add(l(o)))}return r}var d=c(0),f=c(1),p=c(16777216);e=o.prototype,e.m=function(){if(h(this))return-g(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){let r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(e||=10,e<2||36<e)throw Error(`radix out of range: `+e);if(m(this))return`0`;if(h(this))return`-`+g(this).toString(e);let t=l(e**6);var n=this;let r=``;for(;;){let i=b(n,t).g;n=_(n,i.j(t));let a=((n.g.length>0?n.g[0]:n.h)>>>0).toString(e);if(n=i,m(n))return a+r;for(;a.length<6;)a=`0`+a;r=a+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h};function m(e){if(e.h!=0)return!1;for(let t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function h(e){return e.h==-1}e.l=function(e){return e=_(this,e),h(e)?-1:m(e)?0:1};function g(e){let t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new o(n,~e.h).add(f)}e.abs=function(){return h(this)?g(this):this},e.add=function(e){let t=Math.max(this.g.length,e.g.length),n=[],r=0;for(let i=0;i<=t;i++){let t=r+(this.i(i)&65535)+(e.i(i)&65535),a=(t>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);r=a>>>16,t&=65535,a&=65535,n[i]=a<<16|t}return new o(n,n[n.length-1]&-2147483648?-1:0)};function _(e,t){return e.add(g(t))}e.j=function(e){if(m(this)||m(e))return d;if(h(this))return h(e)?g(this).j(g(e)):g(g(this).j(e));if(h(e))return g(this.j(g(e)));if(this.l(p)<0&&e.l(p)<0)return l(this.m()*e.m());let t=this.g.length+e.g.length,n=[];for(var r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(let t=0;t<e.g.length;t++){let i=this.i(r)>>>16,a=this.i(r)&65535,o=e.i(t)>>>16,s=e.i(t)&65535;n[2*r+2*t]+=a*s,v(n,2*r+2*t),n[2*r+2*t+1]+=i*s,v(n,2*r+2*t+1),n[2*r+2*t+1]+=a*o,v(n,2*r+2*t+1),n[2*r+2*t+2]+=i*o,v(n,2*r+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new o(n,0)};function v(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function y(e,t){this.g=e,this.h=t}function b(e,t){if(m(t))throw Error(`division by zero`);if(m(e))return new y(d,d);if(h(e))return t=b(g(e),t),new y(g(t.g),g(t.h));if(h(t))return t=b(e,g(t)),new y(g(t.g),t.h);if(e.g.length>30){if(h(e)||h(t))throw Error(`slowDivide_ only works with positive integers.`);for(var n=f,r=t;r.l(e)<=0;)n=x(n),r=x(r);var i=ee(n,1),a=ee(r,1);for(r=ee(r,2),n=ee(n,2);!m(r);){var o=a.add(r);o.l(e)<=0&&(i=i.add(n),a=o),r=ee(r,1),n=ee(n,1)}return t=_(e,i.j(t)),new y(i,t)}for(i=d;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=Math.ceil(Math.log(n)/Math.LN2),r=r<=48?1:2**(r-48),a=l(n),o=a.j(t);h(o)||o.l(e)>0;)n-=r,a=l(n),o=a.j(t);m(a)&&(a=f),i=i.add(a),e=_(e,o)}return new y(i,e)}e.B=function(e){return b(this,e).h},e.and=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new o(n,this.h&e.h)},e.or=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new o(n,this.h|e.h)},e.xor=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new o(n,this.h^e.h)};function x(e){let t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new o(n,e.h)}function ee(e,t){let n=t>>5;t%=32;let r=e.g.length-n,i=[];for(let a=0;a<r;a++)i[a]=t>0?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new o(i,e.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Iv=Pv.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=u,Fv=Pv.Integer=o}).apply(Nv===void 0?typeof self<`u`?self:typeof window<`u`?window:{}:Nv);var Lv=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{},Rv={},zv,Bv,Vv,Hv,Uv,Wv,Gv,Kv;(function(){var e,t=Object.defineProperty;function n(e){e=[typeof globalThis==`object`&&globalThis,e,typeof window==`object`&&window,typeof self==`object`&&self,typeof Lv==`object`&&Lv];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error(`Cannot find global object`)}var r=n(this);function i(e,n){if(n)a:{var i=r;e=e.split(`.`);for(var a=0;a<e.length-1;a++){var o=e[a];if(!(o in i))break a;i=i[o]}e=e[e.length-1],a=i[e],n=n(a),n!=a&&n!=null&&t(i,e,{configurable:!0,writable:!0,value:n})}}i(`Symbol.dispose`,function(e){return e||Symbol(`Symbol.dispose`)}),i(`Array.prototype.values`,function(e){return e||function(){return this[Symbol.iterator]()}}),i(`Object.entries`,function(e){return e||function(e){var t=[],n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push([n,e[n]]);return t}});var a=a||{},o=this||self;function s(e){var t=typeof e;return t==`object`&&e!=null||t==`function`}function c(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return l=c,l.apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}var f=typeof AsyncContext<`u`&&typeof AsyncContext.Snapshot==`function`?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function p(e){let t=e.length;if(t>0){let n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function m(e,t){for(let t=1;t<arguments.length;t++){let r=arguments[t];var n=typeof r;if(n=n==`object`?r?Array.isArray(r)?`array`:n:`null`:n,n==`array`||n==`object`&&typeof r.length==`number`){n=e.length||0;let t=r.length||0;e.length=n+t;for(let i=0;i<t;i++)e[n+i]=r[i]}else e.push(r)}}class h{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function g(e){o.setTimeout(()=>{throw e},0)}function _(){var e=te;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class v{constructor(){this.h=this.g=null}add(e,t){let n=y.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}var y=new h(()=>new b,e=>e.reset());class b{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let x,ee=!1,te=new v,S=()=>{let e=Promise.resolve(void 0);x=()=>{e.then(C)}};function C(){for(var e;e=_();){try{e.h.call(e.g)}catch(e){g(e)}var t=y;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}ee=!1}function ne(){this.u=this.u,this.C=this.C}ne.prototype.u=!1,ne.prototype.dispose=function(){this.u||(this.u=!0,this.N())},ne.prototype[Symbol.dispose]=function(){this.dispose()},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var ie=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},`passive`,{get:function(){e=!0}});try{let e=()=>{};o.addEventListener(`test`,e,t),o.removeEventListener(`test`,e,t)}catch{}return e}();function ae(e){return/^[\s\xa0]*$/.test(e)}function oe(e,t){re.call(this,e?e.type:``),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key=``,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType=``,this.i=null,e&&this.init(e,t)}d(oe,re),oe.prototype.init=function(e,t){let n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget,t||(n==`mouseover`?t=e.fromElement:n==`mouseout`&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=r.clientX===void 0?r.pageX:r.clientX,this.clientY=r.clientY===void 0?r.pageY:r.clientY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX===void 0?e.pageX:e.clientX,this.clientY=e.clientY===void 0?e.pageY:e.clientY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||``,this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&oe.Z.h.call(this)},oe.prototype.h=function(){oe.Z.h.call(this);let e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var se=`closure_listenable_`+(Math.random()*1e6|0),ce=0;function le(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++ce,this.da=this.fa=!1}function ue(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function de(e,t,n){for(let r in e)t.call(n,e[r],r,e)}function w(e,t){for(let n in e)t.call(void 0,e[n],n,e)}function T(e){let t={};for(let n in e)t[n]=e[n];return t}let fe=`constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf`.split(` `);function pe(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<fe.length;t++)n=fe[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function me(e){this.src=e,this.g={},this.h=0}me.prototype.add=function(e,t,n,r,i){let a=e.toString();e=this.g[a],e||(e=this.g[a]=[],this.h++);let o=ge(e,t,r,i);return o>-1?(t=e[o],n||(t.fa=!1)):(t=new le(t,this.src,a,!!r,i),t.fa=n,e.push(t)),t};function he(e,t){let n=t.type;if(n in e.g){var r=e.g[n],i=Array.prototype.indexOf.call(r,t,void 0),a;(a=i>=0)&&Array.prototype.splice.call(r,i,1),a&&(ue(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function ge(e,t,n,r){for(let i=0;i<e.length;++i){let a=e[i];if(!a.da&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}var _e=`closure_lm_`+(Math.random()*1e6|0),ve={};function ye(e,t,n,r,i){if(r&&r.once)return Se(e,t,n,r,i);if(Array.isArray(t)){for(let a=0;a<t.length;a++)ye(e,t[a],n,r,i);return null}return n=ke(n),e&&e[se]?e.J(t,n,s(r)?!!r.capture:!!r,i):be(e,t,n,!1,r,i)}function be(e,t,n,r,i,a){if(!t)throw Error(`Invalid event type`);let o=s(i)?!!i.capture:!!i,c=De(e);if(c||(e[_e]=c=new me(e)),n=c.add(t,n,r,o,a),n.proxy)return n;if(r=xe(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ie||(i=o),i===void 0&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Te(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error(`addEventListener and attachEvent are unavailable.`);return n}function xe(){function e(n){return t.call(e.src,e.listener,n)}let t=Ee;return e}function Se(e,t,n,r,i){if(Array.isArray(t)){for(let a=0;a<t.length;a++)Se(e,t[a],n,r,i);return null}return n=ke(n),e&&e[se]?e.K(t,n,s(r)?!!r.capture:!!r,i):be(e,t,n,!0,r,i)}function Ce(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Ce(e,t[a],n,r,i);else r=s(r)?!!r.capture:!!r,n=ke(n),e&&e[se]?(e=e.i,a=String(t).toString(),a in e.g&&(t=e.g[a],n=ge(t,n,r,i),n>-1&&(ue(t[n]),Array.prototype.splice.call(t,n,1),t.length==0&&(delete e.g[a],e.h--)))):(e&&=De(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ge(t,n,r,i)),(n=e>-1?t[e]:null)&&we(n))}function we(e){if(typeof e!=`number`&&e&&!e.da){var t=e.src;if(t&&t[se])he(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Te(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=De(t))?(he(n,e),n.h==0&&(n.src=null,t[_e]=null)):ue(e)}}}function Te(e){return e in ve?ve[e]:ve[e]=`on`+e}function Ee(e,t){if(e.da)e=!0;else{t=new oe(t,this);let n=e.listener,r=e.ha||e.src;e.fa&&we(e),e=n.call(r,t)}return e}function De(e){return e=e[_e],e instanceof me?e:null}var Oe=`__closure_events_fn_`+(Math.random()*1e9>>>0);function ke(e){return typeof e==`function`?e:(e[Oe]||(e[Oe]=function(t){return e.handleEvent(t)}),e[Oe])}function E(){ne.call(this),this.i=new me(this),this.M=this,this.G=null}d(E,ne),E.prototype[se]=!0,E.prototype.removeEventListener=function(e,t,n,r){Ce(this,e,t,n,r)};function Ae(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,typeof t==`string`)t=new re(t,e);else if(t instanceof re)t.target=t.target||e;else{var i=t;t=new re(r,e),pe(t,i)}i=!0;let a,o;if(n)for(o=n.length-1;o>=0;o--)a=t.g=n[o],i=je(a,r,!0,t)&&i;if(a=t.g=e,i=je(a,r,!0,t)&&i,i=je(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)a=t.g=n[o],i=je(a,r,!1,t)&&i}E.prototype.N=function(){if(E.Z.N.call(this),this.i){var e=this.i;for(let t in e.g){let n=e.g[t];for(let e=0;e<n.length;e++)ue(n[e]);delete e.g[t],e.h--}}this.G=null},E.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},E.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function je(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();let i=!0;for(let a=0;a<t.length;++a){let o=t[a];if(o&&!o.da&&o.capture==n){let t=o.listener,n=o.ha||o.src;o.fa&&he(e.i,o),i=t.call(n,r)!==!1&&i}}return i&&!r.defaultPrevented}function Me(e,t){if(typeof e!=`function`)if(e&&typeof e.handleEvent==`function`)e=l(e.handleEvent,e);else throw Error(`Invalid listener argument`);return Number(t)>2147483647?-1:o.setTimeout(e,t||0)}function Ne(e){e.g=Me(()=>{e.g=null,e.i&&(e.i=!1,Ne(e))},e.l);let t=e.h;e.h=null,e.m.apply(null,t)}class Pe extends ne{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:Ne(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fe(e){ne.call(this),this.h=e,this.g={}}d(Fe,ne);var Ie=[];function Le(e){de(e.g,function(e,t){this.g.hasOwnProperty(t)&&we(e)},e),e.g={}}Fe.prototype.N=function(){Fe.Z.N.call(this),Le(this)},Fe.prototype.handleEvent=function(){throw Error(`EventHandler.handleEvent not implemented`)};var Re=o.JSON.stringify,ze=o.JSON.parse,Be=class{stringify(e){return o.JSON.stringify(e,void 0)}parse(e){return o.JSON.parse(e,void 0)}};function Ve(){}function He(){}var Ue={OPEN:`a`,hb:`b`,ERROR:`c`,tb:`d`};function We(){re.call(this,`d`)}d(We,re);function Ge(){re.call(this,`c`)}d(Ge,re);var Ke={},qe=null;function Je(){return qe||=new E}Ke.Ia=`serverreachability`;function Ye(e){re.call(this,Ke.Ia,e)}d(Ye,re);function Xe(e){let t=Je();Ae(t,new Ye(t))}Ke.STAT_EVENT=`statevent`;function Ze(e,t){re.call(this,Ke.STAT_EVENT,e),this.stat=t}d(Ze,re);function Qe(e){let t=Je();Ae(t,new Ze(t,e))}Ke.Ja=`timingevent`;function $e(e,t){re.call(this,Ke.Ja,e),this.size=t}d($e,re);function et(e,t){if(typeof e!=`function`)throw Error(`Fn must not be null and must be a function`);return o.setTimeout(function(){e()},t)}function tt(){this.g=!0}tt.prototype.ua=function(){this.g=!1};function nt(e,t,n,r,i,a){e.info(function(){if(e.g)if(a){var o=``,s=a.split(`&`);for(let e=0;e<s.length;e++){var c=s[e].split(`=`);if(c.length>1){let e=c[0];c=c[1];let t=e.split(`_`);o=t.length>=2&&t[1]==`type`?o+(e+`=`+c+`&`):o+(e+`=redacted&`)}}}else o=null;else o=a;return`XMLHTTP REQ (`+r+`) [attempt `+i+`]: `+t+`
`+n+`
`+o})}function rt(e,t,n,r,i,a,o){e.info(function(){return`XMLHTTP RESP (`+r+`) [ attempt `+i+`]: `+t+`
`+n+`
`+a+` `+o})}function it(e,t,n,r){e.info(function(){return`XMLHTTP TEXT (`+t+`): `+ot(e,n)+(r?` `+r:``)})}function at(e,t){e.info(function(){return`TIMEOUT: `+t})}tt.prototype.info=function(){};function ot(e,t){if(!e.g)return t;if(!t)return null;try{let a=JSON.parse(t);if(a){for(e=0;e<a.length;e++)if(Array.isArray(a[e])){var n=a[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if(i!=`noop`&&i!=`stop`&&i!=`close`)for(let e=1;e<r.length;e++)r[e]=``}}}}return Re(a)}catch{return t}}var st={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ct={ib:`complete`,Fb:`success`,ERROR:`error`,Ga:`abort`,xb:`ready`,yb:`readystatechange`,TIMEOUT:`timeout`,sb:`incrementaldata`,wb:`progress`,lb:`downloadprogress`,Nb:`uploadprogress`},lt;function ut(){}d(ut,Ve),ut.prototype.g=function(){return new XMLHttpRequest},lt=new ut;function dt(e){return encodeURIComponent(String(e))}function ft(e){var t=1;e=e.split(`:`);let n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(`:`)),n}function pt(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new Fe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new mt}function mt(){this.i=null,this.g=``,this.h=!1}var ht={},gt={};function _t(e,t,n){e.M=1,e.A=Ut(zt(t)),e.u=n,e.R=!0,vt(e,null)}function vt(e,t){e.F=Date.now(),St(e),e.B=zt(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),tn(n.i,`t`,r),e.C=0,n=e.j.L,e.h=new mt,e.g=qn(e.j,n?t:null,!e.u),e.P>0&&(e.O=new Pe(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i=`readystatechange`;Array.isArray(i)||(i&&(Ie[0]=i.toString()),i=Ie);for(let e=0;e<i.length;e++){let a=ye(n,i[e],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.J?T(e.J):{},e.u?(e.v||=`POST`,t[`Content-Type`]=`application/x-www-form-urlencoded`,e.g.ea(e.B,e.v,e.u,t)):(e.v=`GET`,e.g.ea(e.B,e.v,null,t)),Xe(),nt(e.i,e.v,e.B,e.l,e.S,e.u)}pt.prototype.ba=function(e){e=e.target;let t=this.O;t&&wn(e)==3?t.j():this.Y(e)},pt.prototype.Y=function(e){try{if(e==this.g)a:{let s=wn(this.g),c=this.g.ya(),l=this.g.ca();if(!(s<3)&&(s!=3||this.g&&(this.h.h||this.g.la()||Tn(this.g)))){this.K||s!=4||c==7||Xe(c==8||l<=0?3:2),wt(this);var t=this.g.ca();this.X=t;var n=yt(this);if(this.o=t==200,rt(this.i,this.v,this.B,this.l,this.S,s,t),this.o){if(this.U&&!this.L){b:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader(`X-HTTP-Initial-Response`):null)&&!ae(r)){var a=r;break b}}a=null}if(e=a)it(this.i,this.l,e,`Initial handshake response via X-HTTP-Initial-Response`),this.L=!0,Dt(this,e);else{this.o=!1,this.m=3,Qe(12),Et(this),Tt(this);break a}}if(this.R){e=!0;let t;for(;!this.K&&this.C<n.length;)if(t=xt(this,n),t==gt){s==4&&(this.m=4,Qe(14),e=!1),it(this.i,this.l,null,`[Incomplete Response]`);break}else if(t==ht){this.m=4,Qe(15),it(this.i,this.l,n,`[Invalid Chunk]`),e=!1;break}else it(this.i,this.l,t,null),Dt(this,t);if(bt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),s!=4||n.length!=0||this.h.h||(this.m=1,Qe(16),e=!1),this.o=this.o&&e,!e)it(this.i,this.l,n,`[Invalid Chunked Response]`),Et(this),Tt(this);else if(n.length>0&&!this.W){this.W=!0;var o=this.j;o.g==this&&o.aa&&!o.P&&(o.j.info(`Great, no buffering proxy detected. Bytes received: `+n.length),zn(o),o.P=!0,Qe(11))}}else it(this.i,this.l,n,null),Dt(this,n);s==4&&Et(this),this.o&&!this.K&&(s==4?Hn(this.j,this):(this.o=!1,St(this)))}else En(this.g),t==400&&n.indexOf(`Unknown SID`)>0?(this.m=3,Qe(12)):(this.m=0,Qe(13)),Et(this),Tt(this)}}}catch{}};function yt(e){if(!bt(e))return e.g.la();let t=Tn(e.g);if(t===``)return``;let n=``,r=t.length,i=wn(e.g)==4;if(!e.h.i){if(typeof TextDecoder>`u`)return Et(e),Tt(e),``;e.h.i=new o.TextDecoder}for(let a=0;a<r;a++)e.h.h=!0,n+=e.h.i.decode(t[a],{stream:!(i&&a==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}function bt(e){return e.g?e.v==`GET`&&e.M!=2&&e.j.Aa:!1}function xt(e,t){var n=e.C,r=t.indexOf(`
`,n);return r==-1?gt:(n=Number(t.substring(n,r)),isNaN(n)?ht:(r+=1,r+n>t.length?gt:(t=t.slice(r,r+n),e.C=r+n,t)))}pt.prototype.cancel=function(){this.K=!0,Et(this)};function St(e){e.T=Date.now()+e.H,Ct(e,e.H)}function Ct(e,t){if(e.D!=null)throw Error(`WatchDog timer not null`);e.D=et(l(e.aa,e),t)}function wt(e){e.D&&=(o.clearTimeout(e.D),null)}pt.prototype.aa=function(){this.D=null;let e=Date.now();e-this.T>=0?(at(this.i,this.B),this.M!=2&&(Xe(),Qe(17)),Et(this),this.m=2,Tt(this)):Ct(this,this.T-e)};function Tt(e){e.j.I==0||e.K||Hn(e.j,e)}function Et(e){wt(e);var t=e.O;t&&typeof t.dispose==`function`&&t.dispose(),e.O=null,Le(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function Dt(e,t){try{var n=e.j;if(n.I!=0&&(n.g==e||Mt(n.h,e))){if(!e.L&&Mt(n.h,e)&&n.I==3){try{var r=n.Ba.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){a:if(!n.v){if(n.g)if(n.g.F+3e3<e.F)Vn(n),An(n);else break a;Rn(n),Qe(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&n.A==0&&!n.C&&(n.C=et(l(n.Va,n),6e3));jt(n.h)<=1&&n.ta&&(n.ta=void 0)}else Wn(n,11)}else if((e.L||n.g==e)&&Vn(n),!ae(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t],u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],n.I==2)if(l[0]==`c`){n.M=l[1],n.ba=l[2];let t=l[3];t!=null&&(n.ka=t,n.j.info(`VER=`+n.ka));let i=l[4];i!=null&&(n.za=i,n.j.info(`SVER=`+n.za));let u=l[5];u!=null&&typeof u==`number`&&u>0&&(r=1.5*u,n.O=r,n.j.info(`backChannelRequestTimeoutMs_=`+r)),r=n;let d=e.g;if(d){let e=d.g?d.g.getResponseHeader(`X-Client-Wire-Protocol`):null;if(e){var a=r.h;a.g||e.indexOf(`spdy`)==-1&&e.indexOf(`quic`)==-1&&e.indexOf(`h2`)==-1||(a.j=a.l,a.g=new Set,a.h&&=(Nt(a,a.h),null))}if(r.G){let e=d.g?d.g.getResponseHeader(`X-HTTP-Session-Id`):null;e&&(r.wa=e,D(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info(`Handshake RTT: `+n.T+`ms`)),r=n;var o=e;if(r.na=Kn(r,r.L?r.ba:null,r.W),o.L){Pt(r.h,o);var s=o,c=r.O;c&&(s.H=c),s.D&&(wt(s),St(s)),r.g=o}else Ln(r);n.i.length>0&&Mn(n)}else l[0]!=`stop`&&l[0]!=`close`||Wn(n,7);else n.I==3&&(l[0]==`stop`||l[0]==`close`?l[0]==`stop`?Wn(n,7):kn(n):l[0]!=`noop`&&n.l&&n.l.qa(l),n.A=0)}}Xe(4)}catch{}}var Ot=class{constructor(e,t){this.g=e,this.map=t}};function kt(e){this.l=e||10,o.PerformanceNavigationTiming?(e=o.performance.getEntriesByType(`navigation`),e=e.length>0&&(e[0].nextHopProtocol==`hq`||e[0].nextHopProtocol==`h2`)):e=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function At(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function jt(e){return e.h?1:e.g?e.g.size:0}function Mt(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function Nt(e,t){e.g?e.g.add(t):e.h=t}function Pt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}kt.prototype.cancel=function(){if(this.i=Ft(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let e of this.g.values())e.cancel();this.g.clear()}};function Ft(e){if(e.h!=null)return e.i.concat(e.h.G);if(e.g!=null&&e.g.size!==0){let t=e.i;for(let n of e.g.values())t=t.concat(n.G);return t}return p(e.i)}var It=RegExp(`^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$`);function Lt(e,t){if(e){e=e.split(`&`);for(let n=0;n<e.length;n++){let r=e[n].indexOf(`=`),i,a=null;r>=0?(i=e[n].substring(0,r),a=e[n].substring(r+1)):i=e[n],t(i,a?decodeURIComponent(a.replace(/\+/g,` `)):``)}}}function Rt(e){this.g=this.o=this.j=``,this.u=null,this.m=this.h=``,this.l=!1;let t;e instanceof Rt?(this.l=e.l,Bt(this,e.j),this.o=e.o,this.g=e.g,Vt(this,e.u),this.h=e.h,Ht(this,nn(e.i)),this.m=e.m):e&&(t=String(e).match(It))?(this.l=!1,Bt(this,t[1]||``,!0),this.o=Wt(t[2]||``),this.g=Wt(t[3]||``,!0),Vt(this,t[4]),this.h=Wt(t[5]||``,!0),Ht(this,t[6]||``,!0),this.m=Wt(t[7]||``)):(this.l=!1,this.i=new Zt(null,this.l))}Rt.prototype.toString=function(){let e=[];var t=this.j;t&&e.push(Gt(t,qt,!0),`:`);var n=this.g;return(n||t==`file`)&&(e.push(`//`),(t=this.o)&&e.push(Gt(t,qt,!0),`@`),e.push(dt(n).replace(/%25([0-9a-fA-F]{2})/g,`%$1`)),n=this.u,n!=null&&e.push(`:`,String(n))),(n=this.h)&&(this.g&&n.charAt(0)!=`/`&&e.push(`/`),e.push(Gt(n,n.charAt(0)==`/`?Jt:O,!0))),(n=this.i.toString())&&e.push(`?`,n),(n=this.m)&&e.push(`#`,Gt(n,Xt)),e.join(``)},Rt.prototype.resolve=function(e){let t=zt(this),n=!!e.j;n?Bt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=e.u!=null;var r=e.h;if(n)Vt(t,e.u);else if(n=!!e.h){if(r.charAt(0)!=`/`)if(this.g&&!this.h)r=`/`+r;else{var i=t.h.lastIndexOf(`/`);i!=-1&&(r=t.h.slice(0,i+1)+r)}if(i=r,i==`..`||i==`.`)r=``;else if(i.indexOf(`./`)!=-1||i.indexOf(`/.`)!=-1){r=i.lastIndexOf(`/`,0)==0,i=i.split(`/`);let e=[];for(let t=0;t<i.length;){let n=i[t++];n==`.`?r&&t==i.length&&e.push(``):n==`..`?((e.length>1||e.length==1&&e[0]!=``)&&e.pop(),r&&t==i.length&&e.push(``)):(e.push(n),r=!0)}r=e.join(`/`)}else r=i}return n?t.h=r:n=e.i.toString()!==``,n?Ht(t,nn(e.i)):n=!!e.m,n&&(t.m=e.m),t};function zt(e){return new Rt(e)}function Bt(e,t,n){e.j=n?Wt(t,!0):t,e.j&&=e.j.replace(/:$/,``)}function Vt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error(`Bad port number `+t);e.u=t}else e.u=null}function Ht(e,t,n){t instanceof Zt?(e.i=t,an(e.i,e.l)):(n||(t=Gt(t,Yt)),e.i=new Zt(t,e.l))}function D(e,t,n){e.i.set(t,n)}function Ut(e){return D(e,`zx`,Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),e}function Wt(e,t){return e?t?decodeURI(e.replace(/%25/g,`%2525`)):decodeURIComponent(e):``}function Gt(e,t,n){return typeof e==`string`?(e=encodeURI(e).replace(t,Kt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,`%$1`)),e):null}function Kt(e){return e=e.charCodeAt(0),`%`+(e>>4&15).toString(16)+(e&15).toString(16)}var qt=/[#\/\?@]/g,O=/[#\?:]/g,Jt=/[#\?]/g,Yt=/[#\?@]/g,Xt=/#/g;function Zt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Qt(e){e.g||(e.g=new Map,e.h=0,e.i&&Lt(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g,` `)),n)}))}e=Zt.prototype,e.add=function(e,t){Qt(this),this.i=null,e=rn(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function $t(e,t){Qt(e),t=rn(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function en(e,t){return Qt(e),t=rn(e,t),e.g.has(t)}e.forEach=function(e,t){Qt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)};function k(e,t){Qt(e);let n=[];if(typeof t==`string`)en(e,t)&&(n=n.concat(e.g.get(rn(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}e.set=function(e,t){return Qt(this),this.i=null,e=rn(this,e),en(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e?(e=k(this,e),e.length>0?String(e[0]):t):t};function tn(e,t,n){$t(e,t),n.length>0&&(e.i=null,e.g.set(rn(e,t),p(n)),e.h+=n.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return``;let e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];let i=dt(n);n=k(this,n);for(let t=0;t<n.length;t++){let r=i;n[t]!==``&&(r+=`=`+dt(n[t])),e.push(r)}}return this.i=e.join(`&`)};function nn(e){let t=new Zt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function rn(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function an(e,t){t&&!e.j&&(Qt(e),e.i=null,e.g.forEach(function(e,t){let n=t.toLowerCase();t!=n&&($t(this,t),tn(this,n,e))},e)),e.j=t}function on(e,t){let n=new tt;if(o.Image){let r=new Image;r.onload=u(cn,n,`TestLoadImage: loaded`,!0,t,r),r.onerror=u(cn,n,`TestLoadImage: error`,!1,t,r),r.onabort=u(cn,n,`TestLoadImage: abort`,!1,t,r),r.ontimeout=u(cn,n,`TestLoadImage: timeout`,!1,t,r),o.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function sn(e,t){let n=new tt,r=new AbortController,i=setTimeout(()=>{r.abort(),cn(n,`TestPingServer: timeout`,!1,t)},1e4);fetch(e,{signal:r.signal}).then(e=>{clearTimeout(i),e.ok?cn(n,`TestPingServer: ok`,!0,t):cn(n,`TestPingServer: server error`,!1,t)}).catch(()=>{clearTimeout(i),cn(n,`TestPingServer: error`,!1,t)})}function cn(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch{}}function ln(){this.g=new Be}function un(e){this.i=e.Sb||null,this.h=e.ab||!1}d(un,Ve),un.prototype.g=function(){return new dn(this.i,this.h)};function dn(e,t){E.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText=``,this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F=`GET`,this.D=``,this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(dn,E),e=dn.prototype,e.open=function(e,t){if(this.readyState!=0)throw this.abort(),Error(`Error reopening a connection`);this.F=e,this.D=t,this.readyState=1,mn(this)},e.send=function(e){if(this.readyState!=1)throw this.abort(),Error(`need to call open() first. `);if(this.v.signal.aborted)throw this.abort(),Error(`Request was aborted.`);this.g=!0;let t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||o).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText=``,this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel(`Request was aborted.`).catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,pn(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,mn(this)),this.g&&(this.readyState=3,mn(this),this.g)))if(this.responseType===`arraybuffer`)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(o.ReadableStream!==void 0&&`body`in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error(`responseType must be empty for "streamBinaryChunks" mode responses.`);this.response=[]}else this.response=this.responseText=``,this.B=new TextDecoder;fn(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))};function fn(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array;(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?pn(this):mn(this),this.readyState==3&&fn(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,pn(this))},e.Na=function(e){this.g&&(this.response=e,pn(this))},e.ga=function(){this.g&&pn(this)};function pn(e){e.readyState=4,e.l=null,e.j=null,e.B=null,mn(e)}e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||``},e.getAllResponseHeaders=function(){if(!this.h)return``;let e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+`: `+n[1]),n=t.next();return e.join(`\r
`)};function mn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(dn.prototype,`withCredentials`,{get:function(){return this.m===`include`},set:function(e){this.m=e?`include`:`same-origin`}});function hn(e){let t=``;return de(e,function(e,n){t+=n,t+=`:`,t+=e,t+=`\r
`}),t}function gn(e,t,n){a:{for(r in n){var r=!1;break a}r=!0}r||(n=hn(n),typeof e==`string`||D(e,t,n))}function _n(e){E.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D=``,this.o=0,this.l=``,this.j=this.B=this.v=this.A=!1,this.m=null,this.F=``,this.H=!1}d(_n,E);var vn=/^https?$/i,yn=[`POST`,`PUT`];e=_n.prototype,e.Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error(`[goog.net.XhrIo] Object is active with another request=`+this.D+`; newUri=`+e);t=t?t.toUpperCase():`GET`,this.D=e,this.l=``,this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():lt.g(),this.g.onreadystatechange=f(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(e){bn(this,e);return}if(e=n||``,n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys==`function`&&typeof r.get==`function`)for(let e of r.keys())n.set(e,r.get(e));else throw Error(`Unknown input type for opt_headers: `+String(r));r=Array.from(n.keys()).find(e=>e.toLowerCase()==`content-type`),i=o.FormData&&e instanceof o.FormData,!(Array.prototype.indexOf.call(yn,t,void 0)>=0)||r||i||n.set(`Content-Type`,`application/x-www-form-urlencoded;charset=utf-8`);for(let[e,t]of n)this.g.setRequestHeader(e,t);this.F&&(this.g.responseType=this.F),`withCredentials`in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&=(clearTimeout(this.m),null),this.v=!0,this.g.send(e),this.v=!1}catch(e){bn(this,e)}};function bn(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,xn(e),Cn(e)}function xn(e){e.A||(e.A=!0,Ae(e,`complete`),Ae(e,`error`))}e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,Ae(this,`complete`),Ae(this,`abort`),Cn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Cn(this,!0)),_n.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Sn(this):this.Xa())},e.Xa=function(){Sn(this)};function Sn(e){if(e.h&&a!==void 0){if(e.v&&wn(e)==4)setTimeout(e.Ca.bind(e),0);else if(Ae(e,`readystatechange`),wn(e)==4){e.h=!1;try{let a=e.ca();a:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break a;default:t=!1}var n;if(!(n=t)){var r;if(r=a===0){let t=String(e.D).match(It)[1]||null;!t&&o.self&&o.self.location&&(t=o.self.location.protocol.slice(0,-1)),r=!vn.test(t?t.toLowerCase():``)}n=r}if(n)Ae(e,`complete`),Ae(e,`success`);else{e.o=6;try{var i=wn(e)>2?e.g.statusText:``}catch{i=``}e.l=i+` [`+e.ca()+`]`,xn(e)}}finally{Cn(e)}}}}function Cn(e,t){if(e.g){e.m&&=(clearTimeout(e.m),null);let n=e.g;e.g=null,t||Ae(e,`ready`);try{n.onreadystatechange=null}catch{}}}e.isActive=function(){return!!this.g};function wn(e){return e.g?e.g.readyState:0}e.ca=function(){try{return wn(this)>2?this.g.status:-1}catch{return-1}},e.la=function(){try{return this.g?this.g.responseText:``}catch{return``}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),ze(t)}};function Tn(e){try{if(!e.g)return null;if(`response`in e.g)return e.g.response;switch(e.F){case``:case`text`:return e.g.responseText;case`arraybuffer`:if(`mozResponseArrayBuffer`in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function En(e){let t={};e=(e.g&&wn(e)>=2&&e.g.getAllResponseHeaders()||``).split(`\r
`);for(let r=0;r<e.length;r++){if(ae(e[r]))continue;var n=ft(e[r]);let i=n[0];if(n=n[1],typeof n!=`string`)continue;n=n.trim();let a=t[i]||[];t[i]=a,a.push(n)}w(t,function(e){return e.join(`, `)})}e.ya=function(){return this.o},e.Ha=function(){return typeof this.l==`string`?this.l:String(this.l)};function Dn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function On(e){this.za=0,this.i=[],this.j=new tt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Dn(`failFast`,!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Dn(`baseRetryDelayMs`,5e3,e),this.Za=Dn(`retryDelaySeedMs`,1e4,e),this.Ta=Dn(`forwardChannelMaxRetries`,2,e),this.va=Dn(`forwardChannelRequestTimeoutMs`,2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M=``,this.h=new kt(e&&e.concurrentRequestLimit),this.Ba=new ln,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}e=On.prototype,e.ka=8,e.I=1,e.connect=function(e,t,n,r){Qe(0),this.W=e,this.H=t||{},n&&r!==void 0&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=Kn(this,null,this.W),Mn(this)};function kn(e){if(jn(e),e.I==3){var t=e.V++,n=zt(e.J);if(D(n,`SID`,e.M),D(n,`RID`,t),D(n,`TYPE`,`terminate`),Fn(e,n),t=new pt(e,e.j,t),t.M=2,t.A=Ut(zt(n)),n=!1,o.navigator&&o.navigator.sendBeacon)try{n=o.navigator.sendBeacon(t.A.toString(),``)}catch{}!n&&o.Image&&(new Image().src=t.A,n=!0),n||(t.g=qn(t.j,null),t.g.ea(t.A)),t.F=Date.now(),St(t)}Gn(e)}function An(e){e.g&&=(zn(e),e.g.cancel(),null)}function jn(e){An(e),e.v&&=(o.clearTimeout(e.v),null),Vn(e),e.h.cancel(),e.m&&=(typeof e.m==`number`&&o.clearTimeout(e.m),null)}function Mn(e){if(!At(e.h)&&!e.m){e.m=!0;var t=e.Ea;x||S(),ee||=(x(),!0),te.add(t,e),e.D=0}}function Nn(e,t){return jt(e.h)>=e.h.j-(e.m?1:0)?!1:e.m?(e.i=t.G.concat(e.i),!0):e.I==1||e.I==2||e.D>=(e.Sa?0:e.Ta)?!1:(e.m=et(l(e.Ea,e,t),Un(e,e.D)),e.D++,!0)}e.Ea=function(e){if(this.m)if(this.m=null,this.I==1){if(!e){this.V=Math.floor(Math.random()*1e5),e=this.V++;let i=new pt(this,this.j,e),a=this.o;if(this.U&&(a?(a=T(a),pe(a,this.U)):a=this.U),this.u!==null||this.R||(i.J=a,a=null),this.S)a:{for(var t=0,n=0;n<this.i.length;n++){b:{var r=this.i[n];if(`__data__`in r.map&&(r=r.map.__data__,typeof r==`string`)){r=r.length;break b}r=void 0}if(r===void 0)break;if(t+=r,t>4096){t=n;break a}if(t===4096||n===this.i.length-1){t=n+1;break a}}t=1e3}else t=1e3;t=In(this,i,t),n=zt(this.J),D(n,`RID`,e),D(n,`CVER`,22),this.G&&D(n,`X-HTTP-Session-Id`,this.G),Fn(this,n),a&&(this.R?t=`headers=`+dt(hn(a))+`&`+t:this.u&&gn(n,this.u,a)),Nt(this.h,i),this.Ra&&D(n,`TYPE`,`init`),this.S?(D(n,`$req`,t),D(n,`SID`,`null`),i.U=!0,_t(i,n,null)):_t(i,n,t),this.I=2}}else this.I==3&&(e?Pn(this,e):this.i.length==0||At(this.h)||Pn(this))};function Pn(e,t){var n=t?t.l:e.V++;let r=zt(e.J);D(r,`SID`,e.M),D(r,`RID`,n),D(r,`AID`,e.K),Fn(e,r),e.u&&e.o&&gn(r,e.u,e.o),n=new pt(e,e.j,n,e.D+1),e.u===null&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=In(e,n,1e3),n.H=Math.round(e.va*.5)+Math.round(e.va*.5*Math.random()),Nt(e.h,n),_t(n,r,t)}function Fn(e,t){e.H&&de(e.H,function(e,n){D(t,n,e)}),e.l&&de({},function(e,n){D(t,n,e)})}function In(e,t,n){n=Math.min(e.i.length,n);let r=e.l?l(e.l.Ka,e.l,e):null;a:{var i=e.i;let t=-1;for(;;){let e=[`count=`+n];t==-1?n>0?(t=i[0].g,e.push(`ofs=`+t)):t=0:e.push(`ofs=`+t);let c=!0;for(let l=0;l<n;l++){var a=i[l].g;let n=i[l].map;if(a-=t,a<0)t=Math.max(0,i[l].g-100),c=!1;else try{a=`req`+a+`_`||``;try{var o=n instanceof Map?n:Object.entries(n);for(let[t,n]of o){let r=n;s(n)&&(r=Re(n)),e.push(a+t+`=`+encodeURIComponent(r))}}catch(t){throw e.push(a+`type=_badmap`),t}}catch{r&&r(n)}}if(c){o=e.join(`&`);break a}}o=void 0}return e=e.i.splice(0,n),t.G=e,o}function Ln(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;x||S(),ee||=(x(),!0),te.add(t,e),e.A=0}}function Rn(e){return e.g||e.v||e.A>=3?!1:(e.Y++,e.v=et(l(e.Da,e),Un(e,e.A)),e.A++,!0)}e.Da=function(){if(this.v=null,Bn(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var e=4*this.T;this.j.info(`BP detection timer enabled: `+e),this.B=et(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info(`BP detection timeout reached.`),this.j.info(`Buffering proxy detected and switch to long-polling!`),this.F=!1,this.P=!0,Qe(10),An(this),Bn(this))};function zn(e){e.B!=null&&(o.clearTimeout(e.B),e.B=null)}function Bn(e){e.g=new pt(e,e.j,`rpc`,e.Y),e.u===null&&(e.g.J=e.o),e.g.P=0;var t=zt(e.na);D(t,`RID`,`rpc`),D(t,`SID`,e.M),D(t,`AID`,e.K),D(t,`CI`,e.F?`0`:`1`),!e.F&&e.ia&&D(t,`TO`,e.ia),D(t,`TYPE`,`xmlhttp`),Fn(e,t),e.u&&e.o&&gn(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=Ut(zt(t)),n.u=null,n.R=!0,vt(n,e)}e.Va=function(){this.C!=null&&(this.C=null,An(this),Rn(this),Qe(19))};function Vn(e){e.C!=null&&(o.clearTimeout(e.C),e.C=null)}function Hn(e,t){var n=null;if(e.g==t){Vn(e),zn(e),e.g=null;var r=2}else if(Mt(e.h,t))n=t.G,Pt(e.h,t),r=1;else return;if(e.I!=0){if(t.o)if(r==1){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;r=Je(),Ae(r,new $e(r,n)),Mn(e)}else Ln(e);else if(i=t.m,i==3||i==0&&t.X>0||!(r==1&&Nn(e,t)||r==2&&Rn(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Wn(e,5);break;case 4:Wn(e,10);break;case 3:Wn(e,6);break;default:Wn(e,2)}}}function Un(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function Wn(e,t){if(e.j.info(`Error code `+t),t==2){var n=l(e.bb,e),r=e.Ua;let t=!r;r=new Rt(r||`//www.google.com/images/cleardot.gif`),o.location&&o.location.protocol==`http`||Bt(r,`https`),Ut(r),t?on(r.toString(),n):sn(r.toString(),n)}else Qe(2);e.I=0,e.l&&e.l.pa(t),Gn(e),jn(e)}e.bb=function(e){e?(this.j.info(`Successfully pinged google.com`),Qe(2)):(this.j.info(`Failed to ping google.com`),Qe(1))};function Gn(e){if(e.I=0,e.ja=[],e.l){let t=Ft(e.h);(t.length!=0||e.i.length!=0)&&(m(e.ja,t),m(e.ja,e.i),e.h.i.length=0,p(e.i),e.i.length=0),e.l.oa()}}function Kn(e,t,n){var r=n instanceof Rt?zt(n):new Rt(n);if(r.g!=``)t&&(r.g=t+`.`+r.g),Vt(r,r.u);else{var i=o.location;r=i.protocol,t=t?t+`.`+i.hostname:i.hostname,i=+i.port;let e=new Rt(null);r&&Bt(e,r),t&&(e.g=t),i&&Vt(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&D(r,n,t),D(r,`VER`,e.ka),Fn(e,r),r}function qn(e,t,n){if(t&&!e.L)throw Error(`Can't create secondary domain capable XhrIo object.`);return t=e.Aa&&!e.ma?new _n(new un({ab:n})):new _n(e.ma),t.Fa(e.L),t}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Jn(){}e=Jn.prototype,e.ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){};function Yn(){}Yn.prototype.g=function(e,t){return new Xn(e,t)};function Xn(e,t){E.call(this),this.g=new On(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e[`X-Client-Protocol`]=`webchannel`:e={"X-Client-Protocol":`webchannel`}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e[`X-WebChannel-Content-Type`]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e[`X-WebChannel-Client-Profile`]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!ae(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t&&=t.httpSessionIdParam)&&!ae(t)&&(this.g.G=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new $n(this)}d(Xn,E),Xn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Xn.prototype.close=function(){kn(this.g)},Xn.prototype.o=function(e){var t=this.g;if(typeof e==`string`){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=Re(e),e=n);t.i.push(new Ot(t.Ya++,e)),t.I==3&&Mn(t)},Xn.prototype.N=function(){this.g.l=null,delete this.j,kn(this.g),delete this.g,Xn.Z.N.call(this)};function Zn(e){We.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){a:{for(let n in t){e=n;break a}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}d(Zn,We);function Qn(){Ge.call(this),this.status=1}d(Qn,Ge);function $n(e){this.g=e}d($n,Jn),$n.prototype.ra=function(){Ae(this.g,`a`)},$n.prototype.qa=function(e){Ae(this.g,new Zn(e))},$n.prototype.pa=function(e){Ae(this.g,new Qn)},$n.prototype.oa=function(){Ae(this.g,`b`)},Yn.prototype.createWebChannel=Yn.prototype.g,Xn.prototype.send=Xn.prototype.o,Xn.prototype.open=Xn.prototype.m,Xn.prototype.close=Xn.prototype.close,Kv=Rv.createWebChannelTransport=function(){return new Yn},Gv=Rv.getStatEventTarget=function(){return Je()},Wv=Rv.Event=Ke,Uv=Rv.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},st.NO_ERROR=0,st.TIMEOUT=8,st.HTTP_ERROR=6,Hv=Rv.ErrorCode=st,ct.COMPLETE=`complete`,Vv=Rv.EventType=ct,He.EventType=Ue,Ue.OPEN=`a`,Ue.CLOSE=`b`,Ue.ERROR=`c`,Ue.MESSAGE=`d`,E.prototype.listen=E.prototype.J,Bv=Rv.WebChannel=He,Rv.FetchXmlHttpFactory=un,_n.prototype.listenOnce=_n.prototype.K,_n.prototype.getLastError=_n.prototype.Ha,_n.prototype.getLastErrorCode=_n.prototype.ya,_n.prototype.getStatus=_n.prototype.ca,_n.prototype.getResponseJson=_n.prototype.La,_n.prototype.getResponseText=_n.prototype.la,_n.prototype.send=_n.prototype.ea,_n.prototype.setWithCredentials=_n.prototype.Fa,zv=Rv.XhrIo=_n}).apply(Lv===void 0?typeof self<`u`?self:typeof window<`u`?window:{}:Lv);var qv=`@firebase/firestore`,Jv=`4.9.2`,Yv=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?`uid:`+this.uid:`anonymous-user`}isEqual(e){return e.uid===this.uid}};Yv.UNAUTHENTICATED=new Yv(null),Yv.GOOGLE_CREDENTIALS=new Yv(`google-credentials-uid`),Yv.FIRST_PARTY=new Yv(`first-party-uid`),Yv.MOCK_USER=new Yv(`mock-user`);
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Xv=`12.3.0`,Zv=new on(`@firebase/firestore`);function Qv(){return Zv.logLevel}function H(e,...t){if(Zv.logLevel<=k.DEBUG){let n=t.map(ty);Zv.debug(`Firestore (${Xv}): ${e}`,...n)}}function $v(e,...t){if(Zv.logLevel<=k.ERROR){let n=t.map(ty);Zv.error(`Firestore (${Xv}): ${e}`,...n)}}function ey(e,...t){if(Zv.logLevel<=k.WARN){let n=t.map(ty);Zv.warn(`Firestore (${Xv}): ${e}`,...n)}}function ty(e){if(typeof e==`string`)return e;try{
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
return function(e){return JSON.stringify(e)}(e)}catch{return e}}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function U(e,t,n){let r=`Unexpected state`;typeof t==`string`?r=t:n=t,ny(e,r,n)}function ny(e,t,n){let r=`FIRESTORE (${Xv}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=` CONTEXT: `+JSON.stringify(n)}catch{r+=` CONTEXT: `+n}throw $v(r),Error(r)}function ry(e,t,n,r){let i=`Unexpected state`;typeof n==`string`?i=n:r=n,e||ny(t,i,r)}function W(e,t){return e}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var G={OK:`ok`,CANCELLED:`cancelled`,UNKNOWN:`unknown`,INVALID_ARGUMENT:`invalid-argument`,DEADLINE_EXCEEDED:`deadline-exceeded`,NOT_FOUND:`not-found`,ALREADY_EXISTS:`already-exists`,PERMISSION_DENIED:`permission-denied`,UNAUTHENTICATED:`unauthenticated`,RESOURCE_EXHAUSTED:`resource-exhausted`,FAILED_PRECONDITION:`failed-precondition`,ABORTED:`aborted`,OUT_OF_RANGE:`out-of-range`,UNIMPLEMENTED:`unimplemented`,INTERNAL:`internal`,UNAVAILABLE:`unavailable`,DATA_LOSS:`data-loss`},K=class extends vt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}},iy=class{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}},ay=class{constructor(e,t){this.user=t,this.type=`OAuth`,this.headers=new Map,this.headers.set(`Authorization`,`Bearer ${e}`)}},oy=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Yv.UNAUTHENTICATED)))}shutdown(){}},sy=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}},cy=class{constructor(e){this.t=e,this.currentUser=Yv.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ry(this.o===void 0,42304);let n=this.i,r=e=>this.i===n?Promise.resolve():(n=this.i,t(e)),i=new iy;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new iy,e.enqueueRetryable((()=>r(this.currentUser)))};let a=()=>{let t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{H(`FirebaseAuthCredentialsProvider`,`Auth detected`),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){let e=this.t.getImmediate({optional:!0});e?o(e):(H(`FirebaseAuthCredentialsProvider`,`Auth not yet detected`),i.resolve(),i=new iy)}}),0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i===e?t?(ry(typeof t.accessToken==`string`,31837,{l:t}),new ay(t.accessToken,this.currentUser)):null:(H(`FirebaseAuthCredentialsProvider`,`getToken aborted due to token change.`),this.getToken()))):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ry(e===null||typeof e==`string`,2055,{h:e}),new Yv(e)}},ly=class{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type=`FirstParty`,this.user=Yv.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set(`X-Goog-AuthUser`,this.P);let e=this.R();return e&&this.A.set(`Authorization`,e),this.T&&this.A.set(`X-Goog-Iam-Authorization-Token`,this.T),this.A}},uy=class{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new ly(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Yv.FIRST_PARTY)))}shutdown(){}invalidateToken(){}},dy=class{constructor(e){this.value=e,this.type=`AppCheck`,this.headers=new Map,e&&e.length>0&&this.headers.set(`x-firebase-appcheck`,this.value)}},fy=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,gr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ry(this.o===void 0,3512);let n=e=>{e.error!=null&&H(`FirebaseAppCheckTokenProvider`,`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);let n=e.token!==this.m;return this.m=e.token,H(`FirebaseAppCheckTokenProvider`,`Received ${n?`new`:`existing`} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};let r=e=>{H(`FirebaseAppCheckTokenProvider`,`AppCheck detected`),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){let e=this.V.getImmediate({optional:!0});e?r(e):H(`FirebaseAppCheckTokenProvider`,`AppCheck not yet detected`)}}),0)}getToken(){if(this.p)return Promise.resolve(new dy(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(ry(typeof e.token==`string`,44558,{tokenResult:e}),this.m=e.token,new dy(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function py(e){let t=typeof self<`u`&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues==`function`)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var my=class{static newId(){let e=``;for(;e.length<20;){let t=py(40);for(let n=0;n<t.length;++n)e.length<20&&t[n]<248&&(e+=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`.charAt(t[n]%62))}return e}};function q(e,t){return e<t?-1:e>t?1:0}function hy(e,t){let n=Math.min(e.length,t.length);for(let r=0;r<n;r++){let n=e.charAt(r),i=t.charAt(r);if(n!==i)return vy(n)===vy(i)?q(n,i):vy(n)?1:-1}return q(e.length,t.length)}var gy=55296,_y=57343;function vy(e){let t=e.charCodeAt(0);return t>=gy&&t<=_y}function yy(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var by=`__name__`,xy=class e{constructor(e,t,n){t===void 0?t=0:t>e.length&&U(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&U(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(t){return e.comparator(this,t)===0}child(t){let n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((e=>{n.push(e)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){let r=Math.min(t.length,n.length);for(let i=0;i<r;i++){let r=e.compareSegments(t.get(i),n.get(i));if(r!==0)return r}return q(t.length,n.length)}static compareSegments(t,n){let r=e.isNumericId(t),i=e.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?e.extractNumericId(t).compare(e.extractNumericId(n)):hy(t,n)}static isNumericId(e){return e.startsWith(`__id`)&&e.endsWith(`__`)}static extractNumericId(e){return Fv.fromString(e.substring(4,e.length-2))}},Sy=class e extends xy{construct(t,n,r){return new e(t,n,r)}canonicalString(){return this.toArray().join(`/`)}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join(`/`)}static fromString(...t){let n=[];for(let e of t){if(e.indexOf(`//`)>=0)throw new K(G.INVALID_ARGUMENT,`Invalid segment (${e}). Paths must not contain // in them.`);n.push(...e.split(`/`).filter((e=>e.length>0)))}return new e(n)}static emptyPath(){return new e([])}},Cy=/^[_a-zA-Z][_a-zA-Z0-9]*$/,wy=class e extends xy{construct(t,n,r){return new e(t,n,r)}static isValidIdentifier(e){return Cy.test(e)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,`\\\\`).replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(`.`)}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===by}static keyField(){return new e([by])}static fromServerFormat(t){let n=[],r=``,i=0,a=()=>{if(r.length===0)throw new K(G.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=``},o=!1;for(;i<t.length;){let e=t[i];if(e===`\\`){if(i+1===t.length)throw new K(G.INVALID_ARGUMENT,`Path has trailing escape character: `+t);let e=t[i+1];if(e!==`\\`&&e!==`.`&&e!=="`")throw new K(G.INVALID_ARGUMENT,`Path has invalid escape sequence: `+t);r+=e,i+=2}else e==="`"?(o=!o,i++):e!==`.`||o?(r+=e,i++):(a(),i++)}if(a(),o)throw new K(G.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)}static emptyPath(){return new e([])}},J=class e{constructor(e){this.path=e}static fromPath(t){return new e(Sy.fromString(t))}static fromName(t){return new e(Sy.fromString(t).popFirst(5))}static empty(){return new e(Sy.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Sy.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Sy.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(t){return new e(new Sy(t.slice()))}};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ty(e,t,n){if(!n)throw new K(G.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Ey(e,t,n,r){if(!0===t&&!0===r)throw new K(G.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Dy(e){if(!J.isDocumentKey(e))throw new K(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Oy(e){if(J.isDocumentKey(e))throw new K(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function ky(e){return typeof e==`object`&&!!e&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function Ay(e){if(e===void 0)return`undefined`;if(e===null)return`null`;if(typeof e==`string`)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e==`number`||typeof e==`boolean`)return``+e;if(typeof e==`object`){if(e instanceof Array)return`an array`;{let t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:`an object`}}return typeof e==`function`?`a function`:U(12329,{type:typeof e})}function jy(e,t){if(`_delegate`in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new K(G.INVALID_ARGUMENT,`Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?`);{let n=Ay(e);throw new K(G.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}
/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function My(e,t){let n={typeString:e};return t&&(n.value=t),n}function Ny(e,t){if(!ky(e))throw new K(G.INVALID_ARGUMENT,`JSON must be an object`);let n;for(let r in t)if(t[r]){let i=t[r].typeString,a=`value`in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}let o=e[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new K(G.INVALID_ARGUMENT,n);return!0}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Py=-62135596800,Fy=1e6,Iy=class e{static now(){return e.fromMillis(Date.now())}static fromDate(t){return e.fromMillis(t.getTime())}static fromMillis(t){let n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*Fy);return new e(n,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0||t>=1e9)throw new K(G.INVALID_ARGUMENT,`Timestamp nanoseconds out of range: `+t);if(e<Py||e>=253402300800)throw new K(G.INVALID_ARGUMENT,`Timestamp seconds out of range: `+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Fy}_compareTo(e){return this.seconds===e.seconds?q(this.nanoseconds,e.nanoseconds):q(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return`Timestamp(seconds=`+this.seconds+`, nanoseconds=`+this.nanoseconds+`)`}toJSON(){return{type:e._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Ny(t,e._jsonSchema))return new e(t.seconds,t.nanoseconds)}valueOf(){let e=this.seconds-Py;return String(e).padStart(12,`0`)+`.`+String(this.nanoseconds).padStart(9,`0`)}};Iy._jsonSchemaVersion=`firestore/timestamp/1.0`,Iy._jsonSchema={type:My(`string`,Iy._jsonSchemaVersion),seconds:My(`number`),nanoseconds:My(`number`)};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Y=class e{static fromTimestamp(t){return new e(t)}static min(){return new e(new Iy(0,0))}static max(){return new e(new Iy(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return`SnapshotVersion(`+this.timestamp.toString()+`)`}toTimestamp(){return this.timestamp}},Ly=-1,Ry=class{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}};Ry.UNKNOWN_ID=-1;function zy(e,t){let n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Y.fromTimestamp(r===1e9?new Iy(n+1,0):new Iy(n,r));return new Vy(i,J.empty(),t)}function By(e){return new Vy(e.readTime,e.key,Ly)}var Vy=class e{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new e(Y.min(),J.empty(),Ly)}static max(){return new e(Y.max(),J.empty(),Ly)}};function Hy(e,t){let n=e.readTime.compareTo(t.readTime);return n===0?(n=J.comparator(e.documentKey,t.documentKey),n===0?q(e.largestBatchId,t.largestBatchId):n):n}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Uy=`The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.`,Wy=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function Gy(e){if(e.code!==G.FAILED_PRECONDITION||e.message!==Uy)throw e;H(`LocalStore`,`Unexpectedly lost primary lease`)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var X=class e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(t,n){return this.callbackAttached&&U(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(((e,r)=>{this.nextCallback=n=>{this.wrapSuccess(t,n).next(e,r)},this.catchCallback=t=>{this.wrapFailure(n,t).next(e,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(t){try{let n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):e.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):e.reject(n)}static resolve(t){return new e(((e,n)=>{e(t)}))}static reject(t){return new e(((e,n)=>{n(t)}))}static waitFor(t){return new e(((e,n)=>{let r=0,i=0,a=!1;t.forEach((t=>{++r,t.next((()=>{++i,a&&i===r&&e()}),(e=>n(e)))})),a=!0,i===r&&e()}))}static or(t){let n=e.resolve(!1);for(let r of t)n=n.next((t=>t?e.resolve(t):r()));return n}static forEach(e,t){let n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(t,n){return new e(((e,r)=>{let i=t.length,a=Array(i),o=0;for(let s=0;s<i;s++){let c=s;n(t[c]).next((t=>{a[c]=t,++o,o===i&&e(a)}),(e=>r(e)))}}))}static doWhile(t,n){return new e(((e,r)=>{let i=()=>{!0===t()?n().next((()=>{i()}),r):e()};i()}))}};function Ky(e){let t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(`.`).slice(0,2).join(`.`):`-1`;return Number(n)}function qy(e){return e.name===`IndexedDbTransactionError`}
/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Jy=class{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.ue&&this.ue(e),e}};Jy.ce=-1;
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Yy=-1;function Xy(e){return e==null}function Zy(e){return e===0&&1/e==-1/0}function Qy(e){return typeof e==`number`&&Number.isInteger(e)&&!Zy(e)&&e<=2**53-1&&e>=-(2**53-1)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $y=``;function eb(e){let t=``;for(let n=0;n<e.length;n++)t.length>0&&(t=nb(t)),t=tb(e.get(n),t);return nb(t)}function tb(e,t){let n=t,r=e.length;for(let t=0;t<r;t++){let r=e.charAt(t);switch(r){case`\0`:n+=``;break;case $y:n+=``;break;default:n+=r}}return n}function nb(e){return e+$y+``}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function rb(e){let t=0;for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ib(e,t){for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ab(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var ob=class e{constructor(e,t){this.comparator=e,this.root=t||cb.EMPTY}insert(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,cb.BLACK,null,null))}remove(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,cb.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){let e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(`, `)}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sb(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sb(this.root,e,this.comparator,!1)}getReverseIterator(){return new sb(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sb(this.root,e,this.comparator,!0)}},sb=class{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},cb=class e{constructor(t,n,r,i,a){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??e.EMPTY,this.right=a??e.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,a){return new e(t??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this,i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):i===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return e.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){return 2**this.check()<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw U(43730,{key:this.key,value:this.value});if(this.right.isRed())throw U(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw U(27949);return e+(this.isRed()?0:1)}};cb.EMPTY=null,cb.RED=!0,cb.BLACK=!1,cb.EMPTY=new class{constructor(){this.size=0}get key(){throw U(57766)}get value(){throw U(16141)}get color(){throw U(16727)}get left(){throw U(29726)}get right(){throw U(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new cb(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var lb=class e{constructor(e){this.comparator=e,this.data=new ob(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){let n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){let r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=t===void 0?this.data.getIterator():this.data.getIteratorFrom(t);n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ub(this.data.getIterator())}getIteratorFrom(e){return new ub(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){let e=n.getNext().key,t=r.getNext().key;if(this.comparator(e,t)!==0)return!1}return!0}toArray(){let e=[];return this.forEach((t=>{e.push(t)})),e}toString(){let e=[];return this.forEach((t=>e.push(t))),`SortedSet(`+e.toString()+`)`}copy(t){let n=new e(this.comparator);return n.data=t,n}},ub=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}},db=class e{constructor(e){this.fields=e,e.sort(wy.comparator)}static empty(){return new e([])}unionWith(t){let n=new lb(wy.comparator);for(let e of this.fields)n=n.add(e);for(let e of t)n=n.add(e);return new e(n.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return yy(this.fields,e.fields,((e,t)=>e.isEqual(t)))}},fb=class extends Error{constructor(){super(...arguments),this.name=`Base64DecodeError`}},pb=class e{constructor(e){this.binaryString=e}static fromBase64String(t){let n=function(e){try{return atob(e)}catch(e){throw typeof DOMException<`u`&&e instanceof DOMException?new fb(`Invalid base64 string: `+e):e}}(t);return new e(n)}static fromUint8Array(t){let n=function(e){let t=``;for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t);return new e(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return q(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};pb.EMPTY_BYTE_STRING=new pb(``);var mb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hb(e){if(ry(!!e,39018),typeof e==`string`){let t=0,n=mb.exec(e);if(ry(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+`000000000`).substr(0,9),t=Number(e)}let r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:gb(e.seconds),nanos:gb(e.nanos)}}function gb(e){return typeof e==`number`?e:typeof e==`string`?Number(e):0}function _b(e){return typeof e==`string`?pb.fromBase64String(e):pb.fromUint8Array(e)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var vb=`server_timestamp`,yb=`__type__`,bb=`__previous_value__`,xb=`__local_write_time__`;function Sb(e){return(e?.mapValue?.fields||{})[yb]?.stringValue===vb}function Cb(e){let t=e.mapValue.fields[bb];return Sb(t)?Cb(t):t}function wb(e){let t=hb(e.mapValue.fields[xb].timestampValue);return new Iy(t.seconds,t.nanos)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Tb=class{constructor(e,t,n,r,i,a,o,s,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=s,this.useFetchStreams=c,this.isUsingEmulator=l}},Eb=`(default)`,Db=class e{constructor(e,t){this.projectId=e,this.database=t||Eb}static empty(){return new e(``,``)}get isDefaultDatabase(){return this.database===Eb}isEqual(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}},Ob=`__type__`,kb=`__max__`,Ab={mapValue:{fields:{__type__:{stringValue:kb}}}},jb=`__vector__`,Mb=`value`;function Nb(e){return`nullValue`in e?0:`booleanValue`in e?1:`integerValue`in e||`doubleValue`in e?2:`timestampValue`in e?3:`stringValue`in e?5:`bytesValue`in e?6:`referenceValue`in e?7:`geoPointValue`in e?8:`arrayValue`in e?9:`mapValue`in e?Sb(e)?4:Xb(e)?9007199254740991:Jb(e)?10:11:U(28295,{value:e})}function Pb(e,t){if(e===t)return!0;let n=Nb(e);if(n!==Nb(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return wb(e).isEqual(wb(t));case 3:return function(e,t){if(typeof e.timestampValue==`string`&&typeof t.timestampValue==`string`&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;let n=hb(e.timestampValue),r=hb(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return _b(e.bytesValue).isEqual(_b(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return gb(e.geoPointValue.latitude)===gb(t.geoPointValue.latitude)&&gb(e.geoPointValue.longitude)===gb(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if(`integerValue`in e&&`integerValue`in t)return gb(e.integerValue)===gb(t.integerValue);if(`doubleValue`in e&&`doubleValue`in t){let n=gb(e.doubleValue),r=gb(t.doubleValue);return n===r?Zy(n)===Zy(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return yy(e.arrayValue.values||[],t.arrayValue.values||[],Pb);case 10:case 11:return function(e,t){let n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(rb(n)!==rb(r))return!1;for(let e in n)if(n.hasOwnProperty(e)&&(r[e]===void 0||!Pb(n[e],r[e])))return!1;return!0}(e,t);default:return U(52216,{left:e})}}function Fb(e,t){return(e.values||[]).find((e=>Pb(e,t)))!==void 0}function Ib(e,t){if(e===t)return 0;let n=Nb(e),r=Nb(t);if(n!==r)return q(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return q(e.booleanValue,t.booleanValue);case 2:return function(e,t){let n=gb(e.integerValue||e.doubleValue),r=gb(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Lb(e.timestampValue,t.timestampValue);case 4:return Lb(wb(e),wb(t));case 5:return hy(e.stringValue,t.stringValue);case 6:return function(e,t){let n=_b(e),r=_b(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){let n=e.split(`/`),r=t.split(`/`);for(let e=0;e<n.length&&e<r.length;e++){let t=q(n[e],r[e]);if(t!==0)return t}return q(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){let n=q(gb(e.latitude),gb(t.latitude));return n===0?q(gb(e.longitude),gb(t.longitude)):n}(e.geoPointValue,t.geoPointValue);case 9:return Rb(e.arrayValue,t.arrayValue);case 10:return function(e,t){let n=e.fields||{},r=t.fields||{},i=n[Mb]?.arrayValue,a=r[Mb]?.arrayValue,o=q(i?.values?.length||0,a?.values?.length||0);return o===0?Rb(i,a):o}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Ab.mapValue&&t===Ab.mapValue)return 0;if(e===Ab.mapValue)return 1;if(t===Ab.mapValue)return-1;let n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(let e=0;e<r.length&&e<a.length;++e){let t=hy(r[e],a[e]);if(t!==0)return t;let o=Ib(n[r[e]],i[a[e]]);if(o!==0)return o}return q(r.length,a.length)}(e.mapValue,t.mapValue);default:throw U(23264,{he:n})}}function Lb(e,t){if(typeof e==`string`&&typeof t==`string`&&e.length===t.length)return q(e,t);let n=hb(e),r=hb(t),i=q(n.seconds,r.seconds);return i===0?q(n.nanos,r.nanos):i}function Rb(e,t){let n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){let t=Ib(n[e],r[e]);if(t)return t}return q(n.length,r.length)}function zb(e){return Bb(e)}function Bb(e){return`nullValue`in e?`null`:`booleanValue`in e?``+e.booleanValue:`integerValue`in e?``+e.integerValue:`doubleValue`in e?``+e.doubleValue:`timestampValue`in e?function(e){let t=hb(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):`stringValue`in e?e.stringValue:`bytesValue`in e?function(e){return _b(e).toBase64()}(e.bytesValue):`referenceValue`in e?function(e){return J.fromName(e).toString()}(e.referenceValue):`geoPointValue`in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):`arrayValue`in e?function(e){let t=`[`,n=!0;for(let r of e.values||[])n?n=!1:t+=`,`,t+=Bb(r);return t+`]`}(e.arrayValue):`mapValue`in e?function(e){let t=Object.keys(e.fields||{}).sort(),n=`{`,r=!0;for(let i of t)r?r=!1:n+=`,`,n+=`${i}:${Bb(e.fields[i])}`;return n+`}`}(e.mapValue):U(61005,{value:e})}function Vb(e){switch(Nb(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let t=Cb(e);return t?16+Vb(t):16;case 5:return 2*e.stringValue.length;case 6:return _b(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+Vb(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return ib(e.fields,((e,n)=>{t+=e.length+Vb(n)})),t}(e.mapValue);default:throw U(13486,{value:e})}}function Hb(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Ub(e){return!!e&&`integerValue`in e}function Wb(e){return!!e&&`arrayValue`in e}function Gb(e){return!!e&&`nullValue`in e}function Kb(e){return!!e&&`doubleValue`in e&&isNaN(Number(e.doubleValue))}function qb(e){return!!e&&`mapValue`in e}function Jb(e){return(e?.mapValue?.fields||{})[Ob]?.stringValue===jb}function Yb(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue==`object`)return{timestampValue:{...e.timestampValue}};if(e.mapValue){let t={mapValue:{fields:{}}};return ib(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Yb(n))),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Yb(e.arrayValue.values[n]);return t}return{...e}}function Xb(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===kb}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Zb=class e{constructor(e){this.value=e}static empty(){return new e({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!qb(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yb(t)}setAll(e){let t=wy.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){let e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Yb(e):r.push(i.lastSegment())}));let i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){let t=this.field(e.popLast());qb(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Pb(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];qb(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){ib(t,((t,n)=>e[t]=n));for(let t of n)delete e[t]}clone(){return new e(Yb(this.value))}};function Qb(e){let t=[];return ib(e.fields,((e,n)=>{let r=new wy([e]);if(qb(n)){let e=Qb(n.mapValue).fields;if(e.length===0)t.push(r);else for(let n of e)t.push(r.child(n))}else t.push(r)})),new db(t)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var $b=class e{constructor(e,t,n,r,i,a,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(t){return new e(t,0,Y.min(),Y.min(),Y.min(),Zb.empty(),0)}static newFoundDocument(t,n,r,i){return new e(t,1,n,Y.min(),r,i,0)}static newNoDocument(t,n){return new e(t,2,n,Y.min(),Y.min(),Zb.empty(),0)}static newUnknownDocument(t,n){return new e(t,3,n,Y.min(),Y.min(),Zb.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zb.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zb.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}},ex=class{constructor(e,t){this.position=e,this.inclusive=t}};function tx(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){let a=t[i],o=e.position[i];if(r=a.field.isKeyField()?J.comparator(J.fromName(o.referenceValue),n.key):Ib(o,n.data.field(a.field)),a.dir===`desc`&&(r*=-1),r!==0)break}return r}function nx(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Pb(e.position[n],t.position[n]))return!1;return!0}
/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var rx=class{constructor(e,t=`asc`){this.field=e,this.dir=t}};function ix(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}
/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ax=class{},ox=class e extends ax{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(t,n,r){return t.isKeyField()?n===`in`||n===`not-in`?this.createKeyFieldInFilter(t,n,r):new mx(t,n,r):n===`array-contains`?new vx(t,r):n===`in`?new yx(t,r):n===`not-in`?new bx(t,r):n===`array-contains-any`?new xx(t,r):new e(t,n,r)}static createKeyFieldInFilter(e,t,n){return t===`in`?new hx(e,n):new gx(e,n)}matches(e){let t=e.data.field(this.field);return this.op===`!=`?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ib(t,this.value)):t!==null&&Nb(this.value)===Nb(t)&&this.matchesComparison(Ib(t,this.value))}matchesComparison(e){switch(this.op){case`<`:return e<0;case`<=`:return e<=0;case`==`:return e===0;case`!=`:return e!==0;case`>`:return e>0;case`>=`:return e>=0;default:return U(47266,{operator:this.op})}}isInequality(){return[`<`,`<=`,`>`,`>=`,`!=`,`not-in`].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},sx=class e extends ax{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(t,n){return new e(t,n)}matches(e){return cx(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function cx(e){return e.op===`and`}function lx(e){return ux(e)&&cx(e)}function ux(e){for(let t of e.filters)if(t instanceof sx)return!1;return!0}function dx(e){if(e instanceof ox)return e.field.canonicalString()+e.op.toString()+zb(e.value);if(lx(e))return e.filters.map((e=>dx(e))).join(`,`);{let t=e.filters.map((e=>dx(e))).join(`,`);return`${e.op}(${t})`}}function fx(e,t){return e instanceof ox?function(e,t){return t instanceof ox&&e.op===t.op&&e.field.isEqual(t.field)&&Pb(e.value,t.value)}(e,t):e instanceof sx?function(e,t){return t instanceof sx&&e.op===t.op&&e.filters.length===t.filters.length?e.filters.reduce(((e,n,r)=>e&&fx(n,t.filters[r])),!0):!1}(e,t):void U(19439)}function px(e){return e instanceof ox?function(e){return`${e.field.canonicalString()} ${e.op} ${zb(e.value)}`}(e):e instanceof sx?function(e){return e.op.toString()+` {`+e.getFilters().map(px).join(` ,`)+`}`}(e):`Filter`}var mx=class extends ox{constructor(e,t,n){super(e,t,n),this.key=J.fromName(n.referenceValue)}matches(e){let t=J.comparator(e.key,this.key);return this.matchesComparison(t)}},hx=class extends ox{constructor(e,t){super(e,`in`,t),this.keys=_x(`in`,t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}},gx=class extends ox{constructor(e,t){super(e,`not-in`,t),this.keys=_x(`not-in`,t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}};function _x(e,t){return(t.arrayValue?.values||[]).map((e=>J.fromName(e.referenceValue)))}var vx=class extends ox{constructor(e,t){super(e,`array-contains`,t)}matches(e){let t=e.data.field(this.field);return Wb(t)&&Fb(t.arrayValue,this.value)}},yx=class extends ox{constructor(e,t){super(e,`in`,t)}matches(e){let t=e.data.field(this.field);return t!==null&&Fb(this.value.arrayValue,t)}},bx=class extends ox{constructor(e,t){super(e,`not-in`,t)}matches(e){if(Fb(this.value.arrayValue,{nullValue:`NULL_VALUE`}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Fb(this.value.arrayValue,t)}},xx=class extends ox{constructor(e,t){super(e,`array-contains-any`,t)}matches(e){let t=e.data.field(this.field);return!(!Wb(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Fb(this.value.arrayValue,e)))}},Sx=class{constructor(e,t=null,n=[],r=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=a,this.endAt=o,this.Te=null}};function Cx(e,t=null,n=[],r=[],i=null,a=null,o=null){return new Sx(e,t,n,r,i,a,o)}function wx(e){let t=W(e);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+=`|cg:`+t.collectionGroup),e+=`|f:`,e+=t.filters.map((e=>dx(e))).join(`,`),e+=`|ob:`,e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(`,`),Xy(t.limit)||(e+=`|l:`,e+=t.limit),t.startAt&&(e+=`|lb:`,e+=t.startAt.inclusive?`b:`:`a:`,e+=t.startAt.position.map((e=>zb(e))).join(`,`)),t.endAt&&(e+=`|ub:`,e+=t.endAt.inclusive?`a:`:`b:`,e+=t.endAt.position.map((e=>zb(e))).join(`,`)),t.Te=e}return t.Te}function Tx(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ix(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!fx(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!nx(e.startAt,t.startAt)&&nx(e.endAt,t.endAt)}function Ex(e){return J.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Dx=class{constructor(e,t=null,n=[],r=[],i=null,a=`F`,o=null,s=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=s,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function Ox(e,t,n,r,i,a,o,s){return new Dx(e,t,n,r,i,a,o,s)}function kx(e){return new Dx(e)}function Ax(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function jx(e){return e.collectionGroup!==null}function Mx(e){let t=W(e);if(t.Ie===null){t.Ie=[];let e=new Set;for(let n of t.explicitOrderBy)t.Ie.push(n),e.add(n.field.canonicalString());let n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:`asc`;(function(e){let t=new lb(wy.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t})(t).forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new rx(r,n))})),e.has(wy.keyField().canonicalString())||t.Ie.push(new rx(wy.keyField(),n))}return t.Ie}function Nx(e){let t=W(e);return t.Ee||=Px(t,Mx(e)),t.Ee}function Px(e,t){if(e.limitType===`F`)return Cx(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{let t=e.dir===`desc`?`asc`:`desc`;return new rx(e.field,t)}));let n=e.endAt?new ex(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new ex(e.startAt.position,e.startAt.inclusive):null;return Cx(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Fx(e,t){let n=e.filters.concat([t]);return new Dx(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Ix(e,t,n){return new Dx(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Lx(e,t){return Tx(Nx(e),Nx(t))&&e.limitType===t.limitType}function Rx(e){return`${wx(Nx(e))}|lt:${e.limitType}`}function zx(e){return`Query(target=${function(e){let t=e.path.canonicalString();return e.collectionGroup!==null&&(t+=` collectionGroup=`+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>px(e))).join(`, `)}]`),Xy(e.limit)||(t+=`, limit: `+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(`, `)}]`),e.startAt&&(t+=`, startAt: `,t+=e.startAt.inclusive?`b:`:`a:`,t+=e.startAt.position.map((e=>zb(e))).join(`,`)),e.endAt&&(t+=`, endAt: `,t+=e.endAt.inclusive?`a:`:`b:`,t+=e.endAt.position.map((e=>zb(e))).join(`,`)),`Target(${t})`}(Nx(e))}; limitType=${e.limitType})`}function Bx(e,t){return t.isFoundDocument()&&function(e,t){let n=t.key.path;return e.collectionGroup===null?J.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n):t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n)}(e,t)&&function(e,t){for(let n of Mx(e))if(!n.field.isKeyField()&&t.data.field(n.field)===null)return!1;return!0}(e,t)&&function(e,t){for(let n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){let r=tx(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Mx(e),t)||e.endAt&&!function(e,t,n){let r=tx(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Mx(e),t))}(e,t)}function Vx(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Hx(e){return(t,n)=>{let r=!1;for(let i of Mx(e)){let e=Ux(i,t,n);if(e!==0)return e;r||=i.field.isKeyField()}return 0}}function Ux(e,t,n){let r=e.field.isKeyField()?J.comparator(t.key,n.key):function(e,t,n){let r=t.data.field(e),i=n.data.field(e);return r!==null&&i!==null?Ib(r,i):U(42886)}(e.field,t,n);switch(e.dir){case`asc`:return r;case`desc`:return-1*r;default:return U(19790,{direction:e.dir})}}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Wx=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(let[t,r]of n)if(this.equalsFn(t,e))return r}}has(e){return this.get(e)!==void 0}set(e,t){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return n.length===1?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ib(this.inner,((t,n)=>{for(let[t,r]of n)e(t,r)}))}isEmpty(){return ab(this.inner)}size(){return this.innerSize}},Gx=new ob(J.comparator);function Kx(){return Gx}var qx=new ob(J.comparator);function Jx(...e){let t=qx;for(let n of e)t=t.insert(n.key,n);return t}function Yx(e){let t=qx;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Xx(){return Qx()}function Zx(){return Qx()}function Qx(){return new Wx((e=>e.toString()),((e,t)=>e.isEqual(t)))}var $x=new ob(J.comparator),eS=new lb(J.comparator);function Z(...e){let t=eS;for(let n of e)t=t.add(n);return t}var tS=new lb(q);function nS(){return tS}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function rS(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:`NaN`};if(t===1/0)return{doubleValue:`Infinity`};if(t===-1/0)return{doubleValue:`-Infinity`}}return{doubleValue:Zy(t)?`-0`:t}}function iS(e){return{integerValue:``+e}}function aS(e,t){return Qy(t)?iS(t):rS(e,t)}
/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var oS=class{constructor(){this._=void 0}};function sS(e,t,n){return e instanceof uS?function(e,t){let n={fields:{[yb]:{stringValue:vb},[xb]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Sb(t)&&(t=Cb(t)),t&&(n.fields[bb]=t),{mapValue:n}}(n,t):e instanceof dS?fS(e,t):e instanceof pS?mS(e,t):function(e,t){let n=lS(e,t),r=gS(n)+gS(e.Ae);return Ub(n)&&Ub(e.Ae)?iS(r):rS(e.serializer,r)}(e,t)}function cS(e,t,n){return e instanceof dS?fS(e,t):e instanceof pS?mS(e,t):n}function lS(e,t){return e instanceof hS?function(e){return Ub(e)||function(e){return!!e&&`doubleValue`in e}(e)}(t)?t:{integerValue:0}:null}var uS=class extends oS{},dS=class extends oS{constructor(e){super(),this.elements=e}};function fS(e,t){let n=_S(t);for(let t of e.elements)n.some((e=>Pb(e,t)))||n.push(t);return{arrayValue:{values:n}}}var pS=class extends oS{constructor(e){super(),this.elements=e}};function mS(e,t){let n=_S(t);for(let t of e.elements)n=n.filter((e=>!Pb(e,t)));return{arrayValue:{values:n}}}var hS=class extends oS{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function gS(e){return gb(e.integerValue||e.doubleValue)}function _S(e){return Wb(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var vS=class{constructor(e,t){this.field=e,this.transform=t}};function yS(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof dS&&t instanceof dS||e instanceof pS&&t instanceof pS?yy(e.elements,t.elements,Pb):e instanceof hS&&t instanceof hS?Pb(e.Ae,t.Ae):e instanceof uS&&t instanceof uS}(e.transform,t.transform)}var bS=class{constructor(e,t){this.version=e,this.transformResults=t}},xS=class e{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new e}static exists(t){return new e(void 0,t)}static updateTime(t){return new e(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function SS(e,t){return e.updateTime===void 0?e.exists===void 0||e.exists===t.isFoundDocument():t.isFoundDocument()&&t.version.isEqual(e.updateTime)}var CS=class{};function wS(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new PS(e.key,xS.none()):new kS(e.key,e.data,xS.none());{let n=e.data,r=Zb.empty(),i=new lb(wy.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);t===null&&e.length>1&&(e=e.popLast(),t=n.field(e)),t===null?r.delete(e):r.set(e,t),i=i.add(e)}return new AS(e.key,r,new db(i.toArray()),xS.none())}}function TS(e,t,n){e instanceof kS?function(e,t,n){let r=e.value.clone(),i=MS(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof AS?function(e,t,n){if(!SS(e.precondition,t))return void t.convertToUnknownDocument(n.version);let r=MS(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(jS(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function ES(e,t,n,r){return e instanceof kS?function(e,t,n,r){if(!SS(e.precondition,t))return n;let i=e.value.clone(),a=NS(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof AS?function(e,t,n,r){if(!SS(e.precondition,t))return n;let i=NS(e.fieldTransforms,r,t),a=t.data;return a.setAll(jS(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),n===null?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return SS(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function DS(e,t){let n=null;for(let r of e.fieldTransforms){let e=t.data.field(r.field),i=lS(r.transform,e||null);i!=null&&(n===null&&(n=Zb.empty()),n.set(r.field,i))}return n||null}function OS(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return e===void 0&&t===void 0||!(!e||!t)&&yy(e,t,((e,t)=>yS(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var kS=class extends CS{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},AS=class extends CS{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}};function jS(e){let t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){let r=e.data.field(n);t.set(n,r)}})),t}function MS(e,t,n){let r=new Map;ry(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){let a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,cS(o,s,n[i]))}return r}function NS(e,t,n){let r=new Map;for(let i of e){let e=i.transform,a=n.data.field(i.field);r.set(i.field,sS(e,a,t))}return r}var PS=class extends CS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},FS=class extends CS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}},IS=class{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){let n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){let r=this.mutations[t];r.key.isEqual(e.key)&&TS(r,e,n[t])}}applyToLocalView(e,t){for(let n of this.baseMutations)n.key.isEqual(e.key)&&(t=ES(n,e,t,this.localWriteTime));for(let n of this.mutations)n.key.isEqual(e.key)&&(t=ES(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let n=Zx();return this.mutations.forEach((r=>{let i=e.get(r.key),a=i.overlayedDocument,o=this.applyToLocalView(a,i.mutatedFields);o=t.has(r.key)?null:o;let s=wS(a,o);s!==null&&n.set(r.key,s),a.isValidDocument()||a.convertToNoDocument(Y.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Z())}isEqual(e){return this.batchId===e.batchId&&yy(this.mutations,e.mutations,((e,t)=>OS(e,t)))&&yy(this.baseMutations,e.baseMutations,((e,t)=>OS(e,t)))}},LS=class e{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(t,n,r){ry(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let i=function(){return $x}(),a=t.mutations;for(let e=0;e<a.length;e++)i=i.insert(a[e].key,r[e].version);return new e(t,n,r,i)}},RS=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}},zS=class{constructor(e,t){this.count=e,this.unchangedNames=t}},BS,Q;function VS(e){switch(e){case G.OK:return U(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return U(15467,{code:e})}}function HS(e){if(e===void 0)return $v(`GRPC error has no .code`),G.UNKNOWN;switch(e){case BS.OK:return G.OK;case BS.CANCELLED:return G.CANCELLED;case BS.UNKNOWN:return G.UNKNOWN;case BS.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case BS.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case BS.INTERNAL:return G.INTERNAL;case BS.UNAVAILABLE:return G.UNAVAILABLE;case BS.UNAUTHENTICATED:return G.UNAUTHENTICATED;case BS.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case BS.NOT_FOUND:return G.NOT_FOUND;case BS.ALREADY_EXISTS:return G.ALREADY_EXISTS;case BS.PERMISSION_DENIED:return G.PERMISSION_DENIED;case BS.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case BS.ABORTED:return G.ABORTED;case BS.OUT_OF_RANGE:return G.OUT_OF_RANGE;case BS.UNIMPLEMENTED:return G.UNIMPLEMENTED;case BS.DATA_LOSS:return G.DATA_LOSS;default:return U(39323,{code:e})}}(Q=BS||={})[Q.OK=0]=`OK`,Q[Q.CANCELLED=1]=`CANCELLED`,Q[Q.UNKNOWN=2]=`UNKNOWN`,Q[Q.INVALID_ARGUMENT=3]=`INVALID_ARGUMENT`,Q[Q.DEADLINE_EXCEEDED=4]=`DEADLINE_EXCEEDED`,Q[Q.NOT_FOUND=5]=`NOT_FOUND`,Q[Q.ALREADY_EXISTS=6]=`ALREADY_EXISTS`,Q[Q.PERMISSION_DENIED=7]=`PERMISSION_DENIED`,Q[Q.UNAUTHENTICATED=16]=`UNAUTHENTICATED`,Q[Q.RESOURCE_EXHAUSTED=8]=`RESOURCE_EXHAUSTED`,Q[Q.FAILED_PRECONDITION=9]=`FAILED_PRECONDITION`,Q[Q.ABORTED=10]=`ABORTED`,Q[Q.OUT_OF_RANGE=11]=`OUT_OF_RANGE`,Q[Q.UNIMPLEMENTED=12]=`UNIMPLEMENTED`,Q[Q.INTERNAL=13]=`INTERNAL`,Q[Q.UNAVAILABLE=14]=`UNAVAILABLE`,Q[Q.DATA_LOSS=15]=`DATA_LOSS`;
/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var US=null;
/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function WS(){return new TextEncoder}
/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var GS=new Fv([4294967295,4294967295],0);function KS(e){let t=WS().encode(e),n=new Iv;return n.update(t),new Uint8Array(n.digest())}function qS(e){let t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Fv([n,r],0),new Fv([i,a],0)]}var JS=class e{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new YS(`Invalid padding: ${t}`);if(n<0||e.length>0&&this.hashCount===0)throw new YS(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new YS(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Fv.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(Fv.fromNumber(n)));return r.compare(GS)===1&&(r=new Fv([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=KS(e),[n,r]=qS(t);for(let e=0;e<this.hashCount;e++){let t=this.ye(n,r,e);if(!this.we(t))return!1}return!0}static create(t,n,r){let i=t%8==0?0:8-t%8,a=new Uint8Array(Math.ceil(t/8)),o=new e(a,i,n);return r.forEach((e=>o.insert(e))),o}insert(e){if(this.ge===0)return;let t=KS(e),[n,r]=qS(t);for(let e=0;e<this.hashCount;e++){let t=this.ye(n,r,e);this.Se(t)}}Se(e){let t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}},YS=class extends Error{constructor(){super(...arguments),this.name=`BloomFilterError`}},XS=class e{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){let i=new Map;return i.set(t,ZS.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Y.min(),i,new ob(q),Kx(),Z())}},ZS=class e{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new e(r,n,Z(),Z(),Z())}},QS=class{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}},$S=class{constructor(e,t){this.targetId=e,this.Ce=t}},eC=class{constructor(e,t,n=pb.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}},tC=class{constructor(){this.ve=0,this.Fe=iC(),this.Me=pb.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Z(),t=Z(),n=Z();return this.Fe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:U(38017,{changeType:i})}})),new ZS(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=iC()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){--this.ve,ry(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},nC=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=Kx(),this.Je=rC(),this.He=rC(),this.Ye=new ob(q)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{let n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:U(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((e,n)=>{this.rt(n)&&t(n)}))}st(e){let t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){let i=r.target;if(Ex(i))if(n===0){let e=new J(i.path);this.et(t,e,$b.newNoDocument(e,Y.min()))}else ry(n===1,20013,{expectedCount:n});else{let r=this._t(t);if(r!==n){let n=this.ut(e),i=n?this.ct(n,e,r):1;if(i!==0){this.it(t);let e=i===2?`TargetPurposeExistenceFilterMismatchBloom`:`TargetPurposeExistenceFilterMismatch`;this.Ye=this.Ye.insert(t,e)}US?.lt(function(e,t,n,r,i){let a={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},o=t.unchangedNames;return o&&(a.bloomFilter={applied:i===0,hashCount:o?.hashCount??0,bitmapLength:o?.bits?.bitmap?.length??0,padding:o?.bits?.padding??0,mightContain:e=>r?.mightContain(e)??!1}),a}(r,e.Ce,this.Ge.ht(),n,i))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:n=``,padding:r=0},hashCount:i=0}=t,a,o;try{a=_b(n).toUint8Array()}catch(e){if(e instanceof fb)return ey(`Decoding the base64 bloom filter in existence filter failed (`+e.message+`); ignoring the bloom filter and falling back to full re-query.`),null;throw e}try{o=new JS(a,r,i)}catch(e){return ey(e instanceof YS?`BloomFilter error: `:`Applying bloom filter failed: `,e),null}return o.ge===0?null:o}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){let n=this.Ge.getRemoteKeysForTarget(t),r=0;return n.forEach((n=>{let i=this.Ge.ht(),a=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(a)||(this.et(t,n,null),r++)})),r}Tt(e){let t=new Map;this.ze.forEach(((n,r)=>{let i=this.ot(r);if(i){if(n.current&&Ex(i.target)){let t=new J(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,$b.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}}));let n=Z();this.He.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{let t=this.ot(e);return!t||t.purpose===`TargetPurposeLimboResolution`||(r=!1,!1)})),r&&(n=n.add(e))})),this.je.forEach(((t,n)=>n.setReadTime(e)));let r=new XS(e,t,this.Ye,this.je,n);return this.je=Kx(),this.Je=rC(),this.He=rC(),this.Ye=new ob(q),r}Xe(e,t){if(!this.rt(e))return;let n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;let r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new tC,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new lb(q),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new lb(q),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||H(`WatchChangeAggregator`,`Detected inactive target`,e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new tC),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function rC(){return new ob(J.comparator)}function iC(){return new ob(J.comparator)}var aC=(()=>({asc:`ASCENDING`,desc:`DESCENDING`}))(),oC=(()=>({"<":`LESS_THAN`,"<=":`LESS_THAN_OR_EQUAL`,">":`GREATER_THAN`,">=":`GREATER_THAN_OR_EQUAL`,"==":`EQUAL`,"!=":`NOT_EQUAL`,"array-contains":`ARRAY_CONTAINS`,in:`IN`,"not-in":`NOT_IN`,"array-contains-any":`ARRAY_CONTAINS_ANY`}))(),sC=(()=>({and:`AND`,or:`OR`}))(),cC=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function lC(e,t){return e.useProto3Json||Xy(t)?t:{value:t}}function uC(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,``).replace(`Z`,``)}.${(`000000000`+t.nanoseconds).slice(-9)}Z`:{seconds:``+t.seconds,nanos:t.nanoseconds}}function dC(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function fC(e,t){return uC(e,t.toTimestamp())}function pC(e){return ry(!!e,49232),Y.fromTimestamp(function(e){let t=hb(e);return new Iy(t.seconds,t.nanos)}(e))}function mC(e,t){return hC(e,t).canonicalString()}function hC(e,t){let n=function(e){return new Sy([`projects`,e.projectId,`databases`,e.database])}(e).child(`documents`);return t===void 0?n:n.child(t)}function gC(e){let t=Sy.fromString(e);return ry(zC(t),10190,{key:t.toString()}),t}function _C(e,t){return mC(e.databaseId,t.path)}function vC(e,t){let n=gC(t);if(n.get(1)!==e.databaseId.projectId)throw new K(G.INVALID_ARGUMENT,`Tried to deserialize key from different project: `+n.get(1)+` vs `+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new K(G.INVALID_ARGUMENT,`Tried to deserialize key from different database: `+n.get(3)+` vs `+e.databaseId.database);return new J(SC(n))}function yC(e,t){return mC(e.databaseId,t)}function bC(e){let t=gC(e);return t.length===4?Sy.emptyPath():SC(t)}function xC(e){return new Sy([`projects`,e.databaseId.projectId,`databases`,e.databaseId.database]).canonicalString()}function SC(e){return ry(e.length>4&&e.get(4)===`documents`,29091,{key:e.toString()}),e.popFirst(5)}function CC(e,t,n){return{name:_C(e,t),fields:n.value.mapValue.fields}}function wC(e,t){let n;if(`targetChange`in t){t.targetChange;let r=function(e){return e===`NO_CHANGE`?0:e===`ADD`?1:e===`REMOVE`?2:e===`CURRENT`?3:e===`RESET`?4:U(39313,{state:e})}(t.targetChange.targetChangeType||`NO_CHANGE`),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(ry(t===void 0||typeof t==`string`,58123),pb.fromBase64String(t||``)):(ry(t===void 0||t instanceof Buffer||t instanceof Uint8Array,16193),pb.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){let t=e.code===void 0?G.UNKNOWN:HS(e.code);return new K(t,e.message||``)}(o);n=new eC(r,i,a,s||null)}else if(`documentChange`in t){t.documentChange;let r=t.documentChange;r.document,r.document.name,r.document.updateTime;let i=vC(e,r.document.name),a=pC(r.document.updateTime),o=r.document.createTime?pC(r.document.createTime):Y.min(),s=new Zb({mapValue:{fields:r.document.fields}}),c=$b.newFoundDocument(i,a,o,s),l=r.targetIds||[],u=r.removedTargetIds||[];n=new QS(l,u,c.key,c)}else if(`documentDelete`in t){t.documentDelete;let r=t.documentDelete;r.document;let i=vC(e,r.document),a=r.readTime?pC(r.readTime):Y.min(),o=$b.newNoDocument(i,a),s=r.removedTargetIds||[];n=new QS([],s,o.key,o)}else if(`documentRemove`in t){t.documentRemove;let r=t.documentRemove;r.document;let i=vC(e,r.document),a=r.removedTargetIds||[];n=new QS([],a,i,null)}else{if(!(`filter`in t))return U(11601,{Rt:t});{t.filter;let e=t.filter;e.targetId;let{count:r=0,unchangedNames:i}=e,a=new zS(r,i),o=e.targetId;n=new $S(o,a)}}return n}function TC(e,t){let n;if(t instanceof kS)n={update:CC(e,t.key,t.value)};else if(t instanceof PS)n={delete:_C(e,t.key)};else if(t instanceof AS)n={update:CC(e,t.key,t.data),updateMask:RC(t.fieldMask)};else{if(!(t instanceof FS))return U(16599,{Vt:t.type});n={verify:_C(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){let n=t.transform;if(n instanceof uS)return{fieldPath:t.field.canonicalString(),setToServerValue:`REQUEST_TIME`};if(n instanceof dS)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof pS)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof hS)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw U(20930,{transform:t.transform})}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return t.updateTime===void 0?t.exists===void 0?U(27497):{exists:t.exists}:{updateTime:fC(e,t.updateTime)}}(e,t.precondition)),n}function EC(e,t){return e&&e.length>0?(ry(t!==void 0,14353),e.map((e=>function(e,t){let n=e.updateTime?pC(e.updateTime):pC(t);return n.isEqual(Y.min())&&(n=pC(t)),new bS(n,e.transformResults||[])}(e,t)))):[]}function DC(e,t){return{documents:[yC(e,t.path)]}}function OC(e,t){let n={structuredQuery:{}},r=t.path,i;t.collectionGroup===null?(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]):(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]),n.parent=yC(e,i);let a=function(e){if(e.length!==0)return LC(sx.create(e,`and`))}(t.filters);a&&(n.structuredQuery.where=a);let o=function(e){if(e.length!==0)return e.map((e=>function(e){return{field:FC(e.field),direction:MC(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);let s=lC(e,t.limit);return s!==null&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function kC(e){let t=bC(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ry(r===1,65062);let e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let a=[];n.where&&(a=function(e){let t=jC(e);return t instanceof sx&&lx(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new rx(IC(e.field),function(e){switch(e){case`ASCENDING`:return`asc`;case`DESCENDING`:return`desc`;default:return}}(e.direction))}(e)))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t=typeof e==`object`?e.value:e,Xy(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){let t=!!e.before,n=e.values||[];return new ex(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){let t=!e.before,n=e.values||[];return new ex(n,t)}(n.endAt)),Ox(t,i,o,a,s,`F`,c,l)}function AC(e,t){let n=function(e){switch(e){case`TargetPurposeListen`:return null;case`TargetPurposeExistenceFilterMismatch`:return`existence-filter-mismatch`;case`TargetPurposeExistenceFilterMismatchBloom`:return`existence-filter-mismatch-bloom`;case`TargetPurposeLimboResolution`:return`limbo-document`;default:return U(28987,{purpose:e})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function jC(e){return e.unaryFilter===void 0?e.fieldFilter===void 0?e.compositeFilter===void 0?U(30097,{filter:e}):function(e){return sx.create(e.compositeFilter.filters.map((e=>jC(e))),function(e){switch(e){case`AND`:return`and`;case`OR`:return`or`;default:return U(1026)}}(e.compositeFilter.op))}(e):function(e){return ox.create(IC(e.fieldFilter.field),function(e){switch(e){case`EQUAL`:return`==`;case`NOT_EQUAL`:return`!=`;case`GREATER_THAN`:return`>`;case`GREATER_THAN_OR_EQUAL`:return`>=`;case`LESS_THAN`:return`<`;case`LESS_THAN_OR_EQUAL`:return`<=`;case`ARRAY_CONTAINS`:return`array-contains`;case`IN`:return`in`;case`NOT_IN`:return`not-in`;case`ARRAY_CONTAINS_ANY`:return`array-contains-any`;case`OPERATOR_UNSPECIFIED`:return U(58110);default:return U(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):function(e){switch(e.unaryFilter.op){case`IS_NAN`:let t=IC(e.unaryFilter.field);return ox.create(t,`==`,{doubleValue:NaN});case`IS_NULL`:let n=IC(e.unaryFilter.field);return ox.create(n,`==`,{nullValue:`NULL_VALUE`});case`IS_NOT_NAN`:let r=IC(e.unaryFilter.field);return ox.create(r,`!=`,{doubleValue:NaN});case`IS_NOT_NULL`:let i=IC(e.unaryFilter.field);return ox.create(i,`!=`,{nullValue:`NULL_VALUE`});case`OPERATOR_UNSPECIFIED`:return U(61313);default:return U(60726)}}(e)}function MC(e){return aC[e]}function NC(e){return oC[e]}function PC(e){return sC[e]}function FC(e){return{fieldPath:e.canonicalString()}}function IC(e){return wy.fromServerFormat(e.fieldPath)}function LC(e){return e instanceof ox?function(e){if(e.op===`==`){if(Kb(e.value))return{unaryFilter:{field:FC(e.field),op:`IS_NAN`}};if(Gb(e.value))return{unaryFilter:{field:FC(e.field),op:`IS_NULL`}}}else if(e.op===`!=`){if(Kb(e.value))return{unaryFilter:{field:FC(e.field),op:`IS_NOT_NAN`}};if(Gb(e.value))return{unaryFilter:{field:FC(e.field),op:`IS_NOT_NULL`}}}return{fieldFilter:{field:FC(e.field),op:NC(e.op),value:e.value}}}(e):e instanceof sx?function(e){let t=e.getFilters().map((e=>LC(e)));return t.length===1?t[0]:{compositeFilter:{op:PC(e.op),filters:t}}}(e):U(54877,{filter:e})}function RC(e){let t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function zC(e){return e.length>=4&&e.get(0)===`projects`&&e.get(2)===`databases`}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var BC=class e{constructor(e,t,n,r,i=Y.min(),a=Y.min(),o=pb.EMPTY_BYTE_STRING,s=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=s}withSequenceNumber(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}},VC=class{constructor(e){this.yt=e}};function HC(e){let t=kC({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType===`LAST`?Ix(t,t.limit,`L`):t}
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var UC=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if(`nullValue`in e)this.Ft(t,5);else if(`booleanValue`in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if(`integerValue`in e)this.Ft(t,15),t.Mt(gb(e.integerValue));else if(`doubleValue`in e){let n=gb(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Zy(n)?t.Mt(0):t.Mt(n))}else if(`timestampValue`in e){let n=e.timestampValue;this.Ft(t,20),typeof n==`string`&&(n=hb(n)),t.xt(`${n.seconds||``}`),t.Mt(n.nanos||0)}else if(`stringValue`in e)this.Ot(e.stringValue,t),this.Nt(t);else if(`bytesValue`in e)this.Ft(t,30),t.Bt(_b(e.bytesValue)),this.Nt(t);else if(`referenceValue`in e)this.Lt(e.referenceValue,t);else if(`geoPointValue`in e){let n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else `mapValue`in e?Xb(e)?this.Ft(t,2**53-1):Jb(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):`arrayValue`in e?(this.Qt(e.arrayValue,t),this.Nt(t)):U(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let n=e.fields||{};this.Ft(t,55);for(let e of Object.keys(n))this.Ot(e,t),this.Ct(n[e],t)}kt(e,t){let n=e.fields||{};this.Ft(t,53);let r=Mb,i=n[r].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(gb(i)),this.Ot(r,t),this.Ct(n[r],t)}Qt(e,t){let n=e.values||[];this.Ft(t,50);for(let e of n)this.Ct(e,t)}Lt(e,t){this.Ft(t,37),J.fromName(e).path.forEach((e=>{this.Ft(t,60),this.Ut(e,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};UC.Kt=new UC;
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var WC=class{constructor(){this.Cn=new GC}addToCollectionParentIndex(e,t){return this.Cn.add(t),X.resolve()}getCollectionParents(e,t){return X.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return X.resolve()}deleteFieldIndex(e,t){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,t){return X.resolve()}getDocumentsMatchingTarget(e,t){return X.resolve(null)}getIndexType(e,t){return X.resolve(0)}getFieldIndexes(e,t){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,t){return X.resolve(Vy.min())}getMinOffsetFromCollectionGroup(e,t){return X.resolve(Vy.min())}updateCollectionGroup(e,t,n){return X.resolve()}updateIndexEntries(e,t){return X.resolve()}},GC=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new lb(Sy.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new lb(Sy.comparator)).toArray()}};new Uint8Array;
/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var KC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qC=41943040,JC=class e{static withCacheSize(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
JC.DEFAULT_COLLECTION_PERCENTILE=10,JC.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,JC.DEFAULT=new JC(qC,JC.DEFAULT_COLLECTION_PERCENTILE,JC.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),JC.DISABLED=new JC(-1,0,0);
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var YC=class e{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new e(0)}static cr(){return new e(-1)}},XC=`LruGarbageCollector`,ZC=1048576;function QC([e,t],[n,r]){let i=q(e,n);return i===0?q(t,r):i}var $C=class{constructor(e){this.Ir=e,this.buffer=new lb(QC),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let e=this.buffer.last();QC(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}},ew=class{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&=(this.Rr.cancel(),null)}get started(){return this.Rr!==null}Vr(e){H(XC,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay(`lru_garbage_collection`,e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){qy(e)?H(XC,`Ignoring IndexedDB error during garbage collection: `,e):await Gy(e)}await this.Vr(3e5)}))}},tw=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(t===0)return X.resolve(Jy.ce);let n=new $C(t);return this.mr.forEachTarget(e,(e=>n.Ar(e.sequenceNumber))).next((()=>this.mr.pr(e,(e=>n.Ar(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(H(`LruGarbageCollector`,`Garbage collection skipped; disabled`),X.resolve(KC)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(H(`LruGarbageCollector`,`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),KC):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,a,o,s,c,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(H(`LruGarbageCollector`,`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,s=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),Qv()<=k.DEBUG&&H(`LruGarbageCollector`,`LRU Garbage Collection\n\tCounted targets in ${a-l}ms\n\tDetermined least recently used ${r} in `+(o-a)+`ms
\tRemoved ${i} targets in `+(s-o)+`ms
\tRemoved ${e} documents in `+(c-s)+`ms
Total Duration: ${c-l}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}};function nw(e,t){return new tw(e,t)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var rw=class{constructor(){this.changes=new Wx((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$b.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let n=this.changes.get(t);return n===void 0?this.getFromCache(e,t):X.resolve(n)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}},iw=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}},aw=class{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(n!==null&&ES(n.mutation,e,db.empty(),Iy.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Z()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=Z()){let r=Xx();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Jx();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){let n=Xx();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Z())))}populateOverlays(e,t,n){let r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Kx(),a=Qx(),o=function(){return Qx()}();return t.forEach(((e,t)=>{let o=n.get(t.key);r.has(t.key)&&(o===void 0||o.mutation instanceof AS)?i=i.insert(t.key,t):o===void 0?a.set(t.key,db.empty()):(a.set(t.key,o.mutation.getFieldMask()),ES(o.mutation,t,o.mutation.getFieldMask(),Iy.now()))})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>a.set(e,t))),t.forEach(((e,t)=>o.set(e,new iw(t,a.get(e)??null)))),o)))}recalculateAndSaveOverlays(e,t){let n=Qx(),r=new ob(((e,t)=>e-t)),i=Z();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(let i of e)i.keys().forEach((e=>{let a=t.get(e);if(a===null)return;let o=n.get(e)||db.empty();o=i.applyToLocalView(a,o),n.set(e,o);let s=(r.get(i.batchId)||Z()).add(e);r=r.insert(i.batchId,s)}))})).next((()=>{let a=[],o=r.getReverseIterator();for(;o.hasNext();){let r=o.getNext(),s=r.key,c=r.value,l=Zx();c.forEach((e=>{if(!i.has(e)){let r=wS(t.get(e),n.get(e));r!==null&&l.set(e,r),i=i.add(e)}})),a.push(this.documentOverlayCache.saveOverlays(e,s,l))}return X.waitFor(a)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return J.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):jx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{let a=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):X.resolve(Xx()),o=Ly,s=i;return a.next((t=>X.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?X.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{s=s.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,s,t,Z()))).next((e=>({batchId:o,changes:Yx(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new J(t)).next((e=>{let t=Jx();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){let i=t.collectionGroup,a=Jx();return this.indexManager.getCollectionParents(e,i).next((o=>X.forEach(o,(o=>{let s=function(e,t){return new Dx(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next((e=>{e.forEach(((e,t)=>{a=a.insert(e,t)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{let r=n.getKey();e.get(r)===null&&(e=e.insert(r,$b.newInvalidDocument(r)))}));let n=Jx();return e.forEach(((e,r)=>{let a=i.get(e);a!==void 0&&ES(a.mutation,r,db.empty(),Iy.now()),Bx(t,r)&&(n=n.insert(e,r))})),n}))}},ow=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return X.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:pC(e.createTime)}}(t)),X.resolve()}getNamedQuery(e,t){return X.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:HC(e.bundledQuery),readTime:pC(e.readTime)}}(t)),X.resolve()}},sw=class{constructor(){this.overlays=new ob(J.comparator),this.qr=new Map}getOverlay(e,t){return X.resolve(this.overlays.get(t))}getOverlays(e,t){let n=Xx();return X.forEach(t,(t=>this.getOverlay(e,t).next((e=>{e!==null&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.St(e,t,r)})),X.resolve()}removeOverlaysForBatchId(e,t,n){let r=this.qr.get(n);return r!==void 0&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.qr.delete(n)),X.resolve()}getOverlaysForCollection(e,t,n){let r=Xx(),i=t.length+1,a=new J(t.child(``)),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){let e=o.getNext().value,a=e.getKey();if(!t.isPrefixOf(a.path))break;a.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return X.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new ob(((e,t)=>e-t)),a=this.overlays.getIterator();for(;a.hasNext();){let e=a.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);t===null&&(t=Xx(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}let o=Xx(),s=i.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return X.resolve(o)}St(e,t,n){let r=this.overlays.get(n.key);if(r!==null){let e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new RS(t,n));let i=this.qr.get(t);i===void 0&&(i=Z(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}},cw=class{constructor(){this.sessionToken=pb.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,X.resolve()}},lw=class{constructor(){this.Qr=new lb(uw.$r),this.Ur=new lb(uw.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let n=new uw(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Gr(new uw(e,t))}zr(e,t){e.forEach((e=>this.removeReference(e,t)))}jr(e){let t=new J(new Sy([])),n=new uw(t,e),r=new uw(t,e+1),i=[];return this.Ur.forEachInRange([n,r],(e=>{this.Gr(e),i.push(e.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new J(new Sy([])),n=new uw(t,e),r=new uw(t,e+1),i=Z();return this.Ur.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){let t=new uw(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}},uw=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return J.comparator(e.key,t.key)||q(e.Yr,t.Yr)}static Kr(e,t){return q(e.Yr,t.Yr)||J.comparator(e.key,t.key)}},dw=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new lb(uw.$r)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,r){let i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new IS(i,t,n,r);this.mutationQueue.push(a);for(let t of r)this.Zr=this.Zr.add(new uw(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return X.resolve(a)}lookupMutationBatch(e,t){return X.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let n=t+1,r=this.ei(n),i=r<0?0:r;return X.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?Yy:this.tr-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let n=new uw(t,0),r=new uw(t,1/0),i=[];return this.Zr.forEachInRange([n,r],(e=>{let t=this.Xr(e.Yr);i.push(t)})),X.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new lb(q);return t.forEach((e=>{let t=new uw(e,0),r=new uw(e,1/0);this.Zr.forEachInRange([t,r],(e=>{n=n.add(e.Yr)}))})),X.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){let n=t.path,r=n.length+1,i=n;J.isDocumentKey(i)||(i=i.child(``));let a=new uw(new J(i),0),o=new lb(q);return this.Zr.forEachWhile((e=>{let t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Yr)),!0)}),a),X.resolve(this.ti(o))}ti(e){let t=[];return e.forEach((e=>{let n=this.Xr(e);n!==null&&t.push(n)})),t}removeMutationBatch(e,t){ry(this.ni(t.batchId,`removed`)===0,55003),this.mutationQueue.shift();let n=this.Zr;return X.forEach(t.mutations,(r=>{let i=new uw(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,t){let n=new uw(t,0),r=this.Zr.firstAfterOrEqual(n);return X.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}},fw=class{constructor(e){this.ri=e,this.docs=function(){return new ob(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let n=this.docs.get(t);return X.resolve(n?n.document.mutableCopy():$b.newInvalidDocument(t))}getEntries(e,t){let n=Kx();return t.forEach((e=>{let t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():$b.newInvalidDocument(e))})),X.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Kx(),a=t.path,o=new J(a.child(`__id-9223372036854775808__`)),s=this.docs.getIteratorFrom(o);for(;s.hasNext();){let{key:e,value:{document:o}}=s.getNext();if(!a.isPrefixOf(e.path))break;e.path.length>a.length+1||Hy(By(o),n)<=0||(r.has(o.key)||Bx(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return X.resolve(i)}getAllFromCollectionGroup(e,t,n,r){U(9500)}ii(e,t){return X.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new pw(this)}getSize(e){return X.resolve(this.size)}},pw=class extends rw{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)})),X.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}},mw=class{constructor(e){this.persistence=e,this.si=new Wx((e=>wx(e)),Tx),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.oi=0,this._i=new lw,this.targetCount=0,this.ai=YC.ur()}forEachTarget(e,t){return this.si.forEach(((e,n)=>t(n))),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),X.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new YC(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,X.resolve()}updateTargetData(e,t){return this.Pr(t),X.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),--this.targetCount,X.resolve()}removeTargets(e,t,n){let r=0,i=[];return this.si.forEach(((a,o)=>{o.sequenceNumber<=t&&n.get(o.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),X.waitFor(i).next((()=>r))}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,t){let n=this.si.get(t)||null;return X.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),X.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);let r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),X.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),X.resolve()}getMatchingKeysForTargetId(e,t){let n=this._i.Hr(t);return X.resolve(n)}containsKey(e,t){return X.resolve(this._i.containsKey(t))}},hw=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new Jy(0),this.li=!1,this.li=!0,this.hi=new cw,this.referenceDelegate=e(this),this.Pi=new mw(this),this.indexManager=new WC,this.remoteDocumentCache=function(e){return new fw(e)}((e=>this.referenceDelegate.Ti(e))),this.serializer=new VC(t),this.Ii=new ow(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new sw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new dw(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){H(`MemoryPersistence`,`Starting transaction:`,e);let r=new gw(this.ci.next());return this.referenceDelegate.Ei(),n(r).next((e=>this.referenceDelegate.di(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Ai(e,t){return X.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,t))))}},gw=class extends Wy{constructor(e){super(),this.currentSequenceNumber=e}},_w=class e{constructor(e){this.persistence=e,this.Ri=new lw,this.Vi=null}static mi(t){return new e(t)}get fi(){if(this.Vi)return this.Vi;throw U(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),X.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),X.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),X.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((e=>this.fi.add(e.toString())));let n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.fi.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.fi,(n=>{let r=J.fromPath(n);return this.gi(e,r).next((e=>{e||t.removeEntry(r,Y.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return X.or([()=>X.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},vw=class e{constructor(e,t){this.persistence=e,this.pi=new Wx((e=>eb(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=nw(this,t)}static mi(t,n){return new e(t,n)}Ei(){}di(e){return X.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}wr(e){let t=0;return this.pr(e,(e=>{t++})).next((()=>t))}pr(e,t){return X.forEach(this.pi,((n,r)=>this.br(e,n,r).next((e=>e?X.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0,r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,(r=>this.br(e,r,t).next((e=>{e||(n++,i.removeEntry(r,Y.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),X.resolve()}removeTarget(e,t){let n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),X.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),X.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),X.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Vb(e.data.value)),t}br(e,t,n){return X.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let e=this.pi.get(t);return X.resolve(e!==void 0&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}},yw=class e{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(t,n){let r=Z(),i=Z();for(let e of n.docChanges)switch(e.type){case 0:r=r.add(e.doc.key);break;case 1:i=i.add(e.doc.key)}return new e(t,n.fromCache,r,i)}},bw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}},xw=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return pt()?8:Ky(at())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){let i={result:null};return this.ys(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ws(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;let n=new bw;return this.Ss(e,t,n).next((r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)}))})).next((()=>i.result))}bs(e,t,n,r){return n.documentReadCount<this.fs?(Qv()<=k.DEBUG&&H(`QueryEngine`,`SDK will not create cache indexes for query:`,zx(t),`since it only creates cache indexes for collection contains`,`more than or equal to`,this.fs,`documents`),X.resolve()):(Qv()<=k.DEBUG&&H(`QueryEngine`,`Query:`,zx(t),`scans`,n.documentReadCount,`local documents and returns`,r,`documents as results.`),n.documentReadCount>this.gs*r?(Qv()<=k.DEBUG&&H(`QueryEngine`,`The SDK decides to create cache indexes for query:`,zx(t),`as using cache indexes may help improve performance.`),this.indexManager.createTargetIndexes(e,Nx(t))):X.resolve())}ys(e,t){if(Ax(t))return X.resolve(null);let n=Nx(t);return this.indexManager.getIndexType(e,n).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=Ix(t,null,`F`),n=Nx(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{let i=Z(...r);return this.ps.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{let a=this.Ds(t,r);return this.Cs(t,a,i,n.readTime)?this.ys(e,Ix(t,null,`F`)):this.vs(e,a,t,n)}))))})))))}ws(e,t,n,r){return Ax(t)||r.isEqual(Y.min())?X.resolve(null):this.ps.getDocuments(e,n).next((i=>{let a=this.Ds(t,i);return this.Cs(t,a,n,r)?X.resolve(null):(Qv()<=k.DEBUG&&H(`QueryEngine`,`Re-using previous result from %s to execute query: %s`,r.toString(),zx(t)),this.vs(e,a,t,zy(r,Ly)).next((e=>e)))}))}Ds(e,t){let n=new lb(Hx(e));return t.forEach(((t,r)=>{Bx(e,r)&&(n=n.add(r))})),n}Cs(e,t,n,r){if(e.limit===null)return!1;if(n.size!==t.size)return!0;let i=e.limitType===`F`?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return Qv()<=k.DEBUG&&H(`QueryEngine`,`Using full collection scan to execute query:`,zx(t)),this.ps.getDocumentsMatchingQuery(e,t,Vy.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}},Sw=`LocalStore`,Cw=3e8,ww=class{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new ob(q),this.xs=new Wx((e=>wx(e)),Tx),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new aw(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction(`Collect garbage`,`readwrite-primary`,(t=>e.collect(t,this.Ms)))}};function Tw(e,t,n,r){return new ww(e,t,n,r)}async function Ew(e,t){let n=W(e);return await n.persistence.runTransaction(`Handle user change`,`readonly`,(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{let i=[],a=[],o=Z();for(let e of r){i.push(e.batchId);for(let t of e.mutations)o=o.add(t.key)}for(let e of t){a.push(e.batchId);for(let t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({Ls:e,removedBatchIds:i,addedBatchIds:a})))}))}))}function Dw(e,t){let n=W(e);return n.persistence.runTransaction(`Acknowledge batch`,`readwrite-primary`,(e=>{let r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){let i=n.batch,a=i.keys(),o=X.resolve();return a.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{let a=n.docVersions.get(e);ry(a!==null,48541),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Z();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}function Ow(e){let t=W(e);return t.persistence.runTransaction(`Get last remote snapshot version`,`readonly`,(e=>t.Pi.getLastRemoteSnapshotVersion(e)))}function kw(e,t){let n=W(e),r=t.snapshotVersion,i=n.Ms;return n.persistence.runTransaction(`Apply remote event`,`readwrite-primary`,(e=>{let a=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;let o=[];t.targetChanges.forEach(((a,s)=>{let c=i.get(s);if(!c)return;o.push(n.Pi.removeMatchingKeys(e,a.removedDocuments,s).next((()=>n.Pi.addMatchingKeys(e,a.addedDocuments,s))));let l=c.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.get(s)===null?a.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(a.resumeToken,r)):l=l.withResumeToken(pb.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()),i=i.insert(s,l),function(e,t,n){return e.resumeToken.approximateByteSize()===0||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=Cw?!0:n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,a)&&o.push(n.Pi.updateTargetData(e,l))}));let s=Kx(),c=Z();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Aw(e,a,t.documentUpdates).next((e=>{s=e.ks,c=e.qs}))),!r.isEqual(Y.min())){let t=n.Pi.getLastRemoteSnapshotVersion(e).next((t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return X.waitFor(o).next((()=>a.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,s,c))).next((()=>s))})).then((e=>(n.Ms=i,e)))}function Aw(e,t,n){let r=Z(),i=Z();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Kx();return n.forEach(((n,a)=>{let o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Y.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||a.version.compareTo(o.version)===0&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):H(Sw,`Ignoring outdated watch update for `,n,`. Current version:`,o.version,` Watch version:`,a.version)})),{ks:r,qs:i}}))}function jw(e,t){let n=W(e);return n.persistence.runTransaction(`Get next mutation batch`,`readonly`,(e=>(t===void 0&&(t=Yy),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Mw(e,t){let n=W(e);return n.persistence.runTransaction(`Allocate target`,`readwrite`,(e=>{let r;return n.Pi.getTargetData(e,t).next((i=>i?(r=i,X.resolve(r)):n.Pi.allocateTargetId(e).next((i=>(r=new BC(t,i,`TargetPurposeListen`,e.currentSequenceNumber),n.Pi.addTargetData(e,r).next((()=>r)))))))})).then((e=>{let r=n.Ms.get(e.targetId);return(r===null||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e}))}async function Nw(e,t,n){let r=W(e),i=r.Ms.get(t),a=n?`readwrite`:`readwrite-primary`;try{n||await r.persistence.runTransaction(`Release target`,a,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!qy(e))throw e;H(Sw,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function Pw(e,t,n){let r=W(e),i=Y.min(),a=Z();return r.persistence.runTransaction(`Execute query`,`readwrite`,(e=>function(e,t,n){let r=W(e),i=r.xs.get(n);return i===void 0?r.Pi.getTargetData(t,n):X.resolve(r.Ms.get(i))}(r,e,Nx(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next((e=>{a=e}))})).next((()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:Y.min(),n?a:Z()))).next((e=>(Fw(r,Vx(t),e),{documents:e,Qs:a})))))}function Fw(e,t,n){let r=e.Os.get(t)||Y.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Os.set(t,r)}var Iw=class{constructor(){this.activeTargetIds=nS()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Lw=class{constructor(){this.Mo=new Iw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||`not-current`}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Iw,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}},Rw=class{Oo(e){}shutdown(){}},zw=`ConnectivityMonitor`,Bw=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener(`online`,this.No),window.removeEventListener(`offline`,this.Lo)}Qo(){window.addEventListener(`online`,this.No),window.addEventListener(`offline`,this.Lo)}Bo(){H(zw,`Network connectivity changed: AVAILABLE`);for(let e of this.qo)e(0)}ko(){H(zw,`Network connectivity changed: UNAVAILABLE`);for(let e of this.qo)e(1)}static v(){return typeof window<`u`&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}},Vw=null;function Hw(){return Vw===null?Vw=function(){return 268435456+Math.round(2147483648*Math.random())}():Vw++,`0x`+Vw.toString(16)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Uw=`RestConnection`,Ww={BatchGetDocuments:`batchGet`,Commit:`commit`,RunQuery:`runQuery`,RunAggregationQuery:`runAggregationQuery`},Gw=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?`https`:`http`,n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+`://`+e.host,this.Ko=`projects/${n}/databases/${r}`,this.Wo=this.databaseId.database===Eb?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Go(e,t,n,r,i){let a=Hw(),o=this.zo(e,t.toUriEncodedString());H(Uw,`Sending RPC '${e}' ${a}:`,o,n);let s={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(s,r,i);let{host:c}=new URL(o),l=Ze(c);return this.Jo(e,o,s,n,l).then((t=>(H(Uw,`Received RPC '${e}' ${a}: `,t),t)),(t=>{throw ey(Uw,`RPC '${e}' ${a} failed with error: `,t,`url: `,o,`request:`,n),t}))}Ho(e,t,n,r,i,a){return this.Go(e,t,n,r,i)}jo(e,t,n){e[`X-Goog-Api-Client`]=function(){return`gl-js/ fire/`+Xv}(),e[`Content-Type`]=`text/plain`,this.databaseInfo.appId&&(e[`X-Firebase-GMPID`]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}zo(e,t){let n=Ww[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}},Kw=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}},qw=`WebChannelConnection`,Jw=class extends Gw{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){let a=Hw();return new Promise(((i,o)=>{let s=new zv;s.setWithCredentials(!0),s.listenOnce(Vv.COMPLETE,(()=>{try{switch(s.getLastErrorCode()){case Hv.NO_ERROR:let t=s.getResponseJson();H(qw,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(t)),i(t);break;case Hv.TIMEOUT:H(qw,`RPC '${e}' ${a} timed out`),o(new K(G.DEADLINE_EXCEEDED,`Request time out`));break;case Hv.HTTP_ERROR:let n=s.getStatus();if(H(qw,`RPC '${e}' ${a} failed with status:`,n,`response text:`,s.getResponseText()),n>0){let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);let t=e?.error;if(t&&t.status&&t.message){let e=function(e){let t=e.toLowerCase().replace(/_/g,`-`);return Object.values(G).indexOf(t)>=0?t:G.UNKNOWN}(t.status);o(new K(e,t.message))}else o(new K(G.UNKNOWN,`Server responded with status `+s.getStatus()))}else o(new K(G.UNAVAILABLE,`Connection failed.`));break;default:U(9055,{l_:e,streamId:a,h_:s.getLastErrorCode(),P_:s.getLastError()})}}finally{H(qw,`RPC '${e}' ${a} completed.`)}}));let c=JSON.stringify(r);H(qw,`RPC '${e}' ${a} sending request:`,r),s.send(t,`POST`,c,n,15)}))}T_(e,t,n){let r=Hw(),i=[this.Uo,`/`,`google.firestore.v1.Firestore`,`/`,e,`/channel`],a=Kv(),o=Gv(),s={httpSessionIdParam:`gsessionid`,initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(s.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(s.useFetchStreams=!0),this.jo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;let l=i.join(``);H(qw,`Creating RPC '${e}' stream ${r}: ${l}`,s);let u=a.createWebChannel(l,s);this.I_(u);let d=!1,f=!1,p=new Kw({Yo:t=>{f?H(qw,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||=(H(qw,`Opening RPC '${e}' stream ${r} transport.`),u.open(),!0),H(qw,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},Zo:()=>u.close()}),m=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return m(u,Bv.EventType.OPEN,(()=>{f||(H(qw,`RPC '${e}' stream ${r} transport opened.`),p.o_())})),m(u,Bv.EventType.CLOSE,(()=>{f||(f=!0,H(qw,`RPC '${e}' stream ${r} transport closed`),p.a_(),this.E_(u))})),m(u,Bv.EventType.ERROR,(t=>{f||(f=!0,ey(qw,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,`Message:`,t.message),p.a_(new K(G.UNAVAILABLE,`The operation could not be completed`)))})),m(u,Bv.EventType.MESSAGE,(t=>{if(!f){let n=t.data[0];ry(!!n,16349);let i=n,a=i?.error||i[0]?.error;if(a){H(qw,`RPC '${e}' stream ${r} received error:`,a);let t=a.status,n=function(e){let t=BS[e];if(t!==void 0)return HS(t)}(t),i=a.message;n===void 0&&(n=G.INTERNAL,i=`Unknown error status: `+t+` with message `+a.message),f=!0,p.a_(new K(n,i)),u.close()}else H(qw,`RPC '${e}' stream ${r} received:`,n),p.u_(n)}})),m(o,Wv.STAT_EVENT,(t=>{t.stat===Uv.PROXY?H(qw,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Uv.NOPROXY&&H(qw,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{p.__()}),0),p}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}};function Yw(){return typeof document<`u`?document:null}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Xw(e){return new cC(e,!0)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Zw=class{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&H(`ExponentialBackoff`,`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}},Qw=`PersistentStream`,$w=class{constructor(e,t,n,r,i,a,o,s){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=s,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Zw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state===4?this.N_():this.auth()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&=(this.C_.cancel(),null)}U_(){this.v_&&=(this.v_.cancel(),null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e===4?t&&t.code===G.RESOURCE_EXHAUSTED?($v(t.toString()),$v(`Using maximum backoff delay to prevent overloading the backend.`),this.M_.g_()):t&&t.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()):this.M_.reset(),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.D_===t&&this.G_(e,n)}),(t=>{e((()=>{let e=new K(G.UNKNOWN,`Fetching auth token failed: `+t.message);return this.z_(e)}))}))}G_(e,t){let n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((e=>{n((()=>this.z_(e)))})),this.stream.onMessage((e=>{n((()=>++this.F_==1?this.J_(e):this.onNext(e)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return H(Qw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(H(Qw,`stream callback skipped by getCloseGuardedDispatcher.`),Promise.resolve())))}}},eT=class extends $w{constructor(e,t,n,r,i,a){super(e,`listen_stream_connection_backoff`,`listen_stream_idle`,`health_check_timeout`,t,n,r,a),this.serializer=i}j_(e,t){return this.connection.T_(`Listen`,e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=wC(this.serializer,e),n=function(e){if(!(`targetChange`in e))return Y.min();let t=e.targetChange;return t.targetIds&&t.targetIds.length?Y.min():t.readTime?pC(t.readTime):Y.min()}(e);return this.listener.H_(t,n)}Y_(e){let t={};t.database=xC(this.serializer),t.addTarget=function(e,t){let n,r=t.target;if(n=Ex(r)?{documents:DC(e,r)}:{query:OC(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=dC(e,t.resumeToken);let r=lC(e,t.expectedCount);r!==null&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Y.min())>0){n.readTime=uC(e,t.snapshotVersion.toTimestamp());let r=lC(e,t.expectedCount);r!==null&&(n.expectedCount=r)}return n}(this.serializer,e);let n=AC(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){let t={};t.database=xC(this.serializer),t.removeTarget=e,this.q_(t)}},tT=class extends $w{constructor(e,t,n,r,i,a){super(e,`write_stream_connection_backoff`,`write_stream_idle`,`health_check_timeout`,t,n,r,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_(`Write`,e,t)}J_(e){return ry(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ry(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ry(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=EC(e.writeResults,e.commitTime),n=pC(e.commitTime);return this.listener.na(n,t)}ra(){let e={};e.database=xC(this.serializer),this.q_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map((e=>TC(this.serializer,e)))};this.q_(t)}},nT=class{},rT=class extends nT{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new K(G.FAILED_PRECONDITION,`The client has already been terminated.`)}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Go(e,hC(t,n),r,i,a))).catch((e=>{throw e.name===`FirebaseError`?(e.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new K(G.UNKNOWN,e.toString())}))}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Ho(e,hC(t,n),r,a,o,i))).catch((e=>{throw e.name===`FirebaseError`?(e.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new K(G.UNKNOWN,e.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}},iT=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=`Unknown`,this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca(`Unknown`),this._a=this.asyncQueue.enqueueAfterDelay(`online_state_timeout`,1e4,(()=>(this._a=null,this.la(`Backend didn't respond within 10 seconds.`),this.ca(`Offline`),Promise.resolve()))))}ha(e){this.state===`Online`?this.ca(`Unknown`):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca(`Offline`)))}set(e){this.Pa(),this.oa=0,e===`Online`&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?($v(t),this.aa=!1):H(`OnlineStateTracker`,t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}},aT=`RemoteStore`,oT=class{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((e=>{n.enqueueAndForget((async()=>{hT(this)&&(H(aT,`Restarting streams for network reachability change.`),await async function(e){let t=W(e);t.Ea.add(4),await cT(t),t.Ra.set(`Unknown`),t.Ea.delete(4),await sT(t)}(this))}))})),this.Ra=new iT(n,r)}};async function sT(e){if(hT(e))for(let t of e.da)await t(!0)}async function cT(e){for(let t of e.da)await t(!1)}function lT(e,t){let n=W(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),mT(n)?pT(n):PT(n).O_()&&dT(n,t))}function uT(e,t){let n=W(e),r=PT(n);n.Ia.delete(t),r.O_()&&fT(n,t),n.Ia.size===0&&(r.O_()?r.L_():hT(n)&&n.Ra.set(`Unknown`))}function dT(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Y.min())>0){let n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}PT(e).Y_(t)}function fT(e,t){e.Va.Ue(t),PT(e).Z_(t)}function pT(e){e.Va=new nC({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),PT(e).start(),e.Ra.ua()}function mT(e){return hT(e)&&!PT(e).x_()&&e.Ia.size>0}function hT(e){return W(e).Ea.size===0}function gT(e){e.Va=void 0}async function _T(e){e.Ra.set(`Online`)}async function vT(e){e.Ia.forEach(((t,n)=>{dT(e,t)}))}async function yT(e,t){gT(e),mT(e)?(e.Ra.ha(t),pT(e)):e.Ra.set(`Unknown`)}async function bT(e,t,n){if(e.Ra.set(`Online`),t instanceof eC&&t.state===2&&t.cause)try{await async function(e,t){let n=t.cause;for(let r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){H(aT,`Failed to remove targets %s: %s `,t.targetIds.join(`,`),n),await xT(e,n)}else if(t instanceof QS?e.Va.Ze(t):t instanceof $S?e.Va.st(t):e.Va.tt(t),!n.isEqual(Y.min()))try{let t=await Ow(e.localStore);n.compareTo(t)>=0&&await function(e,t){let n=e.Va.Tt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){let i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{let r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(pb.EMPTY_BYTE_STRING,r.snapshotVersion)),fT(e,t);let i=new BC(r.target,t,n,r.sequenceNumber);dT(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){H(aT,`Failed to raise snapshot:`,t),await xT(e,t)}}async function xT(e,t,n){if(!qy(t))throw t;e.Ea.add(1),await cT(e),e.Ra.set(`Offline`),n||=()=>Ow(e.localStore),e.asyncQueue.enqueueRetryable((async()=>{H(aT,`Retrying IndexedDB access`),await n(),e.Ea.delete(1),await sT(e)}))}function ST(e,t){return t().catch((n=>xT(e,n,t)))}async function CT(e){let t=W(e),n=FT(t),r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Yy;for(;wT(t);)try{let e=await jw(t.localStore,r);if(e===null){t.Ta.length===0&&n.L_();break}r=e.batchId,TT(t,e)}catch(e){await xT(t,e)}ET(t)&&DT(t)}function wT(e){return hT(e)&&e.Ta.length<10}function TT(e,t){e.Ta.push(t);let n=FT(e);n.O_()&&n.X_&&n.ea(t.mutations)}function ET(e){return hT(e)&&!FT(e).x_()&&e.Ta.length>0}function DT(e){FT(e).start()}async function OT(e){FT(e).ra()}async function kT(e){let t=FT(e);for(let n of e.Ta)t.ea(n.mutations)}async function AT(e,t,n){let r=e.Ta.shift(),i=LS.from(r,t,n);await ST(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await CT(e)}async function jT(e,t){t&&FT(e).X_&&await async function(e,t){if(function(e){return VS(e)&&e!==G.ABORTED}(t.code)){let n=e.Ta.shift();FT(e).B_(),await ST(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await CT(e)}}(e,t),ET(e)&&DT(e)}async function MT(e,t){let n=W(e);n.asyncQueue.verifyOperationInProgress(),H(aT,`RemoteStore received new credentials`);let r=hT(n);n.Ea.add(3),await cT(n),r&&n.Ra.set(`Unknown`),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await sT(n)}async function NT(e,t){let n=W(e);t?(n.Ea.delete(2),await sT(n)):t||(n.Ea.add(2),await cT(n),n.Ra.set(`Unknown`))}function PT(e){return e.ma||(e.ma=function(e,t,n){let r=W(e);return r.sa(),new eT(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:_T.bind(null,e),t_:vT.bind(null,e),r_:yT.bind(null,e),H_:bT.bind(null,e)}),e.da.push((async t=>{t?(e.ma.B_(),mT(e)?pT(e):e.Ra.set(`Unknown`)):(await e.ma.stop(),gT(e))}))),e.ma}function FT(e){return e.fa||(e.fa=function(e,t,n){let r=W(e);return r.sa(),new tT(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:OT.bind(null,e),r_:jT.bind(null,e),ta:kT.bind(null,e),na:AT.bind(null,e)}),e.da.push((async t=>{t?(e.fa.B_(),await CT(e)):(await e.fa.stop(),e.Ta.length>0&&(H(aT,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))}))),e.fa}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var IT=class e{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new iy,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,a){let o=Date.now()+r,s=new e(t,n,o,i,a);return s.start(r),s}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(G.CANCELLED,`Operation cancelled`+(e?`: `+e:``))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle===null?Promise.resolve():(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e))))))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function LT(e,t){if($v(`AsyncQueue`,`${t}: ${e}`),qy(e))return new K(G.UNAVAILABLE,`${t}: ${e}`);throw e}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var RT=class e{static emptySet(t){return new e(t.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||J.comparator(t.key,n.key):(e,t)=>J.comparator(e.key,t.key),this.keyedMap=Jx(),this.sortedSet=new ob(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){let e=n.getNext().key,t=r.getNext().key;if(!e.isEqual(t))return!1}return!0}toString(){let e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?`DocumentSet ()`:`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(t,n){let r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}},zT=class{constructor(){this.ga=new ob(J.comparator)}track(e){let t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):U(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}},BT=class e{constructor(e,t,n,r,i,a,o,s,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=s,this.hasCachedResults=c}static fromInitialDocuments(t,n,r,i,a){let o=[];return n.forEach((e=>{o.push({type:0,doc:e})})),new e(t,n,RT.emptySet(n),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lx(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}},VT=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}},HT=class{constructor(){this.queries=UT(),this.onlineState=`Unknown`,this.Ca=new Set}terminate(){(function(e,t){let n=W(e),r=n.queries;n.queries=UT(),r.forEach(((e,n)=>{for(let e of n.Sa)e.onError(t)}))})(this,new K(G.ABORTED,`Firestore shutting down`))}};function UT(){return new Wx((e=>Rx(e)),Lx)}async function WT(e,t){let n=W(e),r=3,i=t.query,a=n.queries.get(i);a?!a.ba()&&t.Da()&&(r=2):(a=new VT,r=t.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){let n=LT(e,`Initialization of query '${zx(t.query)}' failed`);t.onError(n);return}n.queries.set(i,a),a.Sa.push(t),t.va(n.onlineState),a.wa&&t.Fa(a.wa)&&JT(n)}async function GT(e,t){let n=W(e),r=t.query,i=3,a=n.queries.get(r);if(a){let e=a.Sa.indexOf(t);e>=0&&(a.Sa.splice(e,1),a.Sa.length===0?i=t.Da()?0:1:!a.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function KT(e,t){let n=W(e),r=!1;for(let e of t){let t=e.query,i=n.queries.get(t);if(i){for(let t of i.Sa)t.Fa(e)&&(r=!0);i.wa=e}}r&&JT(n)}function qT(e,t,n){let r=W(e),i=r.queries.get(t);if(i)for(let e of i.Sa)e.onError(n);r.queries.delete(t)}function JT(e){e.Ca.forEach((e=>{e.next()}))}var YT,XT;(XT=YT||={}).Ma=`default`,XT.Cache=`cache`;var ZT=class{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState=`Unknown`,this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){let t=[];for(let n of e.docChanges)n.type!==3&&t.push(n);e=new BT(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let n=t!==`Offline`;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t===`Offline`)}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=BT.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==YT.Cache}},QT=class{constructor(e){this.key=e}},$T=class{constructor(e){this.key=e}},eE=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Z(),this.mutatedKeys=Z(),this.eu=Hx(e),this.tu=new RT(this.eu)}get nu(){return this.Ya}ru(e,t){let n=t?t.iu:new zT,r=t?t.tu:this.tu,i=t?t.mutatedKeys:this.mutatedKeys,a=r,o=!1,s=this.query.limitType===`F`&&r.size===this.query.limit?r.last():null,c=this.query.limitType===`L`&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{let l=r.get(e),u=Bx(this.query,t)?t:null,d=!!l&&this.mutatedKeys.has(l.key),f=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations),p=!1;l&&u?l.data.isEqual(u.data)?d!==f&&(n.track({type:3,doc:u}),p=!0):this.su(l,u)||(n.track({type:2,doc:u}),p=!0,(s&&this.eu(u,s)>0||c&&this.eu(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),p=!0):l&&!u&&(n.track({type:1,doc:l}),p=!0,(s||c)&&(o=!0)),p&&(u?(a=a.add(u),i=f?i.add(e):i.delete(e)):(a=a.delete(e),i=i.delete(e)))})),this.query.limit!==null)for(;a.size>this.query.limit;){let e=this.query.limitType===`F`?a.last():a.first();a=a.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:a,iu:n,Cs:o,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){let i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let a=e.iu.ya();a.sort(((e,t)=>function(e,t){let n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return U(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc))),this.ou(n),r??=!1;let o=t&&!r?this._u():[],s=this.Xa.size===0&&this.current&&!r?1:0,c=s!==this.Za;return this.Za=s,a.length!==0||c?{snapshot:new BT(this.query,e.tu,i,a,e.mutatedKeys,s===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e===`Offline`?(this.current=!1,this.applyChanges({tu:this.tu,iu:new zT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((e=>this.Ya=this.Ya.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Ya=this.Ya.delete(e))),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=Z(),this.tu.forEach((e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))}));let t=[];return e.forEach((e=>{this.Xa.has(e)||t.push(new $T(e))})),this.Xa.forEach((n=>{e.has(n)||t.push(new QT(n))})),t}cu(e){this.Ya=e.Qs,this.Xa=Z();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return BT.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},tE=`SyncEngine`,nE=class{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}},rE=class{constructor(e){this.key=e,this.hu=!1}},iE=class{constructor(e,t,n,r,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Wx((e=>Rx(e)),Lx),this.Iu=new Map,this.Eu=new Set,this.du=new ob(J.comparator),this.Au=new Map,this.Ru=new lw,this.Vu={},this.mu=new Map,this.fu=YC.cr(),this.onlineState=`Unknown`,this.gu=void 0}get isPrimaryClient(){return!0===this.gu}};async function aE(e,t,n=!0){let r=DE(e),i,a=r.Tu.get(t);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await sE(r,t,n,!0),i}async function oE(e,t){let n=DE(e);await sE(n,t,!0,!1)}async function sE(e,t,n,r){let i=await Mw(e.localStore,Nx(t)),a=i.targetId,o=e.sharedClientState.addLocalQueryTarget(a,n),s;return r&&(s=await cE(e,t,a,o===`current`,i.resumeToken)),e.isPrimaryClient&&n&&lT(e.remoteStore,i),s}async function cE(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await Pw(e.localStore,t.query,!1).then((({documents:e})=>t.view.ru(e,i))));let a=r&&r.targetChanges.get(t.targetId),o=r&&r.targetMismatches.get(t.targetId)!=null,s=t.view.applyChanges(i,e.isPrimaryClient,a,o);return xE(e,t.targetId,s.au),s.snapshot}(e,t,n,r);let a=await Pw(e.localStore,t,!0),o=new eE(t,a.Qs),s=o.ru(a.documents),c=ZS.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!==`Offline`,i),l=o.applyChanges(s,e.isPrimaryClient,c);xE(e,n,l.au);let u=new nE(t,n,o);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),l.snapshot}async function lE(e,t,n){let r=W(e),i=r.Tu.get(t),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((e=>!Lx(e,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Nw(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&uT(r.remoteStore,i.targetId),yE(r,i.targetId)})).catch(Gy)):(yE(r,i.targetId),await Nw(r.localStore,i.targetId,!0))}async function uE(e,t){let n=W(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),uT(n.remoteStore,r.targetId))}async function dE(e,t,n){let r=OE(e);try{let e=await function(e,t){let n=W(e),r=Iy.now(),i=t.reduce(((e,t)=>e.add(t.key)),Z()),a,o;return n.persistence.runTransaction(`Locally write mutations`,`readwrite`,(e=>{let s=Kx(),c=Z();return n.Ns.getEntries(e,i).next((e=>{s=e,s.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,s))).next((i=>{a=i;let o=[];for(let e of t){let t=DS(e,a.get(e.key).overlayedDocument);t!=null&&o.push(new AS(e.key,t,Qb(t.value.mapValue),xS.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;let r=t.applyToLocalDocumentSet(a,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:Yx(a)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||=new ob(q),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await wE(r,e.changes),await CT(r.remoteStore)}catch(e){let t=LT(e,`Failed to persist write`);n.reject(t)}}async function fE(e,t){let n=W(e);try{let e=await kw(n.localStore,t);t.targetChanges.forEach(((e,t)=>{let r=n.Au.get(t);r&&(ry(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?ry(r.hu,14607):e.removedDocuments.size>0&&(ry(r.hu,42227),r.hu=!1))})),await wE(n,e,t)}catch(e){await Gy(e)}}function pE(e,t,n){let r=W(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let e=[];r.Tu.forEach(((n,r)=>{let i=r.view.va(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){let n=W(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(let e of n.Sa)e.va(t)&&(r=!0)})),r&&JT(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function mE(e,t,n){let r=W(e);r.sharedClientState.updateQueryState(t,`rejected`,n);let i=r.Au.get(t),a=i&&i.key;if(a){let e=new ob(J.comparator);e=e.insert(a,$b.newNoDocument(a,Y.min()));let n=Z().add(a),i=new XS(Y.min(),new Map,new ob(q),e,n);await fE(r,i),r.du=r.du.remove(a),r.Au.delete(t),CE(r)}else await Nw(r.localStore,t,!1).then((()=>yE(r,t,n))).catch(Gy)}async function hE(e,t){let n=W(e),r=t.batch.batchId;try{let e=await Dw(n.localStore,t);vE(n,r,null),_E(n,r),n.sharedClientState.updateMutationState(r,`acknowledged`),await wE(n,e)}catch(e){await Gy(e)}}async function gE(e,t,n){let r=W(e);try{let e=await function(e,t){let n=W(e);return n.persistence.runTransaction(`Reject batch`,`readwrite-primary`,(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(ry(t!==null,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);vE(r,t,n),_E(r,t),r.sharedClientState.updateMutationState(t,`rejected`,n),await wE(r,e)}catch(e){await Gy(e)}}function _E(e,t){(e.mu.get(t)||[]).forEach((e=>{e.resolve()})),e.mu.delete(t)}function vE(e,t,n){let r=W(e),i=r.Vu[r.currentUser.toKey()];if(i){let e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function yE(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(let r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach((t=>{e.Ru.containsKey(t)||bE(e,t)}))}function bE(e,t){e.Eu.delete(t.path.canonicalString());let n=e.du.get(t);n!==null&&(uT(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),CE(e))}function xE(e,t,n){for(let r of n)r instanceof QT?(e.Ru.addReference(r.key,t),SE(e,r)):r instanceof $T?(H(tE,`Document no longer in limbo: `+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||bE(e,r.key)):U(19791,{wu:r})}function SE(e,t){let n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(H(tE,`New document in limbo: `+n),e.Eu.add(r),CE(e))}function CE(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){let t=e.Eu.values().next().value;e.Eu.delete(t);let n=new J(Sy.fromString(t)),r=e.fu.next();e.Au.set(r,new rE(n)),e.du=e.du.insert(n,r),lT(e.remoteStore,new BC(Nx(kx(n.path)),r,`TargetPurposeLimboResolution`,Jy.ce))}}async function wE(e,t,n){let r=W(e),i=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((e,s)=>{o.push(r.pu(s,t,n).then((e=>{if((e||n)&&r.isPrimaryClient){let t=e?!e.fromCache:n?.targetChanges.get(s.targetId)?.current;r.sharedClientState.updateQueryState(s.targetId,t?`current`:`not-current`)}if(e){i.push(e);let t=yw.As(s.targetId,e);a.push(t)}})))})),await Promise.all(o),r.Pu.H_(i),await async function(e,t){let n=W(e);try{await n.persistence.runTransaction(`notifyLocalViewChanges`,`readwrite`,(e=>X.forEach(t,(t=>X.forEach(t.Es,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>X.forEach(t.ds,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!qy(e))throw e;H(Sw,`Failed to update sequence numbers: `+e)}for(let e of t){let t=e.targetId;if(!e.fromCache){let e=n.Ms.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(t,i)}}}(r.localStore,a))}async function TE(e,t){let n=W(e);if(!n.currentUser.isEqual(t)){H(tE,`User change. New user:`,t.toKey());let e=await Ew(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach((e=>{e.forEach((e=>{e.reject(new K(G.CANCELLED,t))}))})),e.mu.clear()}(n,`'waitForPendingWrites' promise is rejected due to a user change.`),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await wE(n,e.Ls)}}function EE(e,t){let n=W(e),r=n.Au.get(t);if(r&&r.hu)return Z().add(r.key);{let e=Z(),r=n.Iu.get(t);if(!r)return e;for(let t of r){let r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function DE(e){let t=W(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=fE.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=EE.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=mE.bind(null,t),t.Pu.H_=KT.bind(null,t.eventManager),t.Pu.yu=qT.bind(null,t.eventManager),t}function OE(e){let t=W(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=hE.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=gE.bind(null,t),t}var kE=class{constructor(){this.kind=`memory`,this.synchronizeTabs=!1}async initialize(e){this.serializer=Xw(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Tw(this.persistence,new xw,e.initialUser,this.serializer)}Cu(e){return new hw(_w.mi,this.serializer)}Du(e){return new Lw}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}};kE.provider={build:()=>new kE};var AE=class extends kE{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ry(this.persistence.referenceDelegate instanceof vw,46915);let n=this.persistence.referenceDelegate.garbageCollector;return new ew(n,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes===void 0?JC.DEFAULT:JC.withCacheSize(this.cacheSizeBytes);return new hw((e=>vw.mi(e,t)),this.serializer)}},jE=class{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>pE(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=TE.bind(null,this.syncEngine),await NT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new HT}()}createDatastore(e){let t=Xw(e.databaseInfo.databaseId),n=function(e){return new Jw(e)}(e.databaseInfo);return function(e,t,n,r){return new rT(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new oT(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>pE(this.syncEngine,e,0)),function(){return Bw.v()?new Bw:new Rw}())}createSyncEngine(e,t){return function(e,t,n,r,i,a,o){let s=new iE(e,t,n,r,i,a);return o&&(s.gu=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(e){let t=W(e);H(aT,`RemoteStore shutting down.`),t.Ea.add(5),await cT(t),t.Aa.shutdown(),t.Ra.set(`Unknown`)}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}};jE.provider={build:()=>new jE};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var ME=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):$v(`Uncaught Error in snapshot listener:`,e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}},NE=`FirestoreClient`,PE=class{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Yv.UNAUTHENTICATED,this.clientId=my.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{H(NE,`Received user=`,e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(H(NE,`Received new app check token=`,e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new iy;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let n=LT(t,`Failed to shutdown persistence`);e.reject(n)}})),e.promise}};async function FE(e,t){e.asyncQueue.verifyOperationInProgress(),H(NE,`Initializing OfflineComponentProvider`);let n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Ew(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function IE(e,t){e.asyncQueue.verifyOperationInProgress();let n=await LE(e);H(NE,`Initializing OnlineComponentProvider`),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>MT(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>MT(t.remoteStore,n))),e._onlineComponents=t}async function LE(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){H(NE,`Using user provided OfflineComponentProvider`);try{await FE(e,e._uninitializedComponentsProvider._offline)}catch(t){let n=t;if(!function(e){return e.name===`FirebaseError`?e.code===G.FAILED_PRECONDITION||e.code===G.UNIMPLEMENTED:!(typeof DOMException<`u`&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}(n))throw n;ey(`Error using user provided cache. Falling back to memory cache: `+n),await FE(e,new kE)}}else H(NE,`Using default OfflineComponentProvider`),await FE(e,new AE(void 0));return e._offlineComponents}async function RE(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(H(NE,`Using user provided OnlineComponentProvider`),await IE(e,e._uninitializedComponentsProvider._online)):(H(NE,`Using default OnlineComponentProvider`),await IE(e,new jE))),e._onlineComponents}function zE(e){return RE(e).then((e=>e.syncEngine))}async function BE(e){let t=await RE(e),n=t.eventManager;return n.onListen=aE.bind(null,t.syncEngine),n.onUnlisten=lE.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=oE.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=uE.bind(null,t.syncEngine),n}function VE(e,t,n={}){let r=new iy;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){let a=new ME({next:s=>{a.Nu(),t.enqueueAndForget((()=>GT(e,o)));let c=s.docs.has(n);!c&&s.fromCache?i.reject(new K(G.UNAVAILABLE,`Failed to get document because the client is offline.`)):c&&s.fromCache&&r&&r.source===`server`?i.reject(new K(G.UNAVAILABLE,`Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)`)):i.resolve(s)},error:e=>i.reject(e)}),o=new ZT(kx(n.path),a,{includeMetadataChanges:!0,qa:!0});return WT(e,o)}(await BE(e),e.asyncQueue,t,n,r))),r.promise}function HE(e,t,n={}){let r=new iy;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){let a=new ME({next:n=>{a.Nu(),t.enqueueAndForget((()=>GT(e,o))),n.fromCache&&r.source===`server`?i.reject(new K(G.UNAVAILABLE,`Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)`)):i.resolve(n)},error:e=>i.reject(e)}),o=new ZT(n,a,{includeMetadataChanges:!0,qa:!0});return WT(e,o)}(await BE(e),e.asyncQueue,t,n,r))),r.promise}
/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function UE(e){let t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var WE=new Map,GE=`firestore.googleapis.com`,KE=!0,qE=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new K(G.INVALID_ARGUMENT,`Can't provide ssl option if host option is not set`);this.host=GE,this.ssl=KE}else this.host=e.host,this.ssl=e.ssl??KE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=qC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ZC)throw new K(G.INVALID_ARGUMENT,`cacheSizeBytes must be at least 1048576`);this.cacheSizeBytes=e.cacheSizeBytes}Ey(`experimentalForceLongPolling`,e.experimentalForceLongPolling,`experimentalAutoDetectLongPolling`,e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=UE(e.experimentalLongPollingOptions??{}),function(e){if(e.timeoutSeconds!==void 0){if(isNaN(e.timeoutSeconds))throw new K(G.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new K(G.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new K(G.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},JE=class{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type=`firestore-lite`,this._persistenceKey=`(lite)`,this._settings=new qE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask=`notTerminated`}get app(){if(!this._app)throw new K(G.FAILED_PRECONDITION,`Firestore was not initialized using the Firebase SDK. 'app' is not available`);return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==`notTerminated`}_setSettings(e){if(this._settingsFrozen)throw new K(G.FAILED_PRECONDITION,`Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.`);this._settings=new qE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(e){if(!e)return new oy;switch(e.type){case`firstParty`:return new uy(e.sessionIndex||`0`,e.iamToken||null,e.authTokenFactory||null);case`provider`:return e.client;default:throw new K(G.INVALID_ARGUMENT,`makeAuthCredentialsProvider failed due to invalid credential type`)}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask===`notTerminated`&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask===`notTerminated`?await this._terminate():this._terminateTask=`notTerminated`}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let t=WE.get(e);t&&(H(`ComponentProvider`,`Removing Datastore`),WE.delete(e),t.terminate())}(this),Promise.resolve()}};function YE(e,t,n,r={}){e=jy(e,JE);let i=Ze(t),a=e._getSettings(),o={...a,emulatorOptions:e._getEmulatorOptions()},s=`${t}:${n}`;i&&(Qe(`https://${s}`),it(`Firestore`,!0)),a.host!==GE&&a.host!==s&&ey(`Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.`);let c={...a,host:s,ssl:i,emulatorOptions:r};if(!jt(c,o)&&(e._setSettings(c),r.mockUserToken)){let t,n;if(typeof r.mockUserToken==`string`)t=r.mockUserToken,n=Yv.MOCK_USER;else{t=$e(r.mockUserToken,e._app?.options.projectId);let i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new K(G.INVALID_ARGUMENT,`mockUserToken must contain 'sub' or 'user_id' field!`);n=new Yv(i)}e._authCredentials=new sy(new ay(t,n))}}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var XE=class e{constructor(e,t,n){this.converter=t,this._query=n,this.type=`query`,this.firestore=e}withConverter(t){return new e(this.firestore,t,this._query)}},ZE=class e{constructor(e,t,n){this.converter=t,this._key=n,this.type=`document`,this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new QE(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new e(this.firestore,t,this._key)}toJSON(){return{type:e._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(Ny(n,e._jsonSchema))return new e(t,r||null,new J(Sy.fromString(n.referencePath)))}};ZE._jsonSchemaVersion=`firestore/documentReference/1.0`,ZE._jsonSchema={type:My(`string`,ZE._jsonSchemaVersion),referencePath:My(`string`)};var QE=class e extends XE{constructor(e,t,n){super(e,t,kx(n)),this._path=n,this.type=`collection`}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ZE(this.firestore,null,new J(e))}withConverter(t){return new e(this.firestore,t,this._path)}};function $E(e,t,...n){if(e=O(e),Ty(`collection`,`path`,t),e instanceof JE){let r=Sy.fromString(t,...n);return Oy(r),new QE(e,null,r)}{if(!(e instanceof ZE||e instanceof QE))throw new K(G.INVALID_ARGUMENT,`Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore`);let r=e._path.child(Sy.fromString(t,...n));return Oy(r),new QE(e.firestore,null,r)}}function eD(e,t,...n){if(e=O(e),arguments.length===1&&(t=my.newId()),Ty(`doc`,`path`,t),e instanceof JE){let r=Sy.fromString(t,...n);return Dy(r),new ZE(e,null,new J(r))}{if(!(e instanceof ZE||e instanceof QE))throw new K(G.INVALID_ARGUMENT,`Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore`);let r=e._path.child(Sy.fromString(t,...n));return Dy(r),new ZE(e.firestore,e instanceof QE?e.converter:null,new J(r))}}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tD=`AsyncQueue`,nD=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Zw(this,`async_queue_retry`),this._c=()=>{let e=Yw();e&&H(tD,`Visibility state changed to `+e.visibilityState),this.M_.w_()},this.ac=e;let t=Yw();t&&typeof t.addEventListener==`function`&&t.addEventListener(`visibilitychange`,this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=Yw();t&&typeof t.removeEventListener==`function`&&t.removeEventListener(`visibilitychange`,this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));let t=new iy;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!qy(e))throw e;H(tD,`Operation failed with retryable error: `+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){let t=this.ac.then((()=>(this.rc=!0,e().catch((e=>{throw this.nc=e,this.rc=!1,$v(`INTERNAL UNHANDLED ERROR: `,rD(e)),e})).then((e=>(this.rc=!1,e))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let r=IT.createAndSchedule(this,e,t,n,(e=>this.hc(e)));return this.tc.push(r),r}uc(){this.nc&&U(47125,{Pc:rD(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(let t of this.tc)if(t.skipDelay(),e!==`all`&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function rD(e){let t=e.message||``;return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}var iD=class extends JE{constructor(e,t,n,r){super(e,t,n,r),this.type=`firestore`,this._queue=new nD,this._persistenceKey=r?.name||`[DEFAULT]`}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new nD(e),this._firestoreClient=void 0,await e}}};function aD(e,t){let n=typeof e==`object`?e:xr(),r=typeof e==`string`?e:t||Eb,i=hr(n,`firestore`).getImmediate({identifier:r});if(!i._initialized){let e=qe(`firestore`);e&&YE(i,...e)}return i}function oD(e){if(e._terminated)throw new K(G.FAILED_PRECONDITION,`The client has already been terminated.`);return e._firestoreClient||sD(e),e._firestoreClient}function sD(e){let t=e._freezeSettings(),n=function(e,t,n,r){return new Tb(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,UE(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,e._app?.options.appId||``,e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new PE(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(e){let t=e?._online.build();return{_offline:e?._offline.build(t),_online:t}}(e._componentsProvider))}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var cD=class e{constructor(e){this._byteString=e}static fromBase64String(t){try{return new e(pb.fromBase64String(t))}catch(e){throw new K(G.INVALID_ARGUMENT,`Failed to construct data from Base64 string: `+e)}}static fromUint8Array(t){return new e(pb.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return`Bytes(base64: `+this.toBase64()+`)`}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:e._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Ny(t,e._jsonSchema))return e.fromBase64String(t.bytes)}};cD._jsonSchemaVersion=`firestore/bytes/1.0`,cD._jsonSchema={type:My(`string`,cD._jsonSchemaVersion),bytes:My(`string`)};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var lD=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new K(G.INVALID_ARGUMENT,`Invalid field name at argument $(i + 1). Field names must not be empty.`);this._internalPath=new wy(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}},uD=class{constructor(e){this._methodName=e}},dD=class e{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new K(G.INVALID_ARGUMENT,`Latitude must be a number between -90 and 90, but was: `+e);if(!isFinite(t)||t<-180||t>180)throw new K(G.INVALID_ARGUMENT,`Longitude must be a number between -180 and 180, but was: `+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return q(this._lat,e._lat)||q(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:e._jsonSchemaVersion}}static fromJSON(t){if(Ny(t,e._jsonSchema))return new e(t.latitude,t.longitude)}};dD._jsonSchemaVersion=`firestore/geoPoint/1.0`,dD._jsonSchema={type:My(`string`,dD._jsonSchemaVersion),latitude:My(`number`),longitude:My(`number`)};
/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var fD=class e{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:e._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Ny(t,e._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e==`number`)))return new e(t.vectorValues);throw new K(G.INVALID_ARGUMENT,`Expected 'vectorValues' field to be a number array`)}}};fD._jsonSchemaVersion=`firestore/vectorValue/1.0`,fD._jsonSchema={type:My(`string`,fD._jsonSchemaVersion),vectorValues:My(`object`)};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var pD=/^__.*__$/,mD=class{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new AS(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function hD(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw U(40011,{Ac:e})}}var gD=class e{constructor(e,t,n,r,i,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new e({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){let t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return jD(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc(`Document fields must not be empty`);if(hD(this.Ac)&&pD.test(e))throw this.Sc(`Document fields cannot begin and end with "__"`)}},_D=class{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Xw(e)}Cc(e,t,n,r=!1){return new gD({Ac:e,methodName:t,Dc:n,path:wy.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function vD(e){let t=e._freezeSettings(),n=Xw(e._databaseId);return new _D(e._databaseId,!!t.ignoreUndefinedProperties,n)}var yD=class e extends uD{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(t){return t instanceof e}},bD=class e extends uD{_toFieldTransform(e){return new vS(e.path,new uS)}isEqual(t){return t instanceof e}};function xD(e,t,n,r){let i=e.Cc(1,t,n);DD(`Data must be an object, but it was:`,i,r);let a=[],o=Zb.empty();ib(r,((e,r)=>{let s=AD(t,e,n);r=O(r);let c=i.yc(s);if(r instanceof yD)a.push(s);else{let e=wD(r,c);e!=null&&(a.push(s),o.set(s,e))}}));let s=new db(a);return new mD(o,s,i.fieldTransforms)}function SD(e,t,n,r,i,a){let o=e.Cc(1,t,n),s=[OD(t,r,n)],c=[i];if(a.length%2!=0)throw new K(G.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<a.length;e+=2)s.push(OD(t,a[e])),c.push(a[e+1]);let l=[],u=Zb.empty();for(let e=s.length-1;e>=0;--e)if(!MD(l,s[e])){let t=s[e],n=c[e];n=O(n);let r=o.yc(t);if(n instanceof yD)l.push(t);else{let e=wD(n,r);e!=null&&(l.push(t),u.set(t,e))}}let d=new db(l);return new mD(u,d,o.fieldTransforms)}function CD(e,t,n,r=!1){return wD(n,e.Cc(r?4:3,t))}function wD(e,t){if(ED(e=O(e)))return DD(`Unsupported field value:`,t,e),TD(e,t);if(e instanceof uD)return function(e,t){if(!hD(t.Ac))throw t.Sc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Sc(`${e._methodName}() is not currently supported inside arrays`);let n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc(`Nested arrays are not supported`);return function(e,t){let n=[],r=0;for(let i of e){let e=wD(i,t.wc(r));e??={nullValue:`NULL_VALUE`},n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if((e=O(e))===null)return{nullValue:`NULL_VALUE`};if(typeof e==`number`)return aS(t.serializer,e);if(typeof e==`boolean`)return{booleanValue:e};if(typeof e==`string`)return{stringValue:e};if(e instanceof Date){let n=Iy.fromDate(e);return{timestampValue:uC(t.serializer,n)}}if(e instanceof Iy){let n=new Iy(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:uC(t.serializer,n)}}if(e instanceof dD)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof cD)return{bytesValue:dC(t.serializer,e._byteString)};if(e instanceof ZE){let n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:mC(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof fD)return function(e,t){return{mapValue:{fields:{[Ob]:{stringValue:jb},[Mb]:{arrayValue:{values:e.toArray().map((e=>{if(typeof e!=`number`)throw t.Sc(`VectorValues must only contain numeric values.`);return rS(t.serializer,e)}))}}}}}}(e,t);throw t.Sc(`Unsupported field value: ${Ay(e)}`)}(e,t)}function TD(e,t){let n={};return ab(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ib(e,((e,r)=>{let i=wD(r,t.mc(e));i!=null&&(n[e]=i)})),{mapValue:{fields:n}}}function ED(e){return!(typeof e!=`object`||!e||e instanceof Array||e instanceof Date||e instanceof Iy||e instanceof dD||e instanceof cD||e instanceof ZE||e instanceof uD||e instanceof fD)}function DD(e,t,n){if(!ED(n)||!ky(n)){let r=Ay(n);throw r===`an object`?t.Sc(e+` a custom object`):t.Sc(e+` `+r)}}function OD(e,t,n){if((t=O(t))instanceof lD)return t._internalPath;if(typeof t==`string`)return AD(e,t);throw jD(`Field path arguments must be of type string or `,e,!1,void 0,n)}var kD=RegExp(`[~\\*/\\[\\]]`);function AD(e,t,n){if(t.search(kD)>=0)throw jD(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new lD(...t.split(`.`))._internalPath}catch{throw jD(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function jD(e,t,n,r,i){let a=r&&!r.isEmpty(),o=i!==void 0,s=`Function ${t}() called with invalid data`;n&&(s+=" (via `toFirestore()`)"),s+=`. `;let c=``;return(a||o)&&(c+=` (found`,a&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=`)`),new K(G.INVALID_ARGUMENT,s+e+c)}function MD(e,t){return e.some((e=>e.isEqual(t)))}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var ND=class{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ZE(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new PD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(FD(`DocumentSnapshot.get`,e));if(t!==null)return this._userDataWriter.convertValue(t)}}},PD=class extends ND{data(){return super.data()}};function FD(e,t){return typeof t==`string`?AD(e,t):t instanceof lD?t._internalPath:t._delegate._internalPath}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ID(e){if(e.limitType===`L`&&e.explicitOrderBy.length===0)throw new K(G.UNIMPLEMENTED,`limitToLast() queries require specifying at least one orderBy() clause`)}var LD=class{},RD=class extends LD{};function zD(e,t,...n){let r=[];t instanceof LD&&r.push(t),r=r.concat(n),function(e){let t=e.filter((e=>e instanceof HD)).length,n=e.filter((e=>e instanceof BD)).length;if(t>1||t>0&&n>0)throw new K(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let t of r)e=t._apply(e);return e}var BD=class e extends RD{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type=`where`}static _create(t,n,r){return new e(t,n,r)}_apply(e){let t=this._parse(e);return qD(e._query,t),new XE(e.firestore,e.converter,Fx(e._query,t))}_parse(e){let t=vD(e.firestore);return function(e,t,n,r,i,a,o){let s;if(i.isKeyField()){if(a===`array-contains`||a===`array-contains-any`)throw new K(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${a}' queries on documentId().`);if(a===`in`||a===`not-in`){KD(o,a);let t=[];for(let n of o)t.push(GD(r,e,n));s={arrayValue:{values:t}}}else s=GD(r,e,o)}else a!==`in`&&a!==`not-in`&&a!==`array-contains-any`||KD(o,a),s=CD(n,t,o,a===`in`||a===`not-in`);return ox.create(i,a,s)}(e._query,`where`,t,e.firestore._databaseId,this._field,this._op,this._value)}};function VD(e,t,n){let r=t,i=FD(`where`,e);return BD._create(i,r,n)}var HD=class e extends LD{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(t,n){return new e(t,n)}_parse(e){let t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return t.length===1?t[0]:sx.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(e,t){let n=e,r=t.getFlattenedFilters();for(let e of r)qD(n,e),n=Fx(n,e)}(e._query,t),new XE(e.firestore,e.converter,Fx(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type===`and`?`and`:`or`}},UD=class e extends RD{constructor(e,t){super(),this._field=e,this._direction=t,this.type=`orderBy`}static _create(t,n){return new e(t,n)}_apply(e){let t=function(e,t,n){if(e.startAt!==null)throw new K(G.INVALID_ARGUMENT,`Invalid query. You must not call startAt() or startAfter() before calling orderBy().`);if(e.endAt!==null)throw new K(G.INVALID_ARGUMENT,`Invalid query. You must not call endAt() or endBefore() before calling orderBy().`);return new rx(t,n)}(e._query,this._field,this._direction);return new XE(e.firestore,e.converter,function(e,t){let n=e.explicitOrderBy.concat([t]);return new Dx(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}};function WD(e,t=`asc`){let n=t,r=FD(`orderBy`,e);return UD._create(r,n)}function GD(e,t,n){if(typeof(n=O(n))==`string`){if(n===``)throw new K(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.`);if(!jx(t)&&n.indexOf(`/`)!==-1)throw new K(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=t.path.child(Sy.fromString(n));if(!J.isDocumentKey(r))throw new K(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Hb(e,new J(r))}if(n instanceof ZE)return Hb(e,n._key);throw new K(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ay(n)}.`)}function KD(e,t){if(!Array.isArray(e)||e.length===0)throw new K(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function qD(e,t){let n=function(e,t){for(let n of e)for(let e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case`!=`:return[`!=`,`not-in`];case`array-contains-any`:case`in`:return[`not-in`];case`not-in`:return[`array-contains-any`,`in`,`not-in`,`!=`];default:return[]}}(t.op));if(n!==null)throw n===t.op?new K(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new K(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}var JD=class{convertValue(e,t=`none`){switch(Nb(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gb(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(_b(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw U(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t=`none`){let n={};return ib(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){let t=e.fields?.[Mb].arrayValue?.values?.map((e=>gb(e.doubleValue)));return new fD(t)}convertGeoPoint(e){return new dD(gb(e.latitude),gb(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case`previous`:let n=Cb(e);return n==null?null:this.convertValue(n,t);case`estimate`:return this.convertTimestamp(wb(e));default:return null}}convertTimestamp(e){let t=hb(e);return new Iy(t.seconds,t.nanos)}convertDocumentKey(e,t){let n=Sy.fromString(e);ry(zC(n),9688,{name:e});let r=new Db(n.get(1),n.get(3)),i=new J(n.popFirst(5));return r.isEqual(t)||$v(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}},YD=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},XD=class e extends ND{constructor(e,t,n,r,i,a){super(e,t,n,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ZD(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let n=this._document.data.field(FD(`DocumentSnapshot.get`,e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new K(G.FAILED_PRECONDITION,`DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().`);let t=this._document,n={};return n.type=e._jsonSchemaVersion,n.bundle=``,n.bundleSource=`DocumentSnapshot`,n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,`previous`),n.bundle=(this._firestore,this.ref.path,`NOT SUPPORTED`),n)}};XD._jsonSchemaVersion=`firestore/documentSnapshot/1.0`,XD._jsonSchema={type:My(`string`,XD._jsonSchemaVersion),bundleSource:My(`string`,`DocumentSnapshot`),bundleName:My(`string`),bundle:My(`string`)};var ZD=class extends XD{data(e={}){return super.data(e)}},QD=class e{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new YD(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){let e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new ZD(this._firestore,this._userDataWriter,n.key,n,new YD(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new K(G.INVALID_ARGUMENT,`To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().`);return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{let r=new ZD(e._firestore,e._userDataWriter,n.doc.key,n.doc,new YD(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:`added`,doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||e.type!==3)).map((t=>{let r=new ZD(e._firestore,e._userDataWriter,t.doc.key,t.doc,new YD(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return t.type!==0&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),t.type!==1&&(n=n.add(t.doc),a=n.indexOf(t.doc.key)),{type:$D(t.type),doc:r,oldIndex:i,newIndex:a}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new K(G.FAILED_PRECONDITION,`QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().`);let t={};t.type=e._jsonSchemaVersion,t.bundleSource=`QuerySnapshot`,t.bundleName=my.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach((e=>{e._document!==null&&(n.push(e._document),r.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,`previous`)),i.push(e.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,`NOT SUPPORTED`),t}};function $D(e){switch(e){case 0:return`added`;case 2:case 3:return`modified`;case 1:return`removed`;default:return U(61501,{type:e})}}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function eO(e){e=jy(e,ZE);let t=jy(e.firestore,iD);return VE(oD(t),e._key).then((n=>oO(t,e,n)))}QD._jsonSchemaVersion=`firestore/querySnapshot/1.0`,QD._jsonSchema={type:My(`string`,QD._jsonSchemaVersion),bundleSource:My(`string`,`QuerySnapshot`),bundleName:My(`string`),bundle:My(`string`)};var tO=class extends JD{constructor(e){super(),this.firestore=e}convertBytes(e){return new cD(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new ZE(this.firestore,null,t)}};function nO(e){e=jy(e,XE);let t=jy(e.firestore,iD),n=oD(t),r=new tO(t);return ID(e._query),HE(n,e._query).then((n=>new QD(t,r,e,n)))}function rO(e,t,n,...r){e=jy(e,ZE);let i=jy(e.firestore,iD),a=vD(i),o;return o=typeof(t=O(t))==`string`||t instanceof lD?SD(a,`updateDoc`,e._key,t,n,r):xD(a,`updateDoc`,e._key,t),aO(i,[o.toMutation(e._key,xS.exists(!0))])}function iO(e){return aO(jy(e.firestore,iD),[new PS(e._key,xS.none())])}function aO(e,t){return function(e,t){let n=new iy;return e.asyncQueue.enqueueAndForget((async()=>dE(await zE(e),t,n))),n.promise}(oD(e),t)}function oO(e,t,n){let r=n.docs.get(t._key),i=new tO(e);return new XD(e,i,t._key,r,new YD(n.hasPendingWrites,n.fromCache),t.converter)}function sO(){return new bD(`serverTimestamp`)}(function(e,t=!0){(function(e){Xv=e})(yr),mr(new Jt(`firestore`,((e,{instanceIdentifier:n,options:r})=>{let i=e.getProvider(`app`).getImmediate(),a=new iD(new cy(e.getProvider(`auth-internal`)),new fy(i,e.getProvider(`app-check-internal`)),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,[`projectId`]))throw new K(G.INVALID_ARGUMENT,`"projectId" not provided in firebase.initializeApp.`);return new Db(e.options.projectId,t)}(i,n),i);return r={useFetchStreams:t,...r},a._setSettings(r),a}),`PUBLIC`).setMultipleInstances(!0)),Sr(qv,Jv,e),Sr(qv,Jv,`esm2020`)})();var cO=o((e=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.fragment`);function r(e,n,r){var i=null;if(r!==void 0&&(i=``+r),n.key!==void 0&&(i=``+n.key),`key`in n)for(var a in r={},n)a!==`key`&&(r[a]=n[a]);else r=n;return n=r.ref,{$$typeof:t,type:e,key:i,ref:n===void 0?null:n,props:r}}e.Fragment=n,e.jsx=r,e.jsxs=r})),$=c(o(((e,t)=>{t.exports=cO()}))()),lO=()=>{let[e,t]=(0,_.useState)([]),[n,r]=(0,_.useState)(null),[i,a]=(0,_.useState)(!0),[o,s]=(0,_.useState)(`todos`),[c,l]=(0,_.useState)(!1),[u,d]=(0,_.useState)(!1),f=`camlosnochemala@gmail.com`,p=aD(),m=async e=>{try{console.log(`🔍 Buscando token FCM para: ${e}`);let t=eD(p,e,`token`),n=await eO(t);if(n.exists()){let t=n.data();return console.log(`✅ Token encontrado para ${e}`),t.token}else console.log(`❌ No existe documento token para ${e}`);return null}catch(t){return console.error(`❌ Error obteniendo token FCM para ${e}:`,t),null}},h=async()=>{try{let e=await fetch(`https://oauth2.googleapis.com/token`,{method:`POST`,headers:{"Content-Type":`application/x-www-form-urlencoded`},body:new URLSearchParams({grant_type:`urn:ietf:params:oauth:grant-type:jwt-bearer`,assertion:await g()})});return e.ok?(await e.json()).access_token:(console.error(`❌ Error obteniendo access token:`,await e.text()),null)}catch(e){return console.error(`❌ Error en getAccessToken:`,e),null}},g=async()=>{let e={private_key:`-----BEGIN PRIVATE KEY-----
MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQClJIa3kG1q1pTj
tbn6V1KVWy7N1qfKNj8WzczDMMg9RZPUKbm5pUkZW7v5suIB+EExJQTDnSypTMpF
GJeFczE8OItr1XXZIkVK5vM3O0WfkVklKwIaKqGPJtBfhGNPY8TNcCKJXtlzDKvZ
a7IYXfKgfksxbrejXzeQMaY+feXpwTSnFIhVsow0ptyEfxLa+EzgqRjN/qPhK8oe
lRf4Ga1lP9KQl0OEcnOMOgR5wZ1irOk6t6+1/9eL+7g2ax9vZS3CDRBgJjeLrX7W
C4F3OEyh/HKJ/PH0d8SiAr1zp+iY9K613srKD/MDuRp9QYewpSdKJdSam7LeSka1
OqY5DJlfAgMBAAECggEAA2WYzPDEHFt6ou0DG0/zp6GWqccNjq/3cLmLpR+ewRaO
3XOhgUR/nmEzAk9ty7uHYv9ydX856nnGsjIyxrtTtNdblCQ0zh8zJon7+zhVazG9
X1lAgWOp3B/OgDVtQSP8vyWfYcOzE1kWL6YXUD+R5DNU1p8JA67XwnUDv8a/2Ixo
/jBq4N1CE9qfkWNBTEbHSJHDKXO5YKtRud5Q4TC05dLoGYxNA8JivNOSu6V86Gne
nUYDC/Iz4V27QniFrYLENV8nAe8bYcqeJDTtNODPQED6rdqc7h1FWxh37qpoVBWA
KvnGDZfKCo1091nCKDxbOhvbi/GKUt+ybtYLlLmpiQKBgQDTmfUiDZDnNB6AGQWV
F/CAf4zuQwh9XJkEoRnhQCbYUQeg9T+mdq9M0r6bwd94wWdPKawrmZ0Y4rxYpZjX
0mu0MVW7TUTlQMFtM0LT2l7CaWHky4SJcYFAnMHfeqapqradlJAtH6Fgq/mnqelD
BM60A9UE8g/C0OZOhmPLoxl15QKBgQDHyxEJDr7Qn2K3TOyv7BbrqBI+InRVYGwn
pOILhfAHxeqnrVWNpqrwZhULPBGtOdyNZa/JJ1EP98BxkXWtfr2XPInBcDyv0TPd
jdYXiPO0QBDU4ZxHIZODb3q6dAQx6i2rUsQB5tn20+C1ufxwYvGLvP1hy7wYc01G
w/DdJv/d8wKBgQC1nBXAPFR5m0nyN4eLBxjrsI2MkQvgTHEof/xuT1kHn8QkaVlP
zd122gmuNR9PzO6WCvYyFY23piJxEu+zjG3UIeOq9g6DlKhuyOg6W9mokjnq3KHM
NRbyFZhv7hzM0jAZ30A++j7Pccq8FCCX3LBr4D4cGIVed1yzWLSeOkXH4QKBgQC5
nUjoV1CjVVBK5yaFkhsBOJYqL6xQnVIdyqtO9VI4hoEo4no3LX5l9RDb7SSnALiM
jMoxYVuIMC4T1IW1d6f/13hLxFA9L2i2Ds2188Al19dLT4b29pSraWhlzN8Q2HUx
U6VR9vzMua9sZavHZcTug9gLgVHwjT5f3i3p6A+STQKBgE3CcexLBs9vsd6H8oAK
lvprg8tVS/L8YtdYZYJKzn1UbLwfUnRxQ9/NV9dZyUrT+cXYJNl0FLIZ87o0m/50
8YzmtGFTyei+xlWvSwaMHNykRHzfj8V+FTZnJ+Ur1wloXCrxwT8Up24GKksJP/tu
C7Meb57h23H0wqmdg2aLrffo
-----END PRIVATE KEY-----
`,client_email:`firebase-adminsdk-g1mkp@chilitosramen-89223.iam.gserviceaccount.com`},t=Math.floor(Date.now()/1e3),n={alg:`RS256`,typ:`JWT`},r={iss:e.client_email,scope:`https://www.googleapis.com/auth/firebase.messaging`,aud:`https://oauth2.googleapis.com/token`,exp:t+3600,iat:t},i=btoa(JSON.stringify(n)).replace(/=/g,``).replace(/\+/g,`-`).replace(/\//g,`_`),a=btoa(JSON.stringify(r)).replace(/=/g,``).replace(/\+/g,`-`).replace(/\//g,`_`),o=`${i}.${a}`;try{let t=await v(e.private_key),n=await y(o,t),r=b(n).replace(/=/g,``).replace(/\+/g,`-`).replace(/\//g,`_`);return`${o}.${r}`}catch(e){return console.error(`❌ Error creando JWT:`,e),null}},v=async e=>{let t=e.replace(/-----BEGIN PRIVATE KEY-----/,``).replace(/-----END PRIVATE KEY-----/,``).replace(/\s/g,``),n=atob(t),r=new Uint8Array(n.length);for(let e=0;e<n.length;e++)r[e]=n.charCodeAt(e);return await crypto.subtle.importKey(`pkcs8`,r.buffer,{name:`RSASSA-PKCS1-v1_5`,hash:`SHA-256`},!1,[`sign`])},y=async(e,t)=>{let n=new TextEncoder().encode(e);return await crypto.subtle.sign(`RSASSA-PKCS1-v1_5`,t,n)},b=e=>{let t=new Uint8Array(e),n=``;for(let e=0;e<t.length;e++)n+=String.fromCharCode(t[e]);return btoa(n)},x=async(e,t,n,r={})=>{try{console.log(`📤 Intentando enviar notificación...`),console.log(`Token destinatario:`,e),console.log(`Título:`,t),console.log(`Mensaje:`,n);let i=await h();if(!i)return console.error(`❌ No se pudo obtener access token`),!1;console.log(`✅ Access token obtenido correctamente`);let a=await fetch(`https://fcm.googleapis.com/v1/projects/chilitosramen-89223/messages:send`,{method:`POST`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${i}`},body:JSON.stringify({message:{token:e,notification:{title:t,body:n},data:{...r,click_action:`FLUTTER_NOTIFICATION_CLICK`,status:`done`,type:`delivery_update`},android:{priority:`high`,notification:{sound:`default`,channel_id:`high_importance_channel`,notification_priority:`PRIORITY_MAX`}},apns:{headers:{"apns-priority":`10`},payload:{aps:{sound:`default`,badge:1}}}}})});if(a.ok){let e=await a.json();return console.log(`✅ Notificación enviada exitosamente`),console.log(`Respuesta FCM:`,e),!0}else{let e=await a.json();return console.error(`❌ Error en respuesta FCM:`,e),!1}}catch(e){return console.error(`❌ Error al enviar notificación:`,e),!1}},ee=async(n,i)=>{if(!u){d(!0),console.log(`🔄 Actualizando pedido ${n} a estado: ${i}`);try{let a=e.find(e=>e.id===n);if(!a){alert(`❌ Pedido no encontrado`);return}let o=Xh(Mv,`pedidos_activos/${n}`),s={estado:i,repartidorEmail:f,repartidorNombre:`Repartidor`,fechaActualizacion:Date.now()},c=``,l=``;if(i===`En Camino`?(s.enCamino=!0,s.afuera=!1,s.problema=!1,s.repartidorFrase=`Tu pedido está en camino`,c=`🚛 ¡Tu pedido está en camino!`,l=`El repartidor ya salió y está en camino con tu pedido`):i===`Afuera`?(s.afuera=!0,s.enCamino=!1,s.problema=!1,s.repartidorFrase=`Estoy afuera con tu pedido`,c=`📍 ¡El repartidor ha llegado!`,l=`El repartidor está afuera con tu pedido. ¡Sal a recibirlo!`):i===`Error`?(s.problema=!0,s.afuera=!1,s.enCamino=!1,s.repartidorFrase=`Hay un problema con tu pedido`,c=`⚠️ Problema con tu pedido`,l=`Estamos resolviendo un inconveniente con tu pedido. Te mantendremos informado.`):i===`Listo`&&(s.enCamino=!1,s.afuera=!1,s.problema=!1,s.repartidorFrase=`Tu pedido está listo`,c=`✅ ¡Tu pedido está listo!`,l=`Tu pedido ha sido completado exitosamente.`),await eg(o,s),console.log(`✅ Realtime Database actualizado`),a.email&&a.orderId&&await te(a.email,a.orderId,i),await S(n,i),a.email){console.log(`📧 Email del cliente: ${a.email}`);let e=await m(a.email);e?(console.log(`✅ Token FCM obtenido, enviando notificación...`),await x(e,c,l,{orderId:a.orderId||``,estado:i,timestamp:Date.now().toString()})?console.log(`✅ Notificación enviada al cliente`):console.log(`⚠️ Falló el envío de la notificación`)):console.log(`⚠️ No se encontró token FCM para el usuario`)}else console.log(`⚠️ El pedido no tiene email asociado`);if(i===`Listo`){let e=Xh(Mv,`pedidos_completados/${n}`),t={...a,...s,fechaCompletado:Date.now()};await eg(e,t),await Qh(o);let r=Xh(Mv,`cola_pedidos/${n}`);await Qh(r),console.log(`✅ Pedido movido a completados`)}t(e.map(e=>e.id===n?{...e,estado:i,repartidorEmail:f}:e)),r(null),alert(`✅ Pedido actualizado a: ${i}`)}catch(e){console.error(`❌ Error actualizando estado:`,e),alert(`❌ Error al actualizar el pedido`)}finally{d(!1)}}},te=async(e,t,n)=>{try{let r=$E(p,e,`vendidos`,`0`),i=zD(r,VD(`orderId`,`==`,t)),a=await nO(i);if(!a.empty){let e=a.docs[0];await rO(e.ref,{estado:n,fechaActualizacion:sO(),ultimaActualizacionRepartidor:f}),console.log(`✅ Estado actualizado en Firestore del cliente: ${n}`)}let o=eD(p,e,`repartidor`),s={nombre:`Repartidor`,email:f,estado:n,fechaActualizacion:sO()};n===`En Camino`?(s.frase=`Tu pedido está en camino`,s.enCamino=!0,s.afuera=!1,s.problema=!1):n===`Afuera`?(s.frase=`Estoy afuera con tu pedido`,s.afuera=!0,s.enCamino=!1,s.problema=!1):n===`Error`?(s.frase=`Hay un problema con tu pedido, lo resolveremos en breve`,s.problema=!0,s.afuera=!1,s.enCamino=!1):n===`Listo`&&(s.frase=`Tu pedido está listo`,s.enCamino=!1,s.afuera=!1,s.problema=!1),await rO(o,s),console.log(`✅ Documento repartidor actualizado en Firestore del cliente`)}catch(e){console.error(`❌ Error actualizando estado en Firestore:`,e)}},S=async(e,t)=>{try{let n=eD(p,`Repartidor`,e),r={estado:t,repartidorEmail:f,fechaActualizacion:sO()};t===`En Camino`?(r.enCamino=!0,r.afuera=!1,r.problema=!1):t===`Afuera`?(r.afuera=!0,r.enCamino=!1,r.problema=!1):t===`Error`?(r.problema=!0,r.afuera=!1,r.enCamino=!1):t===`Listo`&&(r.enCamino=!1,r.afuera=!1,r.problema=!1,r.fechaCompletado=sO()),await rO(n,r),console.log(`✅ Estado actualizado en Repartidor collection: ${t}`)}catch(e){console.error(`❌ Error actualizando Repartidor collection:`,e)}};(0,_.useEffect)(()=>{let e=Xh(Mv,`pedidos_activos`),n=ig(e,e=>{let n=e.val();if(n){let e=Object.entries(n).map(([e,t])=>({id:e,orderId:t.orderId||null,nombreCliente:t.nombreCliente||null,telefono:t.telefono||null,direccion:t.direccion||null,cantidad:t.cantidad||0,metodoPago:t.metodoPago||null,montoPagado:t.montoPagado||null,cambio:t.cambio||null,estado:t.estado||`pendiente`,ubicacion:t.ubicacion||null,edificio:t.edificio||null,productos:t.productos||[],vendedorData:t.vendedorData||null,comentarioe:t.comentarioe||null,comentariop:t.comentariop||null,email:t.email||null,repartidorEmail:t.repartidorEmail||null,repartidorNombre:t.repartidorNombre||null,repartidorImagen:t.repartidorImagen||null}));t(e)}else t([]);a(!1)},e=>{console.error(`Error al cargar pedidos:`,e),a(!1)});return()=>n()},[]);let C=[{nombre:`Edificio A`,centro:{lat:19.72914,lng:-98.46742},radio:29.25,color:`#1976D2`,icon:`🏢`},{nombre:`Edificio B`,centro:{lat:19.72971,lng:-98.46744},radio:26.76,color:`#388E3C`,icon:`🏢`},{nombre:`Edificio C`,centro:{lat:19.72961,lng:-98.46659},radio:28.19,color:`#D32F2F`,icon:`🏢`},{nombre:`Edificio D`,centro:{lat:19.72914,lng:-98.46619},radio:28.23,color:`#F57C00`,icon:`🏢`},{nombre:`Edificio E`,centro:{lat:19.72999,lng:-98.46624},radio:21.16,color:`#7B1FA2`,icon:`🏢`},{nombre:`Edificio F`,centro:{lat:19.73021,lng:-98.46731},radio:26.4,color:`#0097A7`,icon:`🏢`},{nombre:`Edificio G`,centro:{lat:19.73048,lng:-98.46699},radio:16.36,color:`#C2185B`,icon:`🏢`},{nombre:`Cafetería`,centro:{lat:19.73003,lng:-98.46689},radio:11.76,color:`#8D6E63`,icon:`☕`},{nombre:`Gallineros`,centro:{lat:19.72997,lng:-98.46662},radio:16.88,color:`#FFB74D`,icon:`🐔`},{nombre:`En medio`,centro:{lat:19.72952,lng:-98.46701},radio:16.1,color:`#4DB6AC`,icon:`🎯`},{nombre:`Árbol de Redes`,centro:{lat:19.7293,lng:-98.46672},radio:21.17,color:`#66BB6A`,icon:`🌳`},{nombre:`Fuera Edificio E`,centro:{lat:19.72967,lng:-98.46615},radio:18.41,color:`#9575CD`,icon:`📍`},{nombre:`Polideportivo`,centro:{lat:19.72958,lng:-98.46523},radio:75.99,color:`#5D4037`,icon:`🏟️`},{nombre:`Dentro de ITESA`,centro:{lat:19.72917,lng:-98.46605},radio:208.99,color:`#9C27B0`,icon:`🎓`}],ne=(e,t)=>{let n=e.lat*Math.PI/180,r=t.lat*Math.PI/180,i=(t.lat-e.lat)*Math.PI/180,a=(t.lng-e.lng)*Math.PI/180,o=Math.sin(i/2)*Math.sin(i/2)+Math.cos(n)*Math.cos(r)*Math.sin(a/2)*Math.sin(a/2);return 6371e3*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))},ie=e=>{if(!e||!e.lat||!e.lng)return{nombre:`Sin ubicación`,color:`#757575`,icon:`❓`};for(let t of C)if(!(t.nombre===`Fuera de Universidad`||t.nombre===`Dentro de ITESA`)&&ne(t.centro,e)<=t.radio)return t;let t=C.find(e=>e.nombre===`Dentro de ITESA`);return t&&ne(t.centro,e)<=t.radio?t:{nombre:`Fuera de Universidad`,color:`#757575`,icon:`🌍`}},le=(e,t)=>{if(!e){alert(`No hay número de teléfono disponible`);return}let n=e.replace(/\D/g,``),r=`Hola ${t||`cliente`}, soy el repartidor con tu pedido.`,i=`https://wa.me/${n}?text=${encodeURIComponent(r)}`;window.open(i,`_blank`)},ue=e=>{if(!e||!e.lat||!e.lng){alert(`No hay ubicación disponible para este pedido`);return}let t=`https://www.google.com/maps/dir/?api=1&destination=${e.lat},${e.lng}`;window.open(t,`_blank`)},de=e.filter(e=>o===`todos`?!0:o===`pendientes`?e.estado===`pendiente`:o===`en_camino`?e.estado===`En Camino`:o===`afuera`?e.estado===`Afuera`:o===`completados`?e.estado===`Listo`:!0),T=e=>({pendiente:`#f59e0b`,"En Camino":`#3b82f6`,Afuera:`#10b981`,Listo:`#10b981`,Error:`#ef4444`})[e]||`#6b7280`,pe=e=>({pendiente:se,"En Camino":Te,Afuera:fe,Listo:oe,Error:ae})[e]||se,ve={container:{minHeight:`100vh`,minHeight:`100dvh`,background:`linear-gradient(to bottom right, #f8fafc, #e2e8f0)`,fontFamily:`-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif`,paddingBottom:`env(safe-area-inset-bottom)`,WebkitFontSmoothing:`antialiased`},header:{background:`linear-gradient(135deg, #667eea 0%, #764ba2 100%)`,boxShadow:`0 4px 12px rgba(102, 126, 234, 0.2)`,color:`white`,padding:`max(env(safe-area-inset-top), 1rem) 1rem 1rem`,marginBottom:`1rem`,position:`sticky`,top:0,zIndex:30},card:{backgroundColor:`white`,borderRadius:`12px`,boxShadow:`0 2px 8px rgba(0, 0, 0, 0.08)`,transition:`all 0.2s ease`,overflow:`hidden`,WebkitTapHighlightColor:`transparent`},badge:{display:`inline-flex`,alignItems:`center`,gap:`0.375rem`,padding:`0.375rem 0.75rem`,borderRadius:`9999px`,fontSize:`0.8125rem`,fontWeight:`600`},button:{padding:`0.875rem 1rem`,borderRadius:`12px`,fontWeight:`600`,border:`none`,cursor:u?`not-allowed`:`pointer`,transition:`all 0.2s ease`,display:`flex`,alignItems:`center`,justifyContent:`center`,gap:`0.5rem`,WebkitTapHighlightColor:`transparent`,WebkitTouchCallout:`none`,userSelect:`none`,fontSize:`0.9375rem`,minHeight:`44px`,opacity:u?.6:1}};return i?(0,$.jsx)(`div`,{style:{...ve.container,display:`flex`,alignItems:`center`,justifyContent:`center`},children:(0,$.jsxs)(`div`,{style:{textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{width:`48px`,height:`48px`,border:`3px solid #e5e7eb`,borderTop:`3px solid #667eea`,borderRadius:`50%`,animation:`spin 1s linear infinite`,margin:`0 auto`}}),(0,$.jsx)(`p`,{style:{marginTop:`1rem`,color:`#6b7280`,fontSize:`1rem`,fontWeight:`500`},children:`Cargando pedidos...`})]})}):(0,$.jsxs)(`div`,{style:ve.container,children:[(0,$.jsx)(`style`,{children:`
          * {
            -webkit-tap-highlight-color: transparent;
          }
          
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
          
          @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
          }
          
          @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
          }
          
          .card-animate {
            animation: slideIn 0.3s ease;
          }
          
          @supports (padding: max(0px)) {
            body {
              padding-left: env(safe-area-inset-left);
              padding-right: env(safe-area-inset-right);
            }
          }
          
          button:active:not(:disabled) {
            opacity: 0.7;
          }
        `}),(0,$.jsx)(`div`,{style:ve.header,children:(0,$.jsx)(`div`,{style:{maxWidth:`100%`},children:(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,justifyContent:`space-between`,gap:`0.75rem`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`0.75rem`},children:[(0,$.jsx)(`div`,{style:{background:`rgba(255, 255, 255, 0.2)`,padding:`0.75rem`,borderRadius:`12px`,backdropFilter:`blur(10px)`},children:(0,$.jsx)(ge,{size:28})}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{style:{fontSize:`1.375rem`,fontWeight:`700`,margin:0,marginBottom:`0.125rem`},children:`Panel de Entregas`}),(0,$.jsx)(`p`,{style:{fontSize:`0.8125rem`,opacity:.9,margin:0},children:`Gestión de repartidor`})]})]}),(0,$.jsxs)(`div`,{style:{background:`rgba(255, 255, 255, 0.2)`,padding:`0.625rem 1rem`,borderRadius:`12px`,backdropFilter:`blur(10px)`,textAlign:`center`,minWidth:`60px`},children:[(0,$.jsx)(`p`,{style:{fontSize:`1.75rem`,fontWeight:`700`,margin:0,lineHeight:1},children:de.length}),(0,$.jsx)(`p`,{style:{fontSize:`0.6875rem`,opacity:.9,margin:0,marginTop:`0.125rem`},children:`Activos`})]})]})})}),(0,$.jsxs)(`div`,{style:{padding:`0 1rem 1.5rem`},children:[(0,$.jsx)(`div`,{style:{marginBottom:`1rem`},children:(0,$.jsx)(`div`,{style:{display:`flex`,gap:`0.5rem`,overflowX:`auto`,WebkitOverflowScrolling:`touch`,paddingBottom:`0.5rem`,msOverflowStyle:`none`,scrollbarWidth:`none`},children:[`todos`,`pendientes`,`en_camino`,`afuera`,`completados`].map(e=>{let{text:t,icon:n}={todos:{text:`Todos`,icon:ge},pendientes:{text:`Pendientes`,icon:se},en_camino:{text:`En Camino`,icon:Te},afuera:{text:`Afuera`,icon:fe},completados:{text:`Listos`,icon:oe}}[e];return(0,$.jsxs)(`button`,{onClick:()=>s(e),style:{...ve.button,background:o===e?`linear-gradient(135deg, #667eea 0%, #764ba2 100%)`:`white`,color:o===e?`white`:`#374151`,boxShadow:o===e?`0 4px 12px rgba(102, 126, 234, 0.3)`:`0 2px 6px rgba(0, 0, 0, 0.1)`,padding:`0.625rem 1rem`,minHeight:`44px`,whiteSpace:`nowrap`,flexShrink:0},children:[(0,$.jsx)(n,{size:18}),t]},e)})})}),de.length===0?(0,$.jsxs)(`div`,{style:{...ve.card,padding:`3rem 1.5rem`,textAlign:`center`},children:[(0,$.jsx)(ge,{size:64,style:{color:`#d1d5db`,margin:`0 auto 0.75rem`}}),(0,$.jsx)(`p`,{style:{color:`#6b7280`,fontSize:`1rem`,fontWeight:`500`},children:`No hay pedidos en esta categoría`})]}):(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`0.75rem`},children:de.map((e,t)=>{let i=ie(e.ubicacion),a=pe(e.estado);return(0,$.jsxs)(`div`,{className:`card-animate`,style:{...ve.card,animationDelay:`${t*.05}s`},children:[(0,$.jsxs)(`div`,{style:{padding:`1rem`,background:`linear-gradient(to right, #f9fafb, white)`,borderBottom:`1px solid #e5e7eb`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`flex-start`,justifyContent:`space-between`,gap:`0.75rem`,marginBottom:`0.75rem`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`0.5rem`,flex:1},children:[(0,$.jsxs)(`div`,{style:{...ve.badge,backgroundColor:T(e.estado),color:`white`,alignSelf:`flex-start`},children:[(0,$.jsx)(a,{size:14}),e.estado]}),e.orderId&&(0,$.jsxs)(`span`,{style:{fontFamily:`monospace`,fontSize:`0.8125rem`,color:`#6b7280`,background:`#f3f4f6`,padding:`0.25rem 0.625rem`,borderRadius:`6px`,alignSelf:`flex-start`},children:[`#`,e.orderId]})]}),(0,$.jsxs)(`div`,{style:{textAlign:`right`},children:[(0,$.jsxs)(`p`,{style:{fontSize:`1.5rem`,fontWeight:`700`,color:`#10b981`,margin:0,lineHeight:1},children:[`$`,e.cantidad?.toFixed?e.cantidad.toFixed(2):e.cantidad||`0.00`]}),e.metodoPago&&(0,$.jsx)(`p`,{style:{fontSize:`0.6875rem`,color:`#6b7280`,margin:0,marginTop:`0.25rem`},children:e.metodoPago})]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`0.5rem`,marginBottom:`0.625rem`},children:[(0,$.jsx)(`span`,{style:{fontSize:`1.125rem`},children:i.icon}),(0,$.jsxs)(`span`,{style:{...ve.badge,backgroundColor:`${i.color}15`,color:i.color,border:`1.5px solid ${i.color}30`},children:[(0,$.jsx)(re,{size:14}),(0,$.jsx)(`span`,{style:{fontSize:`0.8125rem`},children:e.edificio||i.nombre})]})]}),e.nombreCliente&&(0,$.jsx)(`div`,{style:{marginBottom:`0.5rem`},children:(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`0.5rem`,color:`#374151`},children:[(0,$.jsx)(Ee,{size:16,style:{color:`#667eea`}}),(0,$.jsx)(`span`,{style:{fontWeight:`600`,fontSize:`0.9375rem`},children:e.nombreCliente})]})}),e.direccion&&(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`start`,gap:`0.5rem`,color:`#6b7280`,fontSize:`0.8125rem`},children:[(0,$.jsx)(fe,{size:14,style:{color:`#ef4444`,marginTop:`2px`,flexShrink:0}}),(0,$.jsx)(`span`,{style:{lineHeight:1.4},children:e.direccion})]})]}),(0,$.jsxs)(`div`,{style:{padding:`0.75rem`,background:`#f9fafb`,display:`grid`,gridTemplateColumns:`repeat(3, 1fr)`,gap:`0.5rem`},children:[e.telefono&&(0,$.jsxs)(`button`,{onClick:()=>le(e.telefono,e.nombreCliente),style:{...ve.button,background:`linear-gradient(135deg, #10b981 0%, #059669 100%)`,color:`white`,boxShadow:`0 2px 8px rgba(16, 185, 129, 0.25)`,padding:`0.75rem 0.5rem`,fontSize:`0.8125rem`},children:[(0,$.jsx)(me,{size:16}),(0,$.jsx)(`span`,{style:{display:window.innerWidth>380?`inline`:`none`},children:`Chat`})]}),e.ubicacion&&(0,$.jsxs)(`button`,{onClick:()=>ue(e.ubicacion),style:{...ve.button,background:`linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)`,color:`white`,boxShadow:`0 2px 8px rgba(59, 130, 246, 0.25)`,padding:`0.75rem 0.5rem`,fontSize:`0.8125rem`},children:[(0,$.jsx)(he,{size:16}),(0,$.jsx)(`span`,{style:{display:window.innerWidth>380?`inline`:`none`},children:`Ir`})]}),(0,$.jsxs)(`button`,{onClick:()=>r(n?.id===e.id?null:e),style:{...ve.button,background:`linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)`,color:`white`,boxShadow:`0 2px 8px rgba(139, 92, 246, 0.25)`,padding:`0.75rem 0.5rem`,fontSize:`0.8125rem`},children:[(0,$.jsx)(w,{size:16}),(0,$.jsx)(`span`,{style:{display:window.innerWidth>380?`inline`:`none`},children:`Info`})]})]})]},e.id)})})]}),n&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{style:{position:`fixed`,inset:0,backgroundColor:`rgba(0, 0, 0, 0.5)`,backdropFilter:`blur(4px)`,zIndex:40,animation:`fadeIn 0.2s ease`},onClick:()=>r(null)}),(0,$.jsx)(`div`,{style:{position:`fixed`,inset:0,zIndex:50,display:`flex`,alignItems:`flex-end`,justifyContent:`center`,animation:`slideIn 0.3s ease`,padding:0},children:(0,$.jsxs)(`div`,{style:{backgroundColor:`white`,borderRadius:`20px 20px 0 0`,boxShadow:`0 -4px 20px rgba(0, 0, 0, 0.15)`,width:`100%`,maxHeight:`90vh`,maxHeight:`90dvh`,overflow:`hidden`,display:`flex`,flexDirection:`column`},children:[(0,$.jsxs)(`div`,{style:{background:`linear-gradient(135deg, #1e293b 0%, #334155 100%)`,padding:`1rem`,paddingTop:`max(1rem, env(safe-area-inset-top))`,display:`flex`,alignItems:`center`,justifyContent:`space-between`,color:`white`,position:`sticky`,top:0,zIndex:10},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`0.625rem`},children:[(0,$.jsx)(ge,{size:20}),(0,$.jsx)(`h2`,{style:{fontSize:`1.125rem`,fontWeight:`700`,margin:0},children:`Detalles del Pedido`})]}),(0,$.jsx)(`button`,{onClick:()=>r(null),disabled:u,style:{padding:`0.5rem`,background:`rgba(255, 255, 255, 0.15)`,border:`none`,borderRadius:`8px`,cursor:u?`not-allowed`:`pointer`,color:`white`,display:`flex`,alignItems:`center`,justifyContent:`center`,minWidth:`36px`,minHeight:`36px`,WebkitTapHighlightColor:`transparent`},children:(0,$.jsx)(De,{size:20})})]}),(0,$.jsxs)(`div`,{style:{overflowY:`auto`,flex:1,WebkitOverflowScrolling:`touch`},children:[(0,$.jsxs)(`div`,{style:{padding:`1rem`,background:`#f0f9ff`},children:[(0,$.jsxs)(`h3`,{style:{fontWeight:`700`,color:`#1f2937`,display:`flex`,alignItems:`center`,gap:`0.5rem`,marginBottom:`0.75rem`,fontSize:`1rem`},children:[(0,$.jsx)(w,{size:18,style:{color:`#3b82f6`}}),`Información del Pedido`]}),(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`0.625rem`},children:[n.orderId&&(0,$.jsxs)(`div`,{style:{backgroundColor:`white`,borderRadius:`10px`,padding:`0.875rem`,border:`1px solid #dbeafe`},children:[(0,$.jsx)(`p`,{style:{fontSize:`0.75rem`,color:`#64748b`,marginBottom:`0.25rem`},children:`ID del Pedido`}),(0,$.jsx)(`p`,{style:{fontWeight:`600`,color:`#1f2937`,margin:0,fontFamily:`monospace`,fontSize:`0.875rem`},children:n.orderId})]}),n.nombreCliente&&(0,$.jsxs)(`div`,{style:{backgroundColor:`white`,borderRadius:`10px`,padding:`0.875rem`,border:`1px solid #dbeafe`},children:[(0,$.jsx)(`p`,{style:{fontSize:`0.75rem`,color:`#64748b`,marginBottom:`0.25rem`},children:`Cliente`}),(0,$.jsxs)(`p`,{style:{fontWeight:`600`,color:`#1f2937`,margin:0,display:`flex`,alignItems:`center`,gap:`0.5rem`,fontSize:`0.9375rem`},children:[(0,$.jsx)(Ee,{size:16,style:{color:`#667eea`}}),n.nombreCliente]})]}),(0,$.jsx)(`div`,{style:{backgroundColor:`white`,borderRadius:`10px`,padding:`0.875rem`,border:`2px solid #dbeafe`},children:(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsx)(`span`,{style:{color:`#64748b`,fontWeight:`500`,fontSize:`0.875rem`},children:`Total a Cobrar`}),(0,$.jsxs)(`span`,{style:{fontSize:`1.5rem`,fontWeight:`700`,color:`#10b981`},children:[`$`,n.cantidad?.toFixed?n.cantidad.toFixed(2):n.cantidad||`0.00`]})]})}),n.metodoPago&&(0,$.jsxs)(`div`,{style:{backgroundColor:`white`,borderRadius:`10px`,padding:`0.875rem`,border:`1px solid #dbeafe`},children:[(0,$.jsx)(`p`,{style:{fontSize:`0.75rem`,color:`#64748b`,marginBottom:`0.25rem`},children:`Método de Pago`}),(0,$.jsxs)(`p`,{style:{fontWeight:`600`,color:`#1f2937`,margin:0,display:`flex`,alignItems:`center`,gap:`0.5rem`,fontSize:`0.9375rem`},children:[(0,$.jsx)(ce,{size:16,style:{color:`#10b981`}}),n.metodoPago]})]}),n.montoPagado&&(0,$.jsxs)(`div`,{style:{backgroundColor:`#dbeafe`,borderRadius:`10px`,padding:`0.875rem`,borderLeft:`3px solid #3b82f6`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,marginBottom:`0.375rem`},children:[(0,$.jsx)(`span`,{style:{fontSize:`0.8125rem`,color:`#1e40af`,fontWeight:`600`},children:`Cliente paga con:`}),(0,$.jsxs)(`span`,{style:{fontSize:`1rem`,fontWeight:`700`,color:`#1e40af`},children:[`$`,n.montoPagado?.toFixed?n.montoPagado.toFixed(2):n.montoPagado]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`},children:[(0,$.jsx)(`span`,{style:{fontSize:`0.8125rem`,color:`#1e40af`,fontWeight:`600`},children:`Cambio a devolver:`}),(0,$.jsxs)(`span`,{style:{fontSize:`1rem`,fontWeight:`700`,color:`#f59e0b`},children:[`$`,n.cambio?.toFixed?n.cambio.toFixed(2):n.cambio||`0.00`]})]})]}),n.direccion&&(0,$.jsxs)(`div`,{style:{backgroundColor:`white`,borderRadius:`10px`,padding:`0.875rem`,border:`1px solid #dbeafe`},children:[(0,$.jsx)(`p`,{style:{fontSize:`0.75rem`,color:`#64748b`,marginBottom:`0.25rem`},children:`Dirección del cliente`}),(0,$.jsxs)(`p`,{style:{fontWeight:`600`,color:`#1f2937`,margin:0,display:`flex`,alignItems:`start`,gap:`0.5rem`,fontSize:`0.875rem`,lineHeight:1.4},children:[(0,$.jsx)(fe,{size:14,style:{color:`#ef4444`,marginTop:`2px`,flexShrink:0}}),(0,$.jsx)(`span`,{children:n.direccion})]})]}),n.edificio&&(0,$.jsxs)(`div`,{style:{backgroundColor:`white`,borderRadius:`10px`,padding:`0.875rem`,border:`1px solid #dbeafe`},children:[(0,$.jsx)(`p`,{style:{fontSize:`0.75rem`,color:`#64748b`,marginBottom:`0.25rem`},children:`Edificio de Entrega`}),(0,$.jsxs)(`p`,{style:{fontWeight:`600`,color:`#8b5cf6`,margin:0,display:`flex`,alignItems:`center`,gap:`0.5rem`,fontSize:`0.9375rem`},children:[(0,$.jsx)(re,{size:16}),n.edificio]})]}),n.telefono&&(0,$.jsx)(`div`,{style:{backgroundColor:`white`,borderRadius:`10px`,padding:`0.875rem`,border:`1px solid #dbeafe`},children:(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,justifyContent:`space-between`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`p`,{style:{fontSize:`0.75rem`,color:`#64748b`,margin:0,marginBottom:`0.25rem`},children:`Teléfono`}),(0,$.jsx)(`p`,{style:{fontWeight:`600`,color:`#1f2937`,margin:0,fontSize:`0.9375rem`},children:n.telefono})]}),(0,$.jsx)(`button`,{onClick:()=>le(n.telefono,n.nombreCliente),style:{backgroundColor:`#10b981`,padding:`0.625rem`,borderRadius:`10px`,border:`none`,cursor:`pointer`,display:`flex`,alignItems:`center`,justifyContent:`center`,boxShadow:`0 2px 6px rgba(16, 185, 129, 0.3)`,minWidth:`40px`,minHeight:`40px`,WebkitTapHighlightColor:`transparent`},children:(0,$.jsx)(_e,{size:16,style:{color:`white`}})})]})}),(n.comentarioe||n.comentariop)&&(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`0.5rem`},children:[n.comentarioe&&(0,$.jsxs)(`div`,{style:{backgroundColor:`#fef3c7`,borderLeft:`3px solid #f59e0b`,borderRadius:`8px`,padding:`0.75rem`},children:[(0,$.jsx)(`p`,{style:{fontSize:`0.8125rem`,fontWeight:`600`,color:`#92400e`,margin:0,marginBottom:`0.25rem`},children:`📝 Comentario de Entrega:`}),(0,$.jsx)(`p`,{style:{fontSize:`0.8125rem`,color:`#78350f`,margin:0,lineHeight:1.4},children:n.comentarioe})]}),n.comentariop&&(0,$.jsxs)(`div`,{style:{backgroundColor:`#dbeafe`,borderLeft:`3px solid #3b82f6`,borderRadius:`8px`,padding:`0.75rem`},children:[(0,$.jsx)(`p`,{style:{fontSize:`0.8125rem`,fontWeight:`600`,color:`#1e40af`,margin:0,marginBottom:`0.25rem`},children:`🍽️ Comentario del Pedido:`}),(0,$.jsx)(`p`,{style:{fontSize:`0.8125rem`,color:`#1e3a8a`,margin:0,lineHeight:1.4},children:n.comentariop})]})]})]})]}),n.productos&&Array.isArray(n.productos)&&n.productos.length>0&&(0,$.jsxs)(`div`,{style:{padding:`1rem`,background:`#faf5ff`},children:[(0,$.jsxs)(`h3`,{style:{fontWeight:`700`,color:`#1f2937`,display:`flex`,alignItems:`center`,gap:`0.5rem`,marginBottom:`0.75rem`,fontSize:`1rem`},children:[(0,$.jsx)(xe,{size:18,style:{color:`#8b5cf6`}}),`Productos`]}),(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`0.625rem`},children:n.productos.map((e,t)=>(0,$.jsxs)(`div`,{style:{backgroundColor:`white`,borderRadius:`10px`,padding:`0.875rem`,boxShadow:`0 1px 3px rgba(0, 0, 0, 0.05)`,border:`1px solid #e9d5ff`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`start`,marginBottom:`0.375rem`},children:[(0,$.jsxs)(`div`,{style:{flex:1},children:[(0,$.jsx)(`p`,{style:{fontWeight:`600`,color:`#1f2937`,fontSize:`0.9375rem`,margin:0,marginBottom:`0.125rem`},children:e.titulo}),e.preparado&&(0,$.jsxs)(`p`,{style:{fontSize:`0.75rem`,color:`#6b7280`,margin:0},children:[`Preparación: `,e.preparado]})]}),(0,$.jsxs)(`span`,{style:{backgroundColor:`#f3e8ff`,color:`#7c3aed`,padding:`0.25rem 0.625rem`,borderRadius:`9999px`,fontSize:`0.75rem`,fontWeight:`600`,marginLeft:`0.5rem`,flexShrink:0},children:[`x`,e.cantidad]})]}),(0,$.jsxs)(`p`,{style:{fontWeight:`700`,color:`#8b5cf6`,textAlign:`right`,margin:0,fontSize:`1rem`},children:[`$`,e.precio?.toFixed?e.precio.toFixed(2):e.precio||`0.00`]})]},t))})]}),n.vendedorData&&typeof n.vendedorData==`object`&&(0,$.jsxs)(`div`,{style:{padding:`1rem`,background:`#f1f5f9`},children:[(0,$.jsxs)(`h3`,{style:{fontWeight:`700`,color:`#1f2937`,display:`flex`,alignItems:`center`,gap:`0.5rem`,marginBottom:`0.75rem`,fontSize:`1rem`},children:[(0,$.jsx)(Ce,{size:18,style:{color:`#475569`}}),`Recoger en`]}),(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`0.625rem`},children:[n.vendedorData.nombre&&(0,$.jsxs)(`div`,{style:{backgroundColor:`white`,borderRadius:`10px`,padding:`0.875rem`,border:`1px solid #e2e8f0`},children:[(0,$.jsx)(`p`,{style:{fontSize:`0.75rem`,color:`#64748b`,marginBottom:`0.25rem`},children:`Vendedor`}),(0,$.jsx)(`p`,{style:{fontWeight:`600`,color:`#8b5cf6`,fontSize:`0.9375rem`,margin:0},children:n.vendedorData.nombre})]}),n.vendedorData.direccion&&(0,$.jsxs)(`div`,{style:{backgroundColor:`white`,borderRadius:`10px`,padding:`0.875rem`,border:`1px solid #e2e8f0`},children:[(0,$.jsx)(`p`,{style:{fontSize:`0.75rem`,color:`#64748b`,marginBottom:`0.25rem`},children:`Dirección`}),(0,$.jsx)(`p`,{style:{fontWeight:`600`,color:`#1f2937`,margin:0,fontSize:`0.875rem`,lineHeight:1.4},children:n.vendedorData.direccion})]}),n.vendedorData.Vendedortelefono&&(0,$.jsxs)(`button`,{onClick:()=>le(n.vendedorData.Vendedortelefono,n.vendedorData.nombre),style:{...ve.button,background:`linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)`,color:`white`,boxShadow:`0 2px 8px rgba(139, 92, 246, 0.3)`,width:`100%`,padding:`0.875rem`},children:[(0,$.jsx)(_e,{size:16}),`Contactar Vendedor`]})]})]}),n.ubicacion&&n.ubicacion.lat&&n.ubicacion.lng&&(0,$.jsxs)(`div`,{style:{padding:`1rem`,background:`white`},children:[(0,$.jsxs)(`h3`,{style:{fontWeight:`700`,color:`#1f2937`,marginBottom:`0.75rem`,display:`flex`,alignItems:`center`,gap:`0.5rem`,fontSize:`1rem`},children:[(0,$.jsx)(fe,{size:18,style:{color:`#ef4444`}}),`Mapa de Ubicación`]}),(0,$.jsx)(`div`,{style:{borderRadius:`12px`,overflow:`hidden`,boxShadow:`0 2px 8px rgba(0, 0, 0, 0.1)`,border:`1px solid #e5e7eb`,marginBottom:`0.75rem`},children:(0,$.jsx)(`iframe`,{width:`100%`,height:`250`,frameBorder:`0`,style:{border:0},src:`https://www.google.com/maps?q=${n.ubicacion.lat},${n.ubicacion.lng}&z=17&output=embed`,allowFullScreen:!0})}),(0,$.jsxs)(`button`,{onClick:()=>ue(n.ubicacion),style:{...ve.button,background:`linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)`,color:`white`,boxShadow:`0 2px 8px rgba(59, 130, 246, 0.3)`,width:`100%`,padding:`0.875rem`},children:[(0,$.jsx)(he,{size:16}),`Abrir en Google Maps`]})]})]}),(0,$.jsxs)(`div`,{style:{padding:`1rem`,paddingBottom:`max(1rem, env(safe-area-inset-bottom))`,background:`linear-gradient(to bottom, #f9fafb, #f3f4f6)`,borderTop:`1px solid #e5e7eb`,display:`grid`,gridTemplateColumns:`repeat(2, 1fr)`,gap:`0.625rem`},children:[(0,$.jsxs)(`button`,{onClick:()=>ee(n.id,`En Camino`),style:{...ve.button,flexDirection:`column`,background:`linear-gradient(135deg, #667eea 0%, #764ba2 100%)`,color:`white`,padding:`0.75rem`,boxShadow:`0 2px 8px rgba(102, 126, 234, 0.3)`,minHeight:`70px`},children:[(0,$.jsx)(he,{size:20}),(0,$.jsx)(`span`,{style:{fontSize:`0.8125rem`,marginTop:`0.25rem`},children:`En Camino`})]}),(0,$.jsxs)(`button`,{onClick:()=>ee(n.id,`Afuera`),style:{...ve.button,flexDirection:`column`,background:`linear-gradient(135deg, #10b981 0%, #059669 100%)`,color:`white`,padding:`0.75rem`,boxShadow:`0 2px 8px rgba(16, 185, 129, 0.3)`,minHeight:`70px`},children:[(0,$.jsx)(fe,{size:20}),(0,$.jsx)(`span`,{style:{fontSize:`0.8125rem`,marginTop:`0.25rem`},children:`Afuera`})]}),(0,$.jsxs)(`button`,{onClick:()=>ee(n.id,`Error`),style:{...ve.button,flexDirection:`column`,background:`linear-gradient(135deg, #f59e0b 0%, #d97706 100%)`,color:`white`,padding:`0.75rem`,boxShadow:`0 2px 8px rgba(245, 158, 11, 0.3)`,minHeight:`70px`},children:[(0,$.jsx)(ae,{size:20}),(0,$.jsx)(`span`,{style:{fontSize:`0.8125rem`,marginTop:`0.25rem`},children:`Problema`})]}),(0,$.jsxs)(`button`,{onClick:()=>ee(n.id,`Listo`),style:{...ve.button,flexDirection:`column`,background:`linear-gradient(135deg, #10b981 0%, #059669 100%)`,color:`white`,padding:`0.75rem`,boxShadow:`0 2px 8px rgba(16, 185, 129, 0.3)`,minHeight:`70px`},children:[(0,$.jsx)(oe,{size:20}),(0,$.jsx)(`span`,{style:{fontSize:`0.8125rem`,marginTop:`0.25rem`},children:`Completado`})]})]})]})})]})]})},uO=`firebasestorage.googleapis.com`,dO=`storageBucket`,fO=120*1e3,pO=600*1e3,mO=class e extends vt{constructor(t,n,r=0){super(gO(t),`Firebase Storage: ${n} (${gO(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,e.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return gO(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}},hO;(function(e){e.UNKNOWN=`unknown`,e.OBJECT_NOT_FOUND=`object-not-found`,e.BUCKET_NOT_FOUND=`bucket-not-found`,e.PROJECT_NOT_FOUND=`project-not-found`,e.QUOTA_EXCEEDED=`quota-exceeded`,e.UNAUTHENTICATED=`unauthenticated`,e.UNAUTHORIZED=`unauthorized`,e.UNAUTHORIZED_APP=`unauthorized-app`,e.RETRY_LIMIT_EXCEEDED=`retry-limit-exceeded`,e.INVALID_CHECKSUM=`invalid-checksum`,e.CANCELED=`canceled`,e.INVALID_EVENT_NAME=`invalid-event-name`,e.INVALID_URL=`invalid-url`,e.INVALID_DEFAULT_BUCKET=`invalid-default-bucket`,e.NO_DEFAULT_BUCKET=`no-default-bucket`,e.CANNOT_SLICE_BLOB=`cannot-slice-blob`,e.SERVER_FILE_WRONG_SIZE=`server-file-wrong-size`,e.NO_DOWNLOAD_URL=`no-download-url`,e.INVALID_ARGUMENT=`invalid-argument`,e.INVALID_ARGUMENT_COUNT=`invalid-argument-count`,e.APP_DELETED=`app-deleted`,e.INVALID_ROOT_OPERATION=`invalid-root-operation`,e.INVALID_FORMAT=`invalid-format`,e.INTERNAL_ERROR=`internal-error`,e.UNSUPPORTED_ENVIRONMENT=`unsupported-environment`})(hO||={});function gO(e){return`storage/`+e}function _O(){return new mO(hO.UNKNOWN,`An unknown error occurred, please check the error payload for server response.`)}function vO(e){return new mO(hO.OBJECT_NOT_FOUND,`Object '`+e+`' does not exist.`)}function yO(e){return new mO(hO.QUOTA_EXCEEDED,`Quota for bucket '`+e+`' exceeded, please view quota on https://firebase.google.com/pricing/.`)}function bO(){return new mO(hO.UNAUTHENTICATED,`User is not authenticated, please authenticate using Firebase Authentication and try again.`)}function xO(){return new mO(hO.UNAUTHORIZED_APP,`This app does not have permission to access Firebase Storage on this project.`)}function SO(e){return new mO(hO.UNAUTHORIZED,`User does not have permission to access '`+e+`'.`)}function CO(){return new mO(hO.RETRY_LIMIT_EXCEEDED,`Max retry time for operation exceeded, please try again.`)}function wO(){return new mO(hO.CANCELED,`User canceled the upload/download.`)}function TO(e){return new mO(hO.INVALID_URL,`Invalid URL '`+e+`'.`)}function EO(e){return new mO(hO.INVALID_DEFAULT_BUCKET,`Invalid default bucket '`+e+`'.`)}function DO(){return new mO(hO.NO_DEFAULT_BUCKET,`No default bucket found. Did you set the '`+dO+`' property when initializing the app?`)}function OO(){return new mO(hO.CANNOT_SLICE_BLOB,`Cannot slice blob for upload. Please retry the upload.`)}function kO(){return new mO(hO.NO_DOWNLOAD_URL,`The given file does not have any download URLs.`)}function AO(e){return new mO(hO.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function jO(e){return new mO(hO.INVALID_ARGUMENT,e)}function MO(){return new mO(hO.APP_DELETED,`The Firebase app was deleted.`)}function NO(e){return new mO(hO.INVALID_ROOT_OPERATION,`The operation '`+e+`' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').`)}function PO(e,t){return new mO(hO.INVALID_FORMAT,`String does not match format '`+e+`': `+t)}function FO(e){throw new mO(hO.INTERNAL_ERROR,`Internal error: `+e)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var IO=class e{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return`/b/`+e(this.bucket)+`/o/`+e(this.path)}bucketOnlyServerUrl(){return`/b/`+encodeURIComponent(this.bucket)+`/o`}static makeFromBucketSpec(t,n){let r;try{r=e.makeFromUrl(t,n)}catch{return new e(t,``)}if(r.path===``)return r;throw EO(t)}static makeFromUrl(t,n){let r=null,i=`([A-Za-z0-9.\\-_]+)`;function a(e){e.path.charAt(e.path.length-1)===`/`&&(e.path_=e.path_.slice(0,-1))}let o=RegExp(`^gs://`+i+`(/(.*))?$`,`i`),s={bucket:1,path:3};function c(e){e.path_=decodeURIComponent(e.path)}let l=n.replace(/[.]/g,`\\.`),u=RegExp(`^https?://${l}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?\$`,`i`),d={bucket:1,path:3},f=n===uO?`(?:storage.googleapis.com|storage.cloud.google.com)`:n,p=RegExp(`^https?://${f}/${i}/([^?#]*)`,`i`),m=[{regex:o,indices:s,postModify:a},{regex:u,indices:d,postModify:c},{regex:p,indices:{bucket:1,path:2},postModify:c}];for(let n=0;n<m.length;n++){let i=m[n],a=i.regex.exec(t);if(a){let t=a[i.indices.bucket],n=a[i.indices.path];n||=``,r=new e(t,n),i.postModify(r);break}}if(r==null)throw TO(t);return r}},LO=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function RO(e,t,n){let r=1,i=null,a=null,o=!1,s=0;function c(){return s===2}let l=!1;function u(...e){l||(l=!0,t.apply(null,e))}function d(t){i=setTimeout(()=>{i=null,e(p,c())},t)}function f(){a&&clearTimeout(a)}function p(e,...t){if(l){f();return}if(e){f(),u.call(null,e,...t);return}if(c()||o){f(),u.call(null,e,...t);return}r<64&&(r*=2);let n;s===1?(s=2,n=0):n=(r+Math.random())*1e3,d(n)}let m=!1;function h(e){m||(m=!0,f(),!l&&(i===null?e||(s=1):(e||(s=2),clearTimeout(i),d(0))))}return d(0),a=setTimeout(()=>{o=!0,h(!0)},n),h}function zO(e){e(!1)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function BO(e){return e!==void 0}function VO(e){return typeof e==`object`&&!Array.isArray(e)}function HO(e){return typeof e==`string`||e instanceof String}function UO(e){return WO()&&e instanceof Blob}function WO(){return typeof Blob<`u`}function GO(e,t,n,r){if(r<t)throw jO(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw jO(`Invalid value for '${e}'. Expected ${n} or less.`)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function KO(e,t,n){let r=t;return n??(r=`https://${t}`),`${n}://${r}/v0${e}`}function qO(e){let t=encodeURIComponent,n=`?`;for(let r in e)if(e.hasOwnProperty(r)){let i=t(r)+`=`+t(e[r]);n=n+i+`&`}return n=n.slice(0,-1),n}var JO;(function(e){e[e.NO_ERROR=0]=`NO_ERROR`,e[e.NETWORK_ERROR=1]=`NETWORK_ERROR`,e[e.ABORT=2]=`ABORT`})(JO||={});
/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function YO(e,t){let n=e>=500&&e<600,r=[408,429].indexOf(e)!==-1,i=t.indexOf(e)!==-1;return n||r||i}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var XO=class{constructor(e,t,n,r,i,a,o,s,c,l,u,d=!0,f=!1){this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=u,this.retry=d,this.isUsingEmulator=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){let e=(e,t)=>{if(t){e(!1,new ZO(!1,null,!0));return}let n=this.connectionFactory_();this.pendingConnection_=n;let r=e=>{let t=e.loaded,n=e.lengthComputable?e.total:-1;this.progressCallback_!==null&&this.progressCallback_(t,n)};this.progressCallback_!==null&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&n.removeUploadProgressListener(r),this.pendingConnection_=null;let t=n.getErrorCode()===JO.NO_ERROR,i=n.getStatus();if(!t||YO(i,this.additionalRetryCodes_)&&this.retry){let t=n.getErrorCode()===JO.ABORT;e(!1,new ZO(!1,null,t));return}let a=this.successCodes_.indexOf(i)!==-1;e(!0,new ZO(a,n))})},t=(e,t)=>{let n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{let e=this.callback_(i,i.getResponse());BO(e)?n(e):n()}catch(e){r(e)}else if(i!==null){let e=_O();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){let e=this.appDelete_?MO():wO();r(e)}else{let e=CO();r(e)}};this.canceled_?t(!1,new ZO(!1,null,!0)):this.backoffId_=RO(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&zO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},ZO=class{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}};function QO(e,t){t!==null&&t.length>0&&(e.Authorization=`Firebase `+t)}function $O(e,t){e[`X-Firebase-Storage-Version`]=`webjs/`+(t??`AppManager`)}function ek(e,t){t&&(e[`X-Firebase-GMPID`]=t)}function tk(e,t){t!==null&&(e[`X-Firebase-AppCheck`]=t)}function nk(e,t,n,r,i,a,o=!0,s=!1){let c=qO(e.urlParams),l=e.url+c,u=Object.assign({},e.headers);return ek(u,t),QO(u,n),$O(u,a),tk(u,r),new XO(l,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o,s)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function rk(){if(typeof BlobBuilder<`u`)return BlobBuilder;if(typeof WebKitBlobBuilder<`u`)return WebKitBlobBuilder}function ik(...e){let t=rk();if(t!==void 0){let n=new t;for(let t=0;t<e.length;t++)n.append(e[t]);return n.getBlob()}else if(WO())return new Blob(e);else throw new mO(hO.UNSUPPORTED_ENVIRONMENT,`This browser doesn't seem to support creating Blobs`)}function ak(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function ok(e){if(typeof atob>`u`)throw AO(`base-64`);return atob(e)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var sk={RAW:`raw`,BASE64:`base64`,BASE64URL:`base64url`,DATA_URL:`data_url`},ck=class{constructor(e,t){this.data=e,this.contentType=t||null}};function lk(e,t){switch(e){case sk.RAW:return new ck(uk(t));case sk.BASE64:case sk.BASE64URL:return new ck(fk(e,t));case sk.DATA_URL:return new ck(mk(t),hk(t))}throw _O()}function uk(e){let t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)==55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)==56320))t.push(239,191,189);else{let i=r,a=e.charCodeAt(++n);r=65536|(i&1023)<<10|a&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else (r&64512)==56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function dk(e){let t;try{t=decodeURIComponent(e)}catch{throw PO(sk.DATA_URL,`Malformed data URL.`)}return uk(t)}function fk(e,t){switch(e){case sk.BASE64:{let n=t.indexOf(`-`)!==-1,r=t.indexOf(`_`)!==-1;if(n||r)throw PO(e,`Invalid character '`+(n?`-`:`_`)+`' found: is it base64url encoded?`);break}case sk.BASE64URL:{let n=t.indexOf(`+`)!==-1,r=t.indexOf(`/`)!==-1;if(n||r)throw PO(e,`Invalid character '`+(n?`+`:`/`)+`' found: is it base64 encoded?`);t=t.replace(/-/g,`+`).replace(/_/g,`/`);break}}let n;try{n=ok(t)}catch(t){throw t.message.includes(`polyfill`)?t:PO(e,`Invalid character found`)}let r=new Uint8Array(n.length);for(let e=0;e<n.length;e++)r[e]=n.charCodeAt(e);return r}var pk=class{constructor(e){this.base64=!1,this.contentType=null;let t=e.match(/^data:([^,]+)?,/);if(t===null)throw PO(sk.DATA_URL,`Must be formatted 'data:[<mediatype>][;base64],<data>`);let n=t[1]||null;n!=null&&(this.base64=gk(n,`;base64`),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(`,`)+1)}};function mk(e){let t=new pk(e);return t.base64?fk(sk.BASE64,t.rest):dk(t.rest)}function hk(e){return new pk(e).contentType}function gk(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var _k=class e{constructor(e,t){let n=0,r=``;UO(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(t,n){if(UO(this.data_)){let r=this.data_,i=ak(r,t,n);return i===null?null:new e(i)}else{let r=new Uint8Array(this.data_.buffer,t,n-t);return new e(r,!0)}}static getBlob(...t){if(WO()){let n=t.map(t=>t instanceof e?t.data_:t);return new e(ik.apply(null,n))}else{let n=t.map(e=>HO(e)?lk(sk.RAW,e).data:e.data_),r=0;n.forEach(e=>{r+=e.byteLength});let i=new Uint8Array(r),a=0;return n.forEach(e=>{for(let t=0;t<e.length;t++)i[a++]=e[t]}),new e(i,!0)}}uploadData(){return this.data_}};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function vk(e){let t;try{t=JSON.parse(e)}catch{return null}return VO(t)?t:null}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function yk(e){if(e.length===0)return null;let t=e.lastIndexOf(`/`);return t===-1?``:e.slice(0,t)}function bk(e,t){let n=t.split(`/`).filter(e=>e.length>0).join(`/`);return e.length===0?n:e+`/`+n}function xk(e){let t=e.lastIndexOf(`/`,e.length-2);return t===-1?e:e.slice(t+1)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Sk(e,t){return t}var Ck=class{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||Sk}},wk=null;function Tk(e){return!HO(e)||e.length<2?e:xk(e)}function Ek(){if(wk)return wk;let e=[];e.push(new Ck(`bucket`)),e.push(new Ck(`generation`)),e.push(new Ck(`metageneration`)),e.push(new Ck(`name`,`fullPath`,!0));function t(e,t){return Tk(t)}let n=new Ck(`name`);n.xform=t,e.push(n);function r(e,t){return t===void 0?t:Number(t)}let i=new Ck(`size`);return i.xform=r,e.push(i),e.push(new Ck(`timeCreated`)),e.push(new Ck(`updated`)),e.push(new Ck(`md5Hash`,null,!0)),e.push(new Ck(`cacheControl`,null,!0)),e.push(new Ck(`contentDisposition`,null,!0)),e.push(new Ck(`contentEncoding`,null,!0)),e.push(new Ck(`contentLanguage`,null,!0)),e.push(new Ck(`contentType`,null,!0)),e.push(new Ck(`metadata`,`customMetadata`,!0)),wk=e,wk}function Dk(e,t){function n(){let n=e.bucket,r=e.fullPath,i=new IO(n,r);return t._makeStorageReference(i)}Object.defineProperty(e,`ref`,{get:n})}function Ok(e,t,n){let r={};r.type=`file`;let i=n.length;for(let e=0;e<i;e++){let i=n[e];r[i.local]=i.xform(r,t[i.server])}return Dk(r,e),r}function kk(e,t,n){let r=vk(t);return r===null?null:Ok(e,r,n)}function Ak(e,t,n,r){let i=vk(t);if(i===null||!HO(i.downloadTokens))return null;let a=i.downloadTokens;if(a.length===0)return null;let o=encodeURIComponent;return a.split(`,`).map(t=>{let i=e.bucket,a=e.fullPath,s=`/b/`+o(i)+`/o/`+o(a),c=KO(s,n,r),l=qO({alt:`media`,token:t});return c+l})[0]}function jk(e,t){let n={},r=t.length;for(let i=0;i<r;i++){let r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}var Mk=class{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Nk(e){if(!e)throw _O()}function Pk(e,t){function n(n,r){let i=kk(e,r,t);return Nk(i!==null),i}return n}function Fk(e,t){function n(n,r){let i=kk(e,r,t);return Nk(i!==null),Ak(i,r,e.host,e._protocol)}return n}function Ik(e){function t(t,n){let r;return r=t.getStatus()===401?t.getErrorText().includes(`Firebase App Check token is invalid`)?xO():bO():t.getStatus()===402?yO(e.bucket):t.getStatus()===403?SO(e.path):n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}return t}function Lk(e){let t=Ik(e);function n(n,r){let i=t(n,r);return n.getStatus()===404&&(i=vO(e.path)),i.serverResponse=r.serverResponse,i}return n}function Rk(e,t,n){let r=t.fullServerUrl(),i=KO(r,e.host,e._protocol),a=e.maxOperationRetryTime,o=new Mk(i,`GET`,Fk(e,n),a);return o.errorHandler=Lk(t),o}function zk(e,t){return e&&e.contentType||t&&t.type()||`application/octet-stream`}function Bk(e,t,n){let r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||=zk(null,t),r}function Vk(e,t,n,r,i){let a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":`multipart`};function s(){let e=``;for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}let c=s();o[`Content-Type`]=`multipart/related; boundary=`+c;let l=Bk(t,r,i),u=jk(l,n),d=`--`+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+c+`\r
Content-Type: `+l.contentType+`\r
\r
`,f=`\r
--`+c+`--`,p=_k.getBlob(d,r,f);if(p===null)throw OO();let m={name:l.fullPath},h=KO(a,e.host,e._protocol),g=e.maxUploadRetryTime,_=new Mk(h,`POST`,Pk(e,n),g);return _.urlParams=m,_.headers=o,_.body=p.uploadData(),_.errorHandler=Ik(t),_}var Hk=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=JO.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener(`abort`,()=>{this.errorCode_=JO.ABORT,e()}),this.xhr_.addEventListener(`error`,()=>{this.errorCode_=JO.NETWORK_ERROR,e()}),this.xhr_.addEventListener(`load`,()=>{e()})})}send(e,t,n,r,i){if(this.sent_)throw FO(`cannot .send() more than once`);if(Ze(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(let e in i)i.hasOwnProperty(e)&&this.xhr_.setRequestHeader(e,i[e].toString());return r===void 0?this.xhr_.send():this.xhr_.send(r),this.sendPromise_}getErrorCode(){if(!this.sent_)throw FO(`cannot .getErrorCode() before sending`);return this.errorCode_}getStatus(){if(!this.sent_)throw FO(`cannot .getStatus() before sending`);try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw FO(`cannot .getResponse() before sending`);return this.xhr_.response}getErrorText(){if(!this.sent_)throw FO(`cannot .getErrorText() before sending`);return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener(`progress`,e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener(`progress`,e)}},Uk=class extends Hk{initXhr(){this.xhr_.responseType=`text`}};function Wk(){return new Uk}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Gk=class e{constructor(e,t){this._service=e,t instanceof IO?this._location=t:this._location=IO.makeFromUrl(t,e.host)}toString(){return`gs://`+this._location.bucket+`/`+this._location.path}_newRef(t,n){return new e(t,n)}get root(){let e=new IO(this._location.bucket,``);return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return xk(this._location.path)}get storage(){return this._service}get parent(){let t=yk(this._location.path);if(t===null)return null;let n=new IO(this._location.bucket,t);return new e(this._service,n)}_throwIfRoot(e){if(this._location.path===``)throw NO(e)}};function Kk(e,t,n){e._throwIfRoot(`uploadBytes`);let r=Vk(e.storage,e._location,Ek(),new _k(t,!0),n);return e.storage.makeRequestWithTokens(r,Wk).then(t=>({metadata:t,ref:e}))}function qk(e){e._throwIfRoot(`getDownloadURL`);let t=Rk(e.storage,e._location,Ek());return e.storage.makeRequestWithTokens(t,Wk).then(e=>{if(e===null)throw kO();return e})}function Jk(e,t){let n=bk(e._location.path,t),r=new IO(e._location.bucket,n);return new Gk(e.storage,r)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Yk(e){return/^[A-Za-z]+:\/\//.test(e)}function Xk(e,t){return new Gk(e,t)}function Zk(e,t){if(e instanceof tA){let n=e;if(n._bucket==null)throw DO();let r=new Gk(n,n._bucket);return t==null?r:Zk(r,t)}else if(t!==void 0)return Jk(e,t);else return e}function Qk(e,t){if(t&&Yk(t)){if(e instanceof tA)return Xk(e,t);throw jO(`To use ref(service, url), the first argument must be a Storage instance.`)}else return Zk(e,t)}function $k(e,t){let n=t?.[dO];return n==null?null:IO.makeFromBucketSpec(n,e)}function eA(e,t,n,r={}){e.host=`${t}:${n}`;let i=Ze(t);i&&(Qe(`https://${e.host}/b`),it(`Storage`,!0)),e._isUsingEmulator=!0,e._protocol=i?`https`:`http`;let{mockUserToken:a}=r;a&&(e._overrideAuthToken=typeof a==`string`?a:$e(a,e.app.options.projectId))}var tA=class{constructor(e,t,n,r,i,a=!1){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=a,this._bucket=null,this._host=uO,this._protocol=`https`,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=fO,this._maxUploadRetryTime=pO,this._requests=new Set,r==null?this._bucket=$k(this._host,this.app.options):this._bucket=IO.makeFromBucketSpec(r,this._host)}get host(){return this._host}set host(e){this._host=e,this._url==null?this._bucket=$k(e,this.app.options):this._bucket=IO.makeFromBucketSpec(this._url,e)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){GO(`time`,0,1/0,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){GO(`time`,0,1/0,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(gr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Gk(this,e)}_makeRequest(e,t,n,r,i=!0){if(this._deleted)return new LO(MO());{let a=nk(e,this._appId,n,r,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,t){let[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}},nA=`@firebase/storage`,rA=`0.14.0`,iA=`storage`;function aA(e,t,n){return e=O(e),Kk(e,t,n)}function oA(e){return e=O(e),qk(e)}function sA(e,t){return e=O(e),Qk(e,t)}function cA(e=xr(),t){e=O(e);let n=hr(e,iA).getImmediate({identifier:t}),r=qe(`storage`);return r&&lA(n,...r),n}function lA(e,t,n,r={}){eA(e,t,n,r)}function uA(e,{instanceIdentifier:t}){let n=e.getProvider(`app`).getImmediate(),r=e.getProvider(`auth-internal`),i=e.getProvider(`app-check-internal`);return new tA(n,r,i,t,yr)}function dA(){mr(new Jt(iA,uA,`PUBLIC`).setMultipleInstances(!0)),Sr(nA,rA,``),Sr(nA,rA,`esm2020`)}dA();var fA=({user:e,onBack:t})=>{let[n,r]=(0,_.useState)([]),[i,a]=(0,_.useState)(!0),[o,s]=(0,_.useState)(null),[c,l]=(0,_.useState)(!1),[u,d]=(0,_.useState)(``),[f,p]=(0,_.useState)(`todos`),[m,h]=(0,_.useState)(!1),g=aD(),v=cA(),[y,b]=(0,_.useState)({titulo:``,tipo:``,subtitulo:``,descripcion:``,calorias:``,calificacion:0,precio:``,precioCafeteria:``,ruta:``,cantidad:0,activo:!0,tienePreparados:!1,preparados:[],imagen:null}),[x,ee]=(0,_.useState)(null),[te,S]=(0,_.useState)(null);(0,_.useEffect)(()=>{C()},[]);let C=async()=>{a(!0);try{let e=$E(g,`Productos`),t=zD(e,WD(`titulo`,`asc`)),n=(await nO(t)).docs.map(e=>{let t=e.data();return{id:e.id,titulo:t.titulo||``,tipo:t.tipo||`Sin categoría`,subtitulo:t.subtitulo||``,descripcion:t.descripcion||``,calorias:t.calorias||``,calificacion:t.calificacion||0,precio:t.precio||``,precioCafeteria:t.precioCafeteria||``,ruta:t.ruta||``,cantidad:t.cantidad||0,activo:t.activo===void 0?!0:t.activo,tienePreparados:t.tienePreparados||!1,preparados:t.preparados||[],imagen:t.imagen||null,colaborador:t.colaborador||``}});r(n)}catch(e){console.error(`Error cargando productos:`,e),alert(`Error al cargar los productos`)}finally{a(!1)}},re=e=>{let t=e.target.files[0];if(t){ee(t);let e=new FileReader;e.onloadend=()=>{S(e.result)},e.readAsDataURL(t)}},ie=async e=>{if(!x)return null;try{let t=sA(v,`Productos/${e}.png`);return await aA(t,x),await oA(t)}catch(e){return console.error(`Error subiendo imagen:`,e),null}},ae=e=>{s(e),b({titulo:e.titulo||``,tipo:e.tipo||``,subtitulo:e.subtitulo||``,descripcion:e.descripcion||``,calorias:e.calorias||``,calificacion:e.calificacion||0,precio:e.precio||``,precioCafeteria:e.precioCafeteria||``,ruta:e.ruta||``,cantidad:e.cantidad||0,activo:e.activo??!0,tienePreparados:e.tienePreparados||!1,preparados:e.preparados||[],imagen:e.imagen||null}),S(e.imagen),ee(null),l(!0)},oe=async()=>{if(!m){h(!0);try{if(!y.titulo.trim()){alert(`El título es requerido`);return}if(y.calificacion<0||y.calificacion>5){alert(`La calificación debe estar entre 0 y 5`);return}if(y.cantidad<0){alert(`La cantidad no puede ser negativa`);return}let e=y.imagen;if(x){let t=await ie(o.id);t&&(e=t)}let t={titulo:y.titulo,tipo:y.tipo,subtitulo:y.subtitulo,descripcion:y.descripcion,calorias:y.calorias,calificacion:parseInt(y.calificacion)||0,precio:y.precio,precioCafeteria:y.precioCafeteria,ruta:y.ruta,cantidad:parseInt(y.cantidad)||0,activo:y.activo,tienePreparados:y.tienePreparados,preparados:y.preparados,imagen:e},n=eD(g,`Productos`,o.id);await rO(n,t),alert(`✅ Producto actualizado exitosamente`),l(!1),s(null),await C()}catch(e){console.error(`Error actualizando producto:`,e),alert(`❌ Error al actualizar el producto`)}finally{h(!1)}}},se=async e=>{if(confirm(`¿Estás seguro de eliminar "${e.titulo}"? Esta acción no se puede deshacer.`)){h(!0);try{let t=eD(g,`Productos`,e.id);await iO(t),alert(`✅ Producto eliminado exitosamente`),await C()}catch(e){console.error(`Error eliminando producto:`,e),alert(`❌ Error al eliminar el producto`)}finally{h(!1)}}},ce=async e=>{if(!m){h(!0);try{let t=eD(g,`Productos`,e.id);await rO(t,{activo:!e.activo}),await C()}catch(e){console.error(`Error actualizando estado:`,e),alert(`❌ Error al actualizar el estado`)}finally{h(!1)}}},le=n.filter(e=>{let t=e.titulo||``,n=e.tipo||``;return(t.toLowerCase().includes(u.toLowerCase())||n.toLowerCase().includes(u.toLowerCase()))&&(f===`todos`||n===f)}),ue=[`todos`,...new Set(n.map(e=>e.tipo||`Sin categoría`).filter(Boolean))],w={container:{minHeight:`100vh`,background:`linear-gradient(to bottom right, #f8fafc, #e2e8f0)`,fontFamily:`-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif`},header:{background:`linear-gradient(135deg, #667eea 0%, #764ba2 100%)`,color:`white`,padding:`1rem 0.75rem`,boxShadow:`0 4px 12px rgba(102, 126, 234, 0.2)`,position:`sticky`,top:0,zIndex:30},card:{backgroundColor:`white`,borderRadius:`10px`,boxShadow:`0 2px 8px rgba(0, 0, 0, 0.08)`,transition:`all 0.2s ease`,overflow:`hidden`},button:{padding:`0.6rem 0.75rem`,borderRadius:`8px`,fontWeight:`600`,border:`none`,cursor:m?`not-allowed`:`pointer`,transition:`all 0.2s ease`,display:`flex`,alignItems:`center`,justifyContent:`center`,gap:`0.4rem`,fontSize:`0.75rem`,opacity:m?.6:1},input:{width:`100%`,padding:`0.65rem`,borderRadius:`8px`,border:`2px solid #e5e7eb`,fontSize:`0.875rem`,transition:`all 0.2s ease`,outline:`none`}};return i?(0,$.jsx)(`div`,{style:{...w.container,display:`flex`,alignItems:`center`,justifyContent:`center`},children:(0,$.jsxs)(`div`,{style:{textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{width:`48px`,height:`48px`,border:`3px solid #e5e7eb`,borderTop:`3px solid #667eea`,borderRadius:`50%`,animation:`spin 1s linear infinite`,margin:`0 auto`}}),(0,$.jsx)(`p`,{style:{marginTop:`1rem`,color:`#6b7280`,fontSize:`0.9rem`,fontWeight:`500`},children:`Cargando productos...`})]})}):(0,$.jsxs)(`div`,{style:w.container,children:[(0,$.jsx)(`style`,{children:`
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
          
          input:focus, textarea:focus {
            border-color: #667eea !important;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1) !important;
          }
          
          button:active:not(:disabled) {
            opacity: 0.7;
          }

          @media (max-width: 414px) {
            select {
              font-size: 0.8rem !important;
            }
          }
        `}),(0,$.jsx)(`div`,{style:w.header,children:(0,$.jsxs)(`div`,{style:{maxWidth:`1200px`,margin:`0 auto`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,justifyContent:`space-between`,marginBottom:`0.75rem`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`0.5rem`},children:[(0,$.jsx)(`button`,{onClick:t,style:{background:`rgba(255, 255, 255, 0.2)`,border:`none`,color:`white`,padding:`0.5rem`,borderRadius:`8px`,cursor:`pointer`,display:`flex`,alignItems:`center`,justifyContent:`center`},children:(0,$.jsx)(ne,{size:18})}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{style:{fontSize:`1.25rem`,fontWeight:`700`,margin:0},children:`Gestión de Productos`}),(0,$.jsx)(`p`,{style:{fontSize:`0.7rem`,opacity:.9,margin:0},children:`Administra el catálogo de productos`})]})]}),(0,$.jsxs)(`div`,{style:{background:`rgba(255, 255, 255, 0.2)`,padding:`0.4rem 0.75rem`,borderRadius:`8px`,backdropFilter:`blur(10px)`},children:[(0,$.jsx)(`p`,{style:{fontSize:`1.25rem`,fontWeight:`700`,margin:0},children:le.length}),(0,$.jsx)(`p`,{style:{fontSize:`0.65rem`,opacity:.9,margin:0},children:`Productos`})]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`0.5rem`,flexWrap:`wrap`},children:[(0,$.jsxs)(`div`,{style:{flex:`1 1 150px`,position:`relative`,minWidth:`150px`},children:[(0,$.jsx)(`input`,{type:`text`,placeholder:`Buscar...`,value:u,onChange:e=>d(e.target.value),style:{width:`100%`,padding:`0.65rem 0.65rem 0.65rem 2.25rem`,borderRadius:`8px`,border:`none`,background:`rgba(255, 255, 255, 0.2)`,backdropFilter:`blur(10px)`,color:`white`,fontSize:`0.8rem`,outline:`none`}}),(0,$.jsx)(ye,{size:16,style:{position:`absolute`,left:`0.65rem`,top:`50%`,transform:`translateY(-50%)`,color:`white`,opacity:.7}})]}),(0,$.jsx)(`select`,{value:f,onChange:e=>p(e.target.value),style:{padding:`0.65rem 0.5rem`,borderRadius:`8px`,border:`none`,background:`rgba(255, 255, 255, 0.2)`,backdropFilter:`blur(10px)`,color:`white`,fontSize:`0.8rem`,cursor:`pointer`,outline:`none`,flex:`0 0 auto`},children:ue.map(e=>(0,$.jsx)(`option`,{value:e,style:{color:`#1f2937`},children:e===`todos`?`Todas`:e},e))})]})]})}),(0,$.jsx)(`div`,{style:{padding:`0.75rem`,maxWidth:`1200px`,margin:`0 auto`},children:le.length===0?(0,$.jsxs)(`div`,{style:{...w.card,padding:`2.5rem 1rem`,textAlign:`center`},children:[(0,$.jsx)(ge,{size:48,style:{color:`#d1d5db`,margin:`0 auto 0.75rem`}}),(0,$.jsx)(`p`,{style:{color:`#6b7280`,fontSize:`0.9rem`,fontWeight:`500`},children:`No se encontraron productos`})]}):(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(auto-fill, minmax(160px, 1fr))`,gap:`0.75rem`},children:le.map(e=>(0,$.jsxs)(`div`,{style:w.card,children:[(0,$.jsxs)(`div`,{style:{position:`relative`,width:`100%`,height:`140px`,background:`#f3f4f6`},children:[e.imagen?(0,$.jsx)(`img`,{src:e.imagen,alt:e.titulo,style:{width:`100%`,height:`100%`,objectFit:`cover`}}):(0,$.jsx)(`div`,{style:{width:`100%`,height:`100%`,display:`flex`,alignItems:`center`,justifyContent:`center`},children:(0,$.jsx)(de,{size:36,style:{color:`#9ca3af`}})}),(0,$.jsx)(`div`,{style:{position:`absolute`,top:`0.4rem`,right:`0.4rem`,display:`flex`,gap:`0.4rem`},children:(0,$.jsx)(`span`,{style:{padding:`0.2rem 0.5rem`,borderRadius:`20px`,fontSize:`0.65rem`,fontWeight:`600`,background:e.activo?`#10b981`:`#ef4444`,color:`white`},children:e.activo?`Activo`:`Inactivo`})})]}),(0,$.jsxs)(`div`,{style:{padding:`0.75rem`},children:[(0,$.jsx)(`h3`,{style:{fontSize:`0.85rem`,fontWeight:`700`,color:`#1f2937`,margin:`0 0 0.4rem 0`,lineHeight:`1.3`},children:e.titulo||`Sin título`}),(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`0.3rem`,marginBottom:`0.4rem`},children:[(0,$.jsx)(`span`,{style:{padding:`0.2rem 0.5rem`,borderRadius:`20px`,fontSize:`0.65rem`,fontWeight:`500`,background:`#f3f4f6`,color:`#6b7280`,textAlign:`center`},children:e.tipo||`Sin categoría`}),(0,$.jsxs)(`span`,{style:{padding:`0.2rem 0.5rem`,borderRadius:`20px`,fontSize:`0.65rem`,fontWeight:`500`,background:(e.cantidad||0)>0?`#dcfce7`:`#fee2e2`,color:(e.cantidad||0)>0?`#166534`:`#991b1b`,textAlign:`center`},children:[`Stock: `,e.cantidad||0]})]}),(0,$.jsxs)(`p`,{style:{fontSize:`1.1rem`,fontWeight:`700`,color:`#10b981`,margin:`0.4rem 0`},children:[`$`,e.precio||`0.00`]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(3, 1fr)`,gap:`0.4rem`,marginTop:`0.75rem`},children:[(0,$.jsx)(`button`,{onClick:()=>ce(e),disabled:m,style:{...w.button,background:e.activo?`#f59e0b`:`#10b981`,color:`white`,padding:`0.5rem 0.3rem`,fontSize:`0.65rem`},title:e.activo?`Desactivar`:`Activar`,children:e.activo?`Des.`:`Act.`}),(0,$.jsx)(`button`,{onClick:()=>ae(e),style:{...w.button,background:`#667eea`,color:`white`,padding:`0.5rem 0.3rem`,fontSize:`0.65rem`},title:`Editar`,children:(0,$.jsx)(Se,{size:13})}),(0,$.jsx)(`button`,{onClick:()=>se(e),disabled:m,style:{...w.button,background:`#ef4444`,color:`white`,padding:`0.5rem 0.3rem`,fontSize:`0.65rem`},title:`Eliminar`,children:(0,$.jsx)(we,{size:13})})]})]})]},e.id))})}),c&&o&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{style:{position:`fixed`,inset:0,backgroundColor:`rgba(0, 0, 0, 0.5)`,backdropFilter:`blur(4px)`,zIndex:40},onClick:()=>!m&&l(!1)}),(0,$.jsx)(`div`,{style:{position:`fixed`,inset:0,zIndex:50,display:`flex`,alignItems:`center`,justifyContent:`center`,padding:`0.75rem`},children:(0,$.jsxs)(`div`,{style:{backgroundColor:`white`,borderRadius:`16px`,boxShadow:`0 20px 40px rgba(0, 0, 0, 0.2)`,width:`100%`,maxWidth:`500px`,maxHeight:`90vh`,overflow:`hidden`,display:`flex`,flexDirection:`column`},children:[(0,$.jsxs)(`div`,{style:{background:`linear-gradient(135deg, #667eea 0%, #764ba2 100%)`,padding:`0.875rem`,display:`flex`,alignItems:`center`,justifyContent:`space-between`,color:`white`},children:[(0,$.jsx)(`h2`,{style:{fontSize:`1.1rem`,fontWeight:`700`,margin:0},children:`Editar Producto`}),(0,$.jsx)(`button`,{onClick:()=>!m&&l(!1),disabled:m,style:{background:`rgba(255, 255, 255, 0.2)`,border:`none`,padding:`0.5rem`,borderRadius:`8px`,cursor:m?`not-allowed`:`pointer`,color:`white`,display:`flex`,alignItems:`center`,justifyContent:`center`},children:(0,$.jsx)(De,{size:18})})]}),(0,$.jsxs)(`div`,{style:{overflowY:`auto`,flex:1,padding:`1rem`},children:[(0,$.jsxs)(`div`,{style:{marginBottom:`1rem`},children:[(0,$.jsx)(`label`,{style:{display:`block`,fontWeight:`600`,color:`#374151`,marginBottom:`0.5rem`,fontSize:`0.8rem`},children:`Imagen del Producto`}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`0.75rem`,alignItems:`center`},children:[(0,$.jsxs)(`label`,{style:{width:`100px`,height:`100px`,border:`2px dashed #d1d5db`,borderRadius:`10px`,display:`flex`,alignItems:`center`,justifyContent:`center`,cursor:`pointer`,overflow:`hidden`,background:`#f9fafb`,position:`relative`,flexShrink:0},children:[te?(0,$.jsx)(`img`,{src:te,alt:`Preview`,style:{width:`100%`,height:`100%`,objectFit:`cover`}}):(0,$.jsx)(de,{size:28,style:{color:`#9ca3af`}}),(0,$.jsx)(`input`,{type:`file`,accept:`image/*`,onChange:re,style:{display:`none`}})]}),(0,$.jsx)(`p`,{style:{fontSize:`0.7rem`,color:`#6b7280`,flex:1},children:`Toca para cambiar la imagen`})]})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`0.875rem`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,fontWeight:`600`,color:`#374151`,marginBottom:`0.4rem`,fontSize:`0.8rem`},children:`Título *`}),(0,$.jsx)(`input`,{type:`text`,value:y.titulo,onChange:e=>b({...y,titulo:e.target.value}),style:{...w.input,fontSize:`0.8rem`}})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`0.75rem`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,fontWeight:`600`,color:`#374151`,marginBottom:`0.4rem`,fontSize:`0.8rem`},children:`Categoría`}),(0,$.jsx)(`input`,{type:`text`,value:y.tipo,onChange:e=>b({...y,tipo:e.target.value}),style:{...w.input,fontSize:`0.8rem`}})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,fontWeight:`600`,color:`#374151`,marginBottom:`0.4rem`,fontSize:`0.8rem`},children:`Calificación (0-5)`}),(0,$.jsx)(`input`,{type:`number`,min:`0`,max:`5`,value:y.calificacion,onChange:e=>b({...y,calificacion:e.target.value}),style:{...w.input,fontSize:`0.8rem`}})]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,fontWeight:`600`,color:`#374151`,marginBottom:`0.4rem`,fontSize:`0.8rem`},children:`Descripción`}),(0,$.jsx)(`textarea`,{value:y.descripcion,onChange:e=>b({...y,descripcion:e.target.value}),rows:`3`,style:{...w.input,resize:`vertical`,fontSize:`0.8rem`}})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr 1fr`,gap:`0.75rem`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,fontWeight:`600`,color:`#374151`,marginBottom:`0.4rem`,fontSize:`0.75rem`},children:`Precio`}),(0,$.jsx)(`input`,{type:`text`,value:y.precio,onChange:e=>b({...y,precio:e.target.value}),style:{...w.input,fontSize:`0.8rem`}})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,fontWeight:`600`,color:`#374151`,marginBottom:`0.4rem`,fontSize:`0.75rem`},children:`P. Cafetería`}),(0,$.jsx)(`input`,{type:`text`,value:y.precioCafeteria,onChange:e=>b({...y,precioCafeteria:e.target.value}),style:{...w.input,fontSize:`0.8rem`}})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,fontWeight:`600`,color:`#374151`,marginBottom:`0.4rem`,fontSize:`0.75rem`},children:`Cantidad`}),(0,$.jsx)(`input`,{type:`number`,min:`0`,value:y.cantidad,onChange:e=>b({...y,cantidad:e.target.value}),style:{...w.input,fontSize:`0.8rem`}})]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`0.625rem`,padding:`0.75rem`,background:`#f9fafb`,borderRadius:`8px`},children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:y.activo,onChange:e=>b({...y,activo:e.target.checked}),style:{width:`18px`,height:`18px`,cursor:`pointer`}}),(0,$.jsx)(`label`,{style:{fontWeight:`600`,color:`#374151`,cursor:`pointer`,userSelect:`none`,fontSize:`0.8rem`},children:`Producto Activo`})]})]})]}),(0,$.jsxs)(`div`,{style:{padding:`0.875rem`,borderTop:`1px solid #e5e7eb`,display:`flex`,gap:`0.625rem`,justifyContent:`flex-end`},children:[(0,$.jsx)(`button`,{onClick:()=>!m&&l(!1),disabled:m,style:{...w.button,background:`#f3f4f6`,color:`#374151`,fontSize:`0.8rem`,padding:`0.625rem 0.875rem`},children:`Cancelar`}),(0,$.jsx)(`button`,{onClick:oe,disabled:m,style:{...w.button,background:`linear-gradient(135deg, #667eea 0%, #764ba2 100%)`,color:`white`,fontSize:`0.8rem`,padding:`0.625rem 0.875rem`},children:m?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{style:{width:`14px`,height:`14px`,border:`2px solid rgba(255,255,255,0.3)`,borderTop:`2px solid white`,borderRadius:`50%`,animation:`spin 1s linear infinite`}}),`Guardando...`]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(ve,{size:14}),`Guardar`]})})]})]})})]})]})},pA=br({apiKey:`AIzaSyAv9bhH_haWDhNnVv2JoykXzi0NBRzTnpc`,authDomain:`chilitosramen-89223.firebaseapp.com`,databaseURL:`https://chilitosramen-89223-default-rtdb.firebaseio.com`,projectId:`chilitosramen-89223`,storageBucket:`chilitosramen-89223.appspot.com`,messagingSenderId:`980858860861`,appId:`1:980858860861:web:50efba800ea74546a08154`,measurementId:`G-23ZQE8834Z`}),mA=Dc(pA);pg(pA);var hA=({onLoginSuccess:e})=>{let[t,n]=(0,_.useState)(!1),[r,i]=(0,_.useState)(``);return(0,$.jsxs)(`div`,{style:{minHeight:`100vh`,minHeight:`-webkit-fill-available`,background:`linear-gradient(135deg, #667eea 0%, #764ba2 100%)`,display:`flex`,alignItems:`center`,justifyContent:`center`,padding:`1rem`,fontFamily:`-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif`,boxSizing:`border-box`},children:[(0,$.jsxs)(`div`,{style:{backgroundColor:`white`,borderRadius:`20px`,padding:`1.5rem`,width:`100%`,maxWidth:`400px`,boxShadow:`0 20px 40px -12px rgba(0, 0, 0, 0.4)`,animation:`slideIn 0.4s ease`,margin:`1rem`},children:[(0,$.jsxs)(`div`,{style:{textAlign:`center`,marginBottom:`2rem`},children:[(0,$.jsx)(`div`,{style:{width:`80px`,height:`80px`,background:`linear-gradient(135deg, #667eea 0%, #764ba2 100%)`,borderRadius:`20px`,display:`flex`,alignItems:`center`,justifyContent:`center`,margin:`0 auto 1.25rem`,boxShadow:`0 8px 20px rgba(102, 126, 234, 0.4)`,transform:`rotate(-5deg)`},children:(0,$.jsx)(ge,{size:36,color:`white`})}),(0,$.jsx)(`h1`,{style:{fontSize:`1.75rem`,fontWeight:`800`,background:`linear-gradient(135deg, #667eea 0%, #764ba2 100%)`,WebkitBackgroundClip:`text`,WebkitTextFillColor:`transparent`,backgroundClip:`text`,margin:0,marginBottom:`0.5rem`,lineHeight:1.2},children:`Panel de Repartidor`}),(0,$.jsx)(`p`,{style:{color:`#6b7280`,fontSize:`0.9rem`,margin:0,lineHeight:1.4},children:`Gestiona tus entregas de forma eficiente`})]}),r&&(0,$.jsxs)(`div`,{style:{backgroundColor:`#fee2e2`,color:`#991b1b`,padding:`0.875rem`,borderRadius:`10px`,marginBottom:`1.25rem`,fontSize:`0.8rem`,textAlign:`center`,display:`flex`,alignItems:`center`,justifyContent:`center`,gap:`0.5rem`,border:`1px solid #fecaca`,animation:`shake 0.5s ease`},children:[(0,$.jsx)(ae,{size:16}),r]}),(0,$.jsx)(`button`,{onClick:async()=>{n(!0),i(``);try{let t=new no;t.setCustomParameters({prompt:`select_account`});let n=await ys(mA,t);console.log(`✅ Usuario autenticado:`,n.user.email),console.log(`✅ Display Name:`,n.user.displayName),console.log(`✅ Photo URL:`,n.user.photoURL),e(n.user)}catch(e){console.error(`❌ Error en login:`,e),console.error(`❌ Código de error:`,e.code),console.error(`❌ Mensaje:`,e.message),e.code===`auth/popup-closed-by-user`?i(`Inicio de sesión cancelado`):e.code===`auth/network-request-failed`?i(`Error de conexión. Verifica tu internet`):e.code===`auth/unauthorized-domain`?i(`Dominio no autorizado. Configura tu dominio en Firebase Console`):e.code===`auth/popup-blocked`?i(`Popup bloqueado. Permite popups para este sitio`):i(`Error: ${e.message}`)}finally{n(!1)}},disabled:t,style:{width:`100%`,padding:`1rem`,background:t?`#f3f4f6`:`white`,color:t?`#9ca3af`:`#1f2937`,border:`2px solid #e5e7eb`,borderRadius:`12px`,fontSize:`1rem`,fontWeight:`600`,cursor:t?`not-allowed`:`pointer`,transition:`all 0.2s ease`,boxShadow:`0 2px 6px rgba(0, 0, 0, 0.06)`,display:`flex`,alignItems:`center`,justifyContent:`center`,gap:`0.75rem`,marginBottom:`1.25rem`},onMouseEnter:e=>{t||(e.target.style.transform=`translateY(-2px)`,e.target.style.boxShadow=`0 6px 12px rgba(0, 0, 0, 0.12)`,e.target.style.borderColor=`#667eea`)},onMouseLeave:e=>{e.target.style.transform=`translateY(0)`,e.target.style.boxShadow=`0 2px 6px rgba(0, 0, 0, 0.06)`,e.target.style.borderColor=`#e5e7eb`},children:t?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{style:{width:`18px`,height:`18px`,border:`2px solid #e5e7eb`,borderTop:`2px solid #667eea`,borderRadius:`50%`,animation:`spin 1s linear infinite`}}),`Iniciando sesión...`]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(`svg`,{width:`18`,height:`18`,viewBox:`0 0 20 20`,children:[(0,$.jsx)(`path`,{fill:`#4285F4`,d:`M19.6 10.23c0-.82-.1-1.42-.25-2.05H10v3.72h5.5c-.15.96-.74 2.31-2.04 3.22v2.45h3.16c1.89-1.73 2.98-4.3 2.98-7.34z`}),(0,$.jsx)(`path`,{fill:`#34A853`,d:`M13.46 15.13c-.83.59-1.96 1-3.46 1-2.64 0-4.88-1.74-5.68-4.15H1.07v2.52C2.72 17.75 6.09 20 10 20c2.7 0 4.96-.89 6.62-2.42l-3.16-2.45z`}),(0,$.jsx)(`path`,{fill:`#FBBC05`,d:`M3.99 10c0-.69.12-1.35.32-1.97V5.51H1.07A9.973 9.973 0 000 10c0 1.61.39 3.14 1.07 4.49l3.24-2.52c-.2-.62-.32-1.28-.32-1.97z`}),(0,$.jsx)(`path`,{fill:`#EA4335`,d:`M10 3.88c1.88 0 3.13.81 3.85 1.48l2.84-2.76C14.96.99 12.7 0 10 0 6.09 0 2.72 2.25 1.07 5.51l3.24 2.52C5.12 5.62 7.36 3.88 10 3.88z`})]}),`Iniciar sesión con Google`]})}),(0,$.jsx)(`div`,{style:{padding:`1rem`,backgroundColor:`#f9fafb`,borderRadius:`10px`,border:`1px solid #e5e7eb`},children:(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`start`,gap:`0.75rem`},children:[(0,$.jsx)(`div`,{style:{flexShrink:0,width:`32px`,height:`32px`,background:`linear-gradient(135deg, #667eea 0%, #764ba2 100%)`,borderRadius:`8px`,display:`flex`,alignItems:`center`,justifyContent:`center`},children:(0,$.jsx)(ge,{size:16,color:`white`})}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`p`,{style:{fontSize:`0.8rem`,fontWeight:`600`,color:`#1f2937`,margin:0,marginBottom:`0.25rem`},children:`Acceso Seguro`}),(0,$.jsx)(`p`,{style:{fontSize:`0.75rem`,color:`#6b7280`,margin:0,lineHeight:1.4},children:`Inicia sesión con tu cuenta de Google para acceder al panel de entregas`})]})]})})]}),(0,$.jsx)(`style`,{children:`
          @keyframes slideIn {
            from {
              opacity: 0;
              transform: translateY(20px);
            }
            to {
              opacity: 1;
              transform: translateY(0);
            }
          }
          
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
          
          @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
          }
        `})]})},gA=({user:e,onNavigate:t,onLogout:n})=>{let[r,i]=(0,_.useState)(!1),a=[{id:`deliveries`,title:`Gestión de Pedidos`,description:`Ver y gestionar entregas activas`,icon:ge,color:`#667eea`,gradient:`linear-gradient(135deg, #667eea 0%, #764ba2 100%)`,count:`0`},{id:`history`,title:`Historial`,description:`Ver entregas completadas`,icon:le,color:`#10b981`,gradient:`linear-gradient(135deg, #10b981 0%, #059669 100%)`,count:`0`},{id:`stats`,title:`Estadísticas`,description:`Ver rendimiento y métricas`,icon:be,color:`#f59e0b`,gradient:`linear-gradient(135deg, #f59e0b 0%, #d97706 100%)`,count:`$0`}];return(0,$.jsxs)(`div`,{style:{minHeight:`100vh`,minHeight:`-webkit-fill-available`,background:`linear-gradient(to bottom right, #f8fafc, #e2e8f0)`,fontFamily:`-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif`,boxSizing:`border-box`},children:[(0,$.jsx)(`style`,{children:`
          @keyframes dropdownSlide {
            from {
              opacity: 0;
              transform: translateY(-10px);
            }
            to {
              opacity: 1;
              transform: translateY(0);
            }
          }
        `}),(0,$.jsx)(`div`,{style:{background:`linear-gradient(135deg, #667eea 0%, #764ba2 100%)`,color:`white`,padding:`1.5rem 1rem`,boxShadow:`0 4px 12px rgba(102, 126, 234, 0.2)`,position:`sticky`,top:0,zIndex:30},children:(0,$.jsxs)(`div`,{style:{maxWidth:`1200px`,margin:`0 auto`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,justifyContent:`space-between`,flexWrap:`wrap`,gap:`1rem`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`0.75rem`,position:`relative`},children:[(0,$.jsxs)(`button`,{onClick:()=>i(!r),style:{background:`rgba(255, 255, 255, 0.2)`,padding:`0.75rem`,borderRadius:`12px`,backdropFilter:`blur(10px)`,border:`none`,cursor:`pointer`,color:`white`,display:`flex`,alignItems:`center`,gap:`0.5rem`,transition:`all 0.2s ease`},onMouseEnter:e=>e.currentTarget.style.background=`rgba(255, 255, 255, 0.3)`,onMouseLeave:e=>e.currentTarget.style.background=`rgba(255, 255, 255, 0.2)`,children:[(0,$.jsx)(pe,{size:24}),(0,$.jsx)(ie,{size:16,style:{transition:`transform 0.2s ease`,transform:r?`rotate(180deg)`:`rotate(0deg)`}})]}),r&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{style:{position:`fixed`,inset:0,zIndex:35},onClick:()=>i(!1)}),(0,$.jsx)(`div`,{style:{position:`absolute`,top:`100%`,left:0,marginTop:`0.5rem`,background:`white`,borderRadius:`12px`,boxShadow:`0 10px 40px rgba(0, 0, 0, 0.15)`,minWidth:`250px`,overflow:`hidden`,zIndex:40,animation:`dropdownSlide 0.2s ease`},children:(0,$.jsx)(`div`,{style:{padding:`0.5rem`},children:[{id:`deliveries`,label:`Gestión de Pedidos`,icon:Te},{id:`adminmode`,label:`Admin Mode`,icon:be}].map(e=>{let n=e.icon;return(0,$.jsxs)(`button`,{onClick:()=>{t(e.id),i(!1)},style:{width:`100%`,padding:`0.75rem 1rem`,border:`none`,background:`transparent`,cursor:`pointer`,display:`flex`,alignItems:`center`,gap:`0.75rem`,borderRadius:`8px`,transition:`all 0.2s ease`,color:`#374151`,fontSize:`0.875rem`,fontWeight:`500`,textAlign:`left`},onMouseEnter:e=>{e.currentTarget.style.background=`#f3f4f6`,e.currentTarget.style.color=`#667eea`},onMouseLeave:e=>{e.currentTarget.style.background=`transparent`,e.currentTarget.style.color=`#374151`},children:[(0,$.jsx)(n,{size:18}),e.label]},e.id)})})})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{style:{fontSize:`1.5rem`,fontWeight:`700`,margin:0,marginBottom:`0.25rem`},children:`Panel de Control`}),(0,$.jsxs)(`p`,{style:{fontSize:`0.8rem`,opacity:.9,margin:0},children:[`Bienvenido, `,e?.displayName?.split(` `)[0]||`Repartidor`]})]})]}),(0,$.jsxs)(`button`,{onClick:n,style:{background:`rgba(255, 255, 255, 0.2)`,border:`none`,color:`white`,padding:`0.75rem 1rem`,borderRadius:`10px`,cursor:`pointer`,backdropFilter:`blur(10px)`,display:`flex`,alignItems:`center`,gap:`0.5rem`,fontSize:`0.875rem`,fontWeight:`600`,transition:`all 0.2s ease`,boxShadow:`0 2px 6px rgba(0, 0, 0, 0.1)`,whiteSpace:`nowrap`},onMouseEnter:e=>{e.currentTarget.style.background=`rgba(255, 255, 255, 0.3)`,e.currentTarget.style.transform=`translateY(-2px)`},onMouseLeave:e=>{e.currentTarget.style.background=`rgba(255, 255, 255, 0.2)`,e.currentTarget.style.transform=`translateY(0)`},children:[(0,$.jsx)(T,{size:16}),`Cerrar Sesión`]})]}),(0,$.jsxs)(`div`,{style:{marginTop:`1.25rem`,background:`rgba(255, 255, 255, 0.15)`,padding:`0.875rem 1rem`,borderRadius:`10px`,backdropFilter:`blur(10px)`,display:`flex`,alignItems:`center`,gap:`0.75rem`,border:`1px solid rgba(255, 255, 255, 0.2)`},children:[e?.photoURL?(0,$.jsx)(`img`,{src:e.photoURL,alt:e.displayName||`Avatar`,style:{width:`48px`,height:`48px`,borderRadius:`12px`,border:`2px solid rgba(255, 255, 255, 0.5)`,objectFit:`cover`,boxShadow:`0 4px 8px rgba(0, 0, 0, 0.2)`}}):(0,$.jsx)(`div`,{style:{width:`48px`,height:`48px`,borderRadius:`12px`,background:`rgba(255, 255, 255, 0.2)`,display:`flex`,alignItems:`center`,justifyContent:`center`,border:`2px solid rgba(255, 255, 255, 0.5)`},children:(0,$.jsx)(Ee,{size:24})}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`p`,{style:{fontSize:`1rem`,fontWeight:`700`,margin:0,marginBottom:`0.125rem`},children:e?.displayName||`Usuario`}),(0,$.jsx)(`p`,{style:{fontSize:`0.75rem`,opacity:.9,margin:0},children:e?.email})]})]})]})}),(0,$.jsxs)(`div`,{style:{padding:`1.5rem 1rem`,maxWidth:`1200px`,margin:`0 auto`},children:[(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(auto-fit, minmax(250px, 1fr))`,gap:`1rem`,marginBottom:`1.5rem`},children:a.map(e=>{let n=e.icon;return(0,$.jsxs)(`button`,{onClick:()=>t(e.id),style:{background:`white`,border:`none`,borderRadius:`16px`,padding:`1.5rem`,cursor:`pointer`,transition:`all 0.3s ease`,boxShadow:`0 2px 8px rgba(0, 0, 0, 0.08)`,textAlign:`left`,position:`relative`,overflow:`hidden`,width:`100%`},onMouseEnter:e=>{e.currentTarget.style.transform=`translateY(-4px)`,e.currentTarget.style.boxShadow=`0 8px 20px rgba(0, 0, 0, 0.12)`},onMouseLeave:e=>{e.currentTarget.style.transform=`translateY(0)`,e.currentTarget.style.boxShadow=`0 2px 8px rgba(0, 0, 0, 0.08)`},children:[(0,$.jsx)(`div`,{style:{position:`absolute`,top:`-25%`,right:`-15%`,width:`140px`,height:`140px`,background:e.gradient,borderRadius:`50%`,opacity:.08}}),(0,$.jsxs)(`div`,{style:{position:`relative`,zIndex:1},children:[(0,$.jsx)(`div`,{style:{width:`60px`,height:`60px`,background:e.gradient,borderRadius:`14px`,display:`flex`,alignItems:`center`,justifyContent:`center`,marginBottom:`1rem`,boxShadow:`0 4px 12px ${e.color}30`},children:(0,$.jsx)(n,{size:28,color:`white`})}),(0,$.jsx)(`h3`,{style:{fontSize:`1.25rem`,fontWeight:`700`,color:`#1f2937`,margin:0,marginBottom:`0.5rem`},children:e.title}),(0,$.jsx)(`p`,{style:{fontSize:`0.875rem`,color:`#6b7280`,margin:0,marginBottom:`1rem`,lineHeight:1.4},children:e.description}),(0,$.jsx)(`div`,{style:{display:`inline-flex`,alignItems:`center`,gap:`0.5rem`,padding:`0.375rem 0.75rem`,background:`${e.color}15`,borderRadius:`6px`,color:e.color,fontWeight:`600`,fontSize:`0.8rem`},children:e.count})]})]},e.id)})}),(0,$.jsxs)(`div`,{style:{background:`white`,borderRadius:`16px`,padding:`1.5rem`,boxShadow:`0 2px 8px rgba(0, 0, 0, 0.08)`},children:[(0,$.jsxs)(`h2`,{style:{fontSize:`1.25rem`,fontWeight:`700`,color:`#1f2937`,marginBottom:`1.25rem`,display:`flex`,alignItems:`center`,gap:`0.5rem`},children:[(0,$.jsx)(se,{size:20,style:{color:`#667eea`}}),`Estadísticas de Hoy`]}),(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(auto-fit, minmax(140px, 1fr))`,gap:`0.75rem`},children:[{label:`Pedidos Activos`,value:`0`,color:`#667eea`,icon:ge},{label:`Completados`,value:`0`,color:`#10b981`,icon:oe},{label:`En Camino`,value:`0`,color:`#3b82f6`,icon:Te},{label:`Total Entregado`,value:`$0.00`,color:`#f59e0b`,icon:ce}].map((e,t)=>{let n=e.icon;return(0,$.jsxs)(`div`,{style:{padding:`1rem`,background:`linear-gradient(135deg, ${e.color}10, ${e.color}05)`,borderRadius:`12px`,border:`1px solid ${e.color}20`,textAlign:`center`},children:[(0,$.jsx)(n,{size:20,style:{color:e.color,marginBottom:`0.5rem`}}),(0,$.jsx)(`p`,{style:{fontSize:`1.5rem`,fontWeight:`700`,color:e.color,margin:0,marginBottom:`0.25rem`},children:e.value}),(0,$.jsx)(`p`,{style:{fontSize:`0.75rem`,color:`#6b7280`,margin:0,fontWeight:`500`},children:e.label})]},t)})})]})]})]})},_A=({title:e,icon:t,onBack:n})=>(0,$.jsx)(`div`,{style:{minHeight:`100vh`,minHeight:`-webkit-fill-available`,background:`linear-gradient(to bottom right, #f8fafc, #e2e8f0)`,padding:`1.5rem 1rem`,fontFamily:`-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif`,boxSizing:`border-box`},children:(0,$.jsxs)(`div`,{style:{maxWidth:`1200px`,margin:`0 auto`},children:[(0,$.jsxs)(`button`,{onClick:n,style:{background:`white`,border:`none`,padding:`0.75rem 1.25rem`,borderRadius:`10px`,cursor:`pointer`,display:`flex`,alignItems:`center`,gap:`0.5rem`,fontSize:`0.875rem`,fontWeight:`600`,color:`#667eea`,boxShadow:`0 2px 6px rgba(0, 0, 0, 0.08)`,marginBottom:`1.5rem`,transition:`all 0.2s ease`},onMouseEnter:e=>{e.target.style.transform=`translateX(-4px)`,e.target.style.boxShadow=`0 4px 10px rgba(0, 0, 0, 0.12)`},onMouseLeave:e=>{e.target.style.transform=`translateX(0)`,e.target.style.boxShadow=`0 2px 6px rgba(0, 0, 0, 0.08)`},children:[(0,$.jsx)(ue,{size:16}),`Volver al Menú`]}),(0,$.jsxs)(`div`,{style:{background:`white`,borderRadius:`16px`,padding:`3rem 1.5rem`,textAlign:`center`,boxShadow:`0 2px 8px rgba(0, 0, 0, 0.08)`},children:[(0,$.jsx)(`div`,{style:{width:`80px`,height:`80px`,background:`linear-gradient(135deg, #667eea 0%, #764ba2 100%)`,borderRadius:`20px`,display:`flex`,alignItems:`center`,justifyContent:`center`,margin:`0 auto 1.5rem`,boxShadow:`0 6px 20px rgba(102, 126, 234, 0.3)`},children:(0,$.jsx)(t,{size:36,color:`white`})}),(0,$.jsx)(`h1`,{style:{fontSize:`1.75rem`,fontWeight:`800`,color:`#1f2937`,marginBottom:`1rem`,lineHeight:1.2},children:e}),(0,$.jsx)(`p`,{style:{fontSize:`1rem`,color:`#6b7280`,maxWidth:`400px`,margin:`0 auto`,lineHeight:1.4},children:`Esta página estará disponible próximamente`})]})]})});(0,g.createRoot)(document.getElementById(`root`)).render((0,$.jsx)(_.StrictMode,{children:(0,$.jsx)(()=>{let[e,t]=(0,_.useState)(null),[n,r]=(0,_.useState)(!0),[i,a]=(0,_.useState)(`dashboard`);(0,_.useEffect)(()=>{let e=ho(mA,e=>{console.log(`🔄 Estado de autenticación cambió:`,e?.email||`No hay usuario`),t(e),r(!1)});return()=>e()},[]);let o=async()=>{try{await go(mA),console.log(`✅ Sesión cerrada correctamente`),a(`dashboard`)}catch(e){console.error(`❌ Error al cerrar sesión:`,e)}},s=e=>{a(e)};return n?(0,$.jsx)(`div`,{style:{minHeight:`100vh`,minHeight:`-webkit-fill-available`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`linear-gradient(135deg, #667eea 0%, #764ba2 100%)`},children:(0,$.jsxs)(`div`,{style:{textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{width:`48px`,height:`48px`,border:`3px solid rgba(255, 255, 255, 0.3)`,borderTop:`3px solid white`,borderRadius:`50%`,animation:`spin 1s linear infinite`,margin:`0 auto 1rem`}}),(0,$.jsx)(`p`,{style:{color:`white`,fontSize:`1rem`,fontWeight:`500`},children:`Cargando...`})]})}):e?i===`dashboard`?(0,$.jsx)(gA,{user:e,onNavigate:s,onLogout:o}):i===`deliveries`?(0,$.jsxs)(`div`,{style:{minHeight:`100vh`,minHeight:`-webkit-fill-available`,background:`linear-gradient(to bottom right, #f8fafc, #e2e8f0)`,boxSizing:`border-box`},children:[(0,$.jsxs)(`div`,{style:{background:`linear-gradient(135deg, #667eea 0%, #764ba2 100%)`,padding:`1rem`,display:`flex`,alignItems:`center`,justifyContent:`space-between`,boxShadow:`0 2px 6px rgba(0, 0, 0, 0.1)`,position:`sticky`,top:0,zIndex:30},children:[(0,$.jsxs)(`button`,{onClick:()=>a(`dashboard`),style:{background:`rgba(255, 255, 255, 0.2)`,border:`none`,color:`white`,padding:`0.625rem 1rem`,borderRadius:`8px`,cursor:`pointer`,backdropFilter:`blur(10px)`,display:`flex`,alignItems:`center`,gap:`0.5rem`,fontSize:`0.875rem`,fontWeight:`600`,transition:`all 0.2s ease`},onMouseEnter:e=>e.target.style.background=`rgba(255, 255, 255, 0.3)`,onMouseLeave:e=>e.target.style.background=`rgba(255, 255, 255, 0.2)`,children:[(0,$.jsx)(ue,{size:16}),`Menú`]}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`0.5rem`},children:[e?.photoURL&&(0,$.jsx)(`img`,{src:e.photoURL,alt:e.displayName||`Avatar`,style:{width:`36px`,height:`36px`,borderRadius:`8px`,border:`2px solid rgba(255, 255, 255, 0.5)`,objectFit:`cover`,boxShadow:`0 2px 6px rgba(0, 0, 0, 0.2)`}}),(0,$.jsxs)(`button`,{onClick:o,style:{background:`rgba(255, 255, 255, 0.2)`,border:`none`,color:`white`,padding:`0.625rem 1rem`,borderRadius:`8px`,cursor:`pointer`,backdropFilter:`blur(10px)`,display:`flex`,alignItems:`center`,gap:`0.5rem`,fontSize:`0.875rem`,fontWeight:`600`,transition:`all 0.2s ease`},onMouseEnter:e=>e.target.style.background=`rgba(255, 255, 255, 0.3)`,onMouseLeave:e=>e.target.style.background=`rgba(255, 255, 255, 0.2)`,children:[(0,$.jsx)(T,{size:16}),`Salir`]})]})]}),(0,$.jsx)(lO,{user:e})]}):i===`adminmode`?(0,$.jsx)(fA,{user:e,onBack:()=>a(`dashboard`)}):i===`history`?(0,$.jsx)(_A,{title:`Historial de Entregas`,icon:le,onBack:()=>a(`dashboard`)}):i===`stats`?(0,$.jsx)(_A,{title:`Estadísticas y Métricas`,icon:be,onBack:()=>a(`dashboard`)}):(0,$.jsx)(gA,{user:e,onNavigate:s,onLogout:o}):(0,$.jsx)(hA,{onLoginSuccess:t})},{})}));