var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,o=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),s=(e,i,o,s)=>{if(i&&typeof i==`object`||typeof i==`function`)for(var c=r(i),l=0,u=c.length,d;l<u;l++)d=c[l],!a.call(e,d)&&d!==o&&t(e,d,{get:(e=>i[e]).bind(null,d),enumerable:!(s=n(i,d))||s.enumerable});return e},c=(n,r,a)=>(a=n==null?{}:e(i(n)),s(r||!n||!n.__esModule?t(a,`default`,{value:n,enumerable:!0}):a,n));(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var l=o((e=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.portal`),r=Symbol.for(`react.fragment`),i=Symbol.for(`react.strict_mode`),a=Symbol.for(`react.profiler`),o=Symbol.for(`react.consumer`),s=Symbol.for(`react.context`),c=Symbol.for(`react.forward_ref`),l=Symbol.for(`react.suspense`),u=Symbol.for(`react.memo`),d=Symbol.for(`react.lazy`),f=Symbol.for(`react.activity`),p=Symbol.iterator;function m(e){return typeof e!=`object`||!e?null:(e=p&&e[p]||e[`@@iterator`],typeof e==`function`?e:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,_={};function v(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||h}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if(typeof e!=`object`&&typeof e!=`function`&&e!=null)throw Error(`takes an object of state variables to update or a function which returns an object of state variables.`);this.updater.enqueueSetState(this,e,t,`setState`)},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,`forceUpdate`)};function y(){}y.prototype=v.prototype;function b(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||h}var x=b.prototype=new y;x.constructor=b,g(x,v.prototype),x.isPureReactComponent=!0;var ee=Array.isArray;function S(){}var C={H:null,A:null,T:null,S:null},te=Object.prototype.hasOwnProperty;function ne(e,n,r){var i=r.ref;return{$$typeof:t,type:e,key:n,ref:i===void 0?null:i,props:r}}function re(e,t){return ne(e.type,t,e.props)}function ie(e){return typeof e==`object`&&!!e&&e.$$typeof===t}function ae(e){var t={"=":`=0`,":":`=2`};return`$`+e.replace(/[=:]/g,function(e){return t[e]})}var oe=/\/+/g;function se(e,t){return typeof e==`object`&&e&&e.key!=null?ae(``+e.key):t.toString(36)}function ce(e){switch(e.status){case`fulfilled`:return e.value;case`rejected`:throw e.reason;default:switch(typeof e.status==`string`?e.then(S,S):(e.status=`pending`,e.then(function(t){e.status===`pending`&&(e.status=`fulfilled`,e.value=t)},function(t){e.status===`pending`&&(e.status=`rejected`,e.reason=t)})),e.status){case`fulfilled`:return e.value;case`rejected`:throw e.reason}}throw e}function le(e,r,i,a,o){var s=typeof e;(s===`undefined`||s===`boolean`)&&(e=null);var c=!1;if(e===null)c=!0;else switch(s){case`bigint`:case`string`:case`number`:c=!0;break;case`object`:switch(e.$$typeof){case t:case n:c=!0;break;case d:return c=e._init,le(c(e._payload),r,i,a,o)}}if(c)return o=o(e),c=a===``?`.`+se(e,0):a,ee(o)?(i=``,c!=null&&(i=c.replace(oe,`$&/`)+`/`),le(o,r,i,``,function(e){return e})):o!=null&&(ie(o)&&(o=re(o,i+(o.key==null||e&&e.key===o.key?``:(``+o.key).replace(oe,`$&/`)+`/`)+c)),r.push(o)),1;c=0;var l=a===``?`.`:a+`:`;if(ee(e))for(var u=0;u<e.length;u++)a=e[u],s=l+se(a,u),c+=le(a,r,i,s,o);else if(u=m(e),typeof u==`function`)for(e=u.call(e),u=0;!(a=e.next()).done;)a=a.value,s=l+se(a,u++),c+=le(a,r,i,s,o);else if(s===`object`){if(typeof e.then==`function`)return le(ce(e),r,i,a,o);throw r=String(e),Error(`Objects are not valid as a React child (found: `+(r===`[object Object]`?`object with keys {`+Object.keys(e).join(`, `)+`}`:r)+`). If you meant to render a collection of children, use an array instead.`)}return c}function ue(e,t,n){if(e==null)return e;var r=[],i=0;return le(e,r,``,``,function(e){return t.call(n,e,i++)}),r}function de(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(t){(e._status===0||e._status===-1)&&(e._status=1,e._result=t)},function(t){(e._status===0||e._status===-1)&&(e._status=2,e._result=t)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var w=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)},T={map:ue,forEach:function(e,t,n){ue(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ue(e,function(){t++}),t},toArray:function(e){return ue(e,function(e){return e})||[]},only:function(e){if(!ie(e))throw Error(`React.Children.only expected to receive a single React element child.`);return e}};e.Activity=f,e.Children=T,e.Component=v,e.Fragment=r,e.Profiler=a,e.PureComponent=b,e.StrictMode=i,e.Suspense=l,e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,e.__COMPILER_RUNTIME={__proto__:null,c:function(e){return C.H.useMemoCache(e)}},e.cache=function(e){return function(){return e.apply(null,arguments)}},e.cacheSignal=function(){return null},e.cloneElement=function(e,t,n){if(e==null)throw Error(`The argument must be a React element, but you passed `+e+`.`);var r=g({},e.props),i=e.key;if(t!=null)for(a in t.key!==void 0&&(i=``+t.key),t)!te.call(t,a)||a===`key`||a===`__self`||a===`__source`||a===`ref`&&t.ref===void 0||(r[a]=t[a]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var o=Array(a),s=0;s<a;s++)o[s]=arguments[s+2];r.children=o}return ne(e.type,i,r)},e.createContext=function(e){return e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:o,_context:e},e},e.createElement=function(e,t,n){var r,i={},a=null;if(t!=null)for(r in t.key!==void 0&&(a=``+t.key),t)te.call(t,r)&&r!==`key`&&r!==`__self`&&r!==`__source`&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var s=Array(o),c=0;c<o;c++)s[c]=arguments[c+2];i.children=s}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return ne(e,a,i)},e.createRef=function(){return{current:null}},e.forwardRef=function(e){return{$$typeof:c,render:e}},e.isValidElement=ie,e.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:de}},e.memo=function(e,t){return{$$typeof:u,type:e,compare:t===void 0?null:t}},e.startTransition=function(e){var t=C.T,n={};C.T=n;try{var r=e(),i=C.S;i!==null&&i(n,r),typeof r==`object`&&r&&typeof r.then==`function`&&r.then(S,w)}catch(e){w(e)}finally{t!==null&&n.types!==null&&(t.types=n.types),C.T=t}},e.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},e.use=function(e){return C.H.use(e)},e.useActionState=function(e,t,n){return C.H.useActionState(e,t,n)},e.useCallback=function(e,t){return C.H.useCallback(e,t)},e.useContext=function(e){return C.H.useContext(e)},e.useDebugValue=function(){},e.useDeferredValue=function(e,t){return C.H.useDeferredValue(e,t)},e.useEffect=function(e,t){return C.H.useEffect(e,t)},e.useEffectEvent=function(e){return C.H.useEffectEvent(e)},e.useId=function(){return C.H.useId()},e.useImperativeHandle=function(e,t,n){return C.H.useImperativeHandle(e,t,n)},e.useInsertionEffect=function(e,t){return C.H.useInsertionEffect(e,t)},e.useLayoutEffect=function(e,t){return C.H.useLayoutEffect(e,t)},e.useMemo=function(e,t){return C.H.useMemo(e,t)},e.useOptimistic=function(e,t){return C.H.useOptimistic(e,t)},e.useReducer=function(e,t,n){return C.H.useReducer(e,t,n)},e.useRef=function(e){return C.H.useRef(e)},e.useState=function(e){return C.H.useState(e)},e.useSyncExternalStore=function(e,t,n){return C.H.useSyncExternalStore(e,t,n)},e.useTransition=function(){return C.H.useTransition()},e.version=`19.2.0`})),u=o(((e,t)=>{t.exports=l()})),d=o((e=>{function t(e,t){var n=e.length;e.push(t);a:for(;0<n;){var r=n-1>>>1,a=e[r];if(0<i(a,t))e[r]=t,e[n]=a,n=r;else break a}}function n(e){return e.length===0?null:e[0]}function r(e){if(e.length===0)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;a:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,c=e[s],l=s+1,u=e[l];if(0>i(c,n))l<a&&0>i(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[s]=n,r=s);else if(l<a&&0>i(u,n))e[r]=u,e[l]=n,r=l;else break a}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return n===0?e.id-t.id:n}if(e.unstable_now=void 0,typeof performance==`object`&&typeof performance.now==`function`){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var c=[],l=[],u=1,d=null,f=3,p=!1,m=!1,h=!1,g=!1,_=typeof setTimeout==`function`?setTimeout:null,v=typeof clearTimeout==`function`?clearTimeout:null,y=typeof setImmediate<`u`?setImmediate:null;function b(e){for(var i=n(l);i!==null;){if(i.callback===null)r(l);else if(i.startTime<=e)r(l),i.sortIndex=i.expirationTime,t(c,i);else break;i=n(l)}}function x(e){if(h=!1,b(e),!m)if(n(c)!==null)m=!0,ee||(ee=!0,ie());else{var t=n(l);t!==null&&se(x,t.startTime-e)}}var ee=!1,S=-1,C=5,te=-1;function ne(){return g?!0:!(e.unstable_now()-te<C)}function re(){if(g=!1,ee){var t=e.unstable_now();te=t;var i=!0;try{a:{m=!1,h&&(h=!1,v(S),S=-1),p=!0;var a=f;try{b:{for(b(t),d=n(c);d!==null&&!(d.expirationTime>t&&ne());){var o=d.callback;if(typeof o==`function`){d.callback=null,f=d.priorityLevel;var s=o(d.expirationTime<=t);if(t=e.unstable_now(),typeof s==`function`){d.callback=s,b(t),i=!0;break b}d===n(c)&&r(c),b(t)}else r(c);d=n(c)}if(d!==null)i=!0;else{var u=n(l);u!==null&&se(x,u.startTime-t),i=!1}}break a}finally{d=null,f=a,p=!1}i=void 0}}finally{i?ie():ee=!1}}}var ie;if(typeof y==`function`)ie=function(){y(re)};else if(typeof MessageChannel<`u`){var ae=new MessageChannel,oe=ae.port2;ae.port1.onmessage=re,ie=function(){oe.postMessage(null)}}else ie=function(){_(re,0)};function se(t,n){S=_(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error(`forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported`):C=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_scheduleCallback=function(r,i,a){var o=e.unstable_now();switch(typeof a==`object`&&a?(a=a.delay,a=typeof a==`number`&&0<a?o+a:o):a=o,r){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return s=a+s,r={id:u++,callback:i,priorityLevel:r,startTime:a,expirationTime:s,sortIndex:-1},a>o?(r.sortIndex=a,t(l,r),n(c)===null&&r===n(l)&&(h?(v(S),S=-1):h=!0,se(x,a-o))):(r.sortIndex=s,t(c,r),m||p||(m=!0,ee||(ee=!0,ie()))),r},e.unstable_shouldYield=ne,e.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}})),f=o(((e,t)=>{t.exports=d()})),p=o((e=>{var t=u();function n(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function r(){}var i={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for(`react.portal`);function o(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:r==null?null:``+r,children:e,containerInfo:t,implementation:n}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){if(e===`font`)return``;if(typeof t==`string`)return t===`use-credentials`?t:``}e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,e.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(n(299));return o(e,t,null,r)},e.flushSync=function(e){var t=s.T,n=i.p;try{if(s.T=null,i.p=2,e)return e()}finally{s.T=t,i.p=n,i.d.f()}},e.preconnect=function(e,t){typeof e==`string`&&(t?(t=t.crossOrigin,t=typeof t==`string`?t===`use-credentials`?t:``:void 0):t=null,i.d.C(e,t))},e.prefetchDNS=function(e){typeof e==`string`&&i.d.D(e)},e.preinit=function(e,t){if(typeof e==`string`&&t&&typeof t.as==`string`){var n=t.as,r=c(n,t.crossOrigin),a=typeof t.integrity==`string`?t.integrity:void 0,o=typeof t.fetchPriority==`string`?t.fetchPriority:void 0;n===`style`?i.d.S(e,typeof t.precedence==`string`?t.precedence:void 0,{crossOrigin:r,integrity:a,fetchPriority:o}):n===`script`&&i.d.X(e,{crossOrigin:r,integrity:a,fetchPriority:o,nonce:typeof t.nonce==`string`?t.nonce:void 0})}},e.preinitModule=function(e,t){if(typeof e==`string`)if(typeof t==`object`&&t){if(t.as==null||t.as===`script`){var n=c(t.as,t.crossOrigin);i.d.M(e,{crossOrigin:n,integrity:typeof t.integrity==`string`?t.integrity:void 0,nonce:typeof t.nonce==`string`?t.nonce:void 0})}}else t??i.d.M(e)},e.preload=function(e,t){if(typeof e==`string`&&typeof t==`object`&&t&&typeof t.as==`string`){var n=t.as,r=c(n,t.crossOrigin);i.d.L(e,n,{crossOrigin:r,integrity:typeof t.integrity==`string`?t.integrity:void 0,nonce:typeof t.nonce==`string`?t.nonce:void 0,type:typeof t.type==`string`?t.type:void 0,fetchPriority:typeof t.fetchPriority==`string`?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy==`string`?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet==`string`?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes==`string`?t.imageSizes:void 0,media:typeof t.media==`string`?t.media:void 0})}},e.preloadModule=function(e,t){if(typeof e==`string`)if(t){var n=c(t.as,t.crossOrigin);i.d.m(e,{as:typeof t.as==`string`&&t.as!==`script`?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity==`string`?t.integrity:void 0})}else i.d.m(e)},e.requestFormReset=function(e){i.d.r(e)},e.unstable_batchedUpdates=function(e,t){return e(t)},e.useFormState=function(e,t,n){return s.H.useFormState(e,t,n)},e.useFormStatus=function(){return s.H.useHostTransitionStatus()},e.version=`19.2.0`})),m=o(((e,t)=>{function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=p()})),h=o((e=>{var t=f(),n=u(),r=m();function i(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function a(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function s(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function c(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function l(e){if(o(e)!==e)throw Error(i(188))}function d(e){var t=e.alternate;if(!t){if(t=o(e),t===null)throw Error(i(188));return t===e?e:null}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var s=a.alternate;if(s===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===n)return l(a),e;if(s===r)return l(a),t;s=s.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=s;else{for(var c=!1,u=a.child;u;){if(u===n){c=!0,n=a,r=s;break}if(u===r){c=!0,r=a,n=s;break}u=u.sibling}if(!c){for(u=s.child;u;){if(u===n){c=!0,n=s,r=a;break}if(u===r){c=!0,r=s,n=a;break}u=u.sibling}if(!c)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(n.tag!==3)throw Error(i(188));return n.stateNode.current===n?e:t}function p(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=p(e),t!==null)return t;e=e.sibling}return null}var h=Object.assign,g=Symbol.for(`react.element`),_=Symbol.for(`react.transitional.element`),v=Symbol.for(`react.portal`),y=Symbol.for(`react.fragment`),b=Symbol.for(`react.strict_mode`),x=Symbol.for(`react.profiler`),ee=Symbol.for(`react.consumer`),S=Symbol.for(`react.context`),C=Symbol.for(`react.forward_ref`),te=Symbol.for(`react.suspense`),ne=Symbol.for(`react.suspense_list`),re=Symbol.for(`react.memo`),ie=Symbol.for(`react.lazy`),ae=Symbol.for(`react.activity`),oe=Symbol.for(`react.memo_cache_sentinel`),se=Symbol.iterator;function ce(e){return typeof e!=`object`||!e?null:(e=se&&e[se]||e[`@@iterator`],typeof e==`function`?e:null)}var le=Symbol.for(`react.client.reference`);function ue(e){if(e==null)return null;if(typeof e==`function`)return e.$$typeof===le?null:e.displayName||e.name||null;if(typeof e==`string`)return e;switch(e){case y:return`Fragment`;case x:return`Profiler`;case b:return`StrictMode`;case te:return`Suspense`;case ne:return`SuspenseList`;case ae:return`Activity`}if(typeof e==`object`)switch(e.$$typeof){case v:return`Portal`;case S:return e.displayName||`Context`;case ee:return(e._context.displayName||`Context`)+`.Consumer`;case C:var t=e.render;return e=e.displayName,e||=(e=t.displayName||t.name||``,e===``?`ForwardRef`:`ForwardRef(`+e+`)`),e;case re:return t=e.displayName||null,t===null?ue(e.type)||`Memo`:t;case ie:t=e._payload,e=e._init;try{return ue(e(t))}catch{}}return null}var de=Array.isArray,w=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,T=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},pe=[],me=-1;function he(e){return{current:e}}function ge(e){0>me||(e.current=pe[me],pe[me]=null,me--)}function _e(e,t){me++,pe[me]=e.current,e.current=t}var E=he(null),ve=he(null),ye=he(null),be=he(null);function xe(e,t){switch(_e(ye,t),_e(ve,e),_e(E,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?cf(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=cf(t),e=lf(t,e);else switch(e){case`svg`:e=1;break;case`math`:e=2;break;default:e=0}}ge(E),_e(E,e)}function Se(){ge(E),ge(ve),ge(ye)}function Ce(e){e.memoizedState!==null&&_e(be,e);var t=E.current,n=lf(t,e.type);t!==n&&(_e(ve,e),_e(E,n))}function we(e){ve.current===e&&(ge(E),ge(ve)),be.current===e&&(ge(be),_p._currentValue=fe)}var Te,Ee;function De(e){if(Te===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);Te=t&&t[1]||``,Ee=-1<e.stack.indexOf(`
    at`)?` (<anonymous>)`:-1<e.stack.indexOf(`@`)?`@unknown:0:0`:``}return`
`+Te+e+Ee}var Oe=!1;function ke(e,t){if(!e||Oe)return``;Oe=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,`props`,{set:function(){throw Error()}}),typeof Reflect==`object`&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}}else{try{throw Error()}catch(e){r=e}(n=e())&&typeof n.catch==`function`&&n.catch(function(){})}}catch(e){if(e&&r&&typeof e.stack==`string`)return[e.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName=`DetermineComponentFrameRoot`;var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,`name`);i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,`name`,{value:`DetermineComponentFrameRoot`});var a=r.DetermineComponentFrameRoot(),o=a[0],s=a[1];if(o&&s){var c=o.split(`
`),l=s.split(`
`);for(i=r=0;r<c.length&&!c[r].includes(`DetermineComponentFrameRoot`);)r++;for(;i<l.length&&!l[i].includes(`DetermineComponentFrameRoot`);)i++;if(r===c.length||i===l.length)for(r=c.length-1,i=l.length-1;1<=r&&0<=i&&c[r]!==l[i];)i--;for(;1<=r&&0<=i;r--,i--)if(c[r]!==l[i]){if(r!==1||i!==1)do if(r--,i--,0>i||c[r]!==l[i]){var u=`
`+c[r].replace(` at new `,` at `);return e.displayName&&u.includes(`<anonymous>`)&&(u=u.replace(`<anonymous>`,e.displayName)),u}while(1<=r&&0<=i);break}}}finally{Oe=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:``)?De(n):``}function Ae(e,t){switch(e.tag){case 26:case 27:case 5:return De(e.type);case 16:return De(`Lazy`);case 13:return e.child!==t&&t!==null?De(`Suspense Fallback`):De(`Suspense`);case 19:return De(`SuspenseList`);case 0:case 15:return ke(e.type,!1);case 11:return ke(e.type.render,!1);case 1:return ke(e.type,!0);case 31:return De(`Activity`);default:return``}}function je(e){try{var t=``,n=null;do t+=Ae(e,n),n=e,e=e.return;while(e);return t}catch(e){return`
Error generating stack: `+e.message+`
`+e.stack}}var Me=Object.prototype.hasOwnProperty,Ne=t.unstable_scheduleCallback,Pe=t.unstable_cancelCallback,Fe=t.unstable_shouldYield,Ie=t.unstable_requestPaint,Le=t.unstable_now,Re=t.unstable_getCurrentPriorityLevel,ze=t.unstable_ImmediatePriority,Be=t.unstable_UserBlockingPriority,Ve=t.unstable_NormalPriority,He=t.unstable_LowPriority,Ue=t.unstable_IdlePriority,We=t.log,Ge=t.unstable_setDisableYieldValue,Ke=null,qe=null;function Je(e){if(typeof We==`function`&&Ge(e),qe&&typeof qe.setStrictMode==`function`)try{qe.setStrictMode(Ke,e)}catch{}}var Ye=Math.clz32?Math.clz32:Qe,Xe=Math.log,Ze=Math.LN2;function Qe(e){return e>>>=0,e===0?32:31-(Xe(e)/Ze|0)|0}var $e=256,et=262144,tt=4194304;function nt(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function rt(e,t,n){var r=e.pendingLanes;if(r===0)return 0;var i=0,a=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var s=r&134217727;return s===0?(s=r&~a,s===0?o===0?n||(n=r&~e,n!==0&&(i=nt(n))):i=nt(o):i=nt(s)):(r=s&~a,r===0?(o&=s,o===0?n||(n=s&~e,n!==0&&(i=nt(n))):i=nt(o)):i=nt(r)),i===0?0:t!==0&&t!==i&&(t&a)===0&&(a=i&-i,n=t&-t,a>=n||a===32&&n&4194048)?t:i}function it(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function at(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ot(){var e=tt;return tt<<=1,!(tt&62914560)&&(tt=4194304),e}function st(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ct(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function lt(e,t,n,r,i,a){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,c=e.expirationTimes,l=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-Ye(n),d=1<<u;s[u]=0,c[u]=-1;var f=l[u];if(f!==null)for(l[u]=null,u=0;u<f.length;u++){var p=f[u];p!==null&&(p.lane&=-536870913)}n&=~d}r!==0&&ut(e,r,0),a!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=a&~(o&~t))}function ut(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-Ye(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|n&261930}function dt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ye(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function ft(e,t){var n=t&-t;return n=n&42?1:pt(n),(n&(e.suspendedLanes|t))===0?n:0}function pt(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function mt(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function ht(){var e=T.p;return e===0?(e=window.event,e===void 0?32:Np(e.type)):e}function gt(e,t){var n=T.p;try{return T.p=e,t()}finally{T.p=n}}var _t=Math.random().toString(36).slice(2),vt=`__reactFiber$`+_t,yt=`__reactProps$`+_t,bt=`__reactContainer$`+_t,xt=`__reactEvents$`+_t,St=`__reactListeners$`+_t,Ct=`__reactHandles$`+_t,wt=`__reactResources$`+_t,Tt=`__reactMarker$`+_t;function Et(e){delete e[vt],delete e[yt],delete e[xt],delete e[St],delete e[Ct]}function Dt(e){var t=e[vt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[bt]||n[vt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Af(e);e!==null;){if(n=e[vt])return n;e=Af(e)}return t}e=n,n=e.parentNode}return null}function Ot(e){if(e=e[vt]||e[bt]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function D(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function kt(e){var t=e[wt];return t||=e[wt]={hoistableStyles:new Map,hoistableScripts:new Map},t}function At(e){e[Tt]=!0}var jt=new Set,Mt={};function Nt(e,t){Pt(e,t),Pt(e+`Capture`,t)}function Pt(e,t){for(Mt[e]=t,e=0;e<t.length;e++)jt.add(t[e])}var Ft=RegExp(`^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$`),It={},Lt={};function Rt(e){return Me.call(Lt,e)?!0:Me.call(It,e)?!1:Ft.test(e)?Lt[e]=!0:(It[e]=!0,!1)}function zt(e,t,n){if(Rt(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case`undefined`:case`function`:case`symbol`:e.removeAttribute(t);return;case`boolean`:var r=t.toLowerCase().slice(0,5);if(r!==`data-`&&r!==`aria-`){e.removeAttribute(t);return}}e.setAttribute(t,``+n)}}function Bt(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case`undefined`:case`function`:case`symbol`:case`boolean`:e.removeAttribute(t);return}e.setAttribute(t,``+n)}}function Vt(e,t,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case`undefined`:case`function`:case`symbol`:case`boolean`:e.removeAttribute(n);return}e.setAttributeNS(t,n,``+r)}}function O(e){switch(typeof e){case`bigint`:case`boolean`:case`number`:case`string`:case`undefined`:return e;case`object`:return e;default:return``}}function Ht(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()===`input`&&(t===`checkbox`||t===`radio`)}function Ut(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&r!==void 0&&typeof r.get==`function`&&typeof r.set==`function`){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=``+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=``+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Wt(e){if(!e._valueTracker){var t=Ht(e)?`checked`:`value`;e._valueTracker=Ut(e,t,``+e[t])}}function Gt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r=``;return e&&(r=Ht(e)?e.checked?`true`:`false`:e.value),e=r,e===n?!1:(t.setValue(e),!0)}function Kt(e){if(e||=typeof document<`u`?document:void 0,e===void 0)return null;try{return e.activeElement||e.body}catch{return e.body}}var qt=/[\n"\\]/g;function Jt(e){return e.replace(qt,function(e){return`\\`+e.charCodeAt(0).toString(16)+` `})}function Yt(e,t,n,r,i,a,o,s){e.name=``,o!=null&&typeof o!=`function`&&typeof o!=`symbol`&&typeof o!=`boolean`?e.type=o:e.removeAttribute(`type`),t==null?o!==`submit`&&o!==`reset`||e.removeAttribute(`value`):o===`number`?(t===0&&e.value===``||e.value!=t)&&(e.value=``+O(t)):e.value!==``+O(t)&&(e.value=``+O(t)),t==null?n==null?r!=null&&e.removeAttribute(`value`):Zt(e,o,O(n)):Zt(e,o,O(t)),i==null&&a!=null&&(e.defaultChecked=!!a),i!=null&&(e.checked=i&&typeof i!=`function`&&typeof i!=`symbol`),s!=null&&typeof s!=`function`&&typeof s!=`symbol`&&typeof s!=`boolean`?e.name=``+O(s):e.removeAttribute(`name`)}function Xt(e,t,n,r,i,a,o,s){if(a!=null&&typeof a!=`function`&&typeof a!=`symbol`&&typeof a!=`boolean`&&(e.type=a),t!=null||n!=null){if(!(a!==`submit`&&a!==`reset`||t!=null)){Wt(e);return}n=n==null?``:``+O(n),t=t==null?n:``+O(t),s||t===e.value||(e.value=t),e.defaultValue=t}r??=i,r=typeof r!=`function`&&typeof r!=`symbol`&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,o!=null&&typeof o!=`function`&&typeof o!=`symbol`&&typeof o!=`boolean`&&(e.name=o),Wt(e)}function Zt(e,t,n){t===`number`&&Kt(e.ownerDocument)===e||e.defaultValue===``+n||(e.defaultValue=``+n)}function Qt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t[`$`+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty(`$`+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=``+O(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function $t(e,t,n){if(t!=null&&(t=``+O(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n==null?``:``+O(n)}function en(e,t,n,r){if(t==null){if(r!=null){if(n!=null)throw Error(i(92));if(de(r)){if(1<r.length)throw Error(i(93));r=r[0]}n=r}n??=``,t=n}n=O(t),e.defaultValue=n,r=e.textContent,r===n&&r!==``&&r!==null&&(e.value=r),Wt(e)}function tn(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var nn=new Set(`animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp`.split(` `));function rn(e,t,n){var r=t.indexOf(`--`)===0;n==null||typeof n==`boolean`||n===``?r?e.setProperty(t,``):t===`float`?e.cssFloat=``:e[t]=``:r?e.setProperty(t,n):typeof n!=`number`||n===0||nn.has(t)?t===`float`?e.cssFloat=n:e[t]=(``+n).trim():e[t]=n+`px`}function an(e,t,n){if(t!=null&&typeof t!=`object`)throw Error(i(62));if(e=e.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf(`--`)===0?e.setProperty(r,``):r===`float`?e.cssFloat=``:e[r]=``);for(var a in t)r=t[a],t.hasOwnProperty(a)&&n[a]!==r&&rn(e,a,r)}else for(var o in t)t.hasOwnProperty(o)&&rn(e,o,t[o])}function on(e){if(e.indexOf(`-`)===-1)return!1;switch(e){case`annotation-xml`:case`color-profile`:case`font-face`:case`font-face-src`:case`font-face-uri`:case`font-face-format`:case`font-face-name`:case`missing-glyph`:return!1;default:return!0}}var sn=new Map([[`acceptCharset`,`accept-charset`],[`htmlFor`,`for`],[`httpEquiv`,`http-equiv`],[`crossOrigin`,`crossorigin`],[`accentHeight`,`accent-height`],[`alignmentBaseline`,`alignment-baseline`],[`arabicForm`,`arabic-form`],[`baselineShift`,`baseline-shift`],[`capHeight`,`cap-height`],[`clipPath`,`clip-path`],[`clipRule`,`clip-rule`],[`colorInterpolation`,`color-interpolation`],[`colorInterpolationFilters`,`color-interpolation-filters`],[`colorProfile`,`color-profile`],[`colorRendering`,`color-rendering`],[`dominantBaseline`,`dominant-baseline`],[`enableBackground`,`enable-background`],[`fillOpacity`,`fill-opacity`],[`fillRule`,`fill-rule`],[`floodColor`,`flood-color`],[`floodOpacity`,`flood-opacity`],[`fontFamily`,`font-family`],[`fontSize`,`font-size`],[`fontSizeAdjust`,`font-size-adjust`],[`fontStretch`,`font-stretch`],[`fontStyle`,`font-style`],[`fontVariant`,`font-variant`],[`fontWeight`,`font-weight`],[`glyphName`,`glyph-name`],[`glyphOrientationHorizontal`,`glyph-orientation-horizontal`],[`glyphOrientationVertical`,`glyph-orientation-vertical`],[`horizAdvX`,`horiz-adv-x`],[`horizOriginX`,`horiz-origin-x`],[`imageRendering`,`image-rendering`],[`letterSpacing`,`letter-spacing`],[`lightingColor`,`lighting-color`],[`markerEnd`,`marker-end`],[`markerMid`,`marker-mid`],[`markerStart`,`marker-start`],[`overlinePosition`,`overline-position`],[`overlineThickness`,`overline-thickness`],[`paintOrder`,`paint-order`],[`panose-1`,`panose-1`],[`pointerEvents`,`pointer-events`],[`renderingIntent`,`rendering-intent`],[`shapeRendering`,`shape-rendering`],[`stopColor`,`stop-color`],[`stopOpacity`,`stop-opacity`],[`strikethroughPosition`,`strikethrough-position`],[`strikethroughThickness`,`strikethrough-thickness`],[`strokeDasharray`,`stroke-dasharray`],[`strokeDashoffset`,`stroke-dashoffset`],[`strokeLinecap`,`stroke-linecap`],[`strokeLinejoin`,`stroke-linejoin`],[`strokeMiterlimit`,`stroke-miterlimit`],[`strokeOpacity`,`stroke-opacity`],[`strokeWidth`,`stroke-width`],[`textAnchor`,`text-anchor`],[`textDecoration`,`text-decoration`],[`textRendering`,`text-rendering`],[`transformOrigin`,`transform-origin`],[`underlinePosition`,`underline-position`],[`underlineThickness`,`underline-thickness`],[`unicodeBidi`,`unicode-bidi`],[`unicodeRange`,`unicode-range`],[`unitsPerEm`,`units-per-em`],[`vAlphabetic`,`v-alphabetic`],[`vHanging`,`v-hanging`],[`vIdeographic`,`v-ideographic`],[`vMathematical`,`v-mathematical`],[`vectorEffect`,`vector-effect`],[`vertAdvY`,`vert-adv-y`],[`vertOriginX`,`vert-origin-x`],[`vertOriginY`,`vert-origin-y`],[`wordSpacing`,`word-spacing`],[`writingMode`,`writing-mode`],[`xmlnsXlink`,`xmlns:xlink`],[`xHeight`,`x-height`]]),cn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ln(e){return cn.test(``+e)?`javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')`:e}function un(){}var dn=null;function fn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var pn=null,mn=null;function hn(e){var t=Ot(e);if(t&&(e=t.stateNode)){var n=e[yt]||null;a:switch(e=t.stateNode,t.type){case`input`:if(Yt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type===`radio`&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll(`input[name="`+Jt(``+t)+`"][type="radio"]`),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=r[yt]||null;if(!a)throw Error(i(90));Yt(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)r=n[t],r.form===e.form&&Gt(r)}break a;case`textarea`:$t(e,n.value,n.defaultValue);break a;case`select`:t=n.value,t!=null&&Qt(e,!!n.multiple,t,!1)}}}var gn=!1;function _n(e,t,n){if(gn)return e(t,n);gn=!0;try{return e(t)}finally{if(gn=!1,(pn!==null||mn!==null)&&(Gu(),pn&&(t=pn,e=mn,mn=pn=null,hn(t),e)))for(t=0;t<e.length;t++)hn(e[t])}}function vn(e,t){var n=e.stateNode;if(n===null)return null;var r=n[yt]||null;if(r===null)return null;n=r[t];a:switch(t){case`onClick`:case`onClickCapture`:case`onDoubleClick`:case`onDoubleClickCapture`:case`onMouseDown`:case`onMouseDownCapture`:case`onMouseMove`:case`onMouseMoveCapture`:case`onMouseUp`:case`onMouseUpCapture`:case`onMouseEnter`:(r=!r.disabled)||(e=e.type,r=!(e===`button`||e===`input`||e===`select`||e===`textarea`)),e=!r;break a;default:e=!1}if(e)return null;if(n&&typeof n!=`function`)throw Error(i(231,t,typeof n));return n}var yn=!(typeof window>`u`||window.document===void 0||window.document.createElement===void 0),bn=!1;if(yn)try{var xn={};Object.defineProperty(xn,`passive`,{get:function(){bn=!0}}),window.addEventListener(`test`,xn,xn),window.removeEventListener(`test`,xn,xn)}catch{bn=!1}var Sn=null,Cn=null,wn=null;function Tn(){if(wn)return wn;var e,t=Cn,n=t.length,r,i=`value`in Sn?Sn.value:Sn.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[a-r];r++);return wn=i.slice(e,1<r?1-r:void 0)}function En(e){var t=e.keyCode;return`charCode`in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Dn(){return!0}function On(){return!1}function kn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented==null?!1===i.returnValue:i.defaultPrevented)?Dn:On,this.isPropagationStopped=On,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!=`unknown`&&(e.returnValue=!1),this.isDefaultPrevented=Dn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!=`unknown`&&(e.cancelBubble=!0),this.isPropagationStopped=Dn)},persist:function(){},isPersistent:Dn}),t}var An={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jn=kn(An),Mn=h({},An,{view:0,detail:0}),Nn=kn(Mn),Pn,Fn,In,Ln=h({},Mn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$n,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return`movementX`in e?e.movementX:(e!==In&&(In&&e.type===`mousemove`?(Pn=e.screenX-In.screenX,Fn=e.screenY-In.screenY):Fn=Pn=0,In=e),Pn)},movementY:function(e){return`movementY`in e?e.movementY:Fn}}),Rn=kn(Ln),zn=h({},Ln,{dataTransfer:0}),Bn=kn(zn),Vn=h({},Mn,{relatedTarget:0}),Hn=kn(Vn),Un=h({},An,{animationName:0,elapsedTime:0,pseudoElement:0}),Wn=kn(Un),Gn=h({},An,{clipboardData:function(e){return`clipboardData`in e?e.clipboardData:window.clipboardData}}),Kn=kn(Gn),qn=h({},An,{data:0}),Jn=kn(qn),Yn={Esc:`Escape`,Spacebar:` `,Left:`ArrowLeft`,Up:`ArrowUp`,Right:`ArrowRight`,Down:`ArrowDown`,Del:`Delete`,Win:`OS`,Menu:`ContextMenu`,Apps:`ContextMenu`,Scroll:`ScrollLock`,MozPrintableKey:`Unidentified`},Xn={8:`Backspace`,9:`Tab`,12:`Clear`,13:`Enter`,16:`Shift`,17:`Control`,18:`Alt`,19:`Pause`,20:`CapsLock`,27:`Escape`,32:` `,33:`PageUp`,34:`PageDown`,35:`End`,36:`Home`,37:`ArrowLeft`,38:`ArrowUp`,39:`ArrowRight`,40:`ArrowDown`,45:`Insert`,46:`Delete`,112:`F1`,113:`F2`,114:`F3`,115:`F4`,116:`F5`,117:`F6`,118:`F7`,119:`F8`,120:`F9`,121:`F10`,122:`F11`,123:`F12`,144:`NumLock`,145:`ScrollLock`,224:`Meta`},Zn={Alt:`altKey`,Control:`ctrlKey`,Meta:`metaKey`,Shift:`shiftKey`};function Qn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Zn[e])?!!t[e]:!1}function $n(){return Qn}var er=h({},Mn,{key:function(e){if(e.key){var t=Yn[e.key]||e.key;if(t!==`Unidentified`)return t}return e.type===`keypress`?(e=En(e),e===13?`Enter`:String.fromCharCode(e)):e.type===`keydown`||e.type===`keyup`?Xn[e.keyCode]||`Unidentified`:``},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$n,charCode:function(e){return e.type===`keypress`?En(e):0},keyCode:function(e){return e.type===`keydown`||e.type===`keyup`?e.keyCode:0},which:function(e){return e.type===`keypress`?En(e):e.type===`keydown`||e.type===`keyup`?e.keyCode:0}}),tr=kn(er),nr=h({},Ln,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rr=kn(nr),ir=h({},Mn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$n}),ar=kn(ir),or=h({},An,{propertyName:0,elapsedTime:0,pseudoElement:0}),sr=kn(or),cr=h({},Ln,{deltaX:function(e){return`deltaX`in e?e.deltaX:`wheelDeltaX`in e?-e.wheelDeltaX:0},deltaY:function(e){return`deltaY`in e?e.deltaY:`wheelDeltaY`in e?-e.wheelDeltaY:`wheelDelta`in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),lr=kn(cr),ur=h({},An,{newState:0,oldState:0}),dr=kn(ur),fr=[9,13,27,32],pr=yn&&`CompositionEvent`in window,mr=null;yn&&`documentMode`in document&&(mr=document.documentMode);var hr=yn&&`TextEvent`in window&&!mr,gr=yn&&(!pr||mr&&8<mr&&11>=mr),_r=` `,vr=!1;function yr(e,t){switch(e){case`keyup`:return fr.indexOf(t.keyCode)!==-1;case`keydown`:return t.keyCode!==229;case`keypress`:case`mousedown`:case`focusout`:return!0;default:return!1}}function br(e){return e=e.detail,typeof e==`object`&&`data`in e?e.data:null}var xr=!1;function Sr(e,t){switch(e){case`compositionend`:return br(t);case`keypress`:return t.which===32?(vr=!0,_r):null;case`textInput`:return e=t.data,e===_r&&vr?null:e;default:return null}}function Cr(e,t){if(xr)return e===`compositionend`||!pr&&yr(e,t)?(e=Tn(),wn=Cn=Sn=null,xr=!1,e):null;switch(e){case`paste`:return null;case`keypress`:if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case`compositionend`:return gr&&t.locale!==`ko`?null:t.data;default:return null}}var wr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t===`input`?!!wr[e.type]:t===`textarea`}function Er(e,t,n,r){pn?mn?mn.push(r):mn=[r]:pn=r,t=Gd(t,`onChange`),0<t.length&&(n=new jn(`onChange`,`change`,null,n,r),e.push({event:n,listeners:t}))}var Dr=null,Or=null;function kr(e){zd(e,0)}function Ar(e){var t=D(e);if(Gt(t))return e}function jr(e,t){if(e===`change`)return t}var Mr=!1;if(yn){var Nr;if(yn){var Pr=`oninput`in document;if(!Pr){var Fr=document.createElement(`div`);Fr.setAttribute(`oninput`,`return;`),Pr=typeof Fr.oninput==`function`}Nr=Pr}else Nr=!1;Mr=Nr&&(!document.documentMode||9<document.documentMode)}function Ir(){Dr&&(Dr.detachEvent(`onpropertychange`,Lr),Or=Dr=null)}function Lr(e){if(e.propertyName===`value`&&Ar(Or)){var t=[];Er(t,Or,e,fn(e)),_n(kr,t)}}function Rr(e,t,n){e===`focusin`?(Ir(),Dr=t,Or=n,Dr.attachEvent(`onpropertychange`,Lr)):e===`focusout`&&Ir()}function zr(e){if(e===`selectionchange`||e===`keyup`||e===`keydown`)return Ar(Or)}function Br(e,t){if(e===`click`)return Ar(t)}function Vr(e,t){if(e===`input`||e===`change`)return Ar(t)}function Hr(e,t){return e===t&&(e!==0||1/e==1/t)||e!==e&&t!==t}var Ur=typeof Object.is==`function`?Object.is:Hr;function Wr(e,t){if(Ur(e,t))return!0;if(typeof e!=`object`||!e||typeof t!=`object`||!t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Me.call(t,i)||!Ur(e[i],t[i]))return!1}return!0}function Gr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Kr(e,t){var n=Gr(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}a:{for(;n;){if(n.nextSibling){n=n.nextSibling;break a}n=n.parentNode}n=void 0}n=Gr(n)}}function qr(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?qr(e,t.parentNode):`contains`in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Jr(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Kt(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href==`string`}catch{n=!1}if(n)e=t.contentWindow;else break;t=Kt(e.document)}return t}function Yr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t===`input`&&(e.type===`text`||e.type===`search`||e.type===`tel`||e.type===`url`||e.type===`password`)||t===`textarea`||e.contentEditable===`true`)}var Xr=yn&&`documentMode`in document&&11>=document.documentMode,Zr=null,Qr=null,$r=null,ei=!1;function ti(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ei||Zr==null||Zr!==Kt(r)||(r=Zr,`selectionStart`in r&&Yr(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),$r&&Wr($r,r)||($r=r,r=Gd(Qr,`onSelect`),0<r.length&&(t=new jn(`onSelect`,`select`,null,t,n),e.push({event:t,listeners:r}),t.target=Zr)))}function ni(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n[`Webkit`+e]=`webkit`+t,n[`Moz`+e]=`moz`+t,n}var ri={animationend:ni(`Animation`,`AnimationEnd`),animationiteration:ni(`Animation`,`AnimationIteration`),animationstart:ni(`Animation`,`AnimationStart`),transitionrun:ni(`Transition`,`TransitionRun`),transitionstart:ni(`Transition`,`TransitionStart`),transitioncancel:ni(`Transition`,`TransitionCancel`),transitionend:ni(`Transition`,`TransitionEnd`)},ii={},ai={};yn&&(ai=document.createElement(`div`).style,`AnimationEvent`in window||(delete ri.animationend.animation,delete ri.animationiteration.animation,delete ri.animationstart.animation),`TransitionEvent`in window||delete ri.transitionend.transition);function oi(e){if(ii[e])return ii[e];if(!ri[e])return e;var t=ri[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ai)return ii[e]=t[n];return e}var si=oi(`animationend`),ci=oi(`animationiteration`),li=oi(`animationstart`),ui=oi(`transitionrun`),di=oi(`transitionstart`),fi=oi(`transitioncancel`),pi=oi(`transitionend`),mi=new Map,hi=`abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel`.split(` `);hi.push(`scrollEnd`);function gi(e,t){mi.set(e,t),Nt(t,[e])}var _i=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)},vi=[],yi=0,bi=0;function xi(){for(var e=yi,t=bi=yi=0;t<e;){var n=vi[t];vi[t++]=null;var r=vi[t];vi[t++]=null;var i=vi[t];vi[t++]=null;var a=vi[t];if(vi[t++]=null,r!==null&&i!==null){var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}a!==0&&Ti(n,i,a)}}function Si(e,t,n,r){vi[yi++]=e,vi[yi++]=t,vi[yi++]=n,vi[yi++]=r,bi|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function Ci(e,t,n,r){return Si(e,t,n,r),Ei(e)}function wi(e,t){return Si(e,null,null,t),Ei(e)}function Ti(e,t,n){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n);for(var i=!1,a=e.return;a!==null;)a.childLanes|=n,r=a.alternate,r!==null&&(r.childLanes|=n),a.tag===22&&(e=a.stateNode,e===null||e._visibility&1||(i=!0)),e=a,a=a.return;return e.tag===3?(a=e.stateNode,i&&t!==null&&(i=31-Ye(n),e=a.hiddenUpdates,r=e[i],r===null?e[i]=[t]:r.push(t),t.lane=n|536870912),a):null}function Ei(e){if(50<Iu)throw Iu=0,Lu=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Di={};function Oi(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ki(e,t,n,r){return new Oi(e,t,n,r)}function Ai(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ji(e,t){var n=e.alternate;return n===null?(n=ki(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Mi(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ni(e,t,n,r,a,o){var s=0;if(r=e,typeof e==`function`)Ai(e)&&(s=1);else if(typeof e==`string`)s=cp(e,n,E.current)?26:e===`html`||e===`head`||e===`body`?27:5;else a:switch(e){case ae:return e=ki(31,n,t,a),e.elementType=ae,e.lanes=o,e;case y:return Pi(n.children,a,o,t);case b:s=8,a|=24;break;case x:return e=ki(12,n,t,a|2),e.elementType=x,e.lanes=o,e;case te:return e=ki(13,n,t,a),e.elementType=te,e.lanes=o,e;case ne:return e=ki(19,n,t,a),e.elementType=ne,e.lanes=o,e;default:if(typeof e==`object`&&e)switch(e.$$typeof){case S:s=10;break a;case ee:s=9;break a;case C:s=11;break a;case re:s=14;break a;case ie:s=16,r=null;break a}s=29,n=Error(i(130,e===null?`null`:typeof e,``)),r=null}return t=ki(s,n,t,a),t.elementType=e,t.type=r,t.lanes=o,t}function Pi(e,t,n,r){return e=ki(7,e,r,t),e.lanes=n,e}function Fi(e,t,n){return e=ki(6,e,null,t),e.lanes=n,e}function Ii(e){var t=ki(18,null,null,0);return t.stateNode=e,t}function Li(e,t,n){return t=ki(4,e.children===null?[]:e.children,e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ri=new WeakMap;function zi(e,t){if(typeof e==`object`&&e){var n=Ri.get(e);return n===void 0?(t={value:e,source:t,stack:je(t)},Ri.set(e,t),t):n}return{value:e,source:t,stack:je(t)}}var Bi=[],Vi=0,Hi=null,Ui=0,Wi=[],Gi=0,Ki=null,qi=1,Ji=``;function Yi(e,t){Bi[Vi++]=Ui,Bi[Vi++]=Hi,Hi=e,Ui=t}function Xi(e,t,n){Wi[Gi++]=qi,Wi[Gi++]=Ji,Wi[Gi++]=Ki,Ki=e;var r=qi;e=Ji;var i=32-Ye(r)-1;r&=~(1<<i),n+=1;var a=32-Ye(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,qi=1<<32-Ye(t)+i|n<<i|r,Ji=a+e}else qi=1<<a|n<<i|r,Ji=e}function Zi(e){e.return!==null&&(Yi(e,1),Xi(e,1,0))}function Qi(e){for(;e===Hi;)Hi=Bi[--Vi],Bi[Vi]=null,Ui=Bi[--Vi],Bi[Vi]=null;for(;e===Ki;)Ki=Wi[--Gi],Wi[Gi]=null,Ji=Wi[--Gi],Wi[Gi]=null,qi=Wi[--Gi],Wi[Gi]=null}function $i(e,t){Wi[Gi++]=qi,Wi[Gi++]=Ji,Wi[Gi++]=Ki,qi=t.id,Ji=t.overflow,Ki=e}var ea=null,ta=null,k=!1,na=null,ra=!1,ia=Error(i(519));function aa(e){var t=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?`text`:`HTML`,``));throw da(zi(t,e)),ia}function oa(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[vt]=e,t[yt]=r,n){case`dialog`:q(`cancel`,t),q(`close`,t);break;case`iframe`:case`object`:case`embed`:q(`load`,t);break;case`video`:case`audio`:for(n=0;n<Ld.length;n++)q(Ld[n],t);break;case`source`:q(`error`,t);break;case`img`:case`image`:case`link`:q(`error`,t),q(`load`,t);break;case`details`:q(`toggle`,t);break;case`input`:q(`invalid`,t),Xt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case`select`:q(`invalid`,t);break;case`textarea`:q(`invalid`,t),en(t,r.value,r.defaultValue,r.children)}n=r.children,typeof n!=`string`&&typeof n!=`number`&&typeof n!=`bigint`||t.textContent===``+n||!0===r.suppressHydrationWarning||Zd(t.textContent,n)?(r.popover!=null&&(q(`beforetoggle`,t),q(`toggle`,t)),r.onScroll!=null&&q(`scroll`,t),r.onScrollEnd!=null&&q(`scrollend`,t),r.onClick!=null&&(t.onclick=un),t=!0):t=!1,t||aa(e,!0)}function sa(e){for(ea=e.return;ea;)switch(ea.tag){case 5:case 31:case 13:ra=!1;return;case 27:case 3:ra=!0;return;default:ea=ea.return}}function ca(e){if(e!==ea)return!1;if(!k)return sa(e),k=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!==`form`&&n!==`button`)||uf(e.type,e.memoizedProps)),n=!n),n&&ta&&aa(e),sa(e),t===13){if(e=e.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(317));ta=kf(e)}else if(t===31){if(e=e.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(317));ta=kf(e)}else t===27?(t=ta,_f(e.type)?(e=Of,Of=null,ta=e):ta=t):ta=ea?Df(e.stateNode.nextSibling):null;return!0}function la(){ta=ea=null,k=!1}function ua(){var e=na;return e!==null&&(Su===null?Su=e:Su.push.apply(Su,e),na=null),e}function da(e){na===null?na=[e]:na.push(e)}var A=he(null),j=null,fa=null;function M(e,t,n){_e(A,t._currentValue),t._currentValue=n}function pa(e){e._currentValue=A.current,ge(A)}function ma(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)===t?r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t):(e.childLanes|=t,r!==null&&(r.childLanes|=t)),e===n)break;e=e.return}}function ha(e,t,n,r){var a=e.child;for(a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){var s=a.child;o=o.firstContext;a:for(;o!==null;){var c=o;o=a;for(var l=0;l<t.length;l++)if(c.context===t[l]){o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),ma(o.return,n,e),r||(s=null);break a}o=c.next}}else if(a.tag===18){if(s=a.return,s===null)throw Error(i(341));s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),ma(s,n,e),s=null}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}}function ga(e,t,n,r){e=null;for(var a=t,o=!1;a!==null;){if(!o){if(a.flags&524288)o=!0;else if(a.flags&262144)break}if(a.tag===10){var s=a.alternate;if(s===null)throw Error(i(387));if(s=s.memoizedProps,s!==null){var c=a.type;Ur(a.pendingProps.value,s.value)||(e===null?e=[c]:e.push(c))}}else if(a===be.current){if(s=a.alternate,s===null)throw Error(i(387));s.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(e===null?e=[_p]:e.push(_p))}a=a.return}e!==null&&ha(t,e,n,r),t.flags|=262144}function _a(e){for(e=e.firstContext;e!==null;){if(!Ur(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function N(e){j=e,fa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function va(e){return ba(j,e)}function ya(e,t){return j===null&&N(e),ba(e,t)}function ba(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},fa===null){if(e===null)throw Error(i(308));fa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else fa=fa.next=t;return n}var xa=typeof AbortController<`u`?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Sa=t.unstable_scheduleCallback,Ca=t.unstable_NormalPriority,wa={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ta(){return{controller:new xa,data:new Map,refCount:0}}function Ea(e){e.refCount--,e.refCount===0&&Sa(Ca,function(){e.controller.abort()})}var Da=null,Oa=0,ka=0,Aa=null;function ja(e,t){if(Da===null){var n=Da=[];Oa=0,ka=Ad(),Aa={status:`pending`,value:void 0,then:function(e){n.push(e)}}}return Oa++,t.then(Ma,Ma),t}function Ma(){if(--Oa===0&&Da!==null){Aa!==null&&(Aa.status=`fulfilled`);var e=Da;Da=null,ka=0,Aa=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Na(e,t){var n=[],r={status:`pending`,value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status=`fulfilled`,r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status=`rejected`,r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}var Pa=w.S;w.S=function(e,t){Tu=Le(),typeof t==`object`&&t&&typeof t.then==`function`&&ja(e,t),Pa!==null&&Pa(e,t)};var Fa=he(null);function P(){var e=Fa.current;return e===null?cu.pooledCache:e}function Ia(e,t){t===null?_e(Fa,Fa.current):_e(Fa,t.pool)}function La(){var e=P();return e===null?null:{parent:wa._currentValue,pool:e}}var Ra=Error(i(460)),za=Error(i(474)),Ba=Error(i(542)),Va={then:function(){}};function Ha(e){return e=e.status,e===`fulfilled`||e===`rejected`}function Ua(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(un,un),t=n),t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,qa(e),e;default:if(typeof t.status==`string`)t.then(un,un);else{if(e=cu,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status=`pending`,e.then(function(e){if(t.status===`pending`){var n=t;n.status=`fulfilled`,n.value=e}},function(e){if(t.status===`pending`){var n=t;n.status=`rejected`,n.reason=e}})}switch(t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,qa(e),e}throw Ga=t,Ra}}function Wa(e){try{var t=e._init;return t(e._payload)}catch(e){throw typeof e==`object`&&e&&typeof e.then==`function`?(Ga=e,Ra):e}}var Ga=null;function Ka(){if(Ga===null)throw Error(i(459));var e=Ga;return Ga=null,e}function qa(e){if(e===Ra||e===Ba)throw Error(i(483))}var Ja=null,Ya=0;function Xa(e){var t=Ya;return Ya+=1,Ja===null&&(Ja=[]),Ua(Ja,e,t)}function Za(e,t){t=t.props.ref,e.ref=t===void 0?null:t}function Qa(e,t){throw t.$$typeof===g?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e===`[object Object]`?`object with keys {`+Object.keys(t).join(`, `)+`}`:e)))}function $a(e){function t(t,n){if(e){var r=t.deletions;r===null?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;r!==null;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;e!==null;)e.key===null?t.set(e.index,e):t.set(e.key,e),e=e.sibling;return t}function a(e,t){return e=ji(e,t),e.index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?(r=t.alternate,r===null?(t.flags|=67108866,n):(r=r.index,r<n?(t.flags|=67108866,n):r)):(t.flags|=1048576,n)}function s(t){return e&&t.alternate===null&&(t.flags|=67108866),t}function c(e,t,n,r){return t===null||t.tag!==6?(t=Fi(n,e.mode,r),t.return=e,t):(t=a(t,n),t.return=e,t)}function l(e,t,n,r){var i=n.type;return i===y?d(e,t,n.props.children,r,n.key):t!==null&&(t.elementType===i||typeof i==`object`&&i&&i.$$typeof===ie&&Wa(i)===t.type)?(t=a(t,n.props),Za(t,n),t.return=e,t):(t=Ni(n.type,n.key,n.props,null,e.mode,r),Za(t,n),t.return=e,t)}function u(e,t,n,r){return t===null||t.tag!==4||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=Li(n,e.mode,r),t.return=e,t):(t=a(t,n.children||[]),t.return=e,t)}function d(e,t,n,r,i){return t===null||t.tag!==7?(t=Pi(n,e.mode,r,i),t.return=e,t):(t=a(t,n),t.return=e,t)}function f(e,t,n){if(typeof t==`string`&&t!==``||typeof t==`number`||typeof t==`bigint`)return t=Fi(``+t,e.mode,n),t.return=e,t;if(typeof t==`object`&&t){switch(t.$$typeof){case _:return n=Ni(t.type,t.key,t.props,null,e.mode,n),Za(n,t),n.return=e,n;case v:return t=Li(t,e.mode,n),t.return=e,t;case ie:return t=Wa(t),f(e,t,n)}if(de(t)||ce(t))return t=Pi(t,e.mode,n,null),t.return=e,t;if(typeof t.then==`function`)return f(e,Xa(t),n);if(t.$$typeof===S)return f(e,ya(e,t),n);Qa(e,t)}return null}function p(e,t,n,r){var i=t===null?null:t.key;if(typeof n==`string`&&n!==``||typeof n==`number`||typeof n==`bigint`)return i===null?c(e,t,``+n,r):null;if(typeof n==`object`&&n){switch(n.$$typeof){case _:return n.key===i?l(e,t,n,r):null;case v:return n.key===i?u(e,t,n,r):null;case ie:return n=Wa(n),p(e,t,n,r)}if(de(n)||ce(n))return i===null?d(e,t,n,r,null):null;if(typeof n.then==`function`)return p(e,t,Xa(n),r);if(n.$$typeof===S)return p(e,t,ya(e,n),r);Qa(e,n)}return null}function m(e,t,n,r,i){if(typeof r==`string`&&r!==``||typeof r==`number`||typeof r==`bigint`)return e=e.get(n)||null,c(t,e,``+r,i);if(typeof r==`object`&&r){switch(r.$$typeof){case _:return e=e.get(r.key===null?n:r.key)||null,l(t,e,r,i);case v:return e=e.get(r.key===null?n:r.key)||null,u(t,e,r,i);case ie:return r=Wa(r),m(e,t,n,r,i)}if(de(r)||ce(r))return e=e.get(n)||null,d(t,e,r,i,null);if(typeof r.then==`function`)return m(e,t,n,Xa(r),i);if(r.$$typeof===S)return m(e,t,n,ya(t,r),i);Qa(t,r)}return null}function h(i,a,s,c){for(var l=null,u=null,d=a,h=a=0,g=null;d!==null&&h<s.length;h++){d.index>h?(g=d,d=null):g=d.sibling;var _=p(i,d,s[h],c);if(_===null){d===null&&(d=g);break}e&&d&&_.alternate===null&&t(i,d),a=o(_,a,h),u===null?l=_:u.sibling=_,u=_,d=g}if(h===s.length)return n(i,d),k&&Yi(i,h),l;if(d===null){for(;h<s.length;h++)d=f(i,s[h],c),d!==null&&(a=o(d,a,h),u===null?l=d:u.sibling=d,u=d);return k&&Yi(i,h),l}for(d=r(d);h<s.length;h++)g=m(d,i,h,s[h],c),g!==null&&(e&&g.alternate!==null&&d.delete(g.key===null?h:g.key),a=o(g,a,h),u===null?l=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),k&&Yi(i,h),l}function g(a,s,c,l){if(c==null)throw Error(i(151));for(var u=null,d=null,h=s,g=s=0,_=null,v=c.next();h!==null&&!v.done;g++,v=c.next()){h.index>g?(_=h,h=null):_=h.sibling;var y=p(a,h,v.value,l);if(y===null){h===null&&(h=_);break}e&&h&&y.alternate===null&&t(a,h),s=o(y,s,g),d===null?u=y:d.sibling=y,d=y,h=_}if(v.done)return n(a,h),k&&Yi(a,g),u;if(h===null){for(;!v.done;g++,v=c.next())v=f(a,v.value,l),v!==null&&(s=o(v,s,g),d===null?u=v:d.sibling=v,d=v);return k&&Yi(a,g),u}for(h=r(h);!v.done;g++,v=c.next())v=m(h,a,g,v.value,l),v!==null&&(e&&v.alternate!==null&&h.delete(v.key===null?g:v.key),s=o(v,s,g),d===null?u=v:d.sibling=v,d=v);return e&&h.forEach(function(e){return t(a,e)}),k&&Yi(a,g),u}function b(e,r,o,c){if(typeof o==`object`&&o&&o.type===y&&o.key===null&&(o=o.props.children),typeof o==`object`&&o){switch(o.$$typeof){case _:a:{for(var l=o.key;r!==null;){if(r.key===l){if(l=o.type,l===y){if(r.tag===7){n(e,r.sibling),c=a(r,o.props.children),c.return=e,e=c;break a}}else if(r.elementType===l||typeof l==`object`&&l&&l.$$typeof===ie&&Wa(l)===r.type){n(e,r.sibling),c=a(r,o.props),Za(c,o),c.return=e,e=c;break a}n(e,r);break}else t(e,r);r=r.sibling}o.type===y?(c=Pi(o.props.children,e.mode,c,o.key),c.return=e,e=c):(c=Ni(o.type,o.key,o.props,null,e.mode,c),Za(c,o),c.return=e,e=c)}return s(e);case v:a:{for(l=o.key;r!==null;){if(r.key===l)if(r.tag===4&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),c=a(r,o.children||[]),c.return=e,e=c;break a}else{n(e,r);break}else t(e,r);r=r.sibling}c=Li(o,e.mode,c),c.return=e,e=c}return s(e);case ie:return o=Wa(o),b(e,r,o,c)}if(de(o))return h(e,r,o,c);if(ce(o)){if(l=ce(o),typeof l!=`function`)throw Error(i(150));return o=l.call(o),g(e,r,o,c)}if(typeof o.then==`function`)return b(e,r,Xa(o),c);if(o.$$typeof===S)return b(e,r,ya(e,o),c);Qa(e,o)}return typeof o==`string`&&o!==``||typeof o==`number`||typeof o==`bigint`?(o=``+o,r!==null&&r.tag===6?(n(e,r.sibling),c=a(r,o),c.return=e,e=c):(n(e,r),c=Fi(o,e.mode,c),c.return=e,e=c),s(e)):n(e,r)}return function(e,t,n,r){try{Ya=0;var i=b(e,t,n,r);return Ja=null,i}catch(t){if(t===Ra||t===Ba)throw t;var a=ki(29,t,null,e.mode);return a.lanes=r,a.return=e,a}}}var eo=$a(!0),to=$a(!1),no=!1;function ro(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function io(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ao(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function oo(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,su&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Ei(e),Ti(e,null,n),t}return Si(e,r,t,n),Ei(e)}function so(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,n&4194048)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,dt(e,n)}}function co(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var lo=!1;function F(){if(lo){var e=Aa;if(e!==null)throw e}}function uo(e,t,n,r){lo=!1;var i=e.updateQueue;no=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var c=s,l=c.next;c.next=null,o===null?a=l:o.next=l,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==o&&(s===null?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c))}if(a!==null){var d=i.baseState;o=0,u=l=c=null,s=a;do{var f=s.lane&-536870913,p=f!==s.lane;if(p?(R&f)===f:(r&f)===f){f!==0&&f===ka&&(lo=!0),u!==null&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});a:{var m=e,g=s;f=t;var _=n;switch(g.tag){case 1:if(m=g.payload,typeof m==`function`){d=m.call(_,d,f);break a}d=m;break a;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m==`function`?m.call(_,d,f):m,f==null)break a;d=h({},d,f);break a;case 2:no=!0}}f=s.callback,f!==null&&(e.flags|=64,p&&(e.flags|=8192),p=i.callbacks,p===null?i.callbacks=[f]:p.push(f))}else p={lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(l=u=p,c=d):u=u.next=p,o|=f;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;p=s,s=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,a===null&&(i.shared.lanes=0),gu|=o,e.lanes=o,e.memoizedState=d}}function fo(e,t){if(typeof e!=`function`)throw Error(i(191,e));e.call(t)}function po(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)fo(n[e],t)}var mo=he(null),ho=he(0);function go(e,t){e=mu,_e(ho,e),_e(mo,t),mu=e|t.baseLanes}function _o(){_e(ho,mu),_e(mo,mo.current)}function vo(){mu=ho.current,ge(mo),ge(ho)}var yo=he(null),bo=null;function xo(e){var t=e.alternate;_e(Eo,Eo.current&1),_e(yo,e),bo===null&&(t===null||mo.current!==null||t.memoizedState!==null)&&(bo=e)}function So(e){_e(Eo,Eo.current),_e(yo,e),bo===null&&(bo=e)}function Co(e){e.tag===22?(_e(Eo,Eo.current),_e(yo,e),bo===null&&(bo=e)):wo(e)}function wo(){_e(Eo,Eo.current),_e(yo,yo.current)}function To(e){ge(yo),bo===e&&(bo=null),ge(Eo)}var Eo=he(0);function Do(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||wf(n)||Tf(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder===`forwards`||t.memoizedProps.revealOrder===`backwards`||t.memoizedProps.revealOrder===`unstable_legacy-backwards`||t.memoizedProps.revealOrder===`together`)){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Oo=0,I=null,ko=null,Ao=null,jo=!1,Mo=!1,No=!1,Po=0,Fo=0,Io=null,Lo=0;function Ro(){throw Error(i(321))}function zo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ur(e[n],t[n]))return!1;return!0}function Bo(e,t,n,r,i,a){return Oo=a,I=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,w.H=e===null||e.memoizedState===null?ac:oc,No=!1,a=n(r,i),No=!1,Mo&&(a=Ho(t,n,r,i)),Vo(e),a}function Vo(e){w.H=ic;var t=ko!==null&&ko.next!==null;if(Oo=0,Ao=ko=I=null,jo=!1,Fo=0,Io=null,t)throw Error(i(300));e===null||Cc||(e=e.dependencies,e!==null&&_a(e)&&(Cc=!0))}function Ho(e,t,n,r){I=e;var a=0;do{if(Mo&&(Io=null),Fo=0,Mo=!1,25<=a)throw Error(i(301));if(a+=1,Ao=ko=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}w.H=sc,o=t(n,r)}while(Mo);return o}function Uo(){var e=w.H,t=e.useState()[0];return t=typeof t.then==`function`?Xo(t):t,e=e.useState()[0],(ko===null?null:ko.memoizedState)!==e&&(I.flags|=1024),t}function Wo(){var e=Po!==0;return Po=0,e}function Go(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Ko(e){if(jo){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}jo=!1}Oo=0,Ao=ko=I=null,Mo=!1,Fo=Po=0,Io=null}function qo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ao===null?I.memoizedState=Ao=e:Ao=Ao.next=e,Ao}function Jo(){if(ko===null){var e=I.alternate;e=e===null?null:e.memoizedState}else e=ko.next;var t=Ao===null?I.memoizedState:Ao.next;if(t!==null)Ao=t,ko=e;else{if(e===null)throw I.alternate===null?Error(i(467)):Error(i(310));ko=e,e={memoizedState:ko.memoizedState,baseState:ko.baseState,baseQueue:ko.baseQueue,queue:ko.queue,next:null},Ao===null?I.memoizedState=Ao=e:Ao=Ao.next=e}return Ao}function Yo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xo(e){var t=Fo;return Fo+=1,Io===null&&(Io=[]),e=Ua(Io,e,t),t=I,(Ao===null?t.memoizedState:Ao.next)===null&&(t=t.alternate,w.H=t===null||t.memoizedState===null?ac:oc),e}function Zo(e){if(typeof e==`object`&&e){if(typeof e.then==`function`)return Xo(e);if(e.$$typeof===S)return va(e)}throw Error(i(438,String(e)))}function Qo(e){var t=null,n=I.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var r=I.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(t??={data:[],index:0},n===null&&(n=Yo(),I.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=oe;return t.index++,n}function $o(e,t){return typeof t==`function`?t(e):t}function es(e){var t=Jo();return ts(t,ko,e)}function ts(e,t,n){var r=e.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=n;var a=e.baseQueue,o=r.pending;if(o!==null){if(a!==null){var s=a.next;a.next=o.next,o.next=s}t.baseQueue=a=o,r.pending=null}if(o=e.baseState,a===null)e.memoizedState=o;else{t=a.next;var c=s=null,l=null,u=t,d=!1;do{var f=u.lane&-536870913;if(f===u.lane?(Oo&f)===f:(R&f)===f){var p=u.revertLane;if(p===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),f===ka&&(d=!0);else if((Oo&p)===p){u=u.next,p===ka&&(d=!0);continue}else f={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=f,s=o):l=l.next=f,I.lanes|=p,gu|=p;f=u.action,No&&n(o,f),o=u.hasEagerState?u.eagerState:n(o,f)}else p={lane:f,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=p,s=o):l=l.next=p,I.lanes|=f,gu|=f;u=u.next}while(u!==null&&u!==t);if(l===null?s=o:l.next=c,!Ur(o,e.memoizedState)&&(Cc=!0,d&&(n=Aa,n!==null)))throw n;e.memoizedState=o,e.baseState=s,e.baseQueue=l,r.lastRenderedState=o}return a===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function ns(e){var t=Jo(),n=t.queue;if(n===null)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(a!==null){n.pending=null;var s=a=a.next;do o=e(o,s.action),s=s.next;while(s!==a);Ur(o,t.memoizedState)||(Cc=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function rs(e,t,n){var r=I,a=Jo(),o=k;if(o){if(n===void 0)throw Error(i(407));n=n()}else n=t();var s=!Ur((ko||a).memoizedState,n);if(s&&(a.memoizedState=n,Cc=!0),a=a.queue,As(cs.bind(null,r,a,e),[e]),a.getSnapshot!==t||s||Ao!==null&&Ao.memoizedState.tag&1){if(r.flags|=2048,Ts(9,{destroy:void 0},ss.bind(null,r,a,n,t),null),cu===null)throw Error(i(349));o||Oo&127||os(r,t,n)}return n}function os(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=I.updateQueue,t===null?(t=Yo(),I.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ss(e,t,n,r){t.value=n,t.getSnapshot=r,ls(t)&&us(e)}function cs(e,t,n){return n(function(){ls(t)&&us(e)})}function ls(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ur(e,n)}catch{return!0}}function us(e){var t=wi(e,2);t!==null&&Bu(t,e,2)}function ds(e){var t=qo();if(typeof e==`function`){var n=e;if(e=n(),No){Je(!0);try{n()}finally{Je(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$o,lastRenderedState:e},t}function fs(e,t,n,r){return e.baseState=n,ts(e,ko,typeof r==`function`?r:$o)}function ps(e,t,n,r,a){if(tc(e))throw Error(i(485));if(e=t.action,e!==null){var o={payload:a,action:e,next:null,isTransition:!0,status:`pending`,value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};w.T===null?o.isTransition=!1:n(!0),r(o),n=t.pending,n===null?(o.next=t.pending=o,ms(t,o)):(o.next=n.next,t.pending=n.next=o)}}function ms(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var a=w.T,o={};w.T=o;try{var s=n(i,r),c=w.S;c!==null&&c(o,s),hs(e,t,s)}catch(n){_s(e,t,n)}finally{a!==null&&o.types!==null&&(a.types=o.types),w.T=a}}else try{a=n(i,r),hs(e,t,a)}catch(n){_s(e,t,n)}}function hs(e,t,n){typeof n==`object`&&n&&typeof n.then==`function`?n.then(function(n){gs(e,t,n)},function(n){return _s(e,t,n)}):gs(e,t,n)}function gs(e,t,n){t.status=`fulfilled`,t.value=n,vs(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,ms(e,n)))}function _s(e,t,n){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status=`rejected`,t.reason=n,vs(t),t=t.next;while(t!==r)}e.action=null}function vs(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ys(e,t){return t}function bs(e,t){if(k){var n=cu.formState;if(n!==null){a:{var r=I;if(k){if(ta){b:{for(var i=ta,a=ra;i.nodeType!==8;){if(!a){i=null;break b}if(i=Df(i.nextSibling),i===null){i=null;break b}}a=i.data,i=a===`F!`||a===`F`?i:null}if(i){ta=Df(i.nextSibling),r=i.data===`F!`;break a}}aa(r)}r=!1}r&&(t=n[0])}}return n=qo(),n.memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:t},n.queue=r,n=Qs.bind(null,I,r),r.dispatch=n,r=ds(!1),a=ec.bind(null,I,!1,r.queue),r=qo(),i={state:t,dispatch:null,action:e,pending:null},r.queue=i,n=ps.bind(null,I,i,a,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function xs(e){var t=Jo();return Ss(t,ko,e)}function Ss(e,t,n){if(t=ts(e,t,ys)[0],e=es($o)[0],typeof t==`object`&&t&&typeof t.then==`function`)try{var r=Xo(t)}catch(e){throw e===Ra?Ba:e}else r=t;t=Jo();var i=t.queue,a=i.dispatch;return n!==t.memoizedState&&(I.flags|=2048,Ts(9,{destroy:void 0},Cs.bind(null,i,n),null)),[r,a,e]}function Cs(e,t){e.action=t}function ws(e){var t=Jo(),n=ko;if(n!==null)return Ss(t,n,e);Jo(),t=t.memoizedState,n=Jo();var r=n.queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Ts(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},t=I.updateQueue,t===null&&(t=Yo(),I.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Es(){return Jo().memoizedState}function Ds(e,t,n,r){var i=qo();I.flags|=e,i.memoizedState=Ts(1|t,{destroy:void 0},n,r===void 0?null:r)}function Os(e,t,n,r){var i=Jo();r=r===void 0?null:r;var a=i.memoizedState.inst;ko!==null&&r!==null&&zo(r,ko.memoizedState.deps)?i.memoizedState=Ts(t,a,n,r):(I.flags|=e,i.memoizedState=Ts(1|t,a,n,r))}function ks(e,t){Ds(8390656,8,e,t)}function As(e,t){Os(2048,8,e,t)}function js(e){I.flags|=4;var t=I.updateQueue;if(t===null)t=Yo(),I.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Ms(e){var t=Jo().memoizedState;return js({ref:t,nextImpl:e}),function(){if(su&2)throw Error(i(440));return t.impl.apply(void 0,arguments)}}function Ns(e,t){return Os(4,2,e,t)}function Ps(e,t){return Os(4,4,e,t)}function Fs(e,t){if(typeof t==`function`){e=e();var n=t(e);return function(){typeof n==`function`?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Is(e,t,n){n=n==null?null:n.concat([e]),Os(4,4,Fs.bind(null,t,e),n)}function Ls(){}function Rs(e,t){var n=Jo();t=t===void 0?null:t;var r=n.memoizedState;return t!==null&&zo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function zs(e,t){var n=Jo();t=t===void 0?null:t;var r=n.memoizedState;if(t!==null&&zo(t,r[1]))return r[0];if(r=e(),No){Je(!0);try{e()}finally{Je(!1)}}return n.memoizedState=[r,t],r}function Bs(e,t,n){return n===void 0||Oo&1073741824&&!(R&261930)?e.memoizedState=t:(e.memoizedState=n,e=zu(),I.lanes|=e,gu|=e,n)}function Vs(e,t,n,r){return Ur(n,t)?n:mo.current===null?!(Oo&42)||Oo&1073741824&&!(R&261930)?(Cc=!0,e.memoizedState=n):(e=zu(),I.lanes|=e,gu|=e,t):(e=Bs(e,n,r),Ur(e,t)||(Cc=!0),e)}function Hs(e,t,n,r,i){var a=T.p;T.p=a!==0&&8>a?a:8;var o=w.T,s={};w.T=s,ec(e,!1,t,n);try{var c=i(),l=w.S;if(l!==null&&l(s,c),typeof c==`object`&&c&&typeof c.then==`function`){var u=Na(c,r);$s(e,t,u,Ru(e))}else $s(e,t,r,Ru(e))}catch(n){$s(e,t,{then:function(){},status:`rejected`,reason:n},Ru())}finally{T.p=a,o!==null&&s.types!==null&&(o.types=s.types),w.T=o}}function Us(){}function Ws(e,t,n,r){if(e.tag!==5)throw Error(i(476));var a=Gs(e).queue;Hs(e,a,t,fe,n===null?Us:function(){return Ks(e),n(r)})}function Gs(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$o,lastRenderedState:fe},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$o,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Ks(e){var t=Gs(e);t.next===null&&(t=e.alternate.memoizedState),$s(e,t.next.queue,{},Ru())}function qs(){return va(_p)}function Js(){return Jo().memoizedState}function Ys(){return Jo().memoizedState}function Xs(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Ru();e=ao(n);var r=oo(t,e,n);r!==null&&(Bu(r,t,n),so(r,t,n)),t={cache:Ta()},e.payload=t;return}t=t.return}}function Zs(e,t,n){var r=Ru();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},tc(e)?nc(t,n):(n=Ci(e,t,n,r),n!==null&&(Bu(n,e,r),rc(n,t,r)))}function Qs(e,t,n){var r=Ru();$s(e,t,n,r)}function $s(e,t,n,r){var i={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(tc(e))nc(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,Ur(s,o))return Si(e,t,i,0),cu===null&&xi(),!1}catch{}if(n=Ci(e,t,i,r),n!==null)return Bu(n,e,r),rc(n,t,r),!0}return!1}function ec(e,t,n,r){if(r={lane:2,revertLane:Ad(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},tc(e)){if(t)throw Error(i(479))}else t=Ci(e,n,r,2),t!==null&&Bu(t,e,2)}function tc(e){var t=e.alternate;return e===I||t!==null&&t===I}function nc(e,t){Mo=jo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function rc(e,t,n){if(n&4194048){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,dt(e,n)}}var ic={readContext:va,use:Zo,useCallback:Ro,useContext:Ro,useEffect:Ro,useImperativeHandle:Ro,useLayoutEffect:Ro,useInsertionEffect:Ro,useMemo:Ro,useReducer:Ro,useRef:Ro,useState:Ro,useDebugValue:Ro,useDeferredValue:Ro,useTransition:Ro,useSyncExternalStore:Ro,useId:Ro,useHostTransitionStatus:Ro,useFormState:Ro,useActionState:Ro,useOptimistic:Ro,useMemoCache:Ro,useCacheRefresh:Ro};ic.useEffectEvent=Ro;var ac={readContext:va,use:Zo,useCallback:function(e,t){return qo().memoizedState=[e,t===void 0?null:t],e},useContext:va,useEffect:ks,useImperativeHandle:function(e,t,n){n=n==null?null:n.concat([e]),Ds(4194308,4,Fs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ds(4194308,4,e,t)},useInsertionEffect:function(e,t){Ds(4,2,e,t)},useMemo:function(e,t){var n=qo();t=t===void 0?null:t;var r=e();if(No){Je(!0);try{e()}finally{Je(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=qo();if(n!==void 0){var i=n(t);if(No){Je(!0);try{n(t)}finally{Je(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=Zs.bind(null,I,e),[r.memoizedState,e]},useRef:function(e){var t=qo();return e={current:e},t.memoizedState=e},useState:function(e){e=ds(e);var t=e.queue,n=Qs.bind(null,I,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ls,useDeferredValue:function(e,t){var n=qo();return Bs(n,e,t)},useTransition:function(){var e=ds(!1);return e=Hs.bind(null,I,e.queue,!0,!1),qo().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=I,a=qo();if(k){if(n===void 0)throw Error(i(407));n=n()}else{if(n=t(),cu===null)throw Error(i(349));R&127||os(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,ks(cs.bind(null,r,o,e),[e]),r.flags|=2048,Ts(9,{destroy:void 0},ss.bind(null,r,o,n,t),null),n},useId:function(){var e=qo(),t=cu.identifierPrefix;if(k){var n=Ji,r=qi;n=(r&~(1<<32-Ye(r)-1)).toString(32)+n,t=`_`+t+`R_`+n,n=Po++,0<n&&(t+=`H`+n.toString(32)),t+=`_`}else n=Lo++,t=`_`+t+`r_`+n.toString(32)+`_`;return e.memoizedState=t},useHostTransitionStatus:qs,useFormState:bs,useActionState:bs,useOptimistic:function(e){var t=qo();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=ec.bind(null,I,!0,n),n.dispatch=t,[e,t]},useMemoCache:Qo,useCacheRefresh:function(){return qo().memoizedState=Xs.bind(null,I)},useEffectEvent:function(e){var t=qo(),n={impl:e};return t.memoizedState=n,function(){if(su&2)throw Error(i(440));return n.impl.apply(void 0,arguments)}}},oc={readContext:va,use:Zo,useCallback:Rs,useContext:va,useEffect:As,useImperativeHandle:Is,useInsertionEffect:Ns,useLayoutEffect:Ps,useMemo:zs,useReducer:es,useRef:Es,useState:function(){return es($o)},useDebugValue:Ls,useDeferredValue:function(e,t){var n=Jo();return Vs(n,ko.memoizedState,e,t)},useTransition:function(){var e=es($o)[0],t=Jo().memoizedState;return[typeof e==`boolean`?e:Xo(e),t]},useSyncExternalStore:rs,useId:Js,useHostTransitionStatus:qs,useFormState:xs,useActionState:xs,useOptimistic:function(e,t){var n=Jo();return fs(n,ko,e,t)},useMemoCache:Qo,useCacheRefresh:Ys};oc.useEffectEvent=Ms;var sc={readContext:va,use:Zo,useCallback:Rs,useContext:va,useEffect:As,useImperativeHandle:Is,useInsertionEffect:Ns,useLayoutEffect:Ps,useMemo:zs,useReducer:ns,useRef:Es,useState:function(){return ns($o)},useDebugValue:Ls,useDeferredValue:function(e,t){var n=Jo();return ko===null?Bs(n,e,t):Vs(n,ko.memoizedState,e,t)},useTransition:function(){var e=ns($o)[0],t=Jo().memoizedState;return[typeof e==`boolean`?e:Xo(e),t]},useSyncExternalStore:rs,useId:Js,useHostTransitionStatus:qs,useFormState:ws,useActionState:ws,useOptimistic:function(e,t){var n=Jo();return ko===null?(n.baseState=e,[e,n.queue.dispatch]):fs(n,ko,e,t)},useMemoCache:Qo,useCacheRefresh:Ys};sc.useEffectEvent=Ms;function cc(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:h({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var lc={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ru(),i=ao(r);i.payload=t,n!=null&&(i.callback=n),t=oo(e,i,r),t!==null&&(Bu(t,e,r),so(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ru(),i=ao(r);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=oo(e,i,r),t!==null&&(Bu(t,e,r),so(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ru(),r=ao(n);r.tag=2,t!=null&&(r.callback=t),t=oo(e,r,n),t!==null&&(Bu(t,e,n),so(t,e,n))}};function uc(e,t,n,r,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate==`function`?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!Wr(n,r)||!Wr(i,a):!0}function dc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps==`function`&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps==`function`&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&lc.enqueueReplaceState(t,t.state,null)}function fc(e,t){var n=t;if(`ref`in t)for(var r in n={},t)r!==`ref`&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=h({},n)),e)n[i]===void 0&&(n[i]=e[i]);return n}function pc(e){_i(e)}function mc(e){console.error(e)}function hc(e){_i(e)}function gc(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(e){setTimeout(function(){throw e})}}function _c(e,t,n){try{var r=e.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(e){setTimeout(function(){throw e})}}function vc(e,t,n){return n=ao(n),n.tag=3,n.payload={element:null},n.callback=function(){gc(e,t)},n}function yc(e){return e=ao(e),e.tag=3,e}function bc(e,t,n,r){var i=n.type.getDerivedStateFromError;if(typeof i==`function`){var a=r.value;e.payload=function(){return i(a)},e.callback=function(){_c(t,n,r)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch==`function`&&(e.callback=function(){_c(t,n,r),typeof i!=`function`&&(Ou===null?Ou=new Set([this]):Ou.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:e===null?``:e})})}function xc(e,t,n,r,a){if(n.flags|=32768,typeof r==`object`&&r&&typeof r.then==`function`){if(t=n.alternate,t!==null&&ga(t,n,a,!0),n=yo.current,n!==null){switch(n.tag){case 31:case 13:return bo===null?Qu():n.alternate===null&&hu===0&&(hu=3),n.flags&=-257,n.flags|=65536,n.lanes=a,r===Va?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([r]):t.add(r),gd(e,r,a)),!1;case 22:return n.flags|=65536,r===Va?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([r]):n.add(r)),gd(e,r,a)),!1}throw Error(i(435,n.tag))}return gd(e,r,a),Qu(),!1}if(k)return t=yo.current,t===null?(r!==ia&&(t=Error(i(423),{cause:r}),da(zi(t,n))),e=e.current.alternate,e.flags|=65536,a&=-a,e.lanes|=a,r=zi(r,n),a=vc(e.stateNode,r,a),co(e,a),hu!==4&&(hu=2)):(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=a,r!==ia&&(e=Error(i(422),{cause:r}),da(zi(e,n)))),!1;var o=Error(i(520),{cause:r});if(o=zi(o,n),xu===null?xu=[o]:xu.push(o),hu!==4&&(hu=2),t===null)return!0;r=zi(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,e=vc(n.stateNode,r,e),co(n,e),!1;case 1:if(t=n.type,o=n.stateNode,!(n.flags&128)&&(typeof t.getDerivedStateFromError==`function`||o!==null&&typeof o.componentDidCatch==`function`&&(Ou===null||!Ou.has(o))))return n.flags|=65536,a&=-a,n.lanes|=a,a=yc(a),bc(a,e,n,r),co(n,a),!1}n=n.return}while(n!==null);return!1}var Sc=Error(i(461)),Cc=!1;function wc(e,t,n,r){t.child=e===null?to(t,null,n,r):eo(t,e.child,n,r)}function Tc(e,t,n,r,i){n=n.render;var a=t.ref;if(`ref`in r){var o={};for(var s in r)s!==`ref`&&(o[s]=r[s])}else o=r;return N(t),r=Bo(e,t,n,o,a,i),s=Wo(),e!==null&&!Cc?(Go(e,t,i),Yc(e,t,i)):(k&&s&&Zi(t),t.flags|=1,wc(e,t,r,i),t.child)}function Ec(e,t,n,r,i){if(e===null){var a=n.type;return typeof a==`function`&&!Ai(a)&&a.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=a,Dc(e,t,a,r,i)):(e=Ni(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!Xc(e,i)){var o=a.memoizedProps;if(n=n.compare,n=n===null?Wr:n,n(o,r)&&e.ref===t.ref)return Yc(e,t,i)}return t.flags|=1,e=ji(a,r),e.ref=t.ref,e.return=t,t.child=e}function Dc(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(Wr(a,r)&&e.ref===t.ref)if(Cc=!1,t.pendingProps=r=a,Xc(e,i))e.flags&131072&&(Cc=!0);else return t.lanes=e.lanes,Yc(e,t,i)}return Fc(e,t,n,r,i)}function Oc(e,t,n,r){var i=r.children,a=e===null?null:e.memoizedState;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode===`hidden`){if(t.flags&128){if(a=a===null?n:a.baseLanes|n,e!==null){for(r=t.child=e.child,i=0;r!==null;)i=i|r.lanes|r.childLanes,r=r.sibling;r=i&~a}else r=0,t.child=null;return Ac(e,t,a,n,r)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ia(t,a===null?null:a.cachePool),a===null?_o():go(t,a),Co(t);else return r=t.lanes=536870912,Ac(e,t,a===null?n:a.baseLanes|n,n,r)}else a===null?(e!==null&&Ia(t,null),_o(),wo(t)):(Ia(t,a.cachePool),go(t,a),wo(t),t.memoizedState=null);return wc(e,t,i,n),t.child}function kc(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Ac(e,t,n,r,i){var a=P();return a=a===null?null:{parent:wa._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},e!==null&&Ia(t,null),_o(),Co(t),e!==null&&ga(e,t,r,!0),t.childLanes=i,null}function jc(e,t){return t=Wc({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Mc(e,t,n){return eo(t,e.child,null,n),e=jc(t,t.pendingProps),e.flags|=2,To(t),t.memoizedState=null,e}function Nc(e,t,n){var r=t.pendingProps,a=(t.flags&128)!=0;if(t.flags&=-129,e===null){if(k){if(r.mode===`hidden`)return e=jc(t,r),t.lanes=536870912,kc(null,e);if(So(t),(e=ta)?(e=Cf(e,ra),e=e!==null&&e.data===`&`?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ki===null?null:{id:qi,overflow:Ji},retryLane:536870912,hydrationErrors:null},n=Ii(e),n.return=t,t.child=n,ea=t,ta=null)):e=null,e===null)throw aa(t);return t.lanes=536870912,null}return jc(t,r)}var o=e.memoizedState;if(o!==null){var s=o.dehydrated;if(So(t),a)if(t.flags&256)t.flags&=-257,t=Mc(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(i(558));else if(Cc||ga(e,t,n,!1),a=(n&e.childLanes)!==0,Cc||a){if(r=cu,r!==null&&(s=ft(r,n),s!==0&&s!==o.retryLane))throw o.retryLane=s,wi(e,s),Bu(r,e,s),Sc;Qu(),t=Mc(e,t,n)}else e=o.treeContext,ta=Df(s.nextSibling),ea=t,k=!0,na=null,ra=!1,e!==null&&$i(t,e),t=jc(t,r),t.flags|=4096;return t}return e=ji(e.child,{mode:r.mode,children:r.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Pc(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!=`function`&&typeof n!=`object`)throw Error(i(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Fc(e,t,n,r,i){return N(t),n=Bo(e,t,n,r,void 0,i),r=Wo(),e!==null&&!Cc?(Go(e,t,i),Yc(e,t,i)):(k&&r&&Zi(t),t.flags|=1,wc(e,t,n,i),t.child)}function Ic(e,t,n,r,i,a){return N(t),t.updateQueue=null,n=Ho(t,r,n,i),Vo(e),r=Wo(),e!==null&&!Cc?(Go(e,t,a),Yc(e,t,a)):(k&&r&&Zi(t),t.flags|=1,wc(e,t,n,a),t.child)}function Lc(e,t,n,r,i){if(N(t),t.stateNode===null){var a=Di,o=n.contextType;typeof o==`object`&&o&&(a=va(o)),a=new n(r,a),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=lc,t.stateNode=a,a._reactInternals=t,a=t.stateNode,a.props=r,a.state=t.memoizedState,a.refs={},ro(t),o=n.contextType,a.context=typeof o==`object`&&o?va(o):Di,a.state=t.memoizedState,o=n.getDerivedStateFromProps,typeof o==`function`&&(cc(t,n,o,r),a.state=t.memoizedState),typeof n.getDerivedStateFromProps==`function`||typeof a.getSnapshotBeforeUpdate==`function`||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(o=a.state,typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount(),o!==a.state&&lc.enqueueReplaceState(a,a.state,null),uo(t,r,a,i),F(),a.state=t.memoizedState),typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!0}else if(e===null){a=t.stateNode;var s=t.memoizedProps,c=fc(n,s);a.props=c;var l=a.context,u=n.contextType;o=Di,typeof u==`object`&&u&&(o=va(u));var d=n.getDerivedStateFromProps;u=typeof d==`function`||typeof a.getSnapshotBeforeUpdate==`function`,s=t.pendingProps!==s,u||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(s||l!==o)&&dc(t,a,r,o),no=!1;var f=t.memoizedState;a.state=f,uo(t,r,a,i),F(),l=t.memoizedState,s||f!==l||no?(typeof d==`function`&&(cc(t,n,d,r),l=t.memoizedState),(c=no||uc(t,n,c,r,f,l,o))?(u||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount==`function`&&(t.flags|=4194308)):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=o,r=c):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,io(e,t),o=t.memoizedProps,u=fc(n,o),a.props=u,d=t.pendingProps,f=a.context,l=n.contextType,c=Di,typeof l==`object`&&l&&(c=va(l)),s=n.getDerivedStateFromProps,(l=typeof s==`function`||typeof a.getSnapshotBeforeUpdate==`function`)||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(o!==d||f!==c)&&dc(t,a,r,c),no=!1,f=t.memoizedState,a.state=f,uo(t,r,a,i),F();var p=t.memoizedState;o!==d||f!==p||no||e!==null&&e.dependencies!==null&&_a(e.dependencies)?(typeof s==`function`&&(cc(t,n,s,r),p=t.memoizedState),(u=no||uc(t,n,u,r,f,p,c)||e!==null&&e.dependencies!==null&&_a(e.dependencies))?(l||typeof a.UNSAFE_componentWillUpdate!=`function`&&typeof a.componentWillUpdate!=`function`||(typeof a.componentWillUpdate==`function`&&a.componentWillUpdate(r,p,c),typeof a.UNSAFE_componentWillUpdate==`function`&&a.UNSAFE_componentWillUpdate(r,p,c)),typeof a.componentDidUpdate==`function`&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate==`function`&&(t.flags|=1024)):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=c,r=u):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,Pc(e,t),r=(t.flags&128)!=0,a||r?(a=t.stateNode,n=r&&typeof n.getDerivedStateFromError!=`function`?null:a.render(),t.flags|=1,e!==null&&r?(t.child=eo(t,e.child,null,i),t.child=eo(t,null,n,i)):wc(e,t,n,i),t.memoizedState=a.state,e=t.child):e=Yc(e,t,i),e}function Rc(e,t,n,r){return la(),t.flags|=256,wc(e,t,n,r),t.child}var zc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bc(e){return{baseLanes:e,cachePool:La()}}function Vc(e,t,n){return e=e===null?0:e.childLanes&~n,t&&(e|=yu),e}function Hc(e,t,n){var r=t.pendingProps,a=!1,o=(t.flags&128)!=0,s;if((s=o)||(s=e!==null&&e.memoizedState===null?!1:(Eo.current&2)!=0),s&&(a=!0,t.flags&=-129),s=(t.flags&32)!=0,t.flags&=-33,e===null){if(k){if(a?xo(t):wo(t),(e=ta)?(e=Cf(e,ra),e=e!==null&&e.data!==`&`?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ki===null?null:{id:qi,overflow:Ji},retryLane:536870912,hydrationErrors:null},n=Ii(e),n.return=t,t.child=n,ea=t,ta=null)):e=null,e===null)throw aa(t);return Tf(e)?t.lanes=32:t.lanes=536870912,null}var c=r.children;return r=r.fallback,a?(wo(t),a=t.mode,c=Wc({mode:`hidden`,children:c},a),r=Pi(r,a,n,null),c.return=t,r.return=t,c.sibling=r,t.child=c,r=t.child,r.memoizedState=Bc(n),r.childLanes=Vc(e,s,n),t.memoizedState=zc,kc(null,r)):(xo(t),Uc(t,c))}var l=e.memoizedState;if(l!==null&&(c=l.dehydrated,c!==null)){if(o)t.flags&256?(xo(t),t.flags&=-257,t=Gc(e,t,n)):t.memoizedState===null?(wo(t),c=r.fallback,a=t.mode,r=Wc({mode:`visible`,children:r.children},a),c=Pi(c,a,n,null),c.flags|=2,r.return=t,c.return=t,r.sibling=c,t.child=r,eo(t,e.child,null,n),r=t.child,r.memoizedState=Bc(n),r.childLanes=Vc(e,s,n),t.memoizedState=zc,t=kc(null,r)):(wo(t),t.child=e.child,t.flags|=128,t=null);else if(xo(t),Tf(c)){if(s=c.nextSibling&&c.nextSibling.dataset,s)var u=s.dgst;s=u,r=Error(i(419)),r.stack=``,r.digest=s,da({value:r,source:null,stack:null}),t=Gc(e,t,n)}else if(Cc||ga(e,t,n,!1),s=(n&e.childLanes)!==0,Cc||s){if(s=cu,s!==null&&(r=ft(s,n),r!==0&&r!==l.retryLane))throw l.retryLane=r,wi(e,r),Bu(s,e,r),Sc;wf(c)||Qu(),t=Gc(e,t,n)}else wf(c)?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ta=Df(c.nextSibling),ea=t,k=!0,na=null,ra=!1,e!==null&&$i(t,e),t=Uc(t,r.children),t.flags|=4096);return t}return a?(wo(t),c=r.fallback,a=t.mode,l=e.child,u=l.sibling,r=ji(l,{mode:`hidden`,children:r.children}),r.subtreeFlags=l.subtreeFlags&65011712,u===null?(c=Pi(c,a,n,null),c.flags|=2):c=ji(u,c),c.return=t,r.return=t,r.sibling=c,t.child=r,kc(null,r),r=t.child,c=e.child.memoizedState,c===null?c=Bc(n):(a=c.cachePool,a===null?a=La():(l=wa._currentValue,a=a.parent===l?a:{parent:l,pool:l}),c={baseLanes:c.baseLanes|n,cachePool:a}),r.memoizedState=c,r.childLanes=Vc(e,s,n),t.memoizedState=zc,kc(e.child,r)):(xo(t),n=e.child,e=n.sibling,n=ji(n,{mode:`visible`,children:r.children}),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n)}function Uc(e,t){return t=Wc({mode:`visible`,children:t},e.mode),t.return=e,e.child=t}function Wc(e,t){return e=ki(22,e,null,t),e.lanes=0,e}function Gc(e,t,n){return eo(t,e.child,null,n),e=Uc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Kc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ma(e.return,t,n)}function qc(e,t,n,r,i,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,treeForkCount:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.treeForkCount=a)}function Jc(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;r=r.children;var o=Eo.current,s=(o&2)!=0;if(s?(o=o&1|2,t.flags|=128):o&=1,_e(Eo,o),wc(e,t,r,n),r=k?Ui:0,!s&&e!==null&&e.flags&128)a:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Kc(e,n,t);else if(e.tag===19)Kc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break a;for(;e.sibling===null;){if(e.return===null||e.return===t)break a;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case`forwards`:for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Do(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),qc(t,!1,i,n,a,r);break;case`backwards`:case`unstable_legacy-backwards`:for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Do(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}qc(t,!0,n,null,a,r);break;case`together`:qc(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function Yc(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),gu|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(ga(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,n=ji(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ji(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Xc(e,t){return(e.lanes&t)===0?(e=e.dependencies,!!(e!==null&&_a(e))):!0}function Zc(e,t,n){switch(t.tag){case 3:xe(t,t.stateNode.containerInfo),M(t,wa,e.memoizedState.cache),la();break;case 27:case 5:Ce(t);break;case 4:xe(t,t.stateNode.containerInfo);break;case 10:M(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,So(t),null;break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated===null?(n&t.child.childLanes)===0?(xo(t),e=Yc(e,t,n),e===null?null:e.sibling):Hc(e,t,n):(xo(t),t.flags|=128,null);xo(t);break;case 19:var i=(e.flags&128)!=0;if(r=(n&t.childLanes)!==0,r||=(ga(e,t,n,!1),(n&t.childLanes)!==0),i){if(r)return Jc(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),_e(Eo,Eo.current),r)break;return null;case 22:return t.lanes=0,Oc(e,t,n,t.pendingProps);case 24:M(t,wa,e.memoizedState.cache)}return Yc(e,t,n)}function Qc(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Cc=!0;else{if(!Xc(e,n)&&!(t.flags&128))return Cc=!1,Zc(e,t,n);Cc=!!(e.flags&131072)}else Cc=!1,k&&t.flags&1048576&&Xi(t,Ui,t.index);switch(t.lanes=0,t.tag){case 16:a:{var r=t.pendingProps;if(e=Wa(t.elementType),t.type=e,typeof e==`function`)Ai(e)?(r=fc(e,r),t.tag=1,t=Lc(null,t,e,r,n)):(t.tag=0,t=Fc(null,t,e,r,n));else{if(e!=null){var a=e.$$typeof;if(a===C){t.tag=11,t=Tc(null,t,e,r,n);break a}else if(a===re){t.tag=14,t=Ec(null,t,e,r,n);break a}}throw t=ue(e)||e,Error(i(306,t,``))}}return t;case 0:return Fc(e,t,t.type,t.pendingProps,n);case 1:return r=t.type,a=fc(r,t.pendingProps),Lc(e,t,r,a,n);case 3:a:{if(xe(t,t.stateNode.containerInfo),e===null)throw Error(i(387));r=t.pendingProps;var o=t.memoizedState;a=o.element,io(e,t),uo(t,r,null,n);var s=t.memoizedState;if(r=s.cache,M(t,wa,r),r!==o.cache&&ha(t,[wa],n,!0),F(),r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=Rc(e,t,r,n);break a}else if(r!==a){a=zi(Error(i(424)),t),da(a),t=Rc(e,t,r,n);break a}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName===`HTML`?e.ownerDocument.body:e}for(ta=Df(e.firstChild),ea=t,k=!0,na=null,ra=!0,n=to(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(la(),r===a){t=Yc(e,t,n);break a}wc(e,t,r,n)}t=t.child}return t;case 26:return Pc(e,t),e===null?(n=Jf(t.type,null,t.pendingProps,null))?t.memoizedState=n:k||(n=t.type,e=t.pendingProps,r=sf(ye.current).createElement(n),r[vt]=t,r[yt]=e,ef(r,n,e),At(r),t.stateNode=r):t.memoizedState=Jf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ce(t),e===null&&k&&(r=t.stateNode=jf(t.type,t.pendingProps,ye.current),ea=t,ra=!0,a=ta,_f(t.type)?(Of=a,ta=Df(r.firstChild)):ta=a),wc(e,t,t.pendingProps.children,n),Pc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&k&&((a=r=ta)&&(r=xf(r,t.type,t.pendingProps,ra),r===null?a=!1:(t.stateNode=r,ea=t,ta=Df(r.firstChild),ra=!1,a=!0)),a||aa(t)),Ce(t),a=t.type,o=t.pendingProps,s=e===null?null:e.memoizedProps,r=o.children,uf(a,o)?r=null:s!==null&&uf(a,s)&&(t.flags|=32),t.memoizedState!==null&&(a=Bo(e,t,Uo,null,null,n),_p._currentValue=a),Pc(e,t),wc(e,t,r,n),t.child;case 6:return e===null&&k&&((e=n=ta)&&(n=Sf(n,t.pendingProps,ra),n===null?e=!1:(t.stateNode=n,ea=t,ta=null,e=!0)),e||aa(t)),null;case 13:return Hc(e,t,n);case 4:return xe(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=eo(t,null,r,n):wc(e,t,r,n),t.child;case 11:return Tc(e,t,t.type,t.pendingProps,n);case 7:return wc(e,t,t.pendingProps,n),t.child;case 8:return wc(e,t,t.pendingProps.children,n),t.child;case 12:return wc(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,M(t,t.type,r.value),wc(e,t,r.children,n),t.child;case 9:return a=t.type._context,r=t.pendingProps.children,N(t),a=va(a),r=r(a),t.flags|=1,wc(e,t,r,n),t.child;case 14:return Ec(e,t,t.type,t.pendingProps,n);case 15:return Dc(e,t,t.type,t.pendingProps,n);case 19:return Jc(e,t,n);case 31:return Nc(e,t,n);case 22:return Oc(e,t,n,t.pendingProps);case 24:return N(t),r=va(wa),e===null?(a=P(),a===null&&(a=cu,o=Ta(),a.pooledCache=o,o.refCount++,o!==null&&(a.pooledCacheLanes|=n),a=o),t.memoizedState={parent:r,cache:a},ro(t),M(t,wa,a)):((e.lanes&n)!==0&&(io(e,t),uo(t,null,null,n),F()),a=e.memoizedState,o=t.memoizedState,a.parent===r?(r=o.cache,M(t,wa,r),r!==a.cache&&ha(t,[wa],n,!0)):(a={parent:r,cache:r},t.memoizedState=a,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=a),M(t,wa,r))),wc(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function $c(e){e.flags|=4}function el(e,t,n,r,i){if((t=(e.mode&32)!=0)&&(t=!1),t){if(e.flags|=16777216,(i&335544128)===i)if(e.stateNode.complete)e.flags|=8192;else if(Yu())e.flags|=8192;else throw Ga=Va,za}else e.flags&=-16777217}function tl(e,t){if(t.type!==`stylesheet`||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!lp(t))if(Yu())e.flags|=8192;else throw Ga=Va,za}function nl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag===22?536870912:ot(),e.lanes|=t,bu|=t)}function rl(e,t){if(!k)switch(e.tailMode){case`hidden`:t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case`collapsed`:n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function il(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&65011712,r|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function al(e,t,n){var r=t.pendingProps;switch(Qi(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return il(t),null;case 1:return il(t),null;case 3:return n=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),pa(wa),Se(),n.pendingContext&&=(n.context=n.pendingContext,null),(e===null||e.child===null)&&(ca(t)?$c(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ua())),il(t),null;case 26:var a=t.type,o=t.memoizedState;return e===null?($c(t),o===null?(il(t),el(t,a,null,r,n)):(il(t),tl(t,o))):o?o===e.memoizedState?(il(t),t.flags&=-16777217):($c(t),il(t),tl(t,o)):(e=e.memoizedProps,e!==r&&$c(t),il(t),el(t,a,e,r,n)),null;case 27:if(we(t),n=ye.current,a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&$c(t);else{if(!r){if(t.stateNode===null)throw Error(i(166));return il(t),null}e=E.current,ca(t)?oa(t,e):(e=jf(a,r,n),t.stateNode=e,$c(t))}return il(t),null;case 5:if(we(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&$c(t);else{if(!r){if(t.stateNode===null)throw Error(i(166));return il(t),null}if(o=E.current,ca(t))oa(t,o);else{var s=sf(ye.current);switch(o){case 1:o=s.createElementNS(`http://www.w3.org/2000/svg`,a);break;case 2:o=s.createElementNS(`http://www.w3.org/1998/Math/MathML`,a);break;default:switch(a){case`svg`:o=s.createElementNS(`http://www.w3.org/2000/svg`,a);break;case`math`:o=s.createElementNS(`http://www.w3.org/1998/Math/MathML`,a);break;case`script`:o=s.createElement(`div`),o.innerHTML=`<script><\/script>`,o=o.removeChild(o.firstChild);break;case`select`:o=typeof r.is==`string`?s.createElement(`select`,{is:r.is}):s.createElement(`select`),r.multiple?o.multiple=!0:r.size&&(o.size=r.size);break;default:o=typeof r.is==`string`?s.createElement(a,{is:r.is}):s.createElement(a)}}o[vt]=t,o[yt]=r;a:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)o.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break a;for(;s.sibling===null;){if(s.return===null||s.return===t)break a;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=o;a:switch(ef(o,a,r),a){case`button`:case`input`:case`select`:case`textarea`:r=!!r.autoFocus;break a;case`img`:r=!0;break a;default:r=!1}r&&$c(t)}}return il(t),el(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&$c(t);else{if(typeof r!=`string`&&t.stateNode===null)throw Error(i(166));if(e=ye.current,ca(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,a=ea,a!==null)switch(a.tag){case 27:case 5:r=a.memoizedProps}e[vt]=t,e=!!(e.nodeValue===n||r!==null&&!0===r.suppressHydrationWarning||Zd(e.nodeValue,n)),e||aa(t,!0)}else e=sf(e).createTextNode(r),e[vt]=t,t.stateNode=e}return il(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(r=ca(t),n!==null){if(e===null){if(!r)throw Error(i(318));if(e=t.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(557));e[vt]=t}else la(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;il(t),e=!1}else n=ua(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(To(t),t):(To(t),null);if(t.flags&128)throw Error(i(558))}return il(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(a=ca(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(i(318));if(a=t.memoizedState,a=a===null?null:a.dehydrated,!a)throw Error(i(317));a[vt]=t}else la(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;il(t),a=!1}else a=ua(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return t.flags&256?(To(t),t):(To(t),null)}return To(t),t.flags&128?(t.lanes=n,t):(n=r!==null,e=e!==null&&e.memoizedState!==null,n&&(r=t.child,a=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(a=r.alternate.memoizedState.cachePool.pool),o=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),o!==a&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),nl(t,t.updateQueue),il(t),null);case 4:return Se(),e===null&&Hd(t.stateNode.containerInfo),il(t),null;case 10:return pa(t.type),il(t),null;case 19:if(ge(Eo),r=t.memoizedState,r===null)return il(t),null;if(a=(t.flags&128)!=0,o=r.rendering,o===null)if(a)rl(r,!1);else{if(hu!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Do(e),o!==null){for(t.flags|=128,rl(r,!1),e=o.updateQueue,t.updateQueue=e,nl(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Mi(n,e),n=n.sibling;return _e(Eo,Eo.current&1|2),k&&Yi(t,r.treeForkCount),t.child}e=e.sibling}r.tail!==null&&Le()>Eu&&(t.flags|=128,a=!0,rl(r,!1),t.lanes=4194304)}else{if(!a)if(e=Do(o),e!==null){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,nl(t,e),rl(r,!0),r.tail===null&&r.tailMode===`hidden`&&!o.alternate&&!k)return il(t),null}else 2*Le()-r.renderingStartTime>Eu&&n!==536870912&&(t.flags|=128,a=!0,rl(r,!1),t.lanes=4194304);r.isBackwards?(o.sibling=t.child,t.child=o):(e=r.last,e===null?t.child=o:e.sibling=o,r.last=o)}return r.tail===null?(il(t),null):(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Le(),e.sibling=null,n=Eo.current,_e(Eo,a?n&1|2:n&1),k&&Yi(t,r.treeForkCount),e);case 22:case 23:return To(t),vo(),r=t.memoizedState!==null,e===null?r&&(t.flags|=8192):e.memoizedState!==null!==r&&(t.flags|=8192),r?n&536870912&&!(t.flags&128)&&(il(t),t.subtreeFlags&6&&(t.flags|=8192)):il(t),n=t.updateQueue,n!==null&&nl(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),e!==null&&ge(Fa),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),pa(wa),il(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function ol(e,t){switch(Qi(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return pa(wa),Se(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return we(t),null;case 31:if(t.memoizedState!==null){if(To(t),t.alternate===null)throw Error(i(340));la()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(To(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));la()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ge(Eo),null;case 4:return Se(),null;case 10:return pa(t.type),null;case 22:case 23:return To(t),vo(),e!==null&&ge(Fa),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return pa(wa),null;case 25:return null;default:return null}}function sl(e,t){switch(Qi(t),t.tag){case 3:pa(wa),Se();break;case 26:case 27:case 5:we(t);break;case 4:Se();break;case 31:t.memoizedState!==null&&To(t);break;case 13:To(t);break;case 19:ge(Eo);break;case 10:pa(t.type);break;case 22:case 23:To(t),vo(),e!==null&&ge(Fa);break;case 24:pa(wa)}}function cl(e,t){try{var n=t.updateQueue,r=n===null?null:n.lastEffect;if(r!==null){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var a=n.create,o=n.inst;r=a(),o.destroy=r}n=n.next}while(n!==i)}}catch(e){z(t,t.return,e)}}function ll(e,t,n){try{var r=t.updateQueue,i=r===null?null:r.lastEffect;if(i!==null){var a=i.next;r=a;do{if((r.tag&e)===e){var o=r.inst,s=o.destroy;if(s!==void 0){o.destroy=void 0,i=t;var c=n,l=s;try{l()}catch(e){z(i,c,e)}}}r=r.next}while(r!==a)}}catch(e){z(t,t.return,e)}}function ul(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{po(t,n)}catch(t){z(e,e.return,t)}}}function dl(e,t,n){n.props=fc(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(n){z(e,t,n)}}function fl(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof n==`function`?e.refCleanup=n(r):n.current=r}}catch(n){z(e,t,n)}}function pl(e,t){var n=e.ref,r=e.refCleanup;if(n!==null)if(typeof r==`function`)try{r()}catch(n){z(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n==`function`)try{n(null)}catch(n){z(e,t,n)}else n.current=null}function ml(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{a:switch(t){case`button`:case`input`:case`select`:case`textarea`:n.autoFocus&&r.focus();break a;case`img`:n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(t){z(e,e.return,t)}}function hl(e,t,n){try{var r=e.stateNode;tf(r,e.type,n,t),r[yt]=t}catch(t){z(e,e.return,t)}}function gl(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&_f(e.type)||e.tag===4}function _l(e){a:for(;;){for(;e.sibling===null;){if(e.return===null||gl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&_f(e.type)||e.flags&2||e.child===null||e.tag===4)continue a;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function vl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName===`HTML`?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName===`HTML`?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=un));else if(r!==4&&(r===27&&_f(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(vl(e,t,n),e=e.sibling;e!==null;)vl(e,t,n),e=e.sibling}function yl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(r===27&&_f(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(yl(e,t,n),e=e.sibling;e!==null;)yl(e,t,n),e=e.sibling}function bl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);ef(t,r,n),t[vt]=e,t[yt]=n}catch(t){z(e,e.return,t)}}var xl=!1,Sl=!1,Cl=!1,wl=typeof WeakSet==`function`?WeakSet:Set,Tl=null;function El(e,t){if(e=e.containerInfo,rf=Ep,e=Jr(e),Yr(e)){if(`selectionStart`in e)var n={start:e.selectionStart,end:e.selectionEnd};else a:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break a}var s=0,c=-1,l=-1,u=0,d=0,f=e,p=null;b:for(;;){for(var m;f!==n||a!==0&&f.nodeType!==3||(c=s+a),f!==o||r!==0&&f.nodeType!==3||(l=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===e)break b;if(p===n&&++u===a&&(c=s),p===o&&++d===r&&(l=s),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=c===-1||l===-1?null:{start:c,end:l}}else n=null}n||={start:0,end:0}}else n=null;for(af={focusedElem:e,selectionRange:n},Ep=!1,Tl=t;Tl!==null;)if(t=Tl,e=t.child,t.subtreeFlags&1028&&e!==null)e.return=t,Tl=e;else for(;Tl!==null;){switch(t=Tl,o=t.alternate,e=t.flags,t.tag){case 0:if(e&4&&(e=t.updateQueue,e=e===null?null:e.events,e!==null))for(n=0;n<e.length;n++)a=e[n],a.ref.impl=a.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&o!==null){e=void 0,n=t,a=o.memoizedProps,o=o.memoizedState,r=n.stateNode;try{var h=fc(n.type,a);e=r.getSnapshotBeforeUpdate(h,o),r.__reactInternalSnapshotBeforeUpdate=e}catch(e){z(n,n.return,e)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)bf(e);else if(n===1)switch(e.nodeName){case`HEAD`:case`HTML`:case`BODY`:bf(e);break;default:e.textContent=``}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,Tl=e;break}Tl=t.return}}function Dl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Hl(e,n),r&4&&cl(5,n);break;case 1:if(Hl(e,n),r&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(e){z(n,n.return,e)}else{var i=fc(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){z(n,n.return,e)}}r&64&&ul(n),r&512&&fl(n,n.return);break;case 3:if(Hl(e,n),r&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{po(e,t)}catch(e){z(n,n.return,e)}}break;case 27:t===null&&r&4&&bl(n);case 26:case 5:Hl(e,n),t===null&&r&4&&ml(n),r&512&&fl(n,n.return);break;case 12:Hl(e,n);break;case 31:Hl(e,n),r&4&&Nl(e,n);break;case 13:Hl(e,n),r&4&&Pl(e,n),r&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=B.bind(null,n),Ef(e,n))));break;case 22:if(r=n.memoizedState!==null||xl,!r){t=t!==null&&t.memoizedState!==null||Sl,i=xl;var a=Sl;xl=r,(Sl=t)&&!a?Wl(e,n,(n.subtreeFlags&8772)!=0):Hl(e,n),xl=i,Sl=a}break;case 30:break;default:Hl(e,n)}}function Ol(e){var t=e.alternate;t!==null&&(e.alternate=null,Ol(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Et(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var kl=null,Al=!1;function jl(e,t,n){for(n=n.child;n!==null;)Ml(e,t,n),n=n.sibling}function Ml(e,t,n){if(qe&&typeof qe.onCommitFiberUnmount==`function`)try{qe.onCommitFiberUnmount(Ke,n)}catch{}switch(n.tag){case 26:Sl||pl(n,t),jl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Sl||pl(n,t);var r=kl,i=Al;_f(n.type)&&(kl=n.stateNode,Al=!1),jl(e,t,n),Mf(n.stateNode),kl=r,Al=i;break;case 5:Sl||pl(n,t);case 6:if(r=kl,i=Al,kl=null,jl(e,t,n),kl=r,Al=i,kl!==null)if(Al)try{(kl.nodeType===9?kl.body:kl.nodeName===`HTML`?kl.ownerDocument.body:kl).removeChild(n.stateNode)}catch(e){z(n,t,e)}else try{kl.removeChild(n.stateNode)}catch(e){z(n,t,e)}break;case 18:kl!==null&&(Al?(e=kl,vf(e.nodeType===9?e.body:e.nodeName===`HTML`?e.ownerDocument.body:e,n.stateNode),Qp(e)):vf(kl,n.stateNode));break;case 4:r=kl,i=Al,kl=n.stateNode.containerInfo,Al=!0,jl(e,t,n),kl=r,Al=i;break;case 0:case 11:case 14:case 15:ll(2,n,t),Sl||ll(4,n,t),jl(e,t,n);break;case 1:Sl||(pl(n,t),r=n.stateNode,typeof r.componentWillUnmount==`function`&&dl(n,t,r)),jl(e,t,n);break;case 21:jl(e,t,n);break;case 22:Sl=(r=Sl)||n.memoizedState!==null,jl(e,t,n),Sl=r;break;default:jl(e,t,n)}}function Nl(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Qp(e)}catch(e){z(t,t.return,e)}}}function Pl(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Qp(e)}catch(e){z(t,t.return,e)}}function Fl(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new wl),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new wl),t;default:throw Error(i(435,e.tag))}}function Il(e,t){var n=Fl(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=yd.bind(null,e,t);t.then(r,r)}})}function Ll(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r],o=e,s=t,c=s;a:for(;c!==null;){switch(c.tag){case 27:if(_f(c.type)){kl=c.stateNode,Al=!1;break a}break;case 5:kl=c.stateNode,Al=!1;break a;case 3:case 4:kl=c.stateNode.containerInfo,Al=!0;break a}c=c.return}if(kl===null)throw Error(i(160));Ml(o,s,a),kl=null,Al=!1,o=a.alternate,o!==null&&(o.return=null),a.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)zl(t,e),t=t.sibling}var Rl=null;function zl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ll(t,e),Bl(e),r&4&&(ll(3,e,e.return),cl(3,e),ll(5,e,e.return));break;case 1:Ll(t,e),Bl(e),r&512&&(Sl||n===null||pl(n,n.return)),r&64&&xl&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var a=Rl;if(Ll(t,e),Bl(e),r&512&&(Sl||n===null||pl(n,n.return)),r&4){var o=n===null?null:n.memoizedState;if(r=e.memoizedState,n===null)if(r===null)if(e.stateNode===null){a:{r=e.type,n=e.memoizedProps,a=a.ownerDocument||a;b:switch(r){case`title`:o=a.getElementsByTagName(`title`)[0],(!o||o[Tt]||o[vt]||o.namespaceURI===`http://www.w3.org/2000/svg`||o.hasAttribute(`itemprop`))&&(o=a.createElement(r),a.head.insertBefore(o,a.querySelector(`head > title`))),ef(o,r,n),o[vt]=e,At(o),r=o;break a;case`link`:var s=op(`link`,`href`,a).get(r+(n.href||``));if(s){for(var c=0;c<s.length;c++)if(o=s[c],o.getAttribute(`href`)===(n.href==null||n.href===``?null:n.href)&&o.getAttribute(`rel`)===(n.rel==null?null:n.rel)&&o.getAttribute(`title`)===(n.title==null?null:n.title)&&o.getAttribute(`crossorigin`)===(n.crossOrigin==null?null:n.crossOrigin)){s.splice(c,1);break b}}o=a.createElement(r),ef(o,r,n),a.head.appendChild(o);break;case`meta`:if(s=op(`meta`,`content`,a).get(r+(n.content||``))){for(c=0;c<s.length;c++)if(o=s[c],o.getAttribute(`content`)===(n.content==null?null:``+n.content)&&o.getAttribute(`name`)===(n.name==null?null:n.name)&&o.getAttribute(`property`)===(n.property==null?null:n.property)&&o.getAttribute(`http-equiv`)===(n.httpEquiv==null?null:n.httpEquiv)&&o.getAttribute(`charset`)===(n.charSet==null?null:n.charSet)){s.splice(c,1);break b}}o=a.createElement(r),ef(o,r,n),a.head.appendChild(o);break;default:throw Error(i(468,r))}o[vt]=e,At(o),r=o}e.stateNode=r}else sp(a,e.type,e.stateNode);else e.stateNode=tp(a,r,e.memoizedProps);else o===r?r===null&&e.stateNode!==null&&hl(e,e.memoizedProps,n.memoizedProps):(o===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):o.count--,r===null?sp(a,e.type,e.stateNode):tp(a,r,e.memoizedProps))}break;case 27:Ll(t,e),Bl(e),r&512&&(Sl||n===null||pl(n,n.return)),n!==null&&r&4&&hl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Ll(t,e),Bl(e),r&512&&(Sl||n===null||pl(n,n.return)),e.flags&32){a=e.stateNode;try{tn(a,``)}catch(t){z(e,e.return,t)}}r&4&&e.stateNode!=null&&(a=e.memoizedProps,hl(e,a,n===null?a:n.memoizedProps)),r&1024&&(Cl=!0);break;case 6:if(Ll(t,e),Bl(e),r&4){if(e.stateNode===null)throw Error(i(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(t){z(e,e.return,t)}}break;case 3:if(ap=null,a=Rl,Rl=Ff(t.containerInfo),Ll(t,e),Rl=a,Bl(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Qp(t.containerInfo)}catch(t){z(e,e.return,t)}Cl&&(Cl=!1,Vl(e));break;case 4:r=Rl,Rl=Ff(e.stateNode.containerInfo),Ll(t,e),Bl(e),Rl=r;break;case 12:Ll(t,e),Bl(e);break;case 31:Ll(t,e),Bl(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Il(e,r)));break;case 13:Ll(t,e),Bl(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(wu=Le()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Il(e,r)));break;case 22:a=e.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,u=xl,d=Sl;if(xl=u||a,Sl=d||l,Ll(t,e),Sl=d,xl=u,Bl(e),r&8192)a:for(t=e.stateNode,t._visibility=a?t._visibility&-2:t._visibility|1,a&&(n===null||l||xl||Sl||Ul(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){l=n=t;try{if(o=l.stateNode,a)s=o.style,typeof s.setProperty==`function`?s.setProperty(`display`,`none`,`important`):s.display=`none`;else{c=l.stateNode;var f=l.memoizedProps.style,p=f!=null&&f.hasOwnProperty(`display`)?f.display:null;c.style.display=p==null||typeof p==`boolean`?``:(``+p).trim()}}catch(e){z(l,l.return,e)}}}else if(t.tag===6){if(n===null){l=t;try{l.stateNode.nodeValue=a?``:l.memoizedProps}catch(e){z(l,l.return,e)}}}else if(t.tag===18){if(n===null){l=t;try{var m=l.stateNode;a?yf(m,!0):yf(l.stateNode,!1)}catch(e){z(l,l.return,e)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break a;for(;t.sibling===null;){if(t.return===null||t.return===e)break a;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,Il(e,n))));break;case 19:Ll(t,e),Bl(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Il(e,r)));break;case 30:break;case 21:break;default:Ll(t,e),Bl(e)}}function Bl(e){var t=e.flags;if(t&2){try{for(var n,r=e.return;r!==null;){if(gl(r)){n=r;break}r=r.return}if(n==null)throw Error(i(160));switch(n.tag){case 27:var a=n.stateNode,o=_l(e);yl(e,o,a);break;case 5:var s=n.stateNode;n.flags&32&&(tn(s,``),n.flags&=-33);var c=_l(e);yl(e,c,s);break;case 3:case 4:var l=n.stateNode.containerInfo,u=_l(e);vl(e,u,l);break;default:throw Error(i(161))}}catch(t){z(e,e.return,t)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Vl(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Vl(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Hl(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Dl(e,t.alternate,t),t=t.sibling}function Ul(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ll(4,t,t.return),Ul(t);break;case 1:pl(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount==`function`&&dl(t,t.return,n),Ul(t);break;case 27:Mf(t.stateNode);case 26:case 5:pl(t,t.return),Ul(t);break;case 22:t.memoizedState===null&&Ul(t);break;case 30:Ul(t);break;default:Ul(t)}e=e.sibling}}function Wl(e,t,n){for(n&&=(t.subtreeFlags&8772)!=0,t=t.child;t!==null;){var r=t.alternate,i=e,a=t,o=a.flags;switch(a.tag){case 0:case 11:case 15:Wl(i,a,n),cl(4,a);break;case 1:if(Wl(i,a,n),r=a,i=r.stateNode,typeof i.componentDidMount==`function`)try{i.componentDidMount()}catch(e){z(r,r.return,e)}if(r=a,i=r.updateQueue,i!==null){var s=r.stateNode;try{var c=i.shared.hiddenCallbacks;if(c!==null)for(i.shared.hiddenCallbacks=null,i=0;i<c.length;i++)fo(c[i],s)}catch(e){z(r,r.return,e)}}n&&o&64&&ul(a),fl(a,a.return);break;case 27:bl(a);case 26:case 5:Wl(i,a,n),n&&r===null&&o&4&&ml(a),fl(a,a.return);break;case 12:Wl(i,a,n);break;case 31:Wl(i,a,n),n&&o&4&&Nl(i,a);break;case 13:Wl(i,a,n),n&&o&4&&Pl(i,a);break;case 22:a.memoizedState===null&&Wl(i,a,n),fl(a,a.return);break;case 30:break;default:Wl(i,a,n)}t=t.sibling}}function Gl(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Ea(n))}function Kl(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ea(e))}function ql(e,t,n,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Jl(e,t,n,r),t=t.sibling}function Jl(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:ql(e,t,n,r),i&2048&&cl(9,t);break;case 1:ql(e,t,n,r);break;case 3:ql(e,t,n,r),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ea(e)));break;case 12:if(i&2048){ql(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,o=a.id,s=a.onPostCommit;typeof s==`function`&&s(o,t.alternate===null?`mount`:`update`,e.passiveEffectDuration,-0)}catch(e){z(t,t.return,e)}}else ql(e,t,n,r);break;case 31:ql(e,t,n,r);break;case 13:ql(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,o=t.alternate,t.memoizedState===null?a._visibility&2?ql(e,t,n,r):(a._visibility|=2,Yl(e,t,n,r,(t.subtreeFlags&10256)!=0||!1)):a._visibility&2?ql(e,t,n,r):Xl(e,t),i&2048&&Gl(o,t);break;case 24:ql(e,t,n,r),i&2048&&Kl(t.alternate,t);break;default:ql(e,t,n,r)}}function Yl(e,t,n,r,i){for(i&&=(t.subtreeFlags&10256)!=0||!1,t=t.child;t!==null;){var a=e,o=t,s=n,c=r,l=o.flags;switch(o.tag){case 0:case 11:case 15:Yl(a,o,s,c,i),cl(8,o);break;case 23:break;case 22:var u=o.stateNode;o.memoizedState===null?(u._visibility|=2,Yl(a,o,s,c,i)):u._visibility&2?Yl(a,o,s,c,i):Xl(a,o),i&&l&2048&&Gl(o.alternate,o);break;case 24:Yl(a,o,s,c,i),i&&l&2048&&Kl(o.alternate,o);break;default:Yl(a,o,s,c,i)}t=t.sibling}}function Xl(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Xl(n,r),i&2048&&Gl(r.alternate,r);break;case 24:Xl(n,r),i&2048&&Kl(r.alternate,r);break;default:Xl(n,r)}t=t.sibling}}var Zl=8192;function Ql(e,t,n){if(e.subtreeFlags&Zl)for(e=e.child;e!==null;)$l(e,t,n),e=e.sibling}function $l(e,t,n){switch(e.tag){case 26:Ql(e,t,n),e.flags&Zl&&e.memoizedState!==null&&up(n,Rl,e.memoizedState,e.memoizedProps);break;case 5:Ql(e,t,n);break;case 3:case 4:var r=Rl;Rl=Ff(e.stateNode.containerInfo),Ql(e,t,n),Rl=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=Zl,Zl=16777216,Ql(e,t,n),Zl=r):Ql(e,t,n));break;default:Ql(e,t,n)}}function eu(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function tu(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];Tl=r,iu(r,e)}eu(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)nu(e),e=e.sibling}function nu(e){switch(e.tag){case 0:case 11:case 15:tu(e),e.flags&2048&&ll(9,e,e.return);break;case 3:tu(e);break;case 12:tu(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,ru(e)):tu(e);break;default:tu(e)}}function ru(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];Tl=r,iu(r,e)}eu(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ll(8,t,t.return),ru(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,ru(t));break;default:ru(t)}e=e.sibling}}function iu(e,t){for(;Tl!==null;){var n=Tl;switch(n.tag){case 0:case 11:case 15:ll(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:Ea(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,Tl=r;else a:for(n=e;Tl!==null;){r=Tl;var i=r.sibling,a=r.return;if(Ol(r),r===n){Tl=null;break a}if(i!==null){i.return=a,Tl=i;break a}Tl=a}}}var au={getCacheForType:function(e){var t=va(wa),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return va(wa).controller.signal}},ou=typeof WeakMap==`function`?WeakMap:Map,su=0,cu=null,L=null,R=0,lu=0,uu=null,du=!1,fu=!1,pu=!1,mu=0,hu=0,gu=0,_u=0,vu=0,yu=0,bu=0,xu=null,Su=null,Cu=!1,wu=0,Tu=0,Eu=1/0,Du=null,Ou=null,ku=0,Au=null,ju=null,Mu=0,Nu=0,Pu=null,Fu=null,Iu=0,Lu=null;function Ru(){return su&2&&R!==0?R&-R:w.T===null?ht():Ad()}function zu(){if(yu===0)if(!(R&536870912)||k){var e=et;et<<=1,!(et&3932160)&&(et=262144),yu=e}else yu=536870912;return e=yo.current,e!==null&&(e.flags|=32),yu}function Bu(e,t,n){(e===cu&&(lu===2||lu===9)||e.cancelPendingCommit!==null)&&(qu(e,0),Wu(e,R,yu,!1)),ct(e,n),(!(su&2)||e!==cu)&&(e===cu&&(!(su&2)&&(_u|=n),hu===4&&Wu(e,R,yu,!1)),G(e))}function Vu(e,t,n){if(su&6)throw Error(i(327));var r=!n&&(t&127)==0&&(t&e.expiredLanes)===0||it(e,t),a=r?td(e,t):$u(e,t,!0),o=r;do{if(a===0){fu&&!r&&Wu(e,t,0,!1);break}else{if(n=e.current.alternate,o&&!Uu(n)){a=$u(e,t,!1),o=!1;continue}if(a===2){if(o=t,e.errorRecoveryDisabledLanes&o)var s=0;else s=e.pendingLanes&-536870913,s=s===0?s&536870912?536870912:0:s;if(s!==0){t=s;a:{var c=e;a=xu;var l=c.current.memoizedState.isDehydrated;if(l&&(qu(c,s).flags|=256),s=$u(c,s,!1),s!==2){if(pu&&!l){c.errorRecoveryDisabledLanes|=o,_u|=o,a=4;break a}o=Su,Su=a,o!==null&&(Su===null?Su=o:Su.push.apply(Su,o))}a=s}if(o=!1,a!==2)continue}}if(a===1){qu(e,0),Wu(e,t,0,!0);break}a:{switch(r=e,o=a,o){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:Wu(r,t,yu,!du);break a;case 2:Su=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(a=wu+300-Le(),10<a)){if(Wu(r,t,yu,!du),rt(r,0,!0)!==0)break a;Mu=t,r.timeoutHandle=X(Hu.bind(null,r,n,Su,Du,Cu,t,yu,_u,bu,du,o,`Throttled`,-0,0),a);break a}Hu(r,n,Su,Du,Cu,t,yu,_u,bu,du,o,null,-0,0)}}break}while(1);G(e)}function Hu(e,t,n,r,i,a,o,s,c,l,u,d,f,p){if(e.timeoutHandle=-1,d=t.subtreeFlags,d&8192||(d&16785408)==16785408){d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:un},$l(t,a,d);var m=(a&62914560)===a?wu-Le():(a&4194048)===a?Tu-Le():0;if(m=fp(d,m),m!==null){Mu=a,e.cancelPendingCommit=m(cd.bind(null,e,t,a,n,r,i,o,s,c,u,d,null,f,p)),Wu(e,a,o,!l);return}}cd(e,t,a,n,r,i,o,s,c)}function Uu(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Ur(a(),i))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Wu(e,t,n,r){t&=~vu,t&=~_u,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var a=31-Ye(i),o=1<<a;r[a]=-1,i&=~o}n!==0&&ut(e,n,t)}function Gu(){return su&6?!0:(Cd(0,!1),!1)}function Ku(){if(L!==null){if(lu===0)var e=L.return;else e=L,fa=j=null,Ko(e),Ja=null,Ya=0,e=L;for(;e!==null;)sl(e.alternate,e),e=e.return;L=null}}function qu(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,pf(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Mu=0,Ku(),cu=e,L=n=ji(e.current,null),R=t,lu=0,uu=null,du=!1,fu=it(e,t),pu=!1,bu=yu=vu=_u=gu=hu=0,Su=xu=null,Cu=!1,t&8&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var i=31-Ye(r),a=1<<i;t|=e[i],r&=~a}return mu=t,xi(),n}function Ju(e,t){I=null,w.H=ic,t===Ra||t===Ba?(t=Ka(),lu=3):t===za?(t=Ka(),lu=4):lu=t===Sc?8:typeof t==`object`&&t&&typeof t.then==`function`?6:1,uu=t,L===null&&(hu=1,gc(e,zi(t,e.current)))}function Yu(){var e=yo.current;return e===null?!0:(R&4194048)===R?bo===null:(R&62914560)===R||R&536870912?e===bo:!1}function Xu(){var e=w.H;return w.H=ic,e===null?ic:e}function Zu(){var e=w.A;return w.A=au,e}function Qu(){hu=4,du||(R&4194048)!==R&&yo.current!==null||(fu=!0),!(gu&134217727)&&!(_u&134217727)||cu===null||Wu(cu,R,yu,!1)}function $u(e,t,n){var r=su;su|=2;var i=Xu(),a=Zu();(cu!==e||R!==t)&&(Du=null,qu(e,t)),t=!1;var o=hu;a:do try{if(lu!==0&&L!==null){var s=L,c=uu;switch(lu){case 8:Ku(),o=6;break a;case 3:case 2:case 9:case 6:yo.current===null&&(t=!0);var l=lu;if(lu=0,uu=null,ad(e,s,c,l),n&&fu){o=0;break a}break;default:l=lu,lu=0,uu=null,ad(e,s,c,l)}}ed(),o=hu;break}catch(t){Ju(e,t)}while(1);return t&&e.shellSuspendCounter++,fa=j=null,su=r,w.H=i,w.A=a,L===null&&(cu=null,R=0,xi()),o}function ed(){for(;L!==null;)rd(L)}function td(e,t){var n=su;su|=2;var r=Xu(),a=Zu();cu!==e||R!==t?(Du=null,Eu=Le()+500,qu(e,t)):fu=it(e,t);a:do try{if(lu!==0&&L!==null){t=L;var o=uu;b:switch(lu){case 1:lu=0,uu=null,ad(e,t,o,1);break;case 2:case 9:if(Ha(o)){lu=0,uu=null,id(t);break}t=function(){lu!==2&&lu!==9||cu!==e||(lu=7),G(e)},o.then(t,t);break a;case 3:lu=7;break a;case 4:lu=5;break a;case 7:Ha(o)?(lu=0,uu=null,id(t)):(lu=0,uu=null,ad(e,t,o,7));break;case 5:var s=null;switch(L.tag){case 26:s=L.memoizedState;case 5:case 27:var c=L;if(s?lp(s):c.stateNode.complete){lu=0,uu=null;var l=c.sibling;if(l!==null)L=l;else{var u=c.return;u===null?L=null:(L=u,od(u))}break b}}lu=0,uu=null,ad(e,t,o,5);break;case 6:lu=0,uu=null,ad(e,t,o,6);break;case 8:Ku(),hu=6;break a;default:throw Error(i(462))}}nd();break}catch(t){Ju(e,t)}while(1);return fa=j=null,w.H=r,w.A=a,su=n,L===null?(cu=null,R=0,xi(),hu):0}function nd(){for(;L!==null&&!Fe();)rd(L)}function rd(e){var t=Qc(e.alternate,e,mu);e.memoizedProps=e.pendingProps,t===null?od(e):L=t}function id(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ic(n,t,t.pendingProps,t.type,void 0,R);break;case 11:t=Ic(n,t,t.pendingProps,t.type.render,t.ref,R);break;case 5:Ko(t);default:sl(n,t),t=L=Mi(t,mu),t=Qc(n,t,mu)}e.memoizedProps=e.pendingProps,t===null?od(e):L=t}function ad(e,t,n,r){fa=j=null,Ko(t),Ja=null,Ya=0;var i=t.return;try{if(xc(e,i,t,n,R)){hu=1,gc(e,zi(n,e.current)),L=null;return}}catch(t){if(i!==null)throw L=i,t;hu=1,gc(e,zi(n,e.current)),L=null;return}t.flags&32768?(k||r===1?e=!0:fu||R&536870912?e=!1:(du=e=!0,(r===2||r===9||r===3||r===6)&&(r=yo.current,r!==null&&r.tag===13&&(r.flags|=16384))),sd(t,e)):od(t)}function od(e){var t=e;do{if(t.flags&32768){sd(t,du);return}e=t.return;var n=al(t.alternate,t,mu);if(n!==null){L=n;return}if(t=t.sibling,t!==null){L=t;return}L=t=e}while(t!==null);hu===0&&(hu=5)}function sd(e,t){do{var n=ol(e.alternate,e);if(n!==null){n.flags&=32767,L=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){L=e;return}L=e=n}while(e!==null);hu=6,L=null}function cd(e,t,n,r,a,o,s,c,l){e.cancelPendingCommit=null;do pd();while(ku!==0);if(su&6)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(o=t.lanes|t.childLanes,o|=bi,lt(e,n,o,s,c,l),e===cu&&(L=cu=null,R=0),ju=t,Au=e,Mu=n,Nu=o,Pu=a,Fu=r,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,bd(Ve,function(){return md(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!=0,t.subtreeFlags&13878||r){r=w.T,w.T=null,a=T.p,T.p=2,s=su,su|=4;try{El(e,t,n)}finally{su=s,T.p=a,w.T=r}}ku=1,ld(),ud(),dd()}}function ld(){if(ku===1){ku=0;var e=Au,t=ju,n=(t.flags&13878)!=0;if(t.subtreeFlags&13878||n){n=w.T,w.T=null;var r=T.p;T.p=2;var i=su;su|=4;try{zl(t,e);var a=af,o=Jr(e.containerInfo),s=a.focusedElem,c=a.selectionRange;if(o!==s&&s&&s.ownerDocument&&qr(s.ownerDocument.documentElement,s)){if(c!==null&&Yr(s)){var l=c.start,u=c.end;if(u===void 0&&(u=l),`selectionStart`in s)s.selectionStart=l,s.selectionEnd=Math.min(u,s.value.length);else{var d=s.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var p=f.getSelection(),m=s.textContent.length,h=Math.min(c.start,m),g=c.end===void 0?h:Math.min(c.end,m);!p.extend&&h>g&&(o=g,g=h,h=o);var _=Kr(s,h),v=Kr(s,g);if(_&&v&&(p.rangeCount!==1||p.anchorNode!==_.node||p.anchorOffset!==_.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var y=d.createRange();y.setStart(_.node,_.offset),p.removeAllRanges(),h>g?(p.addRange(y),p.extend(v.node,v.offset)):(y.setEnd(v.node,v.offset),p.addRange(y))}}}}for(d=[],p=s;p=p.parentNode;)p.nodeType===1&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof s.focus==`function`&&s.focus(),s=0;s<d.length;s++){var b=d[s];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}Ep=!!rf,af=rf=null}finally{su=i,T.p=r,w.T=n}}e.current=t,ku=2}}function ud(){if(ku===2){ku=0;var e=Au,t=ju,n=(t.flags&8772)!=0;if(t.subtreeFlags&8772||n){n=w.T,w.T=null;var r=T.p;T.p=2;var i=su;su|=4;try{Dl(e,t.alternate,t)}finally{su=i,T.p=r,w.T=n}}ku=3}}function dd(){if(ku===4||ku===3){ku=0,Ie();var e=Au,t=ju,n=Mu,r=Fu;t.subtreeFlags&10256||t.flags&10256?ku=5:(ku=0,ju=Au=null,fd(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(Ou=null),mt(n),t=t.stateNode,qe&&typeof qe.onCommitFiberRoot==`function`)try{qe.onCommitFiberRoot(Ke,t,void 0,(t.current.flags&128)==128)}catch{}if(r!==null){t=w.T,i=T.p,T.p=2,w.T=null;try{for(var a=e.onRecoverableError,o=0;o<r.length;o++){var s=r[o];a(s.value,{componentStack:s.stack})}}finally{w.T=t,T.p=i}}Mu&3&&pd(),G(e),i=e.pendingLanes,n&261930&&i&42?e===Lu?Iu++:(Iu=0,Lu=e):Iu=0,Cd(0,!1)}}function fd(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Ea(t)))}function pd(){return ld(),ud(),dd(),md()}function md(){if(ku!==5)return!1;var e=Au,t=Nu;Nu=0;var n=mt(Mu),r=w.T,a=T.p;try{T.p=32>n?32:n,w.T=null,n=Pu,Pu=null;var o=Au,s=Mu;if(ku=0,ju=Au=null,Mu=0,su&6)throw Error(i(331));var c=su;if(su|=4,nu(o.current),Jl(o,o.current,s,n),su=c,Cd(0,!1),qe&&typeof qe.onPostCommitFiberRoot==`function`)try{qe.onPostCommitFiberRoot(Ke,o)}catch{}return!0}finally{T.p=a,w.T=r,fd(e,t)}}function hd(e,t,n){t=zi(n,t),t=vc(e.stateNode,t,2),e=oo(e,t,2),e!==null&&(ct(e,2),G(e))}function z(e,t,n){if(e.tag===3)hd(e,e,n);else for(;t!==null;){if(t.tag===3){hd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError==`function`||typeof r.componentDidCatch==`function`&&(Ou===null||!Ou.has(r))){e=zi(n,e),n=yc(2),r=oo(t,n,2),r!==null&&(bc(n,r,t,e),ct(r,2),G(r));break}}t=t.return}}function gd(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new ou;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(pu=!0,i.add(n),e=_d.bind(null,e,t,n),t.then(e,e))}function _d(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,cu===e&&(R&n)===n&&(hu===4||hu===3&&(R&62914560)===R&&300>Le()-wu?!(su&2)&&qu(e,0):vu|=n,bu===R&&(bu=0)),G(e)}function vd(e,t){t===0&&(t=ot()),e=wi(e,t),e!==null&&(ct(e,t),G(e))}function B(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),vd(e,n)}function yd(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(i(314))}r!==null&&r.delete(t),vd(e,n)}function bd(e,t){return Ne(e,t)}var xd=null,V=null,Sd=!1,H=!1,U=!1,W=0;function G(e){e!==V&&e.next===null&&(V===null?xd=V=e:V=V.next=e),H=!0,Sd||(Sd=!0,kd())}function Cd(e,t){if(!U&&H){U=!0;do for(var n=!1,r=xd;r!==null;){if(!t)if(e!==0){var i=r.pendingLanes;if(i===0)var a=0;else{var o=r.suspendedLanes,s=r.pingedLanes;a=(1<<31-Ye(42|e)+1)-1,a&=i&~(o&~s),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(n=!0,Od(r,a))}else a=R,a=rt(r,r===cu?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(a&3)||it(r,a)||(n=!0,Od(r,a));r=r.next}while(n);U=!1}}function wd(){Td()}function Td(){H=Sd=!1;var e=0;W!==0&&ff()&&(e=W);for(var t=Le(),n=null,r=xd;r!==null;){var i=r.next,a=Ed(r,t);a===0?(r.next=null,n===null?xd=i:n.next=i,i===null&&(V=n)):(n=r,(e!==0||a&3)&&(H=!0)),r=i}ku!==0&&ku!==5||Cd(e,!1),W!==0&&(W=0)}function Ed(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes&-62914561;0<a;){var o=31-Ye(a),s=1<<o,c=i[o];c===-1?((s&n)===0||(s&r)!==0)&&(i[o]=at(s,t)):c<=t&&(e.expiredLanes|=s),a&=~s}if(t=cu,n=R,n=rt(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,n===0||e===t&&(lu===2||lu===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&Pe(r),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||it(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(r!==null&&Pe(r),mt(n)){case 2:case 8:n=Be;break;case 32:n=Ve;break;case 268435456:n=Ue;break;default:n=Ve}return r=Dd.bind(null,e),n=Ne(n,r),e.callbackPriority=t,e.callbackNode=n,t}return r!==null&&r!==null&&Pe(r),e.callbackPriority=2,e.callbackNode=null,2}function Dd(e,t){if(ku!==0&&ku!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(pd()&&e.callbackNode!==n)return null;var r=R;return r=rt(e,e===cu?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(Vu(e,r,t),Ed(e,Le()),e.callbackNode!=null&&e.callbackNode===n?Dd.bind(null,e):null)}function Od(e,t){if(pd())return null;Vu(e,t,!0)}function kd(){hf(function(){su&6?Ne(ze,wd):Td()})}function Ad(){if(W===0){var e=ka;e===0&&(e=$e,$e<<=1,!($e&261888)&&($e=256)),W=e}return W}function jd(e){return e==null||typeof e==`symbol`||typeof e==`boolean`?null:typeof e==`function`?e:ln(``+e)}function Md(e,t){var n=t.ownerDocument.createElement(`input`);return n.name=t.name,n.value=t.value,e.id&&n.setAttribute(`form`,e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Nd(e,t,n,r,i){if(t===`submit`&&n&&n.stateNode===i){var a=jd((i[yt]||null).action),o=r.submitter;o&&(t=(t=o[yt]||null)?jd(t.formAction):o.getAttribute(`formAction`),t!==null&&(a=t,o=null));var s=new jn(`action`,`action`,null,r,i);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(W!==0){var e=o?Md(i,o):new FormData(i);Ws(n,{pending:!0,data:e,method:i.method,action:a},null,e)}}else typeof a==`function`&&(s.preventDefault(),e=o?Md(i,o):new FormData(i),Ws(n,{pending:!0,data:e,method:i.method,action:a},a,e))},currentTarget:i}]})}}for(var K=0;K<hi.length;K++){var Pd=hi[K],Fd=Pd.toLowerCase(),Id=Pd[0].toUpperCase()+Pd.slice(1);gi(Fd,`on`+Id)}gi(si,`onAnimationEnd`),gi(ci,`onAnimationIteration`),gi(li,`onAnimationStart`),gi(`dblclick`,`onDoubleClick`),gi(`focusin`,`onFocus`),gi(`focusout`,`onBlur`),gi(ui,`onTransitionRun`),gi(di,`onTransitionStart`),gi(fi,`onTransitionCancel`),gi(pi,`onTransitionEnd`),Pt(`onMouseEnter`,[`mouseout`,`mouseover`]),Pt(`onMouseLeave`,[`mouseout`,`mouseover`]),Pt(`onPointerEnter`,[`pointerout`,`pointerover`]),Pt(`onPointerLeave`,[`pointerout`,`pointerover`]),Nt(`onChange`,`change click focusin focusout input keydown keyup selectionchange`.split(` `)),Nt(`onSelect`,`focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange`.split(` `)),Nt(`onBeforeInput`,[`compositionend`,`keypress`,`textInput`,`paste`]),Nt(`onCompositionEnd`,`compositionend focusout keydown keypress keyup mousedown`.split(` `)),Nt(`onCompositionStart`,`compositionstart focusout keydown keypress keyup mousedown`.split(` `)),Nt(`onCompositionUpdate`,`compositionupdate focusout keydown keypress keyup mousedown`.split(` `));var Ld=`abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting`.split(` `),Rd=new Set(`beforetoggle cancel close invalid load scroll scrollend toggle`.split(` `).concat(Ld));function zd(e,t){t=(t&4)!=0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;a:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==a&&i.isPropagationStopped())break a;a=s,i.currentTarget=l;try{a(i)}catch(e){_i(e)}i.currentTarget=null,a=c}else for(o=0;o<r.length;o++){if(s=r[o],c=s.instance,l=s.currentTarget,s=s.listener,c!==a&&i.isPropagationStopped())break a;a=s,i.currentTarget=l;try{a(i)}catch(e){_i(e)}i.currentTarget=null,a=c}}}}function q(e,t){var n=t[xt];n===void 0&&(n=t[xt]=new Set);var r=e+`__bubble`;n.has(r)||(J(t,e,2,!1),n.add(r))}function Bd(e,t,n){var r=0;t&&(r|=4),J(n,e,r,t)}var Vd=`_reactListening`+Math.random().toString(36).slice(2);function Hd(e){if(!e[Vd]){e[Vd]=!0,jt.forEach(function(t){t!==`selectionchange`&&(Rd.has(t)||Bd(t,!1,e),Bd(t,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Vd]||(t[Vd]=!0,Bd(`selectionchange`,!1,t))}}function J(e,t,n,r){switch(Np(t)){case 2:var i=Dp;break;case 8:i=Op;break;default:i=kp}n=i.bind(null,t,n,e),i=void 0,!bn||t!==`touchstart`&&t!==`touchmove`&&t!==`wheel`||(i=!0),r?i===void 0?e.addEventListener(t,n,!0):e.addEventListener(t,n,{capture:!0,passive:i}):i===void 0?e.addEventListener(t,n,!1):e.addEventListener(t,n,{passive:i})}function Ud(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)a:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var c=r.stateNode.containerInfo;if(c===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&s.stateNode.containerInfo===i)return;s=s.return}for(;c!==null;){if(s=Dt(c),s===null)return;if(l=s.tag,l===5||l===6||l===26||l===27){r=a=s;continue a}c=c.parentNode}}r=r.return}_n(function(){var r=a,i=fn(n),s=[];a:{var c=mi.get(e);if(c!==void 0){var l=jn,u=e;switch(e){case`keypress`:if(En(n)===0)break a;case`keydown`:case`keyup`:l=tr;break;case`focusin`:u=`focus`,l=Hn;break;case`focusout`:u=`blur`,l=Hn;break;case`beforeblur`:case`afterblur`:l=Hn;break;case`click`:if(n.button===2)break a;case`auxclick`:case`dblclick`:case`mousedown`:case`mousemove`:case`mouseup`:case`mouseout`:case`mouseover`:case`contextmenu`:l=Rn;break;case`drag`:case`dragend`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`dragstart`:case`drop`:l=Bn;break;case`touchcancel`:case`touchend`:case`touchmove`:case`touchstart`:l=ar;break;case si:case ci:case li:l=Wn;break;case pi:l=sr;break;case`scroll`:case`scrollend`:l=Nn;break;case`wheel`:l=lr;break;case`copy`:case`cut`:case`paste`:l=Kn;break;case`gotpointercapture`:case`lostpointercapture`:case`pointercancel`:case`pointerdown`:case`pointermove`:case`pointerout`:case`pointerover`:case`pointerup`:l=rr;break;case`toggle`:case`beforetoggle`:l=dr}var d=(t&4)!=0,f=!d&&(e===`scroll`||e===`scrollend`),p=d?c===null?null:c+`Capture`:c;d=[];for(var m=r,h;m!==null;){var g=m;if(h=g.stateNode,g=g.tag,g!==5&&g!==26&&g!==27||h===null||p===null||(g=vn(m,p),g!=null&&d.push(Wd(m,g,h))),f)break;m=m.return}0<d.length&&(c=new l(c,u,null,n,i),s.push({event:c,listeners:d}))}}if(!(t&7)){a:{if(c=e===`mouseover`||e===`pointerover`,l=e===`mouseout`||e===`pointerout`,c&&n!==dn&&(u=n.relatedTarget||n.fromElement)&&(Dt(u)||u[bt]))break a;if((l||c)&&(c=i.window===i?i:(c=i.ownerDocument)?c.defaultView||c.parentWindow:window,l?(u=n.relatedTarget||n.toElement,l=r,u=u?Dt(u):null,u!==null&&(f=o(u),d=u.tag,u!==f||d!==5&&d!==27&&d!==6)&&(u=null)):(l=null,u=r),l!==u)){if(d=Rn,g=`onMouseLeave`,p=`onMouseEnter`,m=`mouse`,(e===`pointerout`||e===`pointerover`)&&(d=rr,g=`onPointerLeave`,p=`onPointerEnter`,m=`pointer`),f=l==null?c:D(l),h=u==null?c:D(u),c=new d(g,m+`leave`,l,n,i),c.target=f,c.relatedTarget=h,g=null,Dt(i)===r&&(d=new d(p,m+`enter`,u,n,i),d.target=h,d.relatedTarget=f,g=d),f=g,l&&u)b:{for(d=Kd,p=l,m=u,h=0,g=p;g;g=d(g))h++;g=0;for(var _=m;_;_=d(_))g++;for(;0<h-g;)p=d(p),h--;for(;0<g-h;)m=d(m),g--;for(;h--;){if(p===m||m!==null&&p===m.alternate){d=p;break b}p=d(p),m=d(m)}d=null}else d=null;l!==null&&qd(s,c,l,d,!1),u!==null&&f!==null&&qd(s,f,u,d,!0)}}a:{if(c=r?D(r):window,l=c.nodeName&&c.nodeName.toLowerCase(),l===`select`||l===`input`&&c.type===`file`)var v=jr;else if(Tr(c))if(Mr)v=Vr;else{v=zr;var y=Rr}else l=c.nodeName,!l||l.toLowerCase()!==`input`||c.type!==`checkbox`&&c.type!==`radio`?r&&on(r.elementType)&&(v=jr):v=Br;if(v&&=v(e,r)){Er(s,v,n,i);break a}y&&y(e,c,r),e===`focusout`&&r&&c.type===`number`&&r.memoizedProps.value!=null&&Zt(c,`number`,c.value)}switch(y=r?D(r):window,e){case`focusin`:(Tr(y)||y.contentEditable===`true`)&&(Zr=y,Qr=r,$r=null);break;case`focusout`:$r=Qr=Zr=null;break;case`mousedown`:ei=!0;break;case`contextmenu`:case`mouseup`:case`dragend`:ei=!1,ti(s,n,i);break;case`selectionchange`:if(Xr)break;case`keydown`:case`keyup`:ti(s,n,i)}var b;if(pr)b:{switch(e){case`compositionstart`:var x=`onCompositionStart`;break b;case`compositionend`:x=`onCompositionEnd`;break b;case`compositionupdate`:x=`onCompositionUpdate`;break b}x=void 0}else xr?yr(e,n)&&(x=`onCompositionEnd`):e===`keydown`&&n.keyCode===229&&(x=`onCompositionStart`);x&&(gr&&n.locale!==`ko`&&(xr||x!==`onCompositionStart`?x===`onCompositionEnd`&&xr&&(b=Tn()):(Sn=i,Cn=`value`in Sn?Sn.value:Sn.textContent,xr=!0)),y=Gd(r,x),0<y.length&&(x=new Jn(x,e,null,n,i),s.push({event:x,listeners:y}),b?x.data=b:(b=br(n),b!==null&&(x.data=b)))),(b=hr?Sr(e,n):Cr(e,n))&&(x=Gd(r,`onBeforeInput`),0<x.length&&(y=new Jn(`onBeforeInput`,`beforeinput`,null,n,i),s.push({event:y,listeners:x}),y.data=b)),Nd(s,e,r,n,i)}zd(s,t)})}function Wd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gd(e,t){for(var n=t+`Capture`,r=[];e!==null;){var i=e,a=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||a===null||(i=vn(e,n),i!=null&&r.unshift(Wd(e,i,a)),i=vn(e,t),i!=null&&r.push(Wd(e,i,a))),e.tag===3)return r;e=e.return}return[]}function Kd(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function qd(e,t,n,r,i){for(var a=t._reactName,o=[];n!==null&&n!==r;){var s=n,c=s.alternate,l=s.stateNode;if(s=s.tag,c!==null&&c===r)break;s!==5&&s!==26&&s!==27||l===null||(c=l,i?(l=vn(n,a),l!=null&&o.unshift(Wd(n,l,c))):i||(l=vn(n,a),l!=null&&o.push(Wd(n,l,c)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Jd=/\r\n?/g,Yd=/\u0000|\uFFFD/g;function Xd(e){return(typeof e==`string`?e:``+e).replace(Jd,`
`).replace(Yd,``)}function Zd(e,t){return t=Xd(t),Xd(e)===t}function Qd(e,t,n,r,a,o){switch(n){case`children`:typeof r==`string`?t===`body`||t===`textarea`&&r===``||tn(e,r):(typeof r==`number`||typeof r==`bigint`)&&t!==`body`&&tn(e,``+r);break;case`className`:Bt(e,`class`,r);break;case`tabIndex`:Bt(e,`tabindex`,r);break;case`dir`:case`role`:case`viewBox`:case`width`:case`height`:Bt(e,n,r);break;case`style`:an(e,r,o);break;case`data`:if(t!==`object`){Bt(e,`data`,r);break}case`src`:case`href`:if(r===``&&(t!==`a`||n!==`href`)){e.removeAttribute(n);break}if(r==null||typeof r==`function`||typeof r==`symbol`||typeof r==`boolean`){e.removeAttribute(n);break}r=ln(``+r),e.setAttribute(n,r);break;case`action`:case`formAction`:if(typeof r==`function`){e.setAttribute(n,`javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')`);break}else typeof o==`function`&&(n===`formAction`?(t!==`input`&&Qd(e,t,`name`,a.name,a,null),Qd(e,t,`formEncType`,a.formEncType,a,null),Qd(e,t,`formMethod`,a.formMethod,a,null),Qd(e,t,`formTarget`,a.formTarget,a,null)):(Qd(e,t,`encType`,a.encType,a,null),Qd(e,t,`method`,a.method,a,null),Qd(e,t,`target`,a.target,a,null)));if(r==null||typeof r==`symbol`||typeof r==`boolean`){e.removeAttribute(n);break}r=ln(``+r),e.setAttribute(n,r);break;case`onClick`:r!=null&&(e.onclick=un);break;case`onScroll`:r!=null&&q(`scroll`,e);break;case`onScrollEnd`:r!=null&&q(`scrollend`,e);break;case`dangerouslySetInnerHTML`:if(r!=null){if(typeof r!=`object`||!(`__html`in r))throw Error(i(61));if(n=r.__html,n!=null){if(a.children!=null)throw Error(i(60));e.innerHTML=n}}break;case`multiple`:e.multiple=r&&typeof r!=`function`&&typeof r!=`symbol`;break;case`muted`:e.muted=r&&typeof r!=`function`&&typeof r!=`symbol`;break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`defaultValue`:case`defaultChecked`:case`innerHTML`:case`ref`:break;case`autoFocus`:break;case`xlinkHref`:if(r==null||typeof r==`function`||typeof r==`boolean`||typeof r==`symbol`){e.removeAttribute(`xlink:href`);break}n=ln(``+r),e.setAttributeNS(`http://www.w3.org/1999/xlink`,`xlink:href`,n);break;case`contentEditable`:case`spellCheck`:case`draggable`:case`value`:case`autoReverse`:case`externalResourcesRequired`:case`focusable`:case`preserveAlpha`:r!=null&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,``+r):e.removeAttribute(n);break;case`inert`:case`allowFullScreen`:case`async`:case`autoPlay`:case`controls`:case`default`:case`defer`:case`disabled`:case`disablePictureInPicture`:case`disableRemotePlayback`:case`formNoValidate`:case`hidden`:case`loop`:case`noModule`:case`noValidate`:case`open`:case`playsInline`:case`readOnly`:case`required`:case`reversed`:case`scoped`:case`seamless`:case`itemScope`:r&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,``):e.removeAttribute(n);break;case`capture`:case`download`:!0===r?e.setAttribute(n,``):!1!==r&&r!=null&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,r):e.removeAttribute(n);break;case`cols`:case`rows`:case`size`:case`span`:r!=null&&typeof r!=`function`&&typeof r!=`symbol`&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case`rowSpan`:case`start`:r==null||typeof r==`function`||typeof r==`symbol`||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case`popover`:q(`beforetoggle`,e),q(`toggle`,e),zt(e,`popover`,r);break;case`xlinkActuate`:Vt(e,`http://www.w3.org/1999/xlink`,`xlink:actuate`,r);break;case`xlinkArcrole`:Vt(e,`http://www.w3.org/1999/xlink`,`xlink:arcrole`,r);break;case`xlinkRole`:Vt(e,`http://www.w3.org/1999/xlink`,`xlink:role`,r);break;case`xlinkShow`:Vt(e,`http://www.w3.org/1999/xlink`,`xlink:show`,r);break;case`xlinkTitle`:Vt(e,`http://www.w3.org/1999/xlink`,`xlink:title`,r);break;case`xlinkType`:Vt(e,`http://www.w3.org/1999/xlink`,`xlink:type`,r);break;case`xmlBase`:Vt(e,`http://www.w3.org/XML/1998/namespace`,`xml:base`,r);break;case`xmlLang`:Vt(e,`http://www.w3.org/XML/1998/namespace`,`xml:lang`,r);break;case`xmlSpace`:Vt(e,`http://www.w3.org/XML/1998/namespace`,`xml:space`,r);break;case`is`:zt(e,`is`,r);break;case`innerText`:case`textContent`:break;default:(!(2<n.length)||n[0]!==`o`&&n[0]!==`O`||n[1]!==`n`&&n[1]!==`N`)&&(n=sn.get(n)||n,zt(e,n,r))}}function $d(e,t,n,r,a,o){switch(n){case`style`:an(e,r,o);break;case`dangerouslySetInnerHTML`:if(r!=null){if(typeof r!=`object`||!(`__html`in r))throw Error(i(61));if(n=r.__html,n!=null){if(a.children!=null)throw Error(i(60));e.innerHTML=n}}break;case`children`:typeof r==`string`?tn(e,r):(typeof r==`number`||typeof r==`bigint`)&&tn(e,``+r);break;case`onScroll`:r!=null&&q(`scroll`,e);break;case`onScrollEnd`:r!=null&&q(`scrollend`,e);break;case`onClick`:r!=null&&(e.onclick=un);break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`innerHTML`:case`ref`:break;case`innerText`:case`textContent`:break;default:if(!Mt.hasOwnProperty(n))a:{if(n[0]===`o`&&n[1]===`n`&&(a=n.endsWith(`Capture`),t=n.slice(2,a?n.length-7:void 0),o=e[yt]||null,o=o==null?null:o[n],typeof o==`function`&&e.removeEventListener(t,o,a),typeof r==`function`)){typeof o!=`function`&&o!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,a);break a}n in e?e[n]=r:!0===r?e.setAttribute(n,``):zt(e,n,r)}}}function ef(e,t,n){switch(t){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`img`:q(`error`,e),q(`load`,e);var r=!1,a=!1,o;for(o in n)if(n.hasOwnProperty(o)){var s=n[o];if(s!=null)switch(o){case`src`:r=!0;break;case`srcSet`:a=!0;break;case`children`:case`dangerouslySetInnerHTML`:throw Error(i(137,t));default:Qd(e,t,o,s,n,null)}}a&&Qd(e,t,`srcSet`,n.srcSet,n,null),r&&Qd(e,t,`src`,n.src,n,null);return;case`input`:q(`invalid`,e);var c=o=s=a=null,l=null,u=null;for(r in n)if(n.hasOwnProperty(r)){var d=n[r];if(d!=null)switch(r){case`name`:a=d;break;case`type`:s=d;break;case`checked`:l=d;break;case`defaultChecked`:u=d;break;case`value`:o=d;break;case`defaultValue`:c=d;break;case`children`:case`dangerouslySetInnerHTML`:if(d!=null)throw Error(i(137,t));break;default:Qd(e,t,r,d,n,null)}}Xt(e,o,c,l,u,s,a,!1);return;case`select`:for(a in q(`invalid`,e),r=s=o=null,n)if(n.hasOwnProperty(a)&&(c=n[a],c!=null))switch(a){case`value`:o=c;break;case`defaultValue`:s=c;break;case`multiple`:r=c;default:Qd(e,t,a,c,n,null)}t=o,n=s,e.multiple=!!r,t==null?n!=null&&Qt(e,!!r,n,!0):Qt(e,!!r,t,!1);return;case`textarea`:for(s in q(`invalid`,e),o=a=r=null,n)if(n.hasOwnProperty(s)&&(c=n[s],c!=null))switch(s){case`value`:r=c;break;case`defaultValue`:a=c;break;case`children`:o=c;break;case`dangerouslySetInnerHTML`:if(c!=null)throw Error(i(91));break;default:Qd(e,t,s,c,n,null)}en(e,r,a,o);return;case`option`:for(l in n)if(n.hasOwnProperty(l)&&(r=n[l],r!=null))switch(l){case`selected`:e.selected=r&&typeof r!=`function`&&typeof r!=`symbol`;break;default:Qd(e,t,l,r,n,null)}return;case`dialog`:q(`beforetoggle`,e),q(`toggle`,e),q(`cancel`,e),q(`close`,e);break;case`iframe`:case`object`:q(`load`,e);break;case`video`:case`audio`:for(r=0;r<Ld.length;r++)q(Ld[r],e);break;case`image`:q(`error`,e),q(`load`,e);break;case`details`:q(`toggle`,e);break;case`embed`:case`source`:case`link`:q(`error`,e),q(`load`,e);case`area`:case`base`:case`br`:case`col`:case`hr`:case`keygen`:case`meta`:case`param`:case`track`:case`wbr`:case`menuitem`:for(u in n)if(n.hasOwnProperty(u)&&(r=n[u],r!=null))switch(u){case`children`:case`dangerouslySetInnerHTML`:throw Error(i(137,t));default:Qd(e,t,u,r,n,null)}return;default:if(on(t)){for(d in n)n.hasOwnProperty(d)&&(r=n[d],r!==void 0&&$d(e,t,d,r,n,void 0));return}}for(c in n)n.hasOwnProperty(c)&&(r=n[c],r!=null&&Qd(e,t,c,r,n,null))}function tf(e,t,n,r){switch(t){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`input`:var a=null,o=null,s=null,c=null,l=null,u=null,d=null;for(m in n){var f=n[m];if(n.hasOwnProperty(m)&&f!=null)switch(m){case`checked`:break;case`value`:break;case`defaultValue`:l=f;default:r.hasOwnProperty(m)||Qd(e,t,m,null,r,f)}}for(var p in r){var m=r[p];if(f=n[p],r.hasOwnProperty(p)&&(m!=null||f!=null))switch(p){case`type`:o=m;break;case`name`:a=m;break;case`checked`:u=m;break;case`defaultChecked`:d=m;break;case`value`:s=m;break;case`defaultValue`:c=m;break;case`children`:case`dangerouslySetInnerHTML`:if(m!=null)throw Error(i(137,t));break;default:m!==f&&Qd(e,t,p,m,r,f)}}Yt(e,s,c,l,u,d,o,a);return;case`select`:for(o in m=s=c=p=null,n)if(l=n[o],n.hasOwnProperty(o)&&l!=null)switch(o){case`value`:break;case`multiple`:m=l;default:r.hasOwnProperty(o)||Qd(e,t,o,null,r,l)}for(a in r)if(o=r[a],l=n[a],r.hasOwnProperty(a)&&(o!=null||l!=null))switch(a){case`value`:p=o;break;case`defaultValue`:c=o;break;case`multiple`:s=o;default:o!==l&&Qd(e,t,a,o,r,l)}t=c,n=s,r=m,p==null?!!r!=!!n&&(t==null?Qt(e,!!n,n?[]:``,!1):Qt(e,!!n,t,!0)):Qt(e,!!n,p,!1);return;case`textarea`:for(c in m=p=null,n)if(a=n[c],n.hasOwnProperty(c)&&a!=null&&!r.hasOwnProperty(c))switch(c){case`value`:break;case`children`:break;default:Qd(e,t,c,null,r,a)}for(s in r)if(a=r[s],o=n[s],r.hasOwnProperty(s)&&(a!=null||o!=null))switch(s){case`value`:p=a;break;case`defaultValue`:m=a;break;case`children`:break;case`dangerouslySetInnerHTML`:if(a!=null)throw Error(i(91));break;default:a!==o&&Qd(e,t,s,a,r,o)}$t(e,p,m);return;case`option`:for(var h in n)if(p=n[h],n.hasOwnProperty(h)&&p!=null&&!r.hasOwnProperty(h))switch(h){case`selected`:e.selected=!1;break;default:Qd(e,t,h,null,r,p)}for(l in r)if(p=r[l],m=n[l],r.hasOwnProperty(l)&&p!==m&&(p!=null||m!=null))switch(l){case`selected`:e.selected=p&&typeof p!=`function`&&typeof p!=`symbol`;break;default:Qd(e,t,l,p,r,m)}return;case`img`:case`link`:case`area`:case`base`:case`br`:case`col`:case`embed`:case`hr`:case`keygen`:case`meta`:case`param`:case`source`:case`track`:case`wbr`:case`menuitem`:for(var g in n)p=n[g],n.hasOwnProperty(g)&&p!=null&&!r.hasOwnProperty(g)&&Qd(e,t,g,null,r,p);for(u in r)if(p=r[u],m=n[u],r.hasOwnProperty(u)&&p!==m&&(p!=null||m!=null))switch(u){case`children`:case`dangerouslySetInnerHTML`:if(p!=null)throw Error(i(137,t));break;default:Qd(e,t,u,p,r,m)}return;default:if(on(t)){for(var _ in n)p=n[_],n.hasOwnProperty(_)&&p!==void 0&&!r.hasOwnProperty(_)&&$d(e,t,_,void 0,r,p);for(d in r)p=r[d],m=n[d],!r.hasOwnProperty(d)||p===m||p===void 0&&m===void 0||$d(e,t,d,p,r,m);return}}for(var v in n)p=n[v],n.hasOwnProperty(v)&&p!=null&&!r.hasOwnProperty(v)&&Qd(e,t,v,null,r,p);for(f in r)p=r[f],m=n[f],!r.hasOwnProperty(f)||p===m||p==null&&m==null||Qd(e,t,f,p,r,m)}function Y(e){switch(e){case`css`:case`script`:case`font`:case`img`:case`image`:case`input`:case`link`:return!0;default:return!1}}function nf(){if(typeof performance.getEntriesByType==`function`){for(var e=0,t=0,n=performance.getEntriesByType(`resource`),r=0;r<n.length;r++){var i=n[r],a=i.transferSize,o=i.initiatorType,s=i.duration;if(a&&s&&Y(o)){for(o=0,s=i.responseEnd,r+=1;r<n.length;r++){var c=n[r],l=c.startTime;if(l>s)break;var u=c.transferSize,d=c.initiatorType;u&&Y(d)&&(c=c.responseEnd,o+=u*(c<s?1:(s-l)/(c-l)))}if(--r,t+=8*(a+o)/(i.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e==`number`)?e:5}var rf=null,af=null;function sf(e){return e.nodeType===9?e:e.ownerDocument}function cf(e){switch(e){case`http://www.w3.org/2000/svg`:return 1;case`http://www.w3.org/1998/Math/MathML`:return 2;default:return 0}}function lf(e,t){if(e===0)switch(t){case`svg`:return 1;case`math`:return 2;default:return 0}return e===1&&t===`foreignObject`?0:e}function uf(e,t){return e===`textarea`||e===`noscript`||typeof t.children==`string`||typeof t.children==`number`||typeof t.children==`bigint`||typeof t.dangerouslySetInnerHTML==`object`&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var df=null;function ff(){var e=window.event;return e&&e.type===`popstate`?e===df?!1:(df=e,!0):(df=null,!1)}var X=typeof setTimeout==`function`?setTimeout:void 0,pf=typeof clearTimeout==`function`?clearTimeout:void 0,mf=typeof Promise==`function`?Promise:void 0,hf=typeof queueMicrotask==`function`?queueMicrotask:mf===void 0?X:function(e){return mf.resolve(null).then(e).catch(gf)};function gf(e){setTimeout(function(){throw e})}function _f(e){return e===`head`}function vf(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n===`/$`||n===`/&`){if(r===0){e.removeChild(i),Qp(t);return}r--}else if(n===`$`||n===`$?`||n===`$~`||n===`$!`||n===`&`)r++;else if(n===`html`)Mf(e.ownerDocument.documentElement);else if(n===`head`){n=e.ownerDocument.head,Mf(n);for(var a=n.firstChild;a;){var o=a.nextSibling,s=a.nodeName;a[Tt]||s===`SCRIPT`||s===`STYLE`||s===`LINK`&&a.rel.toLowerCase()===`stylesheet`||n.removeChild(a),a=o}}else n===`body`&&Mf(e.ownerDocument.body);n=i}while(n);Qp(t)}function yf(e,t){var n=e;e=0;do{var r=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display=`none`):(n.style.display=n._stashedDisplay||``,n.getAttribute(`style`)===``&&n.removeAttribute(`style`)):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=``):n.nodeValue=n._stashedText||``),r&&r.nodeType===8)if(n=r.data,n===`/$`){if(e===0)break;e--}else n!==`$`&&n!==`$?`&&n!==`$~`&&n!==`$!`||e++;n=r}while(n)}function bf(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case`HTML`:case`HEAD`:case`BODY`:bf(n),Et(n);continue;case`SCRIPT`:case`STYLE`:continue;case`LINK`:if(n.rel.toLowerCase()===`stylesheet`)continue}e.removeChild(n)}}function xf(e,t,n,r){for(;e.nodeType===1;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!==`INPUT`||e.type!==`hidden`))break}else if(r){if(!e[Tt])switch(t){case`meta`:if(!e.hasAttribute(`itemprop`))break;return e;case`link`:if(a=e.getAttribute(`rel`),a===`stylesheet`&&e.hasAttribute(`data-precedence`)||a!==i.rel||e.getAttribute(`href`)!==(i.href==null||i.href===``?null:i.href)||e.getAttribute(`crossorigin`)!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute(`title`)!==(i.title==null?null:i.title))break;return e;case`style`:if(e.hasAttribute(`data-precedence`))break;return e;case`script`:if(a=e.getAttribute(`src`),(a!==(i.src==null?null:i.src)||e.getAttribute(`type`)!==(i.type==null?null:i.type)||e.getAttribute(`crossorigin`)!==(i.crossOrigin==null?null:i.crossOrigin))&&a&&e.hasAttribute(`async`)&&!e.hasAttribute(`itemprop`))break;return e;default:return e}}else if(t===`input`&&e.type===`hidden`){var a=i.name==null?null:``+i.name;if(i.type===`hidden`&&e.getAttribute(`name`)===a)return e}else return e;if(e=Df(e.nextSibling),e===null)break}return null}function Sf(e,t,n){if(t===``)return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!==`INPUT`||e.type!==`hidden`)&&!n||(e=Df(e.nextSibling),e===null))return null;return e}function Cf(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!==`INPUT`||e.type!==`hidden`)&&!t||(e=Df(e.nextSibling),e===null))return null;return e}function wf(e){return e.data===`$?`||e.data===`$~`}function Tf(e){return e.data===`$!`||e.data===`$?`&&e.ownerDocument.readyState!==`loading`}function Ef(e,t){var n=e.ownerDocument;if(e.data===`$~`)e._reactRetry=t;else if(e.data!==`$?`||n.readyState!==`loading`)t();else{var r=function(){t(),n.removeEventListener(`DOMContentLoaded`,r)};n.addEventListener(`DOMContentLoaded`,r),e._reactRetry=r}}function Df(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t===`$`||t===`$!`||t===`$?`||t===`$~`||t===`&`||t===`F!`||t===`F`)break;if(t===`/$`||t===`/&`)return null}}return e}var Of=null;function kf(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===`/$`||n===`/&`){if(t===0)return Df(e.nextSibling);t--}else n!==`$`&&n!==`$!`&&n!==`$?`&&n!==`$~`&&n!==`&`||t++}e=e.nextSibling}return null}function Af(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===`$`||n===`$!`||n===`$?`||n===`$~`||n===`&`){if(t===0)return e;t--}else n!==`/$`&&n!==`/&`||t++}e=e.previousSibling}return null}function jf(e,t,n){switch(t=sf(n),e){case`html`:if(e=t.documentElement,!e)throw Error(i(452));return e;case`head`:if(e=t.head,!e)throw Error(i(453));return e;case`body`:if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function Mf(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Et(e)}var Nf=new Map,Pf=new Set;function Ff(e){return typeof e.getRootNode==`function`?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var If=T.d;T.d={f:Lf,r:Rf,D:Vf,C:Hf,L:Uf,m:Wf,X:Kf,S:Gf,M:qf};function Lf(){var e=If.f(),t=Gu();return e||t}function Rf(e){var t=Ot(e);t!==null&&t.tag===5&&t.type===`form`?Ks(t):If.r(e)}var zf=typeof document>`u`?null:document;function Bf(e,t,n){var r=zf;if(r&&typeof t==`string`&&t){var i=Jt(t);i=`link[rel="`+e+`"][href="`+i+`"]`,typeof n==`string`&&(i+=`[crossorigin="`+n+`"]`),Pf.has(i)||(Pf.add(i),e={rel:e,crossOrigin:n,href:t},r.querySelector(i)===null&&(t=r.createElement(`link`),ef(t,`link`,e),At(t),r.head.appendChild(t)))}}function Vf(e){If.D(e),Bf(`dns-prefetch`,e,null)}function Hf(e,t){If.C(e,t),Bf(`preconnect`,e,t)}function Uf(e,t,n){If.L(e,t,n);var r=zf;if(r&&e&&t){var i=`link[rel="preload"][as="`+Jt(t)+`"]`;t===`image`&&n&&n.imageSrcSet?(i+=`[imagesrcset="`+Jt(n.imageSrcSet)+`"]`,typeof n.imageSizes==`string`&&(i+=`[imagesizes="`+Jt(n.imageSizes)+`"]`)):i+=`[href="`+Jt(e)+`"]`;var a=i;switch(t){case`style`:a=Yf(e);break;case`script`:a=$f(e)}Nf.has(a)||(e=h({rel:`preload`,href:t===`image`&&n&&n.imageSrcSet?void 0:e,as:t},n),Nf.set(a,e),r.querySelector(i)!==null||t===`style`&&r.querySelector(Xf(a))||t===`script`&&r.querySelector(ep(a))||(t=r.createElement(`link`),ef(t,`link`,e),At(t),r.head.appendChild(t)))}}function Wf(e,t){If.m(e,t);var n=zf;if(n&&e){var r=t&&typeof t.as==`string`?t.as:`script`,i=`link[rel="modulepreload"][as="`+Jt(r)+`"][href="`+Jt(e)+`"]`,a=i;switch(r){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:a=$f(e)}if(!Nf.has(a)&&(e=h({rel:`modulepreload`,href:e},t),Nf.set(a,e),n.querySelector(i)===null)){switch(r){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:if(n.querySelector(ep(a)))return}r=n.createElement(`link`),ef(r,`link`,e),At(r),n.head.appendChild(r)}}}function Gf(e,t,n){If.S(e,t,n);var r=zf;if(r&&e){var i=kt(r).hoistableStyles,a=Yf(e);t||=`default`;var o=i.get(a);if(!o){var s={loading:0,preload:null};if(o=r.querySelector(Xf(a)))s.loading=5;else{e=h({rel:`stylesheet`,href:e,"data-precedence":t},n),(n=Nf.get(a))&&rp(e,n);var c=o=r.createElement(`link`);At(c),ef(c,`link`,e),c._p=new Promise(function(e,t){c.onload=e,c.onerror=t}),c.addEventListener(`load`,function(){s.loading|=1}),c.addEventListener(`error`,function(){s.loading|=2}),s.loading|=4,np(o,t,r)}o={type:`stylesheet`,instance:o,count:1,state:s},i.set(a,o)}}}function Kf(e,t){If.X(e,t);var n=zf;if(n&&e){var r=kt(n).hoistableScripts,i=$f(e),a=r.get(i);a||(a=n.querySelector(ep(i)),a||(e=h({src:e,async:!0},t),(t=Nf.get(i))&&ip(e,t),a=n.createElement(`script`),At(a),ef(a,`link`,e),n.head.appendChild(a)),a={type:`script`,instance:a,count:1,state:null},r.set(i,a))}}function qf(e,t){If.M(e,t);var n=zf;if(n&&e){var r=kt(n).hoistableScripts,i=$f(e),a=r.get(i);a||(a=n.querySelector(ep(i)),a||(e=h({src:e,async:!0,type:`module`},t),(t=Nf.get(i))&&ip(e,t),a=n.createElement(`script`),At(a),ef(a,`link`,e),n.head.appendChild(a)),a={type:`script`,instance:a,count:1,state:null},r.set(i,a))}}function Jf(e,t,n,r){var a=(a=ye.current)?Ff(a):null;if(!a)throw Error(i(446));switch(e){case`meta`:case`title`:return null;case`style`:return typeof n.precedence==`string`&&typeof n.href==`string`?(t=Yf(n.href),n=kt(a).hoistableStyles,r=n.get(t),r||(r={type:`style`,instance:null,count:0,state:null},n.set(t,r)),r):{type:`void`,instance:null,count:0,state:null};case`link`:if(n.rel===`stylesheet`&&typeof n.href==`string`&&typeof n.precedence==`string`){e=Yf(n.href);var o=kt(a).hoistableStyles,s=o.get(e);if(s||(a=a.ownerDocument||a,s={type:`stylesheet`,instance:null,count:0,state:{loading:0,preload:null}},o.set(e,s),(o=a.querySelector(Xf(e)))&&!o._p&&(s.instance=o,s.state.loading=5),Nf.has(e)||(n={rel:`preload`,as:`style`,href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Nf.set(e,n),o||Qf(a,e,n,s.state))),t&&r===null)throw Error(i(528,``));return s}if(t&&r!==null)throw Error(i(529,``));return null;case`script`:return t=n.async,n=n.src,typeof n==`string`&&t&&typeof t!=`function`&&typeof t!=`symbol`?(t=$f(n),n=kt(a).hoistableScripts,r=n.get(t),r||(r={type:`script`,instance:null,count:0,state:null},n.set(t,r)),r):{type:`void`,instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Yf(e){return`href="`+Jt(e)+`"`}function Xf(e){return`link[rel="stylesheet"][`+e+`]`}function Zf(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Qf(e,t,n,r){e.querySelector(`link[rel="preload"][as="style"][`+t+`]`)?r.loading=1:(t=e.createElement(`link`),r.preload=t,t.addEventListener(`load`,function(){return r.loading|=1}),t.addEventListener(`error`,function(){return r.loading|=2}),ef(t,`link`,n),At(t),e.head.appendChild(t))}function $f(e){return`[src="`+Jt(e)+`"]`}function ep(e){return`script[async]`+e}function tp(e,t,n){if(t.count++,t.instance===null)switch(t.type){case`style`:var r=e.querySelector(`style[data-href~="`+Jt(n.href)+`"]`);if(r)return t.instance=r,At(r),r;var a=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement(`style`),At(r),ef(r,`style`,a),np(r,n.precedence,e),t.instance=r;case`stylesheet`:a=Yf(n.href);var o=e.querySelector(Xf(a));if(o)return t.state.loading|=4,t.instance=o,At(o),o;r=Zf(n),(a=Nf.get(a))&&rp(r,a),o=(e.ownerDocument||e).createElement(`link`),At(o);var s=o;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),ef(o,`link`,r),t.state.loading|=4,np(o,n.precedence,e),t.instance=o;case`script`:return o=$f(n.src),(a=e.querySelector(ep(o)))?(t.instance=a,At(a),a):(r=n,(a=Nf.get(o))&&(r=h({},n),ip(r,a)),e=e.ownerDocument||e,a=e.createElement(`script`),At(a),ef(a,`link`,r),e.head.appendChild(a),t.instance=a);case`void`:return null;default:throw Error(i(443,t.type))}else t.type===`stylesheet`&&!(t.state.loading&4)&&(r=t.instance,t.state.loading|=4,np(r,n.precedence,e));return t.instance}function np(e,t,n){for(var r=n.querySelectorAll(`link[rel="stylesheet"][data-precedence],style[data-precedence]`),i=r.length?r[r.length-1]:null,a=i,o=0;o<r.length;o++){var s=r[o];if(s.dataset.precedence===t)a=s;else if(a!==i)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function rp(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.title??=t.title}function ip(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.integrity??=t.integrity}var ap=null;function op(e,t,n){if(ap===null){var r=new Map,i=ap=new Map;i.set(n,r)}else i=ap,r=i.get(n),r||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var a=n[i];if(!(a[Tt]||a[vt]||e===`link`&&a.getAttribute(`rel`)===`stylesheet`)&&a.namespaceURI!==`http://www.w3.org/2000/svg`){var o=a.getAttribute(t)||``;o=e+o;var s=r.get(o);s?s.push(a):r.set(o,[a])}}return r}function sp(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t===`title`?e.querySelector(`head > title`):null)}function cp(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case`meta`:case`title`:return!0;case`style`:if(typeof t.precedence!=`string`||typeof t.href!=`string`||t.href===``)break;return!0;case`link`:if(typeof t.rel!=`string`||typeof t.href!=`string`||t.href===``||t.onLoad||t.onError)break;switch(t.rel){case`stylesheet`:return e=t.disabled,typeof t.precedence==`string`&&e==null;default:return!0}case`script`:if(t.async&&typeof t.async!=`function`&&typeof t.async!=`symbol`&&!t.onLoad&&!t.onError&&t.src&&typeof t.src==`string`)return!0}return!1}function lp(e){return!(e.type===`stylesheet`&&!(e.state.loading&3))}function up(e,t,n,r){if(n.type===`stylesheet`&&(typeof r.media!=`string`||!1!==matchMedia(r.media).matches)&&!(n.state.loading&4)){if(n.instance===null){var i=Yf(r.href),a=t.querySelector(Xf(i));if(a){t=a._p,typeof t==`object`&&t&&typeof t.then==`function`&&(e.count++,e=pp.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=a,At(a);return}a=t.ownerDocument||t,r=Zf(r),(i=Nf.get(i))&&rp(r,i),a=a.createElement(`link`),At(a);var o=a;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),ef(a,`link`,r),n.instance=a}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(n.state.loading&3)&&(e.count++,n=pp.bind(e),t.addEventListener(`load`,n),t.addEventListener(`error`,n))}}var dp=0;function fp(e,t){return e.stylesheets&&e.count===0&&hp(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&hp(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&dp===0&&(dp=62500*nf());var i=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&hp(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>dp?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(i)}}:null}function pp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)hp(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var mp=null;function hp(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,mp=new Map,t.forEach(gp,e),mp=null,pp.call(e))}function gp(e,t){if(!(t.state.loading&4)){var n=mp.get(e);if(n)var r=n.get(null);else{n=new Map,mp.set(e,n);for(var i=e.querySelectorAll(`link[data-precedence],style[data-precedence]`),a=0;a<i.length;a++){var o=i[a];(o.nodeName===`LINK`||o.getAttribute(`media`)!==`not all`)&&(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}i=t.instance,o=i.getAttribute(`data-precedence`),a=n.get(o)||r,a===r&&n.set(null,i),n.set(o,i),this.count++,r=pp.bind(this),i.addEventListener(`load`,r),i.addEventListener(`error`,r),a?a.parentNode.insertBefore(i,a.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),t.state.loading|=4}}var _p={$$typeof:S,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function vp(e,t,n,r,i,a,o,s,c){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=st(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=st(0),this.hiddenUpdates=st(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function yp(e,t,n,r,i,a,o,s,c,l,u,d){return e=new vp(e,t,n,o,c,l,u,d,s),t=1,!0===a&&(t|=24),a=ki(3,null,null,t),e.current=a,a.stateNode=e,t=Ta(),t.refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:t},ro(a),e}function bp(e){return e?(e=Di,e):Di}function xp(e,t,n,r,i,a){i=bp(i),r.context===null?r.context=i:r.pendingContext=i,r=ao(t),r.payload={element:n},a=a===void 0?null:a,a!==null&&(r.callback=a),n=oo(e,r,t),n!==null&&(Bu(n,e,t),so(n,e,t))}function Sp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Cp(e,t){Sp(e,t),(e=e.alternate)&&Sp(e,t)}function wp(e){if(e.tag===13||e.tag===31){var t=wi(e,67108864);t!==null&&Bu(t,e,67108864),Cp(e,67108864)}}function Tp(e){if(e.tag===13||e.tag===31){var t=Ru();t=pt(t);var n=wi(e,t);n!==null&&Bu(n,e,t),Cp(e,t)}}var Ep=!0;function Dp(e,t,n,r){var i=w.T;w.T=null;var a=T.p;try{T.p=2,kp(e,t,n,r)}finally{T.p=a,w.T=i}}function Op(e,t,n,r){var i=w.T;w.T=null;var a=T.p;try{T.p=8,kp(e,t,n,r)}finally{T.p=a,w.T=i}}function kp(e,t,n,r){if(Ep){var i=Ap(r);if(i===null)Ud(e,t,r,jp,n),Hp(e,r);else if(Wp(i,e,t,n,r))r.stopPropagation();else if(Hp(e,r),t&4&&-1<Vp.indexOf(e)){for(;i!==null;){var a=Ot(i);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var o=nt(a.pendingLanes);if(o!==0){var s=a;for(s.pendingLanes|=2,s.entangledLanes|=2;o;){var c=1<<31-Ye(o);s.entanglements[1]|=c,o&=~c}G(a),!(su&6)&&(Eu=Le()+500,Cd(0,!1))}}break;case 31:case 13:s=wi(a,2),s!==null&&Bu(s,a,2),Gu(),Cp(a,2)}if(a=Ap(r),a===null&&Ud(e,t,r,jp,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Ud(e,t,r,null,n)}}function Ap(e){return e=fn(e),Mp(e)}var jp=null;function Mp(e){if(jp=null,e=Dt(e),e!==null){var t=o(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=s(t),e!==null)return e;e=null}else if(n===31){if(e=c(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return jp=e,null}function Np(e){switch(e){case`beforetoggle`:case`cancel`:case`click`:case`close`:case`contextmenu`:case`copy`:case`cut`:case`auxclick`:case`dblclick`:case`dragend`:case`dragstart`:case`drop`:case`focusin`:case`focusout`:case`input`:case`invalid`:case`keydown`:case`keypress`:case`keyup`:case`mousedown`:case`mouseup`:case`paste`:case`pause`:case`play`:case`pointercancel`:case`pointerdown`:case`pointerup`:case`ratechange`:case`reset`:case`resize`:case`seeked`:case`submit`:case`toggle`:case`touchcancel`:case`touchend`:case`touchstart`:case`volumechange`:case`change`:case`selectionchange`:case`textInput`:case`compositionstart`:case`compositionend`:case`compositionupdate`:case`beforeblur`:case`afterblur`:case`beforeinput`:case`blur`:case`fullscreenchange`:case`focus`:case`hashchange`:case`popstate`:case`select`:case`selectstart`:return 2;case`drag`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`mousemove`:case`mouseout`:case`mouseover`:case`pointermove`:case`pointerout`:case`pointerover`:case`scroll`:case`touchmove`:case`wheel`:case`mouseenter`:case`mouseleave`:case`pointerenter`:case`pointerleave`:return 8;case`message`:switch(Re()){case ze:return 2;case Be:return 8;case Ve:case He:return 32;case Ue:return 268435456;default:return 32}default:return 32}}var Pp=!1,Fp=null,Ip=null,Lp=null,Rp=new Map,zp=new Map,Bp=[],Vp=`mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset`.split(` `);function Hp(e,t){switch(e){case`focusin`:case`focusout`:Fp=null;break;case`dragenter`:case`dragleave`:Ip=null;break;case`mouseover`:case`mouseout`:Lp=null;break;case`pointerover`:case`pointerout`:Rp.delete(t.pointerId);break;case`gotpointercapture`:case`lostpointercapture`:zp.delete(t.pointerId)}}function Up(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Ot(t),t!==null&&wp(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Wp(e,t,n,r,i){switch(t){case`focusin`:return Fp=Up(Fp,e,t,n,r,i),!0;case`dragenter`:return Ip=Up(Ip,e,t,n,r,i),!0;case`mouseover`:return Lp=Up(Lp,e,t,n,r,i),!0;case`pointerover`:var a=i.pointerId;return Rp.set(a,Up(Rp.get(a)||null,e,t,n,r,i)),!0;case`gotpointercapture`:return a=i.pointerId,zp.set(a,Up(zp.get(a)||null,e,t,n,r,i)),!0}return!1}function Gp(e){var t=Dt(e.target);if(t!==null){var n=o(t);if(n!==null){if(t=n.tag,t===13){if(t=s(n),t!==null){e.blockedOn=t,gt(e.priority,function(){Tp(n)});return}}else if(t===31){if(t=c(n),t!==null){e.blockedOn=t,gt(e.priority,function(){Tp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Kp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ap(e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);dn=r,n.target.dispatchEvent(r),dn=null}else return t=Ot(n),t!==null&&wp(t),e.blockedOn=n,!1;t.shift()}return!0}function qp(e,t,n){Kp(e)&&n.delete(t)}function Jp(){Pp=!1,Fp!==null&&Kp(Fp)&&(Fp=null),Ip!==null&&Kp(Ip)&&(Ip=null),Lp!==null&&Kp(Lp)&&(Lp=null),Rp.forEach(qp),zp.forEach(qp)}function Yp(e,n){e.blockedOn===n&&(e.blockedOn=null,Pp||(Pp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Jp)))}var Xp=null;function Zp(e){Xp!==e&&(Xp=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Xp===e&&(Xp=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if(typeof r!=`function`){if(Mp(r||n)===null)continue;break}var a=Ot(n);a!==null&&(e.splice(t,3),t-=3,Ws(a,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Qp(e){function t(t){return Yp(t,e)}Fp!==null&&Yp(Fp,e),Ip!==null&&Yp(Ip,e),Lp!==null&&Yp(Lp,e),Rp.forEach(t),zp.forEach(t);for(var n=0;n<Bp.length;n++){var r=Bp[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Bp.length&&(n=Bp[0],n.blockedOn===null);)Gp(n),n.blockedOn===null&&Bp.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var i=n[r],a=n[r+1],o=i[yt]||null;if(typeof a==`function`)o||Zp(n);else if(o){var s=null;if(a&&a.hasAttribute(`formAction`)){if(i=a,o=a[yt]||null)s=o.formAction;else if(Mp(i)!==null)continue}else s=o.action;typeof s==`function`?n[r+1]=s:(n.splice(r,3),r-=3),Zp(n)}}}function $p(){function e(e){e.canIntercept&&e.info===`react-transition`&&e.intercept({handler:function(){return new Promise(function(e){return i=e})},focusReset:`manual`,scroll:`manual`})}function t(){i!==null&&(i(),i=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&e.url!=null&&navigation.navigate(e.url,{state:e.getState(),info:`react-transition`,history:`replace`})}}if(typeof navigation==`object`){var r=!1,i=null;return navigation.addEventListener(`navigate`,e),navigation.addEventListener(`navigatesuccess`,t),navigation.addEventListener(`navigateerror`,t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener(`navigate`,e),navigation.removeEventListener(`navigatesuccess`,t),navigation.removeEventListener(`navigateerror`,t),i!==null&&(i(),i=null)}}}function em(e){this._internalRoot=e}tm.prototype.render=em.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var n=t.current,r=Ru();xp(n,r,e,t,null,null)},tm.prototype.unmount=em.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;xp(e.current,2,null,e,null,null),Gu(),t[bt]=null}};function tm(e){this._internalRoot=e}tm.prototype.unstable_scheduleHydration=function(e){if(e){var t=ht();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Bp.length&&t!==0&&t<Bp[n].priority;n++);Bp.splice(n,0,e),n===0&&Gp(e)}};var nm=n.version;if(nm!==`19.2.0`)throw Error(i(527,nm,`19.2.0`));T.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render==`function`?Error(i(188)):(e=Object.keys(e).join(`,`),Error(i(268,e)));return e=d(t),e=e===null?null:p(e),e=e===null?null:e.stateNode,e};var rm={bundleType:0,version:`19.2.0`,rendererPackageName:`react-dom`,currentDispatcherRef:w,reconcilerVersion:`19.2.0`};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<`u`){var im=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!im.isDisabled&&im.supportsFiber)try{Ke=im.inject(rm),qe=im}catch{}}e.createRoot=function(e,t){if(!a(e))throw Error(i(299));var n=!1,r=``,o=pc,s=mc,c=hc;return t!=null&&(!0===t.unstable_strictMode&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=yp(e,1,!1,null,null,n,r,null,o,s,c,$p),e[bt]=t.current,Hd(e),new em(t)}})),g=c(o(((e,t)=>{function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=h()}))()),_=c(u()),v=e=>e.replace(/([a-z0-9])([A-Z])/g,`$1-$2`).toLowerCase(),y=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),b=e=>{let t=y(e);return t.charAt(0).toUpperCase()+t.slice(1)},x=(...e)=>e.filter((e,t,n)=>!!e&&e.trim()!==``&&n.indexOf(e)===t).join(` `).trim(),ee=e=>{for(let t in e)if(t.startsWith(`aria-`)||t===`role`||t===`title`)return!0},S={xmlns:`http://www.w3.org/2000/svg`,width:24,height:24,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:2,strokeLinecap:`round`,strokeLinejoin:`round`},C=(0,_.forwardRef)(({color:e=`currentColor`,size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i=``,children:a,iconNode:o,...s},c)=>(0,_.createElement)(`svg`,{ref:c,...S,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:x(`lucide`,i),...!a&&!ee(s)&&{"aria-hidden":`true`},...s},[...o.map(([e,t])=>(0,_.createElement)(e,t)),...Array.isArray(a)?a:[a]])),te=(e,t)=>{let n=(0,_.forwardRef)(({className:n,...r},i)=>(0,_.createElement)(C,{ref:i,iconNode:t,className:x(`lucide-${v(b(e))}`,`lucide-${e}`,n),...r}));return n.displayName=b(e),n},ne=te(`building`,[[`path`,{d:`M12 10h.01`,key:`1nrarc`}],[`path`,{d:`M12 14h.01`,key:`1etili`}],[`path`,{d:`M12 6h.01`,key:`1vi96p`}],[`path`,{d:`M16 10h.01`,key:`1m94wz`}],[`path`,{d:`M16 14h.01`,key:`1gbofw`}],[`path`,{d:`M16 6h.01`,key:`1x0f13`}],[`path`,{d:`M8 10h.01`,key:`19clt8`}],[`path`,{d:`M8 14h.01`,key:`6423bh`}],[`path`,{d:`M8 6h.01`,key:`1dz90k`}],[`path`,{d:`M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3`,key:`cabbwy`}],[`rect`,{x:`4`,y:`2`,width:`16`,height:`20`,rx:`2`,key:`1uxh74`}]]),re=te(`circle-alert`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`line`,{x1:`12`,x2:`12`,y1:`8`,y2:`12`,key:`1pkeuh`}],[`line`,{x1:`12`,x2:`12.01`,y1:`16`,y2:`16`,key:`4dfq90`}]]),ie=te(`circle-check-big`,[[`path`,{d:`M21.801 10A10 10 0 1 1 17 3.335`,key:`yps3ct`}],[`path`,{d:`m9 11 3 3L22 4`,key:`1pflzl`}]]),ae=te(`clock`,[[`path`,{d:`M12 6v6l4 2`,key:`mmk7yg`}],[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}]]),oe=te(`dollar-sign`,[[`line`,{x1:`12`,x2:`12`,y1:`2`,y2:`22`,key:`7eqyqh`}],[`path`,{d:`M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6`,key:`1b0p4s`}]]),se=te(`info`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`M12 16v-4`,key:`1dtifu`}],[`path`,{d:`M12 8h.01`,key:`e9boi3`}]]),ce=te(`map-pin`,[[`path`,{d:`M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0`,key:`1r0f0z`}],[`circle`,{cx:`12`,cy:`10`,r:`3`,key:`ilqhr7`}]]),le=te(`message-circle`,[[`path`,{d:`M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719`,key:`1sd12s`}]]),ue=te(`navigation`,[[`polygon`,{points:`3 11 22 2 13 21 11 13 3 11`,key:`1ltx0t`}]]),de=te(`package`,[[`path`,{d:`M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z`,key:`1a0edw`}],[`path`,{d:`M12 22V12`,key:`d0xqtd`}],[`polyline`,{points:`3.29 7 12 12 20.71 7`,key:`ousv84`}],[`path`,{d:`m7.5 4.27 9 5.15`,key:`1c824w`}]]),w=te(`phone`,[[`path`,{d:`M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384`,key:`9njp5v`}]]),T=te(`shopping-basket`,[[`path`,{d:`m15 11-1 9`,key:`5wnq3a`}],[`path`,{d:`m19 11-4-7`,key:`cnml18`}],[`path`,{d:`M2 11h20`,key:`3eubbj`}],[`path`,{d:`m3.5 11 1.6 7.4a2 2 0 0 0 2 1.6h9.8a2 2 0 0 0 2-1.6l1.7-7.4`,key:`yiazzp`}],[`path`,{d:`M4.5 15.5h15`,key:`13mye1`}],[`path`,{d:`m5 11 4-7`,key:`116ra9`}],[`path`,{d:`m9 11 1 9`,key:`1ojof7`}]]),fe=te(`store`,[[`path`,{d:`M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5`,key:`slp6dd`}],[`path`,{d:`M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244`,key:`o0xfot`}],[`path`,{d:`M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05`,key:`wn3emo`}]]),pe=te(`truck`,[[`path`,{d:`M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2`,key:`wrbu53`}],[`path`,{d:`M15 18H9`,key:`1lyqi6`}],[`path`,{d:`M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14`,key:`lysw3i`}],[`circle`,{cx:`17`,cy:`18`,r:`2`,key:`332jqn`}],[`circle`,{cx:`7`,cy:`18`,r:`2`,key:`19iecd`}]]),me=te(`user`,[[`path`,{d:`M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2`,key:`975kel`}],[`circle`,{cx:`12`,cy:`7`,r:`4`,key:`17ys0d`}]]),he=te(`x`,[[`path`,{d:`M18 6 6 18`,key:`1bl5f8`}],[`path`,{d:`m6 6 12 12`,key:`d8bk6v`}]]),ge=()=>void 0,_e={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},E=function(e,t){if(!e)throw ve(t)},ve=function(e){return Error(`Firebase Database (`+_e.SDK_VERSION+`) INTERNAL ASSERT FAILED: `+e)},ye=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)==55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)==56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},be=function(e){let t=[],n=0,r=0;for(;n<e.length;){let i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){let a=e[n++];t[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){let a=e[n++],o=e[n++],s=e[n++],c=((i&7)<<18|(a&63)<<12|(o&63)<<6|s&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{let a=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return t.join(``)},xe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`,get ENCODED_VALS(){return this.ENCODED_VALS_BASE+`+/=`},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+`-_.`},HAS_NATIVE_SUPPORT:typeof atob==`function`,encodeByteArray(e,t){if(!Array.isArray(e))throw Error(`encodeByteArray takes an array as a parameter`);this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){let i=e[t],a=t+1<e.length,o=a?e[t+1]:0,s=t+2<e.length,c=s?e[t+2]:0,l=i>>2,u=(i&3)<<4|o>>4,d=(o&15)<<2|c>>6,f=c&63;s||(f=64,a||(d=64)),r.push(n[l],n[u],n[d],n[f])}return r.join(``)},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ye(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):be(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){let i=n[e.charAt(t++)],a=t<e.length?n[e.charAt(t)]:0;++t;let o=t<e.length?n[e.charAt(t)]:64;++t;let s=t<e.length?n[e.charAt(t)]:64;if(++t,i==null||a==null||o==null||s==null)throw new Se;let c=i<<2|a>>4;if(r.push(c),o!==64){let e=a<<4&240|o>>2;if(r.push(e),s!==64){let e=o<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Se=class extends Error{constructor(){super(...arguments),this.name=`DecodeBase64StringError`}},Ce=function(e){let t=ye(e);return xe.encodeByteArray(t,!0)},we=function(e){return Ce(e).replace(/\./g,``)},Te=function(e){try{return xe.decodeString(e,!0)}catch(e){console.error(`base64Decode failed: `,e)}return null};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Ee(e){return De(void 0,e)}function De(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:let n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(let n in t)!t.hasOwnProperty(n)||!Oe(n)||(e[n]=De(e[n],t[n]));return e}function Oe(e){return e!==`__proto__`}
/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function ke(){if(typeof self<`u`)return self;if(typeof window<`u`)return window;if(typeof global<`u`)return global;throw Error(`Unable to locate global object.`)}
/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Ae=()=>ke().__FIREBASE_DEFAULTS__,je=()=>{if(typeof process>`u`)return;let e={}.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Me=()=>{if(typeof document>`u`)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=e&&Te(e[1]);return t&&JSON.parse(t)},Ne=()=>{try{return ge()||Ae()||je()||Me()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Pe=e=>Ne()?.emulatorHosts?.[e],Fe=e=>{let t=Pe(e);if(!t)return;let n=t.lastIndexOf(`:`);if(n<=0||n+1===t.length)throw Error(`Invalid host ${t} with no separate hostname and port!`);let r=parseInt(t.substring(n+1),10);return t[0]===`[`?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Ie=()=>Ne()?.config,Le=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e==`function`&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}};
/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Re(e){try{return(e.startsWith(`http://`)||e.startsWith(`https://`)?new URL(e).hostname:e).endsWith(`.cloudworkstations.dev`)}catch{return!1}}async function ze(e){return(await fetch(e,{credentials:`include`})).ok}
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Be(e,t){if(e.uid)throw Error(`The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.`);let n={alg:`none`,type:`JWT`},r=t||`demo-project`,i=e.iat||0,a=e.sub||e.user_id;if(!a)throw Error(`mockUserToken must contain 'sub' or 'user_id' field!`);let o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:`custom`,identities:{}},...e};return[we(JSON.stringify(n)),we(JSON.stringify(o)),``].join(`.`)}var Ve={};function He(){let e={prod:[],emulator:[]};for(let t of Object.keys(Ve))Ve[t]?e.emulator.push(t):e.prod.push(t);return e}function Ue(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement(`div`),t.setAttribute(`id`,e),n=!0),{created:n,element:t}}var We=!1;function Ge(e,t){if(typeof window>`u`||typeof document>`u`||!Re(window.location.host)||Ve[e]===t||Ve[e]||We)return;Ve[e]=t;function n(e){return`__firebase__banner__${e}`}let r=`__firebase__banner`,i=He().prod.length>0;function a(){let e=document.getElementById(r);e&&e.remove()}function o(e){e.style.display=`flex`,e.style.background=`#7faaf0`,e.style.position=`fixed`,e.style.bottom=`5px`,e.style.left=`5px`,e.style.padding=`.5em`,e.style.borderRadius=`5px`,e.style.alignItems=`center`}function s(e,t){e.setAttribute(`width`,`24`),e.setAttribute(`id`,t),e.setAttribute(`height`,`24`),e.setAttribute(`viewBox`,`0 0 24 24`),e.setAttribute(`fill`,`none`),e.style.marginLeft=`-6px`}function c(){let e=document.createElement(`span`);return e.style.cursor=`pointer`,e.style.marginLeft=`16px`,e.style.fontSize=`24px`,e.innerHTML=` &times;`,e.onclick=()=>{We=!0,a()},e}function l(e,t){e.setAttribute(`id`,t),e.innerText=`Learn more`,e.href=`https://firebase.google.com/docs/studio/preview-apps#preview-backend`,e.setAttribute(`target`,`__blank`),e.style.paddingLeft=`5px`,e.style.textDecoration=`underline`}function u(){let e=Ue(r),t=n(`text`),a=document.getElementById(t)||document.createElement(`span`),u=n(`learnmore`),d=document.getElementById(u)||document.createElement(`a`),f=n(`preprendIcon`),p=document.getElementById(f)||document.createElementNS(`http://www.w3.org/2000/svg`,`svg`);if(e.created){let t=e.element;o(t),l(d,u);let n=c();s(p,f),t.append(p,a,d,n),document.body.appendChild(t)}i?(a.innerText=`Preview backend disconnected.`,p.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(p.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,a.innerText=`Preview backend running in this workspace.`),a.setAttribute(`id`,t)}document.readyState===`loading`?window.addEventListener(`DOMContentLoaded`,u):u()}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Ke(){return typeof navigator<`u`&&typeof navigator.userAgent==`string`?navigator.userAgent:``}function qe(){return typeof window<`u`&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ke())}function Je(){let e=Ne()?.forceEnvironment;if(e===`node`)return!0;if(e===`browser`)return!1;try{return Object.prototype.toString.call(global.process)===`[object process]`}catch{return!1}}function Ye(){return typeof navigator==`object`&&navigator.product===`ReactNative`}function Xe(){return _e.NODE_CLIENT===!0||_e.NODE_ADMIN===!0}function Ze(){return!Je()&&!!navigator.userAgent&&navigator.userAgent.includes(`Safari`)&&!navigator.userAgent.includes(`Chrome`)}function Qe(){try{return typeof indexedDB==`object`}catch{return!1}}function $e(){return new Promise((e,t)=>{try{let n=!0,r=`validate-browser-context-for-indexeddb-analytics-module`,i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||``)}}catch(e){t(e)}})}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var et=`FirebaseError`,tt=class e extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=et,Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nt.prototype.create)}},nt=class{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){let n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],a=i?rt(i,n):`Error`,o=`${this.serviceName}: ${a} (${r}).`;return new tt(r,o,n)}};function rt(e,t){return e.replace(it,(e,n)=>{let r=t[n];return r==null?`<${n}?>`:String(r)})}var it=/\{\$([^}]+)}/g;
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function at(e){return JSON.parse(e)}function ot(e){return JSON.stringify(e)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var st=function(e){let t={},n={},r={},i=``;try{let a=e.split(`.`);t=at(Te(a[0])||``),n=at(Te(a[1])||``),i=a[2],r=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:r,signature:i}},ct=function(e){let t=st(e).claims;return!!t&&typeof t==`object`&&t.hasOwnProperty(`iat`)},lt=function(e){let t=st(e).claims;return typeof t==`object`&&t.admin===!0};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function ut(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function dt(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function ft(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function pt(e,t,n){let r={};for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function mt(e,t){if(e===t)return!0;let n=Object.keys(e),r=Object.keys(t);for(let i of n){if(!r.includes(i))return!1;let n=e[i],a=t[i];if(ht(n)&&ht(a)){if(!mt(n,a))return!1}else if(n!==a)return!1}for(let e of r)if(!n.includes(e))return!1;return!0}function ht(e){return typeof e==`object`&&!!e}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function gt(e){let t=[];for(let[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+`=`+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+`=`+encodeURIComponent(r));return t.length?`&`+t.join(`&`):``}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var _t=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||=0;let n=this.W_;if(typeof e==`string`)for(let r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let e=16;e<80;e++){let t=n[e-3]^n[e-8]^n[e-14]^n[e-16];n[e]=(t<<1|t>>>31)&4294967295}let r=this.chain_[0],i=this.chain_[1],a=this.chain_[2],o=this.chain_[3],s=this.chain_[4],c,l;for(let e=0;e<80;e++){e<40?e<20?(c=o^i&(a^o),l=1518500249):(c=i^a^o,l=1859775393):e<60?(c=i&a|o&(i|a),l=2400959708):(c=i^a^o,l=3395469782);let t=(r<<5|r>>>27)+c+s+l+n[e]&4294967295;s=o,o=a,a=(i<<30|i>>>2)&4294967295,i=r,r=t}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+o&4294967295,this.chain_[4]=this.chain_[4]+s&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);let n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;for(;r<t;){if(a===0)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if(typeof e==`string`){for(;r<t;)if(i[a]=e.charCodeAt(r),++a,++r,a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++a,++r,a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}digest(){let e=[],t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let e=this.blockSize-1;e>=56;e--)this.buf_[e]=t&255,t/=256;this.compress_(this.buf_);let n=0;for(let t=0;t<5;t++)for(let r=24;r>=0;r-=8)e[n]=this.chain_[t]>>r&255,++n;return e}};function vt(e,t){return`${e} failed: ${t} argument `}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var yt=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){let t=i-55296;r++,E(r<e.length,`Surrogate pair missing trail surrogate.`);let n=e.charCodeAt(r)-56320;i=65536+(t<<10)+n}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},bt=function(e){let t=0;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function xt(e){return e&&e._delegate?e._delegate:e}var St=class{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode=`LAZY`,this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}},Ct=`[DEFAULT]`,wt=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new Le;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(e){if(n)return null;throw e}else if(n)return null;else throw Error(`Service ${this.name} is not available`)}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(Et(e))try{this.getOrInitializeService({instanceIdentifier:Ct})}catch{}for(let[e,t]of this.instancesDeferred.entries()){let n=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch{}}}}clearInstance(e=Ct){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>`INTERNAL`in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>`_delete`in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ct){return this.instances.has(e)}getOptions(e=Ct){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(let[e,t]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(e);n===i&&t.resolve(r)}return r}onInit(e,t){let n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);let i=this.instances.get(n);return i&&e(i,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){let n=this.onInitCallbacks.get(t);if(n)for(let r of n)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Tt(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Ct){return this.component?this.component.multipleInstances?e:Ct:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!==`EXPLICIT`}};function Tt(e){return e===Ct?void 0:e}function Et(e){return e.instantiationMode===`EAGER`}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Dt=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new wt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}},Ot=[],D;(function(e){e[e.DEBUG=0]=`DEBUG`,e[e.VERBOSE=1]=`VERBOSE`,e[e.INFO=2]=`INFO`,e[e.WARN=3]=`WARN`,e[e.ERROR=4]=`ERROR`,e[e.SILENT=5]=`SILENT`})(D||={});var kt={debug:D.DEBUG,verbose:D.VERBOSE,info:D.INFO,warn:D.WARN,error:D.ERROR,silent:D.SILENT},At=D.INFO,jt={[D.DEBUG]:`log`,[D.VERBOSE]:`log`,[D.INFO]:`info`,[D.WARN]:`warn`,[D.ERROR]:`error`},Mt=(e,t,...n)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),i=jt[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)},Nt=class{constructor(e){this.name=e,this._logLevel=At,this._logHandler=Mt,this._userLogHandler=null,Ot.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in D))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e==`string`?kt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!=`function`)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,D.DEBUG,...e),this._logHandler(this,D.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,D.VERBOSE,...e),this._logHandler(this,D.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,D.INFO,...e),this._logHandler(this,D.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,D.WARN,...e),this._logHandler(this,D.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,D.ERROR,...e),this._logHandler(this,D.ERROR,...e)}},Pt=(e,t)=>t.some(t=>e instanceof t),Ft,It;function Lt(){return Ft||=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]}function Rt(){return It||=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey]}var zt=new WeakMap,Bt=new WeakMap,Vt=new WeakMap,O=new WeakMap,Ht=new WeakMap;function Ut(e){let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`success`,i),e.removeEventListener(`error`,a)},i=()=>{t(Yt(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener(`success`,i),e.addEventListener(`error`,a)});return t.then(t=>{t instanceof IDBCursor&&zt.set(t,e)}).catch(()=>{}),Ht.set(t,e),t}function Wt(e){if(Bt.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`complete`,i),e.removeEventListener(`error`,a),e.removeEventListener(`abort`,a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException(`AbortError`,`AbortError`)),r()};e.addEventListener(`complete`,i),e.addEventListener(`error`,a),e.addEventListener(`abort`,a)});Bt.set(e,t)}var Gt={get(e,t,n){if(e instanceof IDBTransaction){if(t===`done`)return Bt.get(e);if(t===`objectStoreNames`)return e.objectStoreNames||Vt.get(e);if(t===`store`)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Yt(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t===`done`||t===`store`)?!0:t in e}};function Kt(e){Gt=e(Gt)}function qt(e){return e===IDBDatabase.prototype.transaction&&!(`objectStoreNames`in IDBTransaction.prototype)?function(t,...n){let r=e.call(Xt(this),t,...n);return Vt.set(r,t.sort?t.sort():[t]),Yt(r)}:Rt().includes(e)?function(...t){return e.apply(Xt(this),t),Yt(zt.get(this))}:function(...t){return Yt(e.apply(Xt(this),t))}}function Jt(e){return typeof e==`function`?qt(e):(e instanceof IDBTransaction&&Wt(e),Pt(e,Lt())?new Proxy(e,Gt):e)}function Yt(e){if(e instanceof IDBRequest)return Ut(e);if(O.has(e))return O.get(e);let t=Jt(e);return t!==e&&(O.set(e,t),Ht.set(t,e)),t}var Xt=e=>Ht.get(e);function Zt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){let o=indexedDB.open(e,t),s=Yt(o);return r&&o.addEventListener(`upgradeneeded`,e=>{r(Yt(o.result),e.oldVersion,e.newVersion,Yt(o.transaction),e)}),n&&o.addEventListener(`blocked`,e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{a&&e.addEventListener(`close`,()=>a()),i&&e.addEventListener(`versionchange`,e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}var Qt=[`get`,`getKey`,`getAll`,`getAllKeys`,`count`],$t=[`put`,`add`,`delete`,`clear`],en=new Map;function tn(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t==`string`))return;if(en.get(t))return en.get(t);let n=t.replace(/FromIndex$/,``),r=t!==n,i=$t.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Qt.includes(n)))return;let a=async function(e,...t){let a=this.transaction(e,i?`readwrite`:`readonly`),o=a.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&a.done]))[0]};return en.set(t,a),a}Kt(e=>({...e,get:(t,n,r)=>tn(t,n)||e.get(t,n,r),has:(t,n)=>!!tn(t,n)||e.has(t,n)}));
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var nn=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(rn(e)){let t=e.getImmediate();return`${t.library}/${t.version}`}else return null}).filter(e=>e).join(` `)}};function rn(e){return e.getComponent()?.type===`VERSION`}var an=`@firebase/app`,on=`0.14.4`,sn=new Nt(`@firebase/app`),cn=`@firebase/app-compat`,ln=`@firebase/analytics-compat`,un=`@firebase/analytics`,dn=`@firebase/app-check-compat`,fn=`@firebase/app-check`,pn=`@firebase/auth`,mn=`@firebase/auth-compat`,hn=`@firebase/database`,gn=`@firebase/data-connect`,_n=`@firebase/database-compat`,vn=`@firebase/functions`,yn=`@firebase/functions-compat`,bn=`@firebase/installations`,xn=`@firebase/installations-compat`,Sn=`@firebase/messaging`,Cn=`@firebase/messaging-compat`,wn=`@firebase/performance`,Tn=`@firebase/performance-compat`,En=`@firebase/remote-config`,Dn=`@firebase/remote-config-compat`,On=`@firebase/storage`,kn=`@firebase/storage-compat`,An=`@firebase/firestore`,jn=`@firebase/ai`,Mn=`@firebase/firestore-compat`,Nn=`firebase`,Pn=`12.4.0`,Fn=`[DEFAULT]`,In={[an]:`fire-core`,[cn]:`fire-core-compat`,[un]:`fire-analytics`,[ln]:`fire-analytics-compat`,[fn]:`fire-app-check`,[dn]:`fire-app-check-compat`,[pn]:`fire-auth`,[mn]:`fire-auth-compat`,[hn]:`fire-rtdb`,[gn]:`fire-data-connect`,[_n]:`fire-rtdb-compat`,[vn]:`fire-fn`,[yn]:`fire-fn-compat`,[bn]:`fire-iid`,[xn]:`fire-iid-compat`,[Sn]:`fire-fcm`,[Cn]:`fire-fcm-compat`,[wn]:`fire-perf`,[Tn]:`fire-perf-compat`,[En]:`fire-rc`,[Dn]:`fire-rc-compat`,[On]:`fire-gcs`,[kn]:`fire-gcs-compat`,[An]:`fire-fst`,[Mn]:`fire-fst-compat`,[jn]:`fire-vertex`,"fire-js":`fire-js`,[Nn]:`fire-js-all`},Ln=new Map,Rn=new Map,zn=new Map;function Bn(e,t){try{e.container.addComponent(t)}catch(n){sn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Vn(e){let t=e.name;if(zn.has(t))return sn.debug(`There were multiple attempts to register component ${t}.`),!1;zn.set(t,e);for(let t of Ln.values())Bn(t,e);for(let t of Rn.values())Bn(t,e);return!0}function Hn(e,t){let n=e.container.getProvider(`heartbeat`).getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Un(e){return e==null?!1:e.settings!==void 0}var Wn=new nt(`app`,`Firebase`,{"no-app":`No Firebase App '{$appName}' has been created - call initializeApp() first`,"bad-app-name":`Illegal App name: '{$appName}'`,"duplicate-app":`Firebase App named '{$appName}' already exists with different options or config`,"app-deleted":`Firebase App named '{$appName}' already deleted`,"server-app-deleted":`Firebase Server App has been deleted`,"no-options":`Need to provide options, when not being deployed to hosting via source.`,"invalid-app-argument":`firebase.{$appName}() takes either no argument or a Firebase App instance.`,"invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":`Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.`,"idb-get":`Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.`,"idb-set":`Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.`,"idb-delete":`Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.`,"finalization-registry-not-supported":`FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.`,"invalid-server-app-environment":`FirebaseServerApp is not for use in browser environments.`}),Gn=class{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new St(`app`,()=>this,`PUBLIC`))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wn.create(`app-deleted`,{appName:this._name})}},Kn=Pn;function qn(e,t={}){let n=e;typeof t!=`object`&&(t={name:t});let r={name:Fn,automaticDataCollectionEnabled:!0,...t},i=r.name;if(typeof i!=`string`||!i)throw Wn.create(`bad-app-name`,{appName:String(i)});if(n||=Ie(),!n)throw Wn.create(`no-options`);let a=Ln.get(i);if(a){if(mt(n,a.options)&&mt(r,a.config))return a;throw Wn.create(`duplicate-app`,{appName:i})}let o=new Dt(i);for(let e of zn.values())o.addComponent(e);let s=new Gn(n,r,o);return Ln.set(i,s),s}function Jn(e=Fn){let t=Ln.get(e);if(!t&&e===`[DEFAULT]`&&Ie())return qn();if(!t)throw Wn.create(`no-app`,{appName:e});return t}function Yn(e,t,n){let r=In[e]??e;n&&(r+=`-${n}`);let i=r.match(/\s|\//),a=t.match(/\s|\//);if(i||a){let e=[`Unable to register library "${r}" with version "${t}":`];i&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&e.push(`and`),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),sn.warn(e.join(` `));return}Vn(new St(`${r}-version`,()=>({library:r,version:t}),`VERSION`))}
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Xn=`firebase-heartbeat-database`,Zn=1,Qn=`firebase-heartbeat-store`,$n=null;function er(){return $n||=Zt(Xn,Zn,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Qn)}catch(e){console.warn(e)}}}}).catch(e=>{throw Wn.create(`idb-open`,{originalErrorMessage:e.message})}),$n}async function tr(e){try{let t=(await er()).transaction(Qn),n=await t.objectStore(Qn).get(rr(e));return await t.done,n}catch(e){if(e instanceof tt)sn.warn(e.message);else{let t=Wn.create(`idb-get`,{originalErrorMessage:e?.message});sn.warn(t.message)}}}async function nr(e,t){try{let n=(await er()).transaction(Qn,`readwrite`);await n.objectStore(Qn).put(t,rr(e)),await n.done}catch(e){if(e instanceof tt)sn.warn(e.message);else{let t=Wn.create(`idb-set`,{originalErrorMessage:e?.message});sn.warn(t.message)}}}function rr(e){return`${e.name}!${e.options.appId}`}
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var ir=1024,ar=30,or=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider(`app`).getImmediate();this._storage=new lr(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{let e=this.container.getProvider(`platform-logger`).getImmediate().getPlatformInfoString(),t=sr();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))return;if(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats.length>ar){let e=dr(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){sn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return``;let e=sr(),{heartbeatsToSend:t,unsentEntries:n}=cr(this._heartbeatsCache.heartbeats),r=we(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return sn.warn(e),``}}};function sr(){return new Date().toISOString().substring(0,10)}function cr(e,t=ir){let n=[],r=e.slice();for(let i of e){let e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),ur(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ur(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var lr=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Qe()?$e().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let e=await tr(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return nr(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return nr(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}else return}};function ur(e){return we(JSON.stringify({version:2,heartbeats:e})).length}function dr(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function fr(e){Vn(new St(`platform-logger`,e=>new nn(e),`PRIVATE`)),Vn(new St(`heartbeat`,e=>new or(e),`PRIVATE`)),Yn(an,on,e),Yn(an,on,`esm2020`),Yn(`fire-js`,``)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
fr(``),Yn(`firebase`,`12.4.0`,`app`);var pr=`@firebase/database`,mr=`1.1.0`,hr=``;function gr(e){hr=e}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var _r=class{constructor(e){this.domStorage_=e,this.prefix_=`firebase:`}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ot(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:at(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}},vr=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return ut(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}},yr=function(e){try{if(typeof window<`u`&&window[e]!==void 0){let t=window[e];return t.setItem(`firebase:sentinel`,`cache`),t.removeItem(`firebase:sentinel`),new _r(t)}}catch{}return new vr},br=yr(`localStorage`),xr=yr(`sessionStorage`),Sr=new Nt(`@firebase/database`),Cr=(function(){let e=1;return function(){return e++}})(),wr=function(e){let t=yt(e),n=new _t;n.update(t);let r=n.digest();return xe.encodeByteArray(r)},Tr=function(...e){let t=``;for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)||r&&typeof r==`object`&&typeof r.length==`number`?t+=Tr.apply(null,r):typeof r==`object`?t+=ot(r):t+=r,t+=` `}return t},Er=null,Dr=!0,Or=function(e,t){E(!t||e===!0||e===!1,`Can't turn on custom loggers persistently.`),e===!0?(Sr.logLevel=D.VERBOSE,Er=Sr.log.bind(Sr),t&&xr.set(`logging_enabled`,!0)):typeof e==`function`?Er=e:(Er=null,xr.remove(`logging_enabled`))},kr=function(...e){if(Dr===!0&&(Dr=!1,Er===null&&xr.get(`logging_enabled`)===!0&&Or(!0)),Er){let t=Tr.apply(null,e);Er(t)}},Ar=function(e){return function(...t){kr(e,...t)}},jr=function(...e){let t=`FIREBASE INTERNAL ERROR: `+Tr(...e);Sr.error(t)},Mr=function(...e){let t=`FIREBASE FATAL ERROR: ${Tr(...e)}`;throw Sr.error(t),Error(t)},Nr=function(...e){let t=`FIREBASE WARNING: `+Tr(...e);Sr.warn(t)},Pr=function(){typeof window<`u`&&window.location&&window.location.protocol&&window.location.protocol.indexOf(`https:`)!==-1&&Nr(`Insecure Firebase access from a secure page. Please use https in calls to new Firebase().`)},Fr=function(e){return typeof e==`number`&&(e!==e||e===1/0||e===-1/0)},Ir=function(e){if(Xe()||document.readyState===`complete`)e();else{let t=!1,n=function(){if(!document.body){setTimeout(n,10);return}t||(t=!0,e())};document.addEventListener?(document.addEventListener(`DOMContentLoaded`,n,!1),window.addEventListener(`load`,n,!1)):document.attachEvent&&(document.attachEvent(`onreadystatechange`,()=>{document.readyState===`complete`&&n()}),window.attachEvent(`onload`,n))}},Lr=`[MIN_NAME]`,Rr=`[MAX_NAME]`,zr=function(e,t){if(e===t)return 0;if(e===Lr||t===Rr)return-1;if(t===Lr||e===Rr)return 1;{let n=Qr(e),r=Qr(t);return n===null?r===null&&e<t?-1:1:r===null?-1:n-r===0?e.length-t.length:n-r}},Br=function(e,t){return e===t?0:e<t?-1:1},Vr=function(e,t){if(t&&e in t)return t[e];throw Error(`Missing required key (`+e+`) in object: `+ot(t))},Hr=function(e){if(typeof e!=`object`||!e)return ot(e);let t=[];for(let n in e)t.push(n);t.sort();let n=`{`;for(let r=0;r<t.length;r++)r!==0&&(n+=`,`),n+=ot(t[r]),n+=`:`,n+=Hr(e[t[r]]);return n+=`}`,n},Ur=function(e,t){let n=e.length;if(n<=t)return[e];let r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Wr(e,t){for(let n in e)e.hasOwnProperty(n)&&t(n,e[n])}var Gr=function(e){E(!Fr(e),`Invalid JSON number`);let t=1023,n,r,i,a,o;e===0?(r=0,i=0,n=1/e==-1/0?1:0):(n=e<0,e=Math.abs(e),e>=2**(1-t)?(a=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=a+t,i=Math.round(e*2**(52-a)-2**52)):(r=0,i=Math.round(e/2**(1-t-52))));let s=[];for(o=52;o;--o)s.push(i%2?1:0),i=Math.floor(i/2);for(o=11;o;--o)s.push(r%2?1:0),r=Math.floor(r/2);s.push(n?1:0),s.reverse();let c=s.join(``),l=``;for(o=0;o<64;o+=8){let e=parseInt(c.substr(o,8),2).toString(16);e.length===1&&(e=`0`+e),l+=e}return l.toLowerCase()},Kr=function(){return!!(typeof window==`object`&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},qr=function(){return typeof Windows==`object`&&typeof Windows.UI==`object`};function Jr(e,t){let n=`Unknown Error`;e===`too_big`?n=`The data requested exceeds the maximum size that can be accessed with a single request.`:e===`permission_denied`?n=`Client doesn't have permission to access the desired data.`:e===`unavailable`&&(n=`The service is unavailable`);let r=Error(e+` at `+t._path.toString()+`: `+n);return r.code=e.toUpperCase(),r}var Yr=RegExp(`^-?(0*)\\d{1,10}$`),Xr=-2147483648,Zr=2147483647,Qr=function(e){if(Yr.test(e)){let t=Number(e);if(t>=Xr&&t<=Zr)return t}return null},$r=function(e){try{e()}catch(e){setTimeout(()=>{let t=e.stack||``;throw Nr(`Exception was thrown by user callback.`,t),e},0)}},ei=function(){return(typeof window==`object`&&window.navigator&&window.navigator.userAgent||``).search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ti=function(e,t){let n=setTimeout(e,t);return typeof n==`number`&&typeof Deno<`u`&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n==`object`&&n.unref&&n.unref(),n},ni=class{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Un(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(e=>this.appCheck=e)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){Nr(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}},ri=class{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(e=>this.auth_=e)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(e=>e&&e.code===`auth/token-not-initialized`?(kr(`Got auth/token-not-initialized error.  Treating as null token.`),null):Promise.reject(e)):new Promise((t,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e=`Provided authentication credentials for the app named "`+this.appName_+`" are invalid. This usually indicates your app was not initialized correctly. `;`credential`in this.firebaseOptions_?e+=`Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.`:`serviceAccount`in this.firebaseOptions_?e+=`Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.`:e+=`Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.`,Nr(e)}},ii=class{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}};ii.OWNER=`owner`;
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var ai=`5`,oi=`v`,si=`s`,ci=`r`,li=`f`,ui=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,di=`ls`,fi=`p`,pi=`ac`,mi=`websocket`,hi=`long_polling`,gi=class{constructor(e,t,n,r,i=!1,a=``,o=!1,s=!1,c=null){this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=a,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=s,this.emulatorOptions=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(`.`)+1),this.internalHost=br.get(`host:`+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)===`s-`}isCustomHost(){return this._domain!==`firebaseio.com`&&this._domain!==`firebaseio-demo.com`}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&br.set(`host:`+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+=`<`+this.persistenceKey+`>`),e}toURLString(){let e=this.secure?`https://`:`http://`,t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:``;return`${e}${this.host}/${t}`}};function _i(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function vi(e,t,n){E(typeof t==`string`,`typeof type must == string`),E(typeof n==`object`,`typeof params must == object`);let r;if(t===mi)r=(e.secure?`wss://`:`ws://`)+e.internalHost+`/.ws?`;else if(t===hi)r=(e.secure?`https://`:`http://`)+e.internalHost+`/.lp?`;else throw Error(`Unknown connection type: `+t);_i(e)&&(n.ns=e.namespace);let i=[];return Wr(n,(e,t)=>{i.push(e+`=`+t)}),r+i.join(`&`)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var yi=class{constructor(){this.counters_={}}incrementCounter(e,t=1){ut(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Ee(this.counters_)}},bi={},xi={};function Si(e){let t=e.toString();return bi[t]||(bi[t]=new yi),bi[t]}function Ci(e,t){let n=e.toString();return xi[n]||(xi[n]=t()),xi[n]}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var wi=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&$r(()=>{this.onMessage_(e[t])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&=(this.onClose(),null);break}this.currentResponseNum++}}},Ti=`start`,Ei=`close`,Di=`pLPCommand`,Oi=`pRTLPCB`,ki=`id`,Ai=`pw`,ji=`ser`,Mi=`cb`,Ni=`dframe`,Pi=1870,Fi=30,Ii=Pi-Fi,Li=25e3,Ri=3e4,zi=class e{constructor(e,t,n,r,i,a,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=a,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ar(e),this.stats_=Si(t),this.urlFn=e=>(this.appCheckToken&&(e[pi]=this.appCheckToken),vi(t,hi,e))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new wi(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_(`Timed out trying to connect.`),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Ri)),Ir(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Bi((...e)=>{let[t,n,r,i,a]=e;if(this.incrementIncomingBytes_(e),this.scriptTagHolder)if(this.connectTimeoutTimer_&&=(clearTimeout(this.connectTimeoutTimer_),null),this.everConnected_=!0,t===Ti)this.id=n,this.password=r;else if(t===Ei)n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,()=>{this.onClosed_()})):this.onClosed_();else throw Error(`Unrecognized command received: `+t)},(...e)=>{let[t,n]=e;this.incrementIncomingBytes_(e),this.myPacketOrderer.handleResponse(t,n)},()=>{this.onClosed_()},this.urlFn);let e={};e[Ti]=`t`,e[ji]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(e[Mi]=this.scriptTagHolder.uniqueCallbackIdentifier),e[oi]=ai,this.transportSessionId&&(e[si]=this.transportSessionId),this.lastSessionId&&(e[di]=this.lastSessionId),this.applicationId&&(e[fi]=this.applicationId),this.appCheckToken&&(e[pi]=this.appCheckToken),typeof location<`u`&&location.hostname&&ui.test(location.hostname)&&(e[ci]=li);let t=this.urlFn(e);this.log_(`Connecting via long-poll to `+t),this.scriptTagHolder.addTag(t,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){e.forceAllow_=!0}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){return Xe()?!1:e.forceAllow_?!0:!e.forceDisallow_&&typeof document<`u`&&document.createElement!=null&&!Kr()&&!qr()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&=(this.scriptTagHolder.close(),null),this.myDisconnFrame&&=(document.body.removeChild(this.myDisconnFrame),null),this.connectTimeoutTimer_&&=(clearTimeout(this.connectTimeoutTimer_),null)}onClosed_(){this.isClosed_||(this.log_(`Longpoll is closing itself`),this.shutdown_(),this.onDisconnect_&&=(this.onDisconnect_(this.everConnected_),null))}close(){this.isClosed_||(this.log_(`Longpoll is being closed.`),this.shutdown_())}send(e){let t=ot(e);this.bytesSent+=t.length,this.stats_.incrementCounter(`bytes_sent`,t.length);let n=Ce(t),r=Ur(n,Ii);for(let e=0;e<r.length;e++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[e]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Xe())return;this.myDisconnFrame=document.createElement(`iframe`);let n={};n[Ni]=`t`,n[ki]=e,n[Ai]=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display=`none`,document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=ot(e).length;this.bytesReceived+=t,this.stats_.incrementCounter(`bytes_received`,t)}},Bi=class e{constructor(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Xe())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=Cr(),window[Di+this.uniqueCallbackIdentifier]=t,window[Oi+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();let r=``;this.myIFrame.src&&this.myIFrame.src.substr(0,11)===`javascript:`&&(r=`<script>document.domain="`+document.domain+`";<\/script>`);let i=`<html><body>`+r+`</body></html>`;try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(e){kr(`frame writing exception`),e.stack&&kr(e.stack),kr(e)}}}static createIFrame_(){let e=document.createElement(`iframe`);if(e.style.display=`none`,document.body){document.body.appendChild(e);try{e.contentWindow.document||kr(`No IE domain setting required`)}catch{e.src=`javascript:void((function(){document.open();document.domain='`+document.domain+`';document.close();})())`}}else throw`Document body has not initialized. Wait to initialize Firebase until after the document is ready.`;return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent=``,setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},0));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[ki]=this.myID,e[Ai]=this.myPW,e[ji]=this.currentSerial;let t=this.urlFn(e),n=``,r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Fi+n.length<=Pi;){let e=this.pendingSegs.shift();n=n+`&seg`+r+`=`+e.seg+`&ts`+r+`=`+e.ts+`&d`+r+`=`+e.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(Li));this.addTag(e,()=>{clearTimeout(r),n()})}addTag(e,t){Xe()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let n=this.myIFrame.doc.createElement(`script`);n.type=`text/javascript`,n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){let e=n.readyState;(!e||e===`loaded`||e===`complete`)&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{kr(`Long-poll script failed to load: `+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch{}},1)}},Vi=16384,Hi=45e3,Ui=null;typeof MozWebSocket<`u`?Ui=MozWebSocket:typeof WebSocket<`u`&&(Ui=WebSocket);var Wi=class e{constructor(t,n,r,i,a,o,s){this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ar(this.connId),this.stats_=Si(n),this.connURL=e.connectionURL_(n,o,s,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,t,n,r,i){let a={};return a[oi]=ai,!Xe()&&typeof location<`u`&&location.hostname&&ui.test(location.hostname)&&(a[ci]=li),t&&(a[si]=t),n&&(a[di]=n),r&&(a[pi]=r),i&&(a[fi]=i),vi(e,mi,a)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_(`Websocket connecting to `+this.connURL),this.everConnected_=!1,br.set(`previous_websocket_failure`,!0);try{let e;if(Xe()){let t=this.nodeAdmin?`AdminNode`:`Node`;e={headers:{"User-Agent":`Firebase/${ai}/${hr}/${process.platform}/${t}`,"X-Firebase-GMPID":this.applicationId||``}},this.authToken&&(e.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(e.headers[`X-Firebase-AppCheck`]=this.appCheckToken);let n={},r=this.connURL.indexOf(`wss://`)===0?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new Ui(this.connURL,[],e)}catch(e){this.log_(`Error instantiating WebSocket.`);let t=e.message||e.data;t&&this.log_(t),this.onClosed_();return}this.mySock.onopen=()=>{this.log_(`Websocket connected.`),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_(`Websocket connection was disconnected.`),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_(`WebSocket error.  Closing connection.`);let t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<`u`&&navigator.userAgent){let e=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);e&&e.length>1&&parseFloat(e[1])<4.4&&(t=!0)}return!t&&Ui!==null&&!e.forceDisallow_}static previouslyFailed(){return br.isInMemoryStorage||br.get(`previous_websocket_failure`)===!0}markConnectionHealthy(){br.remove(`previous_websocket_failure`)}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){let e=this.frames.join(``);this.frames=null;let t=at(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(E(this.frames===null,`We already have a frame buffer`),e.length<=6){let t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;let t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter(`bytes_received`,t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{let e=this.extractFrameCount_(t);e!==null&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();let t=ot(e);this.bytesSent+=t.length,this.stats_.incrementCounter(`bytes_sent`,t.length);let n=Ur(t,Vi);n.length>1&&this.sendString_(String(n.length));for(let e=0;e<n.length;e++)this.sendString_(n[e])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&=(clearInterval(this.keepaliveTimer),null),this.mySock&&=(this.mySock.close(),null)}onClosed_(){this.isClosed_||(this.log_(`WebSocket is closing itself`),this.shutdown_(),this.onDisconnect&&=(this.onDisconnect(this.everConnected_),null))}close(){this.isClosed_||(this.log_(`WebSocket is being closed`),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_(`0`),this.resetKeepAlive()},Math.floor(Hi))}sendString_(e){try{this.mySock.send(e)}catch(e){this.log_(`Exception thrown from WebSocket.send():`,e.message||e.data,`Closing connection.`),setTimeout(this.onClosed_.bind(this),0)}}};Wi.responsesRequiredToBeHealthy=2,Wi.healthyTimeout=3e4;
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Gi=class e{static get ALL_TRANSPORTS(){return[zi,Wi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(t){let n=Wi&&Wi.isAvailable(),r=n&&!Wi.previouslyFailed();if(t.webSocketOnly&&(n||Nr(`wss:// URL used, but browser isn't known to support websockets.  Trying anyway.`),r=!0),r)this.transports_=[Wi];else{let t=this.transports_=[];for(let n of e.ALL_TRANSPORTS)n&&n.isAvailable()&&t.push(n);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw Error(`No transports available`)}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}};Gi.globalTransportInitialized_=!1;
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Ki=6e4,qi=5e3,Ji=10*1024,Yi=100*1024,Xi=`t`,Zi=`d`,Qi=`s`,$i=`r`,ea=`e`,ta=`o`,k=`a`,na=`n`,ra=`p`,ia=`h`,aa=class{constructor(e,t,n,r,i,a,o,s,c,l){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=a,this.onReady_=o,this.onDisconnect_=s,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ar(`c:`+this.id+`:`),this.transportManager_=new Gi(t),this.log_(`Connection created`),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,n)},0);let r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=ti(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Yi?(this.log_(`Connection exceeded healthy timeout but has received `+this.conn_.bytesReceived+` bytes.  Marking connection healthy.`),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Ji?this.log_(`Connection exceeded healthy timeout but has sent `+this.conn_.bytesSent+` bytes.  Leaving connection alive.`):(this.log_(`Closing unhealthy connection after timeout.`),this.close()))},Math.floor(r)))}nextTransportId_(){return`c:`+this.id+`:`+ this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_(`Secondary connection lost.`),this.onSecondaryConnectionLost_()):this.log_(`closing an old connection`)}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_(`message on old connection`))}}sendRequest(e){let t={t:`d`,d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_(`cleaning up and promoting a connection: `+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Xi in e){let t=e[Xi];t===k?this.upgradeIfSecondaryHealthy_():t===$i?(this.log_(`Got a reset on secondary, closing it`),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===ta&&(this.log_(`got pong on secondary.`),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=Vr(`t`,e),n=Vr(`d`,e);if(t===`c`)this.onSecondaryControl_(n);else if(t===`d`)this.pendingDataMessages.push(n);else throw Error(`Unknown protocol layer: `+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_(`Secondary connection is healthy.`),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_(`sending ping on secondary.`),this.secondaryConn_.send({t:`c`,d:{t:ra,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_(`sending client ack on secondary`),this.secondaryConn_.send({t:`c`,d:{t:k,d:{}}}),this.log_(`Ending transmission on primary`),this.conn_.send({t:`c`,d:{t:na,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=Vr(`t`,e),n=Vr(`d`,e);t===`c`?this.onControl_(n):t===`d`&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_(`Primary connection is healthy.`),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=Vr(Xi,e);if(Zi in e){let n=e[Zi];if(t===ia){let e={...n};this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if(t===na){this.log_(`recvd end transmission on primary`),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===Qi?this.onConnectionShutdown_(n):t===$i?this.onReset_(n):t===ea?jr(`Server Error: `+n):t===ta?(this.log_(`got pong on primary.`),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):jr(`Unknown control packet command: `+t)}}onHandshake_(e){let t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),ai!==n&&Nr(`Protocol version mismatch detected`),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),ti(()=>{this.secondaryConn_&&(this.log_(`Timed out trying to upgrade.`),this.secondaryConn_.close())},Math.floor(Ki))}onReset_(e){this.log_(`Reset packet received.  New host: `+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_(`Realtime connection established.`),this.conn_=e,this.state_=1,this.onReady_&&=(this.onReady_(t,this.sessionId),null),this.primaryResponsesRequired_===0?(this.log_(`Primary connection is healthy.`),this.isHealthy_=!0):ti(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(qi))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_(`sending ping on primary.`),this.sendData_({t:`c`,d:{t:ra,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_(`Realtime connection failed.`),this.repoInfo_.isCacheableHost()&&(br.remove(`host:`+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_(`Realtime connection lost.`),this.close()}onConnectionShutdown_(e){this.log_(`Connection shutdown command received. Shutting down...`),this.onKill_&&=(this.onKill_(e),null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw`Connection is not connected`;this.tx_.send(e)}close(){this.state_!==2&&(this.log_(`Closing realtime connection.`),this.state_=2,this.closeConnections_(),this.onDisconnect_&&=(this.onDisconnect_(),null))}closeConnections_(){this.log_(`Shutting down all connections`),this.conn_&&=(this.conn_.close(),null),this.secondaryConn_&&=(this.secondaryConn_.close(),null),this.healthyTimeout_&&=(clearTimeout(this.healthyTimeout_),null)}},oa=class{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}},sa=class{constructor(e){this.allowedEvents_=e,this.listeners_={},E(Array.isArray(e)&&e.length>0,`Requires a non-empty array`)}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let n=[...this.listeners_[e]];for(let e=0;e<n.length;e++)n[e].callback.apply(n[e].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});let r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);let r=this.listeners_[e]||[];for(let e=0;e<r.length;e++)if(r[e].callback===t&&(!n||n===r[e].context)){r.splice(e,1);return}}validateEventType_(e){E(this.allowedEvents_.find(t=>t===e),`Unknown event: `+e)}},ca=class e extends sa{static getInstance(){return new e}constructor(){super([`online`]),this.online_=!0,typeof window<`u`&&window.addEventListener!==void 0&&!qe()&&(window.addEventListener(`online`,()=>{this.online_||(this.online_=!0,this.trigger(`online`,!0))},!1),window.addEventListener(`offline`,()=>{this.online_&&(this.online_=!1,this.trigger(`online`,!1))},!1))}getInitialEvent(e){return E(e===`online`,`Unknown event type: `+e),[this.online_]}currentlyOnline(){return this.online_}},la=32,ua=768,da=class{constructor(e,t){if(t===void 0){this.pieces_=e.split(`/`);let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e=``;for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==``&&(e+=`/`+this.pieces_[t]);return e||`/`}};function A(){return new da(``)}function j(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function fa(e){return e.pieces_.length-e.pieceNum_}function M(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new da(e.pieces_,t)}function pa(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function ma(e){let t=``;for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==``&&(t+=`/`+encodeURIComponent(String(e.pieces_[n])));return t||`/`}function ha(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function ga(e){if(e.pieceNum_>=e.pieces_.length)return null;let t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new da(t,0)}function _a(e,t){let n=[];for(let t=e.pieceNum_;t<e.pieces_.length;t++)n.push(e.pieces_[t]);if(t instanceof da)for(let e=t.pieceNum_;e<t.pieces_.length;e++)n.push(t.pieces_[e]);else{let e=t.split(`/`);for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new da(n,0)}function N(e){return e.pieceNum_>=e.pieces_.length}function va(e,t){let n=j(e),r=j(t);if(n===null)return t;if(n===r)return va(M(e),M(t));throw Error(`INTERNAL ERROR: innerPath (`+t+`) is not within outerPath (`+e+`)`)}function ya(e,t){let n=ha(e,0),r=ha(t,0);for(let e=0;e<n.length&&e<r.length;e++){let t=zr(n[e],r[e]);if(t!==0)return t}return n.length===r.length?0:n.length<r.length?-1:1}function ba(e,t){if(fa(e)!==fa(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function xa(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(fa(e)>fa(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Sa=class{constructor(e,t){this.errorPrefix_=t,this.parts_=ha(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let e=0;e<this.parts_.length;e++)this.byteLength_+=bt(this.parts_[e]);Ta(this)}};function Ca(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=bt(t),Ta(e)}function wa(e){let t=e.parts_.pop();e.byteLength_-=bt(t),e.parts_.length>0&&--e.byteLength_}function Ta(e){if(e.byteLength_>ua)throw Error(e.errorPrefix_+`has a key path longer than 768 bytes (`+e.byteLength_+`).`);if(e.parts_.length>la)throw Error(e.errorPrefix_+`path specified exceeds the maximum depth that can be written (32) or object contains a cycle `+Ea(e))}function Ea(e){return e.parts_.length===0?``:`in property '`+e.parts_.join(`.`)+`'`}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Da=class e extends sa{static getInstance(){return new e}constructor(){super([`visible`]);let e,t;typeof document<`u`&&document.addEventListener!==void 0&&(document.hidden===void 0?document.mozHidden===void 0?document.msHidden===void 0?document.webkitHidden!==void 0&&(t=`webkitvisibilitychange`,e=`webkitHidden`):(t=`msvisibilitychange`,e=`msHidden`):(t=`mozvisibilitychange`,e=`mozHidden`):(t=`visibilitychange`,e=`hidden`)),this.visible_=!0,t&&document.addEventListener(t,()=>{let t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger(`visible`,t))},!1)}getInitialEvent(e){return E(e===`visible`,`Unknown event type: `+e),[this.visible_]}},Oa=1e3,ka=300*1e3,Aa=30*1e3,ja=1.3,Ma=3e4,Na=`server_kill`,Pa=3,Fa=class e extends oa{constructor(t,n,r,i,a,o,s,c){if(super(),this.repoInfo_=t,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=a,this.authTokenProvider_=o,this.appCheckTokenProvider_=s,this.authOverride_=c,this.id=e.nextPersistentConnectionId_++,this.log_=Ar(`p:`+this.id+`:`),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Oa,this.maxReconnectDelay_=ka,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!Xe())throw Error(`Auth override specified in options, but not supported on non Node.js platforms`);Da.getInstance().on(`visible`,this.onVisible_,this),t.host.indexOf(`fblocal`)===-1&&ca.getInstance().on(`online`,this.onOnline_,this)}sendRequest(e,t,n){let r=++this.requestNumber_,i={r,a:e,b:t};this.log_(ot(i)),E(this.connected_,`sendRequest call when we're not connected not allowed.`),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();let t=new Le,n={action:`g`,request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{let n=e.d;e.s===`ok`?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;let r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();let i=e._queryIdentifier,a=e._path.toString();this.log_(`Listen called for `+a+` `+i),this.listens.has(a)||this.listens.set(a,new Map),E(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),`listen() called for non-default but complete query`),E(!this.listens.get(a).has(i),`listen() called twice for same path/queryId.`);let o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}sendGet_(e){let t=this.outstandingGets_[e];this.sendRequest(`g`,t.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)})}sendListen_(t){let n=t.query,r=n._path.toString(),i=n._queryIdentifier;this.log_(`Listen on `+r+` for `+i);let a={p:r};t.tag&&(a.q=n._queryObject,a.t=t.tag),a.h=t.hashFn(),this.sendRequest(`q`,a,a=>{let o=a.d,s=a.s;e.warnOnListenWarnings_(o,n),(this.listens.get(r)&&this.listens.get(r).get(i))===t&&(this.log_(`listen response`,a),s!==`ok`&&this.removeListen_(r,i),t.onComplete&&t.onComplete(s,o))})}static warnOnListenWarnings_(e,t){if(e&&typeof e==`object`&&ut(e,`w`)){let n=dt(e,`w`);if(Array.isArray(n)&&~n.indexOf(`no_index`)){let e=`".indexOn": "`+t._queryParams.getIndex().toString()+`"`,n=t._path.toString();Nr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_(`Auth token refreshed`),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest(`unauth`,{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||lt(e))&&(this.log_(`Admin auth credential detected.  Reducing max reconnect time.`),this.maxReconnectDelay_=Aa)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_(`App check token refreshed`),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest(`unappeck`,{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let e=this.authToken_,t=ct(e)?`auth`:`gauth`,n={cred:e};this.authOverride_===null?n.noauth=!0:typeof this.authOverride_==`object`&&(n.authvar=this.authOverride_),this.sendRequest(t,n,t=>{let n=t.s,r=t.d||`error`;this.authToken_===e&&(n===`ok`?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest(`appcheck`,{token:this.appCheckToken_},e=>{let t=e.s,n=e.d||`error`;t===`ok`?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)})}unlisten(e,t){let n=e._path.toString(),r=e._queryIdentifier;this.log_(`Unlisten called for `+n+` `+r),E(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),`unlisten() called for non-default but complete query`),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_(`Unlisten on `+e+` for `+t);let i={p:e};r&&(i.q=n,i.t=r),this.sendRequest(`n`,i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_(`o`,e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:`o`,data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_(`om`,e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:`om`,data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_(`oc`,e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:`oc`,data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){let i={p:t,d:n};this.log_(`onDisconnect `+e,i),this.sendRequest(e,i,e=>{r&&setTimeout(()=>{r(e.s,e.d)},0)})}put(e,t,n,r){this.putInternal(`p`,e,t,n,r)}merge(e,t,n,r){this.putInternal(`m`,e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();let a={p:t,d:n};i!==void 0&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;let o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_(`Buffering put: `+t)}sendPut_(e){let t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,n=>{this.log_(t+` response`,n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)})}reportStats(e){if(this.connected_){let t={c:e};this.log_(`reportStats`,t),this.sendRequest(`s`,t,e=>{if(e.s!==`ok`){let t=e.d;this.log_(`reportStats`,`Error sending stats: `+t)}})}}onDataMessage_(e){if(`r`in e){this.log_(`from server: `+ot(e));let t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else if(`error`in e)throw`A server-side error has occurred: `+e.error;else `a`in e&&this.onDataPush_(e.a,e.b)}onDataPush_(e,t){this.log_(`handleServerMessage`,e,t),e===`d`?this.onDataUpdate_(t.p,t.d,!1,t.t):e===`m`?this.onDataUpdate_(t.p,t.d,!0,t.t):e===`c`?this.onListenRevoked_(t.p,t.q):e===`ac`?this.onAuthRevoked_(t.s,t.d):e===`apc`?this.onAppCheckRevoked_(t.s,t.d):e===`sd`?this.onSecurityDebugPacket_(t):jr(`Unrecognized action received from server: `+ot(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_(`connection ready`),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){E(!this.realtime_,`Scheduling a connect when we're already connected/ing?`),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_(`Window became visible.  Reducing delay.`),this.reconnectDelay_=Oa,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_(`Browser went online.`),this.reconnectDelay_=Oa,this.realtime_||this.scheduleConnect_(0)):(this.log_(`Browser went offline.  Killing connection.`),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_(`data client disconnected`),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&=(new Date().getTime()-this.lastConnectionEstablishedTime_>Ma&&(this.reconnectDelay_=Oa),null):(this.log_(`Window isn't visible.  Delaying reconnect.`),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_),t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_(`Trying to reconnect in `+t+`ms`),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*ja)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_(`Making a connection attempt`),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+`:`+ e.nextConnectionId_++,a=this.lastSessionId,o=!1,s=null,c=function(){s?s.close():(o=!0,r())};this.realtime_={close:c,sendRequest:function(e){E(s,`sendRequest call when we're not connected not allowed.`),s.sendRequest(e)}};let l=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[e,c]=await Promise.all([this.authTokenProvider_.getToken(l),this.appCheckTokenProvider_.getToken(l)]);o?kr(`getToken() completed but was canceled`):(kr(`getToken() completed. Creating connection.`),this.authToken_=e&&e.accessToken,this.appCheckToken_=c&&c.token,s=new aa(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,e=>{Nr(e+` (`+this.repoInfo_.toString()+`)`),this.interrupt(Na)},a))}catch(e){this.log_(`Failed to get token: `+e),o||(this.repoInfo_.nodeAdmin&&Nr(e),c())}}}interrupt(e){kr(`Interrupting connection for reason: `+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&=(clearTimeout(this.establishConnectionTimer_),null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){kr(`Resuming connection for reason: `+e),delete this.interruptReasons_[e],ft(this.interruptReasons_)&&(this.reconnectDelay_=Oa,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){let t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){let t=this.outstandingPuts_[e];t&&`h`in t.request&&t.queued&&(t.onComplete&&t.onComplete(`disconnect`),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map(e=>Hr(e)).join(`$`):`default`;let r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete(`permission_denied`)}removeListen_(e,t){let n=new da(e).toString(),r;if(this.listens.has(n)){let e=this.listens.get(n);r=e.get(t),e.delete(t),e.size===0&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){kr(`Auth token revoked: `+e+`/`+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e===`invalid_token`||e===`permission_denied`)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Pa&&(this.reconnectDelay_=Aa,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){kr(`App check token revoked: `+e+`/`+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e===`invalid_token`||e===`permission_denied`)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Pa&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):`msg`in e&&console.log(`FIREBASE: `+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let e of this.listens.values())for(let t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){let e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){let e={},t=`js`;Xe()&&(t=this.repoInfo_.nodeAdmin?`admin_node`:`node`),e[`sdk.`+t+`.`+hr.replace(/\./g,`-`)]=1,qe()?e[`framework.cordova`]=1:Ye()&&(e[`framework.reactnative`]=1),this.reportStats(e)}shouldReconnect_(){let e=ca.getInstance().currentlyOnline();return ft(this.interruptReasons_)&&e}};Fa.nextPersistentConnectionId_=0,Fa.nextConnectionId_=0;
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var P=class e{constructor(e,t){this.name=e,this.node=t}static Wrap(t,n){return new e(t,n)}},Ia=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let n=new P(Lr,e),r=new P(Lr,t);return this.compare(n,r)!==0}minPost(){return P.MIN}},La,Ra=class extends Ia{static get __EMPTY_NODE(){return La}static set __EMPTY_NODE(e){La=e}compare(e,t){return zr(e.name,t.name)}isDefinedOn(e){throw ve(`KeyIndex.isDefinedOn not expected to be called.`)}indexedValueChanged(e,t){return!1}minPost(){return P.MIN}maxPost(){return new P(Rr,La)}makePost(e,t){return E(typeof e==`string`,`KeyIndex indexValue must always be a string.`),new P(e,La)}toString(){return`.key`}},za=new Ra,Ba=class{constructor(e,t,n,r,i=null){this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let a=1;for(;!e.isEmpty();)if(e=e,a=t?n(e.key,t):1,r&&(a*=-1),a<0)e=this.isReverse_?e.left:e.right;else if(a===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Va=class e{constructor(t,n,r,i,a){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??Ua.EMPTY_NODE,this.right=a??Ua.EMPTY_NODE}copy(t,n,r,i,a){return new e(t??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this,i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):i===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ua.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)!n.left.isEmpty()&&!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),!n.right.isEmpty()&&!n.right.isRed_()&&!n.right.left.isRed_()&&(n=n.moveRedRight_()),t(e,n.key)===0){if(n.right.isEmpty())return Ua.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){let t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){return 2**this.check_()<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw Error(`Red node has red child(`+this.key+`,`+this.value+`)`);if(this.right.isRed_())throw Error(`Right child of (`+this.key+`,`+this.value+`) is red`);let e=this.left.check_();if(e!==this.right.check_())throw Error(`Black depths differ`);return e+(this.isRed_()?0:1)}};Va.RED=!0,Va.BLACK=!1;var Ha=class{copy(e,t,n,r,i){return this}insert(e,t,n){return new Va(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Ua=class e{constructor(t,n=e.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Va.BLACK,null,null))}remove(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Va.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),t===0)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();)if(t=this.comparator_(e,n.key),t===0){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}else t<0?n=n.left:t>0&&(r=n,n=n.right);throw Error(`Attempted to find predecessor key for a nonexistent key.  What gives?`)}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ba(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Ba(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Ba(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Ba(this.root_,null,this.comparator_,!0,e)}};Ua.EMPTY_NODE=new Ha;
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Wa(e,t){return zr(e.name,t.name)}function Ga(e,t){return zr(e,t)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Ka;function qa(e){Ka=e}var Ja=function(e){return typeof e==`number`?`number:`+Gr(e):`string:`+e},Ya=function(e){if(e.isLeafNode()){let t=e.val();E(typeof t==`string`||typeof t==`number`||typeof t==`object`&&ut(t,`.sv`),`Priority must be a string or number.`)}else E(e===Ka||e.isEmpty(),`priority of unexpected type.`);E(e===Ka||e.getPriority().isEmpty(),`Priority nodes can't have a priority of their own.`)},Xa,Za=class e{static set __childrenNodeConstructor(e){Xa=e}static get __childrenNodeConstructor(){return Xa}constructor(t,n=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=n,this.lazyHash_=null,E(this.value_!==void 0&&this.value_!==null,`LeafNode shouldn't be created with null/undefined value.`),Ya(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new e(this.value_,t)}getImmediateChild(t){return t===`.priority`?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return N(t)?this:j(t)===`.priority`?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(t,n){return t===`.priority`?this.updatePriority(n):n.isEmpty()&&t!==`.priority`?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}updateChild(t,n){let r=j(t);return r===null?n:n.isEmpty()&&r!==`.priority`?this:(E(r!==`.priority`||fa(t)===1,`.priority must be the last token in a path`),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(M(t),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e=``;this.priorityNode_.isEmpty()||(e+=`priority:`+Ja(this.priorityNode_.val())+`:`);let t=typeof this.value_;e+=t+`:`,t===`number`?e+=Gr(this.value_):e+=this.value_,this.lazyHash_=wr(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(E(t.isLeafNode(),`Unknown node type`),this.compareToLeafNode_(t))}compareToLeafNode_(t){let n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return E(i>=0,`Unknown leaf type: `+n),E(a>=0,`Unknown leaf type: `+r),i===a?r===`object`?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){let t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}};Za.VALUE_TYPE_ORDER=[`object`,`boolean`,`number`,`string`];
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Qa,$a;function eo(e){Qa=e}function to(e){$a=e}var no=new class extends Ia{compare(e,t){let n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return i===0?zr(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return P.MIN}maxPost(){return new P(Rr,new Za(`[PRIORITY-POST]`,$a))}makePost(e,t){let n=Qa(e);return new P(t,new Za(`[PRIORITY-POST]`,n))}toString(){return`.priority`}},ro=Math.log(2),io=class{constructor(e){let t=e=>parseInt(Math.log(e)/ro,10),n=e=>parseInt(Array(e+1).join(`1`),2);this.count=t(e+1),this.current_=this.count-1;let r=n(this.count);this.bits_=e+1&r}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},ao=function(e,t,n,r){e.sort(t);let i=function(t,r){let a=r-t,o,s;if(a===0)return null;if(a===1)return o=e[t],s=n?n(o):o,new Va(s,o.node,Va.BLACK,null,null);{let c=parseInt(a/2,10)+t,l=i(t,c),u=i(c+1,r);return o=e[c],s=n?n(o):o,new Va(s,o.node,Va.BLACK,l,u)}},a=function(t){let r=null,a=null,o=e.length,s=function(t,r){let a=o-t,s=o;o-=t;let l=i(a+1,s),u=e[a],d=n?n(u):u;c(new Va(d,u.node,r,null,l))},c=function(e){r?(r.left=e,r=e):(a=e,r=e)};for(let e=0;e<t.count;++e){let n=t.nextBitIsOne(),r=2**(t.count-(e+1));n?s(r,Va.BLACK):(s(r,Va.BLACK),s(r,Va.RED))}return a},o=new io(e.length),s=a(o);return new Ua(r||t,s)},oo,so={},co=class e{static get Default(){return E(so&&no,`ChildrenNode.ts has not been loaded`),oo||=new e({".priority":so},{".priority":no}),oo}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){let t=dt(this.indexes_,e);if(!t)throw Error(`No index defined for `+e);return t instanceof Ua?t:null}hasIndex(e){return ut(this.indexSet_,e.toString())}addIndex(t,n){E(t!==za,`KeyIndex always exists and isn't meant to be added to the IndexMap.`);let r=[],i=!1,a=n.getIterator(P.Wrap),o=a.getNext();for(;o;)i||=t.isDefinedOn(o.node),r.push(o),o=a.getNext();let s;s=i?ao(r,t.getCompare()):so;let c=t.toString(),l={...this.indexSet_};l[c]=t;let u={...this.indexes_};return u[c]=s,new e(u,l)}addToIndexes(t,n){let r=pt(this.indexes_,(e,r)=>{let i=dt(this.indexSet_,r);if(E(i,`Missing index implementation for `+r),e===so)if(i.isDefinedOn(t.node)){let e=[],r=n.getIterator(P.Wrap),a=r.getNext();for(;a;)a.name!==t.name&&e.push(a),a=r.getNext();return e.push(t),ao(e,i.getCompare())}else return so;else{let r=n.get(t.name),i=e;return r&&(i=i.remove(new P(t.name,r))),i.insert(t,t.node)}});return new e(r,this.indexSet_)}removeFromIndexes(t,n){let r=pt(this.indexes_,e=>{if(e===so)return e;{let r=n.get(t.name);return r?e.remove(new P(t.name,r)):e}});return new e(r,this.indexSet_)}},lo,F=class e{static get EMPTY_NODE(){return lo||=new e(new Ua(Ga),null,co.Default)}constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Ya(this.priorityNode_),this.children_.isEmpty()&&E(!this.priorityNode_||this.priorityNode_.isEmpty(),`An empty node cannot have a priority`)}isLeafNode(){return!1}getPriority(){return this.priorityNode_||lo}updatePriority(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}getImmediateChild(e){if(e===`.priority`)return this.getPriority();{let t=this.children_.get(e);return t===null?lo:t}}getChild(e){let t=j(e);return t===null?this:this.getImmediateChild(t).getChild(M(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(t,n){if(E(n,`We should always be passing snapshot nodes`),t===`.priority`)return this.updatePriority(n);{let r=new P(t,n),i,a;n.isEmpty()?(i=this.children_.remove(t),a=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(t,n),a=this.indexMap_.addToIndexes(r,this.children_));let o=i.isEmpty()?lo:this.priorityNode_;return new e(i,o,a)}}updateChild(e,t){let n=j(e);if(n===null)return t;{E(j(e)!==`.priority`||fa(e)===1,`.priority must be the last token in a path`);let r=this.getImmediateChild(n).updateChild(M(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let n={},r=0,i=0,a=!0;if(this.forEachChild(no,(o,s)=>{n[o]=s.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1}),!t&&a&&i<2*r){let e=[];for(let t in n)e[t]=n[t];return e}else return t&&!this.getPriority().isEmpty()&&(n[`.priority`]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e=``;this.getPriority().isEmpty()||(e+=`priority:`+Ja(this.getPriority().val())+`:`),this.forEachChild(no,(t,n)=>{let r=n.hash();r!==``&&(e+=`:`+t+`:`+r)}),this.lazyHash_=e===``?``:wr(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){let r=this.resolveIndex_(n);if(r){let n=r.getPredecessorKey(new P(e,t));return n?n.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){let t=this.resolveIndex_(e);if(t){let e=t.minKey();return e&&e.name}else return this.children_.minKey()}getFirstChild(e){let t=this.getFirstChildName(e);return t?new P(t,this.children_.get(t)):null}getLastChildName(e){let t=this.resolveIndex_(e);if(t){let e=t.maxKey();return e&&e.name}else return this.children_.maxKey()}getLastChild(e){let t=this.getLastChildName(e);return t?new P(t,this.children_.get(t)):null}forEachChild(e,t){let n=this.resolveIndex_(e);return n?n.inorderTraversal(e=>t(e.name,e.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){let n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,e=>e);{let n=this.children_.getIteratorFrom(e.name,P.Wrap),r=n.peek();for(;r!=null&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){let n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,e=>e);{let n=this.children_.getReverseIteratorFrom(e.name,P.Wrap),r=n.peek();for(;r!=null&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===uo?-1:0}withIndex(t){if(t===za||this.indexMap_.hasIndex(t))return this;{let n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===za||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{let t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){let e=this.getIterator(no),n=t.getIterator(no),r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return r===null&&i===null}else return!1;else return!1}}resolveIndex_(e){return e===za?null:this.indexMap_.get(e.toString())}};F.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var uo=new class extends F{constructor(){super(new Ua(Ga),F.EMPTY_NODE,co.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return F.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(P,{MIN:{value:new P(Lr,F.EMPTY_NODE)},MAX:{value:new P(Rr,uo)}}),Ra.__EMPTY_NODE=F.EMPTY_NODE,Za.__childrenNodeConstructor=F,qa(uo),to(uo);
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var fo=!0;function po(e,t=null){if(e===null)return F.EMPTY_NODE;if(typeof e==`object`&&`.priority`in e&&(t=e[`.priority`]),E(t===null||typeof t==`string`||typeof t==`number`||typeof t==`object`&&`.sv`in t,`Invalid priority type found: `+typeof t),typeof e==`object`&&`.value`in e&&e[`.value`]!==null&&(e=e[`.value`]),typeof e!=`object`||`.sv`in e)return new Za(e,po(t));if(!(e instanceof Array)&&fo){let n=[],r=!1;if(Wr(e,(e,t)=>{if(e.substring(0,1)!==`.`){let i=po(t);i.isEmpty()||(r||=!i.getPriority().isEmpty(),n.push(new P(e,i)))}}),n.length===0)return F.EMPTY_NODE;let i=ao(n,Wa,e=>e.name,Ga);if(r){let e=ao(n,no.getCompare());return new F(i,po(t),new co({".priority":e},{".priority":no}))}else return new F(i,po(t),co.Default)}else{let n=F.EMPTY_NODE;return Wr(e,(t,r)=>{if(ut(e,t)&&t.substring(0,1)!==`.`){let e=po(r);(e.isLeafNode()||!e.isEmpty())&&(n=n.updateImmediateChild(t,e))}}),n.updatePriority(po(t))}}eo(po);
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var mo=class extends Ia{constructor(e){super(),this.indexPath_=e,E(!N(e)&&j(e)!==`.priority`,`Can't create PathIndex with empty path or .priority key`)}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return i===0?zr(e.name,t.name):i}makePost(e,t){let n=po(e),r=F.EMPTY_NODE.updateChild(this.indexPath_,n);return new P(t,r)}maxPost(){let e=F.EMPTY_NODE.updateChild(this.indexPath_,uo);return new P(Rr,e)}toString(){return ha(this.indexPath_,0).join(`/`)}},ho=new class extends Ia{compare(e,t){let n=e.node.compareTo(t.node);return n===0?zr(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return P.MIN}maxPost(){return P.MAX}makePost(e,t){let n=po(e);return new P(t,n)}toString(){return`.value`}};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function go(e){return{type:`value`,snapshotNode:e}}function _o(e,t){return{type:`child_added`,snapshotNode:t,childName:e}}function vo(e,t){return{type:`child_removed`,snapshotNode:t,childName:e}}function yo(e,t,n){return{type:`child_changed`,snapshotNode:t,childName:e,oldSnap:n}}function bo(e,t){return{type:`child_moved`,snapshotNode:t,childName:e}}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var xo=class{constructor(e){this.index_=e}updateChild(e,t,n,r,i,a){E(e.isIndexed(this.index_),`A node must be indexed if only a child is updated`);let o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()||(a!=null&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(vo(t,o)):E(e.isLeafNode(),`A child remove without an old child only makes sense on a leaf node`):o.isEmpty()?a.trackChildChange(_o(t,n)):a.trackChildChange(yo(t,n,o))),e.isLeafNode()&&n.isEmpty())?e:e.updateImmediateChild(t,n).withIndex(this.index_)}updateFullNode(e,t,n){return n!=null&&(e.isLeafNode()||e.forEachChild(no,(e,r)=>{t.hasChild(e)||n.trackChildChange(vo(e,r))}),t.isLeafNode()||t.forEachChild(no,(t,r)=>{if(e.hasChild(t)){let i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(yo(t,r,i))}else n.trackChildChange(_o(t,r))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?F.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}},So=class e{constructor(t){this.indexedFilter_=new xo(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,a){return this.matches(new P(t,n))||(n=F.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}updateFullNode(e,t,n){t.isLeafNode()&&(t=F.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(F.EMPTY_NODE);let i=this;return t.forEachChild(no,(e,t)=>{i.matches(new P(e,t))||(r=r.updateImmediateChild(e,F.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}},Co=class{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{let t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{let t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new So(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,a){return this.rangedFilter_.matches(new P(t,n))||(n=F.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=F.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){r=F.EMPTY_NODE.withIndex(this.index_);let e;e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){let t=e.getNext();if(this.withinDirectionalStart(t))if(this.withinDirectionalEnd(t))r=r.updateImmediateChild(t.name,t.node),n++;else break;else continue}}else{r=t.withIndex(this.index_),r=r.updatePriority(F.EMPTY_NODE);let e;e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){let t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,F.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let a;if(this.reverse_){let e=this.index_.getCompare();a=(t,n)=>e(n,t)}else a=this.index_.getCompare();let o=e;E(o.numChildren()===this.limit_,``);let s=new P(t,n),c=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),l=this.rangedFilter_.matches(s);if(o.hasChild(t)){let e=o.getImmediateChild(t),u=r.getChildAfterChild(this.index_,c,this.reverse_);for(;u!=null&&(u.name===t||o.hasChild(u.name));)u=r.getChildAfterChild(this.index_,u,this.reverse_);let d=u==null?1:a(u,s);if(l&&!n.isEmpty()&&d>=0)return i?.trackChildChange(yo(t,n,e)),o.updateImmediateChild(t,n);{i?.trackChildChange(vo(t,e));let n=o.updateImmediateChild(t,F.EMPTY_NODE);return u!=null&&this.rangedFilter_.matches(u)?(i?.trackChildChange(_o(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}else if(n.isEmpty())return e;else if(l)return a(c,s)>=0?(i!=null&&(i.trackChildChange(vo(c.name,c.node)),i.trackChildChange(_o(t,n))),o.updateImmediateChild(t,n).updateImmediateChild(c.name,F.EMPTY_NODE)):e;else return e}},wo=class e{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_=``,this.indexStartValue_=null,this.indexStartName_=``,this.indexEndValue_=null,this.indexEndName_=``,this.index_=no}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===``?this.startSet_:this.viewFrom_===`l`}getIndexStartValue(){return E(this.startSet_,`Only valid if start has been set`),this.indexStartValue_}getIndexStartName(){return E(this.startSet_,`Only valid if start has been set`),this.startNameSet_?this.indexStartName_:Lr}hasEnd(){return this.endSet_}getIndexEndValue(){return E(this.endSet_,`Only valid if end has been set`),this.indexEndValue_}getIndexEndName(){return E(this.endSet_,`Only valid if end has been set`),this.endNameSet_?this.indexEndName_:Rr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==``}getLimit(){return E(this.limitSet_,`Only valid if limit has been set`),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===no}copy(){let t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function To(e){return e.loadsAllData()?new xo(e.getIndex()):e.hasLimit()?new Co(e):new So(e)}function Eo(e){let t={};if(e.isDefault())return t;let n;if(e.index_===no?n=`$priority`:e.index_===ho?n=`$value`:e.index_===za?n=`$key`:(E(e.index_ instanceof mo,`Unrecognized index type!`),n=e.index_.toString()),t.orderBy=ot(n),e.startSet_){let n=e.startAfterSet_?`startAfter`:`startAt`;t[n]=ot(e.indexStartValue_),e.startNameSet_&&(t[n]+=`,`+ot(e.indexStartName_))}if(e.endSet_){let n=e.endBeforeSet_?`endBefore`:`endAt`;t[n]=ot(e.indexEndValue_),e.endNameSet_&&(t[n]+=`,`+ot(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function Do(e){let t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===``&&(n=e.isViewFromLeft()?`l`:`r`),t.vf=n}return e.index_!==no&&(t.i=e.index_.toString()),t}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Oo=class e extends oa{reportStats(e){throw Error(`Method not implemented.`)}static getListenId_(e,t){return t===void 0?(E(e._queryParams.isDefault(),`should have a tag if it's not a default query.`),e._path.toString()):`tag$`+t}constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=Ar(`p:rest:`),this.listens_={}}listen(t,n,r,i){let a=t._path.toString();this.log_(`Listen called for `+a+` `+t._queryIdentifier);let o=e.getListenId_(t,r),s={};this.listens_[o]=s;let c=Eo(t._queryParams);this.restRequest_(a+`.json`,c,(e,t)=>{let n=t;if(e===404&&(n=null,e=null),e===null&&this.onDataUpdate_(a,n,!1,r),dt(this.listens_,o)===s){let t;t=e?e===401?`permission_denied`:`rest_error:`+e:`ok`,i(t,null)}})}unlisten(t,n){let r=e.getListenId_(t,n);delete this.listens_[r]}get(e){let t=Eo(e._queryParams),n=e._path.toString(),r=new Le;return this.restRequest_(n+`.json`,t,(e,t)=>{let i=t;e===404&&(i=null,e=null),e===null?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(Error(i))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},n){return t.format=`export`,Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,i])=>{r&&r.accessToken&&(t.auth=r.accessToken),i&&i.token&&(t.ac=i.token);let a=(this.repoInfo_.secure?`https://`:`http://`)+this.repoInfo_.host+e+`?ns=`+this.repoInfo_.namespace+gt(t);this.log_(`Sending REST request for `+a);let o=new XMLHttpRequest;o.onreadystatechange=()=>{if(n&&o.readyState===4){this.log_(`REST Response for `+a+` received. status:`,o.status,`response:`,o.responseText);let e=null;if(o.status>=200&&o.status<300){try{e=at(o.responseText)}catch{Nr(`Failed to parse JSON response for `+a+`: `+o.responseText)}n(null,e)}else o.status!==401&&o.status!==404&&Nr(`Got unsuccessful REST response for `+a+` Status: `+o.status),n(o.status);n=null}},o.open(`GET`,a,!0),o.send()})}},I=class{constructor(){this.rootNode_=F.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function ko(){return{value:null,children:new Map}}function Ao(e,t,n){if(N(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{let r=j(t);e.children.has(r)||e.children.set(r,ko());let i=e.children.get(r);t=M(t),Ao(i,t,n)}}function jo(e,t,n){e.value===null?Mo(e,(e,r)=>{let i=new da(t.toString()+`/`+e);jo(r,i,n)}):n(t,e.value)}function Mo(e,t){e.children.forEach((e,n)=>{t(n,e)})}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var No=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t={...e};return this.last_&&Wr(this.last_,(e,n)=>{t[e]=t[e]-n}),this.last_=e,t}},Po=10*1e3,Fo=30*1e3,Io=300*1e3,Lo=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new No(e);let n=Po+(Fo-Po)*Math.random();ti(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){let e=this.statsListener_.get(),t={},n=!1;Wr(e,(e,r)=>{r>0&&ut(this.statsToReport_,e)&&(t[e]=r,n=!0)}),n&&this.server_.reportStats(t),ti(this.reportStats_.bind(this),Math.floor(Math.random()*2*Io))}},Ro;(function(e){e[e.OVERWRITE=0]=`OVERWRITE`,e[e.MERGE=1]=`MERGE`,e[e.ACK_USER_WRITE=2]=`ACK_USER_WRITE`,e[e.LISTEN_COMPLETE=3]=`LISTEN_COMPLETE`})(Ro||={});function zo(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Bo(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Vo(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Ho=class e{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Ro.ACK_USER_WRITE,this.source=zo()}operationForChild(t){if(N(this.path)){if(this.affectedTree.value!=null)return E(this.affectedTree.children.isEmpty(),`affectedTree should not have overlapping affected paths.`),this;{let n=this.affectedTree.subtree(new da(t));return new e(A(),n,this.revert)}}else return E(j(this.path)===t,`operationForChild called for unrelated child.`),new e(M(this.path),this.affectedTree,this.revert)}},Uo=class e{constructor(e,t){this.source=e,this.path=t,this.type=Ro.LISTEN_COMPLETE}operationForChild(t){return N(this.path)?new e(this.source,A()):new e(this.source,M(this.path))}},Wo=class e{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Ro.OVERWRITE}operationForChild(t){return N(this.path)?new e(this.source,A(),this.snap.getImmediateChild(t)):new e(this.source,M(this.path),this.snap)}},Go=class e{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Ro.MERGE}operationForChild(t){if(N(this.path)){let n=this.children.subtree(new da(t));return n.isEmpty()?null:n.value?new Wo(this.source,A(),n.value):new e(this.source,A(),n)}else return E(j(this.path)===t,`Can't get a merge for a child not on the path of the operation`),new e(this.source,M(this.path),this.children)}toString(){return`Operation(`+this.path+`: `+this.source.toString()+` merge: `+this.children.toString()+`)`}},Ko=class{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(N(e))return this.isFullyInitialized()&&!this.filtered_;let t=j(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}},qo=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function Jo(e,t,n,r){let i=[],a=[];return t.forEach(t=>{t.type===`child_changed`&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push(bo(t.childName,t.snapshotNode))}),Yo(e,i,`child_removed`,t,r,n),Yo(e,i,`child_added`,t,r,n),Yo(e,i,`child_moved`,a,r,n),Yo(e,i,`child_changed`,t,r,n),Yo(e,i,`value`,t,r,n),i}function Yo(e,t,n,r,i,a){let o=r.filter(e=>e.type===n);o.sort((t,n)=>Zo(e,t,n)),o.forEach(n=>{let r=Xo(e,n,a);i.forEach(i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))})})}function Xo(e,t,n){return t.type===`value`||t.type===`child_removed`||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function Zo(e,t,n){if(t.childName==null||n.childName==null)throw ve(`Should only compare child_ events.`);let r=new P(t.childName,t.snapshotNode),i=new P(n.childName,n.snapshotNode);return e.index_.compare(r,i)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Qo(e,t){return{eventCache:e,serverCache:t}}function $o(e,t,n,r){return Qo(new Ko(t,n,r),e.serverCache)}function es(e,t,n,r){return Qo(e.eventCache,new Ko(t,n,r))}function ts(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function ns(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var rs,os=()=>(rs||=new Ua(Br),rs),ss=class e{static fromObject(t){let n=new e(null);return Wr(t,(e,t)=>{n=n.set(new da(e),t)}),n}constructor(e,t=os()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:A(),value:this.value};if(N(e))return null;{let n=j(e),r=this.children.get(n);if(r!==null){let i=r.findRootMostMatchingPathAndValue(M(e),t);return i==null?null:{path:_a(new da(n),i.path),value:i.value}}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(t){if(N(t))return this;{let n=j(t),r=this.children.get(n);return r===null?new e(null):r.subtree(M(t))}}set(t,n){if(N(t))return new e(n,this.children);{let r=j(t),i=(this.children.get(r)||new e(null)).set(M(t),n),a=this.children.insert(r,i);return new e(this.value,a)}}remove(t){if(N(t))return this.children.isEmpty()?new e(null):new e(null,this.children);{let n=j(t),r=this.children.get(n);if(r){let i=r.remove(M(t)),a;return a=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),this.value===null&&a.isEmpty()?new e(null):new e(this.value,a)}else return this}}get(e){if(N(e))return this.value;{let t=j(e),n=this.children.get(t);return n?n.get(M(e)):null}}setTree(t,n){if(N(t))return n;{let r=j(t),i=(this.children.get(r)||new e(null)).setTree(M(t),n),a;return a=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new e(this.value,a)}}fold(e){return this.fold_(A(),e)}fold_(e,t){let n={};return this.children.inorderTraversal((r,i)=>{n[r]=i.fold_(_a(e,r),t)}),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,A(),t)}findOnPath_(e,t,n){let r=this.value?n(t,this.value):!1;if(r)return r;if(N(e))return null;{let r=j(e),i=this.children.get(r);return i?i.findOnPath_(M(e),_a(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,A(),t)}foreachOnPath_(t,n,r){if(N(t))return this;{this.value&&r(n,this.value);let i=j(t),a=this.children.get(i);return a?a.foreachOnPath_(M(t),_a(n,i),r):new e(null)}}foreach(e){this.foreach_(A(),e)}foreach_(e,t){this.children.inorderTraversal((n,r)=>{r.foreach_(_a(e,n),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,n)=>{n.value&&e(t,n.value)})}},cs=class e{constructor(e){this.writeTree_=e}static empty(){return new e(new ss(null))}};function ls(e,t,n){if(N(t))return new cs(new ss(n));{let r=e.writeTree_.findRootMostValueAndPath(t);if(r!=null){let i=r.path,a=r.value,o=va(i,t);return a=a.updateChild(o,n),new cs(e.writeTree_.set(i,a))}else{let r=new ss(n),i=e.writeTree_.setTree(t,r);return new cs(i)}}}function us(e,t,n){let r=e;return Wr(n,(e,n)=>{r=ls(r,_a(t,e),n)}),r}function ds(e,t){if(N(t))return cs.empty();{let n=e.writeTree_.setTree(t,new ss(null));return new cs(n)}}function fs(e,t){return ps(e,t)!=null}function ps(e,t){let n=e.writeTree_.findRootMostValueAndPath(t);return n==null?null:e.writeTree_.get(n.path).getChild(va(n.path,t))}function ms(e){let t=[],n=e.writeTree_.value;return n==null?e.writeTree_.children.inorderTraversal((e,n)=>{n.value!=null&&t.push(new P(e,n.value))}):n.isLeafNode()||n.forEachChild(no,(e,n)=>{t.push(new P(e,n))}),t}function hs(e,t){if(N(t))return e;{let n=ps(e,t);return n==null?new cs(e.writeTree_.subtree(t)):new cs(new ss(n))}}function gs(e){return e.writeTree_.isEmpty()}function _s(e,t){return vs(A(),e.writeTree_,t)}function vs(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((t,i)=>{t===`.priority`?(E(i.value!==null,`Priority writes must always be leaf nodes`),r=i.value):n=vs(_a(e,t),i,n)}),!n.getChild(e).isEmpty()&&r!==null&&(n=n.updateChild(_a(e,`.priority`),r)),n}}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function ys(e,t){return Hs(t,e)}function bs(e,t,n,r,i){E(r>e.lastWriteId,`Stacking an older write on top of newer ones`),i===void 0&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=ls(e.visibleWrites,t,n)),e.lastWriteId=r}function xs(e,t,n,r){E(r>e.lastWriteId,`Stacking an older merge on top of newer ones`),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=us(e.visibleWrites,t,n),e.lastWriteId=r}function Ss(e,t){for(let n=0;n<e.allWrites.length;n++){let r=e.allWrites[n];if(r.writeId===t)return r}return null}function Cs(e,t){let n=e.allWrites.findIndex(e=>e.writeId===t);E(n>=0,`removeWrite called with nonexistent writeId.`);let r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,a=!1,o=e.allWrites.length-1;for(;i&&o>=0;){let t=e.allWrites[o];t.visible&&(o>=n&&ws(t,r.path)?i=!1:xa(r.path,t.path)&&(a=!0)),o--}if(i){if(a)return Ts(e),!0;if(r.snap)e.visibleWrites=ds(e.visibleWrites,r.path);else{let t=r.children;Wr(t,t=>{e.visibleWrites=ds(e.visibleWrites,_a(r.path,t))})}return!0}else return!1}function ws(e,t){if(e.snap)return xa(e.path,t);for(let n in e.children)if(e.children.hasOwnProperty(n)&&xa(_a(e.path,n),t))return!0;return!1}function Ts(e){e.visibleWrites=Ds(e.allWrites,Es,A()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function Es(e){return e.visible}function Ds(e,t,n){let r=cs.empty();for(let i=0;i<e.length;++i){let a=e[i];if(t(a)){let e=a.path,t;if(a.snap)xa(n,e)?(t=va(n,e),r=ls(r,t,a.snap)):xa(e,n)&&(t=va(e,n),r=ls(r,A(),a.snap.getChild(t)));else if(a.children){if(xa(n,e))t=va(n,e),r=us(r,t,a.children);else if(xa(e,n))if(t=va(e,n),N(t))r=us(r,A(),a.children);else{let e=dt(a.children,j(t));if(e){let n=e.getChild(M(t));r=ls(r,A(),n)}}}else throw ve(`WriteRecord should have .snap or .children`)}}return r}function Os(e,t,n,r,i){if(!r&&!i){let r=ps(e.visibleWrites,t);if(r!=null)return r;{let r=hs(e.visibleWrites,t);if(gs(r))return n;if(n==null&&!fs(r,A()))return null;{let e=n||F.EMPTY_NODE;return _s(r,e)}}}else{let a=hs(e.visibleWrites,t);if(!i&&gs(a))return n;if(!i&&n==null&&!fs(a,A()))return null;{let a=Ds(e.allWrites,function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(xa(e.path,t)||xa(t,e.path))},t),o=n||F.EMPTY_NODE;return _s(a,o)}}}function ks(e,t,n){let r=F.EMPTY_NODE,i=ps(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(no,(e,t)=>{r=r.updateImmediateChild(e,t)}),r;if(n){let i=hs(e.visibleWrites,t);return n.forEachChild(no,(e,t)=>{let n=_s(hs(i,new da(e)),t);r=r.updateImmediateChild(e,n)}),ms(i).forEach(e=>{r=r.updateImmediateChild(e.name,e.node)}),r}else{let n=hs(e.visibleWrites,t);return ms(n).forEach(e=>{r=r.updateImmediateChild(e.name,e.node)}),r}}function As(e,t,n,r,i){E(r||i,`Either existingEventSnap or existingServerSnap must exist`);let a=_a(t,n);if(fs(e.visibleWrites,a))return null;{let t=hs(e.visibleWrites,a);return gs(t)?i.getChild(n):_s(t,i.getChild(n))}}function js(e,t,n,r){let i=_a(t,n),a=ps(e.visibleWrites,i);if(a!=null)return a;if(r.isCompleteForChild(n)){let t=hs(e.visibleWrites,i);return _s(t,r.getNode().getImmediateChild(n))}else return null}function Ms(e,t){return ps(e.visibleWrites,t)}function Ns(e,t,n,r,i,a,o){let s,c=hs(e.visibleWrites,t),l=ps(c,A());if(l!=null)s=l;else if(n!=null)s=_s(c,n);else return[];if(s=s.withIndex(o),!s.isEmpty()&&!s.isLeafNode()){let e=[],t=o.getCompare(),n=a?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o),c=n.getNext();for(;c&&e.length<i;)t(c,r)!==0&&e.push(c),c=n.getNext();return e}else return[]}function Ps(){return{visibleWrites:cs.empty(),allWrites:[],lastWriteId:-1}}function Fs(e,t,n,r){return Os(e.writeTree,e.treePath,t,n,r)}function Is(e,t){return ks(e.writeTree,e.treePath,t)}function Ls(e,t,n,r){return As(e.writeTree,e.treePath,t,n,r)}function Rs(e,t){return Ms(e.writeTree,_a(e.treePath,t))}function zs(e,t,n,r,i,a){return Ns(e.writeTree,e.treePath,t,n,r,i,a)}function Bs(e,t,n){return js(e.writeTree,e.treePath,t,n)}function Vs(e,t){return Hs(_a(e.treePath,t),e.writeTree)}function Hs(e,t){return{treePath:e,writeTree:t}}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Us=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,n=e.childName;E(t===`child_added`||t===`child_changed`||t===`child_removed`,`Only child changes supported for tracking`),E(n!==`.priority`,`Only non-priority child changes can be tracked.`);let r=this.changeMap.get(n);if(r){let i=r.type;if(t===`child_added`&&i===`child_removed`)this.changeMap.set(n,yo(n,e.snapshotNode,r.snapshotNode));else if(t===`child_removed`&&i===`child_added`)this.changeMap.delete(n);else if(t===`child_removed`&&i===`child_changed`)this.changeMap.set(n,vo(n,r.oldSnap));else if(t===`child_changed`&&i===`child_added`)this.changeMap.set(n,_o(n,e.snapshotNode));else if(t===`child_changed`&&i===`child_changed`)this.changeMap.set(n,yo(n,e.snapshotNode,r.oldSnap));else throw ve(`Illegal combination of changes: `+e+` occurred after `+r)}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}},Ws=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}},Gs=class{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let t=this.optCompleteServerCache_==null?this.viewCache_.serverCache:new Ko(this.optCompleteServerCache_,!0,!1);return Bs(this.writes_,e,t)}}getChildAfterChild(e,t,n){let r=this.optCompleteServerCache_==null?ns(this.viewCache_):this.optCompleteServerCache_,i=zs(this.writes_,r,t,1,n,e);return i.length===0?null:i[0]}};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Ks(e){return{filter:e}}function qs(e,t){E(t.eventCache.getNode().isIndexed(e.filter.getIndex()),`Event snap not indexed`),E(t.serverCache.getNode().isIndexed(e.filter.getIndex()),`Server snap not indexed`)}function Js(e,t,n,r,i){let a=new Us,o,s;if(n.type===Ro.OVERWRITE){let c=n;c.source.fromUser?o=Qs(e,t,c.path,c.snap,r,i,a):(E(c.source.fromServer,`Unknown source.`),s=c.source.tagged||t.serverCache.isFiltered()&&!N(c.path),o=Zs(e,t,c.path,c.snap,r,i,s,a))}else if(n.type===Ro.MERGE){let c=n;c.source.fromUser?o=ec(e,t,c.path,c.children,r,i,a):(E(c.source.fromServer,`Unknown source.`),s=c.source.tagged||t.serverCache.isFiltered(),o=nc(e,t,c.path,c.children,r,i,s,a))}else if(n.type===Ro.ACK_USER_WRITE){let s=n;o=s.revert?ac(e,t,s.path,r,i,a):rc(e,t,s.path,s.affectedTree,r,i,a)}else if(n.type===Ro.LISTEN_COMPLETE)o=ic(e,t,n.path,r,a);else throw ve(`Unknown operation type: `+n.type);let c=a.getChanges();return Ys(t,o,c),{viewCache:o,changes:c}}function Ys(e,t,n){let r=t.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=ts(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(go(ts(t)))}}function Xs(e,t,n,r,i,a){let o=t.eventCache;if(Rs(r,n)!=null)return t;{let s,c;if(N(n))if(E(t.serverCache.isFullyInitialized(),`If change path is empty, we must have complete server data`),t.serverCache.isFiltered()){let n=ns(t),i=n instanceof F?n:F.EMPTY_NODE,o=Is(r,i);s=e.filter.updateFullNode(t.eventCache.getNode(),o,a)}else{let n=Fs(r,ns(t));s=e.filter.updateFullNode(t.eventCache.getNode(),n,a)}else{let l=j(n);if(l===`.priority`){E(fa(n)===1,`Can't have a priority with additional path components`);let i=o.getNode();c=t.serverCache.getNode();let a=Ls(r,n,i,c);s=a==null?o.getNode():e.filter.updatePriority(i,a)}else{let u=M(n),d;if(o.isCompleteForChild(l)){c=t.serverCache.getNode();let e=Ls(r,n,o.getNode(),c);d=e==null?o.getNode().getImmediateChild(l):o.getNode().getImmediateChild(l).updateChild(u,e)}else d=Bs(r,l,t.serverCache);s=d==null?o.getNode():e.filter.updateChild(o.getNode(),l,d,u,i,a)}}return $o(t,s,o.isFullyInitialized()||N(n),e.filter.filtersNodes())}}function Zs(e,t,n,r,i,a,o,s){let c=t.serverCache,l,u=o?e.filter:e.filter.getIndexedFilter();if(N(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let e=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),e,null)}else{let e=j(n);if(!c.isCompleteForPath(n)&&fa(n)>1)return t;let i=M(n),a=c.getNode().getImmediateChild(e).updateChild(i,r);l=e===`.priority`?u.updatePriority(c.getNode(),a):u.updateChild(c.getNode(),e,a,i,Ws,null)}let d=es(t,l,c.isFullyInitialized()||N(n),u.filtersNodes()),f=new Gs(i,d,a);return Xs(e,d,n,i,f,s)}function Qs(e,t,n,r,i,a,o){let s=t.eventCache,c,l,u=new Gs(i,t,a);if(N(n))l=e.filter.updateFullNode(t.eventCache.getNode(),r,o),c=$o(t,l,!0,e.filter.filtersNodes());else{let i=j(n);if(i===`.priority`)l=e.filter.updatePriority(t.eventCache.getNode(),r),c=$o(t,l,s.isFullyInitialized(),s.isFiltered());else{let a=M(n),l=s.getNode().getImmediateChild(i),d;if(N(a))d=r;else{let e=u.getCompleteChild(i);d=e==null?F.EMPTY_NODE:pa(a)===`.priority`&&e.getChild(ga(a)).isEmpty()?e:e.updateChild(a,r)}if(l.equals(d))c=t;else{let n=e.filter.updateChild(s.getNode(),i,d,a,u,o);c=$o(t,n,s.isFullyInitialized(),e.filter.filtersNodes())}}}return c}function $s(e,t){return e.eventCache.isCompleteForChild(t)}function ec(e,t,n,r,i,a,o){let s=t;return r.foreach((r,c)=>{let l=_a(n,r);$s(t,j(l))&&(s=Qs(e,s,l,c,i,a,o))}),r.foreach((r,c)=>{let l=_a(n,r);$s(t,j(l))||(s=Qs(e,s,l,c,i,a,o))}),s}function tc(e,t,n){return n.foreach((e,n)=>{t=t.updateChild(e,n)}),t}function nc(e,t,n,r,i,a,o,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c=t,l;l=N(n)?r:new ss(null).setTree(n,r);let u=t.serverCache.getNode();return l.children.inorderTraversal((n,r)=>{if(u.hasChild(n)){let l=t.serverCache.getNode().getImmediateChild(n),u=tc(e,l,r);c=Zs(e,c,new da(n),u,i,a,o,s)}}),l.children.inorderTraversal((n,r)=>{let l=!t.serverCache.isCompleteForChild(n)&&r.value===null;if(!u.hasChild(n)&&!l){let l=t.serverCache.getNode().getImmediateChild(n),u=tc(e,l,r);c=Zs(e,c,new da(n),u,i,a,o,s)}}),c}function rc(e,t,n,r,i,a,o){if(Rs(i,n)!=null)return t;let s=t.serverCache.isFiltered(),c=t.serverCache;if(r.value!=null){if(N(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Zs(e,t,n,c.getNode().getChild(n),i,a,s,o);if(N(n)){let r=new ss(null);return c.getNode().forEachChild(za,(e,t)=>{r=r.set(new da(e),t)}),nc(e,t,n,r,i,a,s,o)}else return t}else{let l=new ss(null);return r.foreach((e,t)=>{let r=_a(n,e);c.isCompleteForPath(r)&&(l=l.set(e,c.getNode().getChild(r)))}),nc(e,t,n,l,i,a,s,o)}}function ic(e,t,n,r,i){let a=t.serverCache,o=es(t,a.getNode(),a.isFullyInitialized()||N(n),a.isFiltered());return Xs(e,o,n,r,Ws,i)}function ac(e,t,n,r,i,a){let o;if(Rs(r,n)!=null)return t;{let s=new Gs(r,t,i),c=t.eventCache.getNode(),l;if(N(n)||j(n)===`.priority`){let n;if(t.serverCache.isFullyInitialized())n=Fs(r,ns(t));else{let e=t.serverCache.getNode();E(e instanceof F,`serverChildren would be complete if leaf node`),n=Is(r,e)}n=n,l=e.filter.updateFullNode(c,n,a)}else{let i=j(n),u=Bs(r,i,t.serverCache);u==null&&t.serverCache.isCompleteForChild(i)&&(u=c.getImmediateChild(i)),l=u==null?t.eventCache.getNode().hasChild(i)?e.filter.updateChild(c,i,F.EMPTY_NODE,M(n),s,a):c:e.filter.updateChild(c,i,u,M(n),s,a),l.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Fs(r,ns(t)),o.isLeafNode()&&(l=e.filter.updateFullNode(l,o,a)))}return o=t.serverCache.isFullyInitialized()||Rs(r,A())!=null,$o(t,l,o,e.filter.filtersNodes())}}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var oc=class{constructor(e,t){this.query_=e,this.eventRegistrations_=[];let n=this.query_._queryParams,r=new xo(n.getIndex()),i=To(n);this.processor_=Ks(i);let a=t.serverCache,o=t.eventCache,s=r.updateFullNode(F.EMPTY_NODE,a.getNode(),null),c=i.updateFullNode(F.EMPTY_NODE,o.getNode(),null),l=new Ko(s,a.isFullyInitialized(),r.filtersNodes()),u=new Ko(c,o.isFullyInitialized(),i.filtersNodes());this.viewCache_=Qo(u,l),this.eventGenerator_=new qo(this.query_)}get query(){return this.query_}};function sc(e){return e.viewCache_.serverCache.getNode()}function cc(e,t){let n=ns(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!N(t)&&!n.getImmediateChild(j(t)).isEmpty())?n.getChild(t):null}function lc(e){return e.eventRegistrations_.length===0}function uc(e,t){e.eventRegistrations_.push(t)}function dc(e,t,n){let r=[];if(n){E(t==null,`A cancel should cancel all event registrations.`);let i=e.query._path;e.eventRegistrations_.forEach(e=>{let t=e.createCancelEvent(n,i);t&&r.push(t)})}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){let i=e.eventRegistrations_[r];if(!i.matches(t))n.push(i);else if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function fc(e,t,n,r){t.type===Ro.MERGE&&t.source.queryId!==null&&(E(ns(e.viewCache_),`We should always have a full cache before handling merges`),E(ts(e.viewCache_),`Missing event cache, even though we have a server cache`));let i=e.viewCache_,a=Js(e.processor_,i,t,n,r);return qs(e.processor_,a.viewCache),E(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),`Once a server snap is complete, it should never go back`),e.viewCache_=a.viewCache,mc(e,a.changes,a.viewCache.eventCache.getNode(),null)}function pc(e,t){let n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(no,(e,t)=>{r.push(_o(e,t))}),n.isFullyInitialized()&&r.push(go(n.getNode())),mc(e,r,n.getNode(),t)}function mc(e,t,n,r){let i=r?[r]:e.eventRegistrations_;return Jo(e.eventGenerator_,t,n,i)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var hc,gc=class{constructor(){this.views=new Map}};function _c(e){E(!hc,`__referenceConstructor has already been defined`),hc=e}function vc(){return E(hc,`Reference.ts has not been loaded`),hc}function yc(e){return e.views.size===0}function bc(e,t,n,r){let i=t.source.queryId;if(i!==null){let a=e.views.get(i);return E(a!=null,`SyncTree gave us an op for an invalid query.`),fc(a,t,n,r)}else{let i=[];for(let a of e.views.values())i=i.concat(fc(a,t,n,r));return i}}function xc(e,t,n,r,i){let a=t._queryIdentifier,o=e.views.get(a);if(!o){let e=Fs(n,i?r:null),a=!1;e?a=!0:r instanceof F?(e=Is(n,r),a=!1):(e=F.EMPTY_NODE,a=!1);let o=Qo(new Ko(e,a,!1),new Ko(r,i,!1));return new oc(t,o)}return o}function Sc(e,t,n,r,i,a){let o=xc(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),uc(o,n),pc(o,n)}function Cc(e,t,n,r){let i=t._queryIdentifier,a=[],o=[],s=Oc(e);if(i===`default`)for(let[t,i]of e.views.entries())o=o.concat(dc(i,n,r)),lc(i)&&(e.views.delete(t),i.query._queryParams.loadsAllData()||a.push(i.query));else{let t=e.views.get(i);t&&(o=o.concat(dc(t,n,r)),lc(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||a.push(t.query)))}return s&&!Oc(e)&&a.push(new(vc())(t._repo,t._path)),{removed:a,events:o}}function wc(e){let t=[];for(let n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function Tc(e,t){let n=null;for(let r of e.views.values())n||=cc(r,t);return n}function Ec(e,t){if(t._queryParams.loadsAllData())return kc(e);{let n=t._queryIdentifier;return e.views.get(n)}}function Dc(e,t){return Ec(e,t)!=null}function Oc(e){return kc(e)!=null}function kc(e){for(let t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Ac;function jc(e){E(!Ac,`__referenceConstructor has already been defined`),Ac=e}function Mc(){return E(Ac,`Reference.ts has not been loaded`),Ac}var Nc=1,Pc=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ss(null),this.pendingWriteTree_=Ps(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function Fc(e,t,n,r,i){return bs(e.pendingWriteTree_,t,n,r,i),i?qc(e,new Wo(zo(),t,n)):[]}function Ic(e,t,n,r){xs(e.pendingWriteTree_,t,n,r);let i=ss.fromObject(n);return qc(e,new Go(zo(),t,i))}function Lc(e,t,n=!1){let r=Ss(e.pendingWriteTree_,t);if(Cs(e.pendingWriteTree_,t)){let t=new ss(null);return r.snap==null?Wr(r.children,e=>{t=t.set(new da(e),!0)}):t=t.set(A(),!0),qc(e,new Ho(r.path,t,n))}else return[]}function Rc(e,t,n){return qc(e,new Wo(Bo(),t,n))}function zc(e,t,n){let r=ss.fromObject(n);return qc(e,new Go(Bo(),t,r))}function Bc(e,t){return qc(e,new Uo(Bo(),t))}function Vc(e,t,n){let r=$c(e,n);if(r){let n=el(r),i=n.path,a=n.queryId,o=va(i,t),s=new Uo(Vo(a),o);return tl(e,i,s)}else return[]}function Hc(e,t,n,r,i=!1){let a=t._path,o=e.syncPointTree_.get(a),s=[];if(o&&(t._queryIdentifier===`default`||Dc(o,t))){let c=Cc(o,t,n,r);yc(o)&&(e.syncPointTree_=e.syncPointTree_.remove(a));let l=c.removed;if(s=c.events,!i){let n=l.findIndex(e=>e._queryParams.loadsAllData())!==-1,i=e.syncPointTree_.findOnPath(a,(e,t)=>Oc(t));if(n&&!i){let t=e.syncPointTree_.subtree(a);if(!t.isEmpty()){let n=nl(t);for(let t=0;t<n.length;++t){let r=n[t],i=r.query,a=Xc(e,r);e.listenProvider_.startListening(rl(i),Zc(e,i),a.hashFn,a.onComplete)}}}!i&&l.length>0&&!r&&(n?e.listenProvider_.stopListening(rl(t),null):l.forEach(t=>{let n=e.queryToTagMap.get(Qc(t));e.listenProvider_.stopListening(rl(t),n)}))}il(e,l)}return s}function Uc(e,t,n,r){let i=$c(e,r);if(i!=null){let r=el(i),a=r.path,o=r.queryId,s=va(a,t),c=new Wo(Vo(o),s,n);return tl(e,a,c)}else return[]}function Wc(e,t,n,r){let i=$c(e,r);if(i){let r=el(i),a=r.path,o=r.queryId,s=va(a,t),c=ss.fromObject(n),l=new Go(Vo(o),s,c);return tl(e,a,l)}else return[]}function Gc(e,t,n,r=!1){let i=t._path,a=null,o=!1;e.syncPointTree_.foreachOnPath(i,(e,t)=>{let n=va(e,i);a||=Tc(t,n),o||=Oc(t)});let s=e.syncPointTree_.get(i);s?(o||=Oc(s),a||=Tc(s,A())):(s=new gc,e.syncPointTree_=e.syncPointTree_.set(i,s));let c;a==null?(c=!1,a=F.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((e,t)=>{let n=Tc(t,A());n&&(a=a.updateImmediateChild(e,n))})):c=!0;let l=Dc(s,t);if(!l&&!t._queryParams.loadsAllData()){let n=Qc(t);E(!e.queryToTagMap.has(n),`View does not exist, but we have a tag`);let r=al();e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let u=ys(e.pendingWriteTree_,i),d=Sc(s,t,n,u,a,c);if(!l&&!o&&!r){let n=Ec(s,t);d=d.concat(ol(e,t,n))}return d}function Kc(e,t,n){let r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(e,n)=>{let r=va(e,t),i=Tc(n,r);if(i)return i});return Os(r,t,i,n,!0)}function qc(e,t){return Jc(t,e.syncPointTree_,null,ys(e.pendingWriteTree_,A()))}function Jc(e,t,n,r){if(N(e.path))return Yc(e,t,n,r);{let i=t.get(A());n==null&&i!=null&&(n=Tc(i,A()));let a=[],o=j(e.path),s=e.operationForChild(o),c=t.children.get(o);if(c&&s){let e=n?n.getImmediateChild(o):null,t=Vs(r,o);a=a.concat(Jc(s,c,e,t))}return i&&(a=a.concat(bc(i,e,r,n))),a}}function Yc(e,t,n,r){let i=t.get(A());n==null&&i!=null&&(n=Tc(i,A()));let a=[];return t.children.inorderTraversal((t,i)=>{let o=n?n.getImmediateChild(t):null,s=Vs(r,t),c=e.operationForChild(t);c&&(a=a.concat(Yc(c,i,o,s)))}),i&&(a=a.concat(bc(i,e,r,n))),a}function Xc(e,t){let n=t.query,r=Zc(e,n);return{hashFn:()=>(sc(t)||F.EMPTY_NODE).hash(),onComplete:t=>{if(t===`ok`)return r?Vc(e,n._path,r):Bc(e,n._path);{let r=Jr(t,n);return Hc(e,n,null,r)}}}}function Zc(e,t){let n=Qc(t);return e.queryToTagMap.get(n)}function Qc(e){return e._path.toString()+`$`+e._queryIdentifier}function $c(e,t){return e.tagToQueryMap.get(t)}function el(e){let t=e.indexOf(`$`);return E(t!==-1&&t<e.length-1,`Bad queryKey.`),{queryId:e.substr(t+1),path:new da(e.substr(0,t))}}function tl(e,t,n){let r=e.syncPointTree_.get(t);E(r,`Missing sync point for query tag that we're tracking`);let i=ys(e.pendingWriteTree_,t);return bc(r,n,i,null)}function nl(e){return e.fold((e,t,n)=>{if(t&&Oc(t))return[kc(t)];{let e=[];return t&&(e=wc(t)),Wr(n,(t,n)=>{e=e.concat(n)}),e}})}function rl(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Mc())(e._repo,e._path):e}function il(e,t){for(let n=0;n<t.length;++n){let r=t[n];if(!r._queryParams.loadsAllData()){let t=Qc(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}function al(){return Nc++}function ol(e,t,n){let r=t._path,i=Zc(e,t),a=Xc(e,n),o=e.listenProvider_.startListening(rl(t),i,a.hashFn,a.onComplete),s=e.syncPointTree_.subtree(r);if(i)E(!Oc(s.value),`If we're adding a query, it shouldn't be shadowed`);else{let t=s.fold((e,t,n)=>{if(!N(e)&&t&&Oc(t))return[kc(t).query];{let e=[];return t&&(e=e.concat(wc(t).map(e=>e.query))),Wr(n,(t,n)=>{e=e.concat(n)}),e}});for(let n=0;n<t.length;++n){let r=t[n];e.listenProvider_.stopListening(rl(r),Zc(e,r))}}return o}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var sl=class e{constructor(e){this.node_=e}getImmediateChild(t){let n=this.node_.getImmediateChild(t);return new e(n)}node(){return this.node_}},cl=class e{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(t){let n=_a(this.path_,t);return new e(this.syncTree_,n)}node(){return Kc(this.syncTree_,this.path_)}},ll=function(e){return e||={},e.timestamp=e.timestamp||new Date().getTime(),e},ul=function(e,t,n){if(!e||typeof e!=`object`)return e;if(E(`.sv`in e,`Unexpected leaf node or priority contents`),typeof e[`.sv`]==`string`)return dl(e[`.sv`],t,n);if(typeof e[`.sv`]==`object`)return fl(e[`.sv`],t);E(!1,`Unexpected server value: `+JSON.stringify(e,null,2))},dl=function(e,t,n){switch(e){case`timestamp`:return n.timestamp;default:E(!1,`Unexpected server value: `+e)}},fl=function(e,t,n){e.hasOwnProperty(`increment`)||E(!1,`Unexpected server value: `+JSON.stringify(e,null,2));let r=e.increment;typeof r!=`number`&&E(!1,`Unexpected increment value: `+r);let i=t.node();if(E(i!=null,`Expected ChildrenNode.EMPTY_NODE for nulls`),!i.isLeafNode())return r;let a=i.getValue();return typeof a==`number`?a+r:r},pl=function(e,t,n,r){return hl(t,new cl(n,e),r)},ml=function(e,t,n){return hl(e,new sl(t),n)};function hl(e,t,n){let r=e.getPriority().val(),i=ul(r,t.getImmediateChild(`.priority`),n),a;if(e.isLeafNode()){let r=e,a=ul(r.getValue(),t,n);return a!==r.getValue()||i!==r.getPriority().val()?new Za(a,po(i)):e}else{let r=e;return a=r,i!==r.getPriority().val()&&(a=a.updatePriority(new Za(i))),r.forEachChild(no,(e,r)=>{let i=hl(r,t.getImmediateChild(e),n);i!==r&&(a=a.updateImmediateChild(e,i))}),a}}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var gl=class{constructor(e=``,t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}};function _l(e,t){let n=t instanceof da?t:new da(t),r=e,i=j(n);for(;i!==null;){let e=dt(r.node.children,i)||{children:{},childCount:0};r=new gl(i,r,e),n=M(n),i=j(n)}return r}function vl(e){return e.node.value}function yl(e,t){e.node.value=t,El(e)}function bl(e){return e.node.childCount>0}function xl(e){return vl(e)===void 0&&!bl(e)}function Sl(e,t){Wr(e.node.children,(n,r)=>{t(new gl(n,e,r))})}function Cl(e,t,n,r){n&&!r&&t(e),Sl(e,e=>{Cl(e,t,!0,r)}),n&&r&&t(e)}function wl(e,t,n){let r=n?e:e.parent;for(;r!==null;){if(t(r))return!0;r=r.parent}return!1}function Tl(e){return new da(e.parent===null?e.name:Tl(e.parent)+`/`+e.name)}function El(e){e.parent!==null&&Dl(e.parent,e.name,e)}function Dl(e,t,n){let r=xl(n),i=ut(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,El(e)):!r&&!i&&(e.node.children[t]=n.node,e.node.childCount++,El(e))}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Ol=/[\[\].#$\/\u0000-\u001F\u007F]/,kl=/[\[\].#$\u0000-\u001F\u007F]/,Al=10*1024*1024,jl=function(e){return typeof e==`string`&&e.length!==0&&!Ol.test(e)},Ml=function(e){return typeof e==`string`&&e.length!==0&&!kl.test(e)},Nl=function(e){return e&&=e.replace(/^\/*\.info(\/|$)/,`/`),Ml(e)},Pl=function(e){return e===null||typeof e==`string`||typeof e==`number`&&!Fr(e)||e&&typeof e==`object`&&ut(e,`.sv`)},Fl=function(e,t,n,r){r&&t===void 0||Il(vt(e,`value`),t,n)},Il=function(e,t,n){let r=n instanceof da?new Sa(n,e):n;if(t===void 0)throw Error(e+`contains undefined `+Ea(r));if(typeof t==`function`)throw Error(e+`contains a function `+Ea(r)+` with contents = `+t.toString());if(Fr(t))throw Error(e+`contains `+t.toString()+` `+Ea(r));if(typeof t==`string`&&t.length>Al/3&&bt(t)>Al)throw Error(e+`contains a string greater than 10485760 utf8 bytes `+Ea(r)+` ('`+t.substring(0,50)+`...')`);if(t&&typeof t==`object`){let n=!1,i=!1;if(Wr(t,(t,a)=>{if(t===`.value`)n=!0;else if(t!==`.priority`&&t!==`.sv`&&(i=!0,!jl(t)))throw Error(e+` contains an invalid key (`+t+`) `+Ea(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Ca(r,t),Il(e,a,r),wa(r)}),n&&i)throw Error(e+` contains ".value" child `+Ea(r)+` in addition to actual children.`)}},Ll=function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];let i=ha(r);for(let t=0;t<i.length;t++)if(!(i[t]===`.priority`&&t===i.length-1)&&!jl(i[t]))throw Error(e+`contains an invalid key (`+i[t]+`) in path `+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}t.sort(ya);let i=null;for(n=0;n<t.length;n++){if(r=t[n],i!==null&&xa(i,r))throw Error(e+`contains a path `+i.toString()+` that is ancestor of another path `+r.toString());i=r}},Rl=function(e,t,n,r){if(r&&t===void 0)return;let i=vt(e,`values`);if(!(t&&typeof t==`object`)||Array.isArray(t))throw Error(i+` must be an object containing the children to replace.`);let a=[];Wr(t,(e,t)=>{let r=new da(e);if(Il(i,t,_a(n,r)),pa(r)===`.priority`&&!Pl(t))throw Error(i+`contains an invalid value for '`+r.toString()+`', which must be a valid Firebase priority (a string, finite number, server value, or null).`);a.push(r)}),Ll(i,a)},zl=function(e,t,n,r){if(!(r&&n===void 0)&&!Ml(n))throw Error(vt(e,t)+`was an invalid path = "`+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Bl=function(e,t,n,r){n&&=n.replace(/^\/*\.info(\/|$)/,`/`),zl(e,t,n,r)},Vl=function(e,t){if(j(t)===`.info`)throw Error(e+` failed = Can't modify data under /.info/`)},Hl=function(e,t){let n=t.path.toString();if(typeof t.repoInfo.host!=`string`||t.repoInfo.host.length===0||!jl(t.repoInfo.namespace)&&t.repoInfo.host.split(`:`)[0]!==`localhost`||n.length!==0&&!Nl(n))throw Error(vt(e,`url`)+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)},Ul=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Wl(e,t){let n=null;for(let r=0;r<t.length;r++){let i=t[r],a=i.getPath();n!==null&&!ba(a,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function Gl(e,t,n){Wl(e,n),ql(e,e=>ba(e,t))}function Kl(e,t,n){Wl(e,n),ql(e,e=>xa(e,t)||xa(t,e))}function ql(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){let i=e.eventLists_[r];if(i){let a=i.path;t(a)?(Jl(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function Jl(e){for(let t=0;t<e.events.length;t++){let n=e.events[t];if(n!==null){e.events[t]=null;let r=n.getEventRunner();Er&&kr(`event: `+n.toString()),$r(r)}}}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Yl=`repo_interrupt`,Xl=25,Zl=class{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ul,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ko(),this.transactionQueueTree_=new gl,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?`https://`:`http://`)+this.repoInfo_.host}};function Ql(e,t,n){if(e.stats_=Si(e.repoInfo_),e.forceRestClient_||ei())e.server_=new Oo(e.repoInfo_,(t,n,r,i)=>{tu(e,t,n,r,i)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>nu(e,!0),0);else{if(n!=null){if(typeof n!=`object`)throw Error(`Only objects are supported for option databaseAuthVariableOverride`);try{ot(n)}catch(e){throw Error(`Invalid authOverride provided: `+e)}}e.persistentConnection_=new Fa(e.repoInfo_,t,(t,n,r,i)=>{tu(e,t,n,r,i)},t=>{nu(e,t)},t=>{ru(e,t)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(t=>{e.server_.refreshAuthToken(t)}),e.appCheckProvider_.addTokenChangeListener(t=>{e.server_.refreshAppCheckToken(t.token)}),e.statsReporter_=Ci(e.repoInfo_,()=>new Lo(e.stats_,e.server_)),e.infoData_=new I,e.infoSyncTree_=new Pc({startListening:(t,n,r,i)=>{let a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=Rc(e.infoSyncTree_,t._path,o),setTimeout(()=>{i(`ok`)},0)),a},stopListening:()=>{}}),iu(e,`connected`,!1),e.serverSyncTree_=new Pc({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,(n,r)=>{let a=i(n,r);Kl(e.eventQueue_,t._path,a)}),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function $l(e){let t=e.infoData_.getNode(new da(`.info/serverTimeOffset`)).val()||0;return new Date().getTime()+t}function eu(e){return ll({timestamp:$l(e)})}function tu(e,t,n,r,i){e.dataUpdateCount++;let a=new da(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(i)if(r){let t=pt(n,e=>po(e));o=Wc(e.serverSyncTree_,a,t,i)}else{let t=po(n);o=Uc(e.serverSyncTree_,a,t,i)}else if(r){let t=pt(n,e=>po(e));o=zc(e.serverSyncTree_,a,t)}else{let t=po(n);o=Rc(e.serverSyncTree_,a,t)}let s=a;o.length>0&&(s=hu(e,a)),Kl(e.eventQueue_,s,o)}function nu(e,t){iu(e,`connected`,t),t===!1&&cu(e)}function ru(e,t){Wr(t,(t,n)=>{iu(e,t,n)})}function iu(e,t,n){let r=new da(`/.info/`+t),i=po(n);e.infoData_.updateSnapshot(r,i);let a=Rc(e.infoSyncTree_,r,i);Kl(e.eventQueue_,r,a)}function au(e){return e.nextWriteId_++}function ou(e,t,n,r,i){uu(e,`set`,{path:t.toString(),value:n,priority:r});let a=eu(e),o=po(n,r),s=Kc(e.serverSyncTree_,t),c=ml(o,s,a),l=au(e),u=Fc(e.serverSyncTree_,t,c,l,!0);Wl(e.eventQueue_,u),e.server_.put(t.toString(),o.val(!0),(n,r)=>{let a=n===`ok`;a||Nr(`set at `+t+` failed: `+n);let o=Lc(e.serverSyncTree_,l,!a);Kl(e.eventQueue_,t,o),du(e,i,n,r)});let d=xu(e,t);hu(e,d),Kl(e.eventQueue_,d,[])}function su(e,t,n,r){uu(e,`update`,{path:t.toString(),value:n});let i=!0,a=eu(e),o={};if(Wr(n,(n,r)=>{i=!1,o[n]=pl(_a(t,n),po(r),e.serverSyncTree_,a)}),i)kr(`update() called with empty data.  Don't do anything.`),du(e,r,`ok`,void 0);else{let i=au(e),a=Ic(e.serverSyncTree_,t,o,i);Wl(e.eventQueue_,a),e.server_.merge(t.toString(),n,(n,a)=>{let o=n===`ok`;o||Nr(`update at `+t+` failed: `+n);let s=Lc(e.serverSyncTree_,i,!o),c=s.length>0?hu(e,t):t;Kl(e.eventQueue_,c,s),du(e,r,n,a)}),Wr(n,n=>{let r=xu(e,_a(t,n));hu(e,r)}),Kl(e.eventQueue_,t,[])}}function cu(e){uu(e,`onDisconnectEvents`);let t=eu(e),n=ko();jo(e.onDisconnect_,A(),(r,i)=>{let a=pl(r,i,e.serverSyncTree_,t);Ao(n,r,a)});let r=[];jo(n,A(),(t,n)=>{r=r.concat(Rc(e.serverSyncTree_,t,n));let i=xu(e,t);hu(e,i)}),e.onDisconnect_=ko(),Kl(e.eventQueue_,A(),r)}function L(e,t,n){let r;r=j(t._path)===`.info`?Gc(e.infoSyncTree_,t,n):Gc(e.serverSyncTree_,t,n),Gl(e.eventQueue_,t._path,r)}function R(e,t,n){let r;r=j(t._path)===`.info`?Hc(e.infoSyncTree_,t,n):Hc(e.serverSyncTree_,t,n),Gl(e.eventQueue_,t._path,r)}function lu(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Yl)}function uu(e,...t){let n=``;e.persistentConnection_&&(n=e.persistentConnection_.id+`:`),kr(n,...t)}function du(e,t,n,r){t&&$r(()=>{if(n===`ok`)t(null);else{let e=(n||`error`).toUpperCase(),i=e;r&&(i+=`: `+r);let a=Error(i);a.code=e,t(a)}})}function fu(e,t,n){return Kc(e.serverSyncTree_,t,n)||F.EMPTY_NODE}function pu(e,t=e.transactionQueueTree_){if(t||bu(e,t),vl(t)){let n=vu(e,t);E(n.length>0,`Sending zero length transaction queue`),n.every(e=>e.status===0)&&mu(e,Tl(t),n)}else bl(t)&&Sl(t,t=>{pu(e,t)})}function mu(e,t,n){let r=n.map(e=>e.currentWriteId),i=fu(e,t,r),a=i,o=i.hash();for(let e=0;e<n.length;e++){let r=n[e];E(r.status===0,`tryToSendTransactionQueue_: items in queue should all be run.`),r.status=1,r.retryCount++;let i=va(t,r.path);a=a.updateChild(i,r.currentOutputSnapshotRaw)}let s=a.val(!0),c=t;e.server_.put(c.toString(),s,r=>{uu(e,`transaction put response`,{path:c.toString(),status:r});let i=[];if(r===`ok`){let r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(Lc(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push(()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)),n[t].unwatcher();bu(e,_l(e.transactionQueueTree_,t)),pu(e,e.transactionQueueTree_),Kl(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)$r(r[e])}else{if(r===`datastale`)for(let e=0;e<n.length;e++)n[e].status===3?n[e].status=4:n[e].status=0;else{Nr(`transaction at `+c.toString()+` failed: `+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}hu(e,t)}},o)}function hu(e,t){let n=_u(e,t),r=Tl(n),i=vu(e,n);return gu(e,i,r),r}function gu(e,t,n){if(t.length===0)return;let r=[],i=[],a=t.filter(e=>e.status===0).map(e=>e.currentWriteId);for(let o=0;o<t.length;o++){let s=t[o],c=va(n,s.path),l=!1,u;if(E(c!==null,`rerunTransactionsUnderNode_: relativePath should not be null.`),s.status===4)l=!0,u=s.abortReason,i=i.concat(Lc(e.serverSyncTree_,s.currentWriteId,!0));else if(s.status===0)if(s.retryCount>=Xl)l=!0,u=`maxretry`,i=i.concat(Lc(e.serverSyncTree_,s.currentWriteId,!0));else{let n=fu(e,s.path,a);s.currentInputSnapshot=n;let r=t[o].update(n.val());if(r!==void 0){Il(`transaction failed: Data returned `,r,s.path);let t=po(r);typeof r==`object`&&r&&ut(r,`.priority`)||(t=t.updatePriority(n.getPriority()));let o=s.currentWriteId,c=eu(e),l=ml(t,n,c);s.currentOutputSnapshotRaw=t,s.currentOutputSnapshotResolved=l,s.currentWriteId=au(e),a.splice(a.indexOf(o),1),i=i.concat(Fc(e.serverSyncTree_,s.path,l,s.currentWriteId,s.applyLocally)),i=i.concat(Lc(e.serverSyncTree_,o,!0))}else l=!0,u=`nodata`,i=i.concat(Lc(e.serverSyncTree_,s.currentWriteId,!0))}Kl(e.eventQueue_,n,i),i=[],l&&(t[o].status=2,(function(e){setTimeout(e,0)})(t[o].unwatcher),t[o].onComplete&&(u===`nodata`?r.push(()=>t[o].onComplete(null,!1,t[o].currentInputSnapshot)):r.push(()=>t[o].onComplete(Error(u),!1,null))))}bu(e,e.transactionQueueTree_);for(let e=0;e<r.length;e++)$r(r[e]);pu(e,e.transactionQueueTree_)}function _u(e,t){let n,r=e.transactionQueueTree_;for(n=j(t);n!==null&&vl(r)===void 0;)r=_l(r,n),t=M(t),n=j(t);return r}function vu(e,t){let n=[];return yu(e,t,n),n.sort((e,t)=>e.order-t.order),n}function yu(e,t,n){let r=vl(t);if(r)for(let e=0;e<r.length;e++)n.push(r[e]);Sl(t,t=>{yu(e,t,n)})}function bu(e,t){let n=vl(t);if(n){let e=0;for(let t=0;t<n.length;t++)n[t].status!==2&&(n[e]=n[t],e++);n.length=e,yl(t,n.length>0?n:void 0)}Sl(t,t=>{bu(e,t)})}function xu(e,t){let n=Tl(_u(e,t)),r=_l(e.transactionQueueTree_,t);return wl(r,t=>{Su(e,t)}),Su(e,r),Cl(r,t=>{Su(e,t)}),n}function Su(e,t){let n=vl(t);if(n){let r=[],i=[],a=-1;for(let t=0;t<n.length;t++)n[t].status===3||(n[t].status===1?(E(a===t-1,`All SENT items should be at beginning of queue.`),a=t,n[t].status=3,n[t].abortReason=`set`):(E(n[t].status===0,`Unexpected transaction status in abort`),n[t].unwatcher(),i=i.concat(Lc(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,Error(`set`),!1,null))));a===-1?yl(t,void 0):n.length=a+1,Kl(e.eventQueue_,Tl(t),i);for(let e=0;e<r.length;e++)$r(r[e])}}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Cu(e){let t=``,n=e.split(`/`);for(let e=0;e<n.length;e++)if(n[e].length>0){let r=n[e];try{r=decodeURIComponent(r.replace(/\+/g,` `))}catch{}t+=`/`+r}return t}function wu(e){let t={};e.charAt(0)===`?`&&(e=e.substring(1));for(let n of e.split(`&`)){if(n.length===0)continue;let r=n.split(`=`);r.length===2?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Nr(`Invalid query segment '${n}' in query '${e}'`)}return t}var Tu=function(e,t){let n=Eu(e),r=n.namespace;n.domain===`firebase.com`&&Mr(n.host+` is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead`),(!r||r===`undefined`)&&n.domain!==`localhost`&&Mr(`Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com`),n.secure||Pr();let i=n.scheme===`ws`||n.scheme===`wss`;return{repoInfo:new gi(n.host,n.secure,r,i,t,``,r!==n.subdomain),path:new da(n.pathString)}},Eu=function(e){let t=``,n=``,r=``,i=``,a=``,o=!0,s=`https`,c=443;if(typeof e==`string`){let l=e.indexOf(`//`);l>=0&&(s=e.substring(0,l-1),e=e.substring(l+2));let u=e.indexOf(`/`);u===-1&&(u=e.length);let d=e.indexOf(`?`);d===-1&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(i=Cu(e.substring(u,d)));let f=wu(e.substring(Math.min(e.length,d)));l=t.indexOf(`:`),l>=0?(o=s===`https`||s===`wss`,c=parseInt(t.substring(l+1),10)):l=t.length;let p=t.slice(0,l);if(p.toLowerCase()===`localhost`)n=`localhost`;else if(p.split(`.`).length<=2)n=p;else{let e=t.indexOf(`.`);r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),a=r}`ns`in f&&(a=f.ns)}return{host:t,port:c,domain:n,subdomain:r,secure:o,scheme:s,pathString:i,namespace:a}},Du=`-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz`;(function(){let e=0,t=[];return function(n){let r=n===e;e=n;let i,a=Array(8);for(i=7;i>=0;i--)a[i]=Du.charAt(n%64),n=Math.floor(n/64);E(n===0,`Cannot push at time == 0`);let o=a.join(``);if(r){for(i=11;i>=0&&t[i]===63;i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=Du.charAt(t[i]);return E(o.length===20,`nextPushId: Length should be 20.`),o}})();
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Ou=class{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){let e=this.snapshot.ref;return this.eventType===`value`?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+`:`+this.eventType+`:`+ot(this.snapshot.exportVal())}},ku=class{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return`cancel`}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+`:cancel`}},Au=class{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return E(this.hasCancelCallback,`Raising a cancel event on a listener with no cancel callback`),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}},ju=class e{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return N(this._path)?null:pa(this._path)}get ref(){return new Mu(this._repo,this._path)}get _queryIdentifier(){let e=Do(this._queryParams),t=Hr(e);return t===`{}`?`default`:t}get _queryObject(){return Do(this._queryParams)}isEqual(t){if(t=xt(t),!(t instanceof e))return!1;let n=this._repo===t._repo,r=ba(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+ma(this._path)}},Mu=class e extends ju{constructor(e,t){super(e,t,new wo,!1)}get parent(){let t=ga(this._path);return t===null?null:new e(this._repo,t)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Nu=class e{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){let n=new da(t),r=Fu(this.ref,t);return new e(this._node.getChild(n),r,no)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(n,r)=>t(new e(r,Fu(this.ref,n),no)))}hasChild(e){let t=new da(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function Pu(e,t){return e=xt(e),e._checkNotDeleted(`ref`),t===void 0?e._root:Fu(e._root,t)}function Fu(e,t){return e=xt(e),j(e._path)===null?Bl(`child`,`path`,t,!1):zl(`child`,`path`,t,!1),new Mu(e._repo,_a(e._path,t))}function Iu(e){return Vl(`remove`,e._path),Lu(e,null)}function Lu(e,t){e=xt(e),Vl(`set`,e._path),Fl(`set`,t,e._path,!1);let n=new Le;return ou(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}function Ru(e,t){Rl(`update`,t,e._path,!1);let n=new Le;return su(e._repo,e._path,t,n.wrapCallback(()=>{})),n.promise}var zu=class e{constructor(e){this.callbackContext=e}respondsTo(e){return e===`value`}createEvent(e,t){let n=t._queryParams.getIndex();return new Ou(`value`,this,new Nu(e.snapshotNode,new Mu(t._repo,t._path),n))}getEventRunner(e){return e.getEventType()===`cancel`?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new ku(this,e,t):null}matches(t){return t instanceof e?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Bu=class e{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t=e===`children_added`?`child_added`:e;return t=t===`children_removed`?`child_removed`:t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new ku(this,e,t):null}createEvent(e,t){E(e.childName!=null,`Child events should have a childName.`);let n=Fu(new Mu(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new Ou(e.type,this,new Nu(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return e.getEventType()===`cancel`?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(t){return t instanceof e?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function Vu(e,t,n,r,i){let a;if(typeof r==`object`&&(a=void 0,i=r),typeof r==`function`&&(a=r),i&&i.onlyOnce){let t=n,r=(n,r)=>{R(e._repo,e,s),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}let o=new Au(n,a||void 0),s=t===`value`?new zu(o):new Bu(t,o);return L(e._repo,e,s),()=>R(e._repo,e,s)}function Hu(e,t,n,r){return Vu(e,`value`,t,n,r)}_c(Mu),jc(Mu);
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Uu=`FIREBASE_DATABASE_EMULATOR_HOST`,Wu={},Gu=!1;function Ku(e,t,n,r){let i=t.lastIndexOf(`:`),a=t.substring(0,i),o=Re(a);e.repoInfo_=new gi(t,o,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(e.authTokenProvider_=r)}function qu(e,t,n,r,i){let a=r||e.options.databaseURL;a===void 0&&(e.options.projectId||Mr(`Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp().`),kr(`Using default host for project `,e.options.projectId),a=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o=Tu(a,i),s=o.repoInfo,c,l;typeof process<`u`&&(l={}[Uu]),l?(c=!0,a=`http://${l}?ns=${s.namespace}`,o=Tu(a,i),s=o.repoInfo):c=!o.repoInfo.secure;let u=i&&c?new ii(ii.OWNER):new ri(e.name,e.options,t);Hl(`Invalid Firebase Database URL`,o),N(o.path)||Mr(`Database URL must point to the root of a Firebase Database (not including a child path).`);let d=Yu(s,e,u,new ni(e,n));return new Xu(d,e)}function Ju(e,t){let n=Wu[t];(!n||n[e.key]!==e)&&Mr(`Database ${t}(${e.repoInfo_}) has already been deleted.`),lu(e),delete n[e.key]}function Yu(e,t,n,r){let i=Wu[t.name];i||(i={},Wu[t.name]=i);let a=i[e.toURLString()];return a&&Mr(`Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.`),a=new Zl(e,Gu,n,r),i[e.toURLString()]=a,a}var Xu=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type=`database`,this._instanceStarted=!1}get _repo(){return this._instanceStarted||=(Ql(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),!0),this._repoInternal}get _root(){return this._rootInternal||=new Mu(this._repo,A()),this._rootInternal}_delete(){return this._rootInternal!==null&&(Ju(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Mr(`Cannot call `+e+` on a deleted database.`)}};function Zu(e=Jn(),t){let n=Hn(e,`database`).getImmediate({identifier:t});if(!n._instanceStarted){let e=Fe(`database`);e&&Qu(n,...e)}return n}function Qu(e,t,n,r={}){e=xt(e),e._checkNotDeleted(`useEmulator`);let i=`${t}:${n}`,a=e._repoInternal;if(e._instanceStarted){if(i===e._repoInternal.repoInfo_.host&&mt(r,a.repoInfo_.emulatorOptions))return;Mr(`connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.`)}let o;if(a.repoInfo_.nodeAdmin)r.mockUserToken&&Mr(`mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".`),o=new ii(ii.OWNER);else if(r.mockUserToken){let t=typeof r.mockUserToken==`string`?r.mockUserToken:Be(r.mockUserToken,e.app.options.projectId);o=new ii(t)}Re(t)&&(ze(t),Ge(`Database`,!0)),Ku(a,i,r,o)}
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function $u(e){gr(Kn),Vn(new St(`database`,(e,{instanceIdentifier:t})=>{let n=e.getProvider(`app`).getImmediate(),r=e.getProvider(`auth-internal`),i=e.getProvider(`app-check-internal`);return qu(n,r,i,t)},`PUBLIC`).setMultipleInstances(!0)),Yn(pr,mr,e),Yn(pr,mr,`esm2020`)}Fa.prototype.simpleListen=function(e,t){this.sendRequest(`q`,{p:e},t)},Fa.prototype.echo=function(e,t){this.sendRequest(`echo`,{d:e},t)},$u();var ed=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{},td={},nd,rd;(function(){var e;function t(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(e,t,n){n||=0;let r=Array(16);if(typeof t==`string`)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let a=e.g[3],o;o=t+(a^n&(i^a))+r[0]+3614090360&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[1]+3905402710&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[2]+606105819&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[5]+1200080426&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[6]+2821735955&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[9]+2336552879&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[10]+4294925233&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[13]+4254626195&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[14]+2792965006&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(i^a&(n^i))+r[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[6]+3225465664&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[11]+643717713&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[10]+38016083&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[15]+3634488961&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[14]+3275163606&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[3]+4107603335&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[2]+4243563512&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[7]+1735328473&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(n^i^a)+r[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[8]+2272392833&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[11]+1839030562&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[4]+1272893353&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[7]+4139469664&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[0]+3936430074&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[3]+3572445317&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[12]+3873151461&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[15]+530742520&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(i^(n|~a))+r[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[7]+1126891415&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[14]+2878612391&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[3]+2399980690&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[10]+4293915773&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[15]+4264355552&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[6]+2734768916&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[11]+3174756917&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[2]+718787259&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}r.prototype.v=function(e,t){t===void 0&&(t=e.length);let n=t-this.blockSize,r=this.C,a=this.h,o=0;for(;o<t;){if(a==0)for(;o<=n;)i(this,e,o),o+=this.blockSize;if(typeof e==`string`){for(;o<t;)if(r[a++]=e.charCodeAt(o++),a==this.blockSize){i(this,r),a=0;break}}else for(;o<t;)if(r[a++]=e[o++],a==this.blockSize){i(this,r),a=0;break}}this.h=a,this.o+=t},r.prototype.A=function(){var e=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=this.o*8;for(var n=e.length-8;n<e.length;++n)e[n]=t&255,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};function a(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}function o(e,t){this.h=t;let n=[],r=!0;for(let i=e.length-1;i>=0;i--){let a=e[i]|0;r&&a==t||(n[i]=a,r=!1)}this.g=n}var s={};function c(e){return-128<=e&&e<128?a(e,function(e){return new o([e|0],e<0?-1:0)}):new o([e|0],e<0?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return d;if(e<0)return g(l(-e));let t=[],n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new o(t,0)}function u(e,t){if(e.length==0)throw Error(`number format error: empty string`);if(t||=10,t<2||36<t)throw Error(`radix out of range: `+t);if(e.charAt(0)==`-`)return g(u(e.substring(1),t));if(e.indexOf(`-`)>=0)throw Error(`number format error: interior "-" character`);let n=l(t**8),r=d;for(let a=0;a<e.length;a+=8){var i=Math.min(8,e.length-a);let o=parseInt(e.substring(a,a+i),t);i<8?(i=l(t**+i),r=r.j(i).add(l(o))):(r=r.j(n),r=r.add(l(o)))}return r}var d=c(0),f=c(1),p=c(16777216);e=o.prototype,e.m=function(){if(h(this))return-g(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){let r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(e||=10,e<2||36<e)throw Error(`radix out of range: `+e);if(m(this))return`0`;if(h(this))return`-`+g(this).toString(e);let t=l(e**6);var n=this;let r=``;for(;;){let i=b(n,t).g;n=_(n,i.j(t));let a=((n.g.length>0?n.g[0]:n.h)>>>0).toString(e);if(n=i,m(n))return a+r;for(;a.length<6;)a=`0`+a;r=a+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h};function m(e){if(e.h!=0)return!1;for(let t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function h(e){return e.h==-1}e.l=function(e){return e=_(this,e),h(e)?-1:m(e)?0:1};function g(e){let t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new o(n,~e.h).add(f)}e.abs=function(){return h(this)?g(this):this},e.add=function(e){let t=Math.max(this.g.length,e.g.length),n=[],r=0;for(let i=0;i<=t;i++){let t=r+(this.i(i)&65535)+(e.i(i)&65535),a=(t>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);r=a>>>16,t&=65535,a&=65535,n[i]=a<<16|t}return new o(n,n[n.length-1]&-2147483648?-1:0)};function _(e,t){return e.add(g(t))}e.j=function(e){if(m(this)||m(e))return d;if(h(this))return h(e)?g(this).j(g(e)):g(g(this).j(e));if(h(e))return g(this.j(g(e)));if(this.l(p)<0&&e.l(p)<0)return l(this.m()*e.m());let t=this.g.length+e.g.length,n=[];for(var r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(let t=0;t<e.g.length;t++){let i=this.i(r)>>>16,a=this.i(r)&65535,o=e.i(t)>>>16,s=e.i(t)&65535;n[2*r+2*t]+=a*s,v(n,2*r+2*t),n[2*r+2*t+1]+=i*s,v(n,2*r+2*t+1),n[2*r+2*t+1]+=a*o,v(n,2*r+2*t+1),n[2*r+2*t+2]+=i*o,v(n,2*r+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new o(n,0)};function v(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function y(e,t){this.g=e,this.h=t}function b(e,t){if(m(t))throw Error(`division by zero`);if(m(e))return new y(d,d);if(h(e))return t=b(g(e),t),new y(g(t.g),g(t.h));if(h(t))return t=b(e,g(t)),new y(g(t.g),t.h);if(e.g.length>30){if(h(e)||h(t))throw Error(`slowDivide_ only works with positive integers.`);for(var n=f,r=t;r.l(e)<=0;)n=x(n),r=x(r);var i=ee(n,1),a=ee(r,1);for(r=ee(r,2),n=ee(n,2);!m(r);){var o=a.add(r);o.l(e)<=0&&(i=i.add(n),a=o),r=ee(r,1),n=ee(n,1)}return t=_(e,i.j(t)),new y(i,t)}for(i=d;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=Math.ceil(Math.log(n)/Math.LN2),r=r<=48?1:2**(r-48),a=l(n),o=a.j(t);h(o)||o.l(e)>0;)n-=r,a=l(n),o=a.j(t);m(a)&&(a=f),i=i.add(a),e=_(e,o)}return new y(i,e)}e.B=function(e){return b(this,e).h},e.and=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new o(n,this.h&e.h)},e.or=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new o(n,this.h|e.h)},e.xor=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new o(n,this.h^e.h)};function x(e){let t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new o(n,e.h)}function ee(e,t){let n=t>>5;t%=32;let r=e.g.length-n,i=[];for(let a=0;a<r;a++)i[a]=t>0?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new o(i,e.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,rd=td.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=u,nd=td.Integer=o}).apply(ed===void 0?typeof self<`u`?self:typeof window<`u`?window:{}:ed);var id=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{},ad={},od,sd,cd,ld,ud,dd,fd,pd;(function(){var e,t=Object.defineProperty;function n(e){e=[typeof globalThis==`object`&&globalThis,e,typeof window==`object`&&window,typeof self==`object`&&self,typeof id==`object`&&id];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error(`Cannot find global object`)}var r=n(this);function i(e,n){if(n)a:{var i=r;e=e.split(`.`);for(var a=0;a<e.length-1;a++){var o=e[a];if(!(o in i))break a;i=i[o]}e=e[e.length-1],a=i[e],n=n(a),n!=a&&n!=null&&t(i,e,{configurable:!0,writable:!0,value:n})}}i(`Symbol.dispose`,function(e){return e||Symbol(`Symbol.dispose`)}),i(`Array.prototype.values`,function(e){return e||function(){return this[Symbol.iterator]()}}),i(`Object.entries`,function(e){return e||function(e){var t=[],n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push([n,e[n]]);return t}});var a=a||{},o=this||self;function s(e){var t=typeof e;return t==`object`&&e!=null||t==`function`}function c(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return l=c,l.apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}var f=typeof AsyncContext<`u`&&typeof AsyncContext.Snapshot==`function`?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function p(e){let t=e.length;if(t>0){let n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function m(e,t){for(let t=1;t<arguments.length;t++){let r=arguments[t];var n=typeof r;if(n=n==`object`?r?Array.isArray(r)?`array`:n:`null`:n,n==`array`||n==`object`&&typeof r.length==`number`){n=e.length||0;let t=r.length||0;e.length=n+t;for(let i=0;i<t;i++)e[n+i]=r[i]}else e.push(r)}}class h{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function g(e){o.setTimeout(()=>{throw e},0)}function _(){var e=S;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class v{constructor(){this.h=this.g=null}add(e,t){let n=y.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}var y=new h(()=>new b,e=>e.reset());class b{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let x,ee=!1,S=new v,C=()=>{let e=Promise.resolve(void 0);x=()=>{e.then(te)}};function te(){for(var e;e=_();){try{e.h.call(e.g)}catch(e){g(e)}var t=y;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}ee=!1}function ne(){this.u=this.u,this.C=this.C}ne.prototype.u=!1,ne.prototype.dispose=function(){this.u||(this.u=!0,this.N())},ne.prototype[Symbol.dispose]=function(){this.dispose()},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var ie=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},`passive`,{get:function(){e=!0}});try{let e=()=>{};o.addEventListener(`test`,e,t),o.removeEventListener(`test`,e,t)}catch{}return e}();function ae(e){return/^[\s\xa0]*$/.test(e)}function oe(e,t){re.call(this,e?e.type:``),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key=``,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType=``,this.i=null,e&&this.init(e,t)}d(oe,re),oe.prototype.init=function(e,t){let n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget,t||(n==`mouseover`?t=e.fromElement:n==`mouseout`&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=r.clientX===void 0?r.pageX:r.clientX,this.clientY=r.clientY===void 0?r.pageY:r.clientY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX===void 0?e.pageX:e.clientX,this.clientY=e.clientY===void 0?e.pageY:e.clientY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||``,this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&oe.Z.h.call(this)},oe.prototype.h=function(){oe.Z.h.call(this);let e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var se=`closure_listenable_`+(Math.random()*1e6|0),ce=0;function le(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++ce,this.da=this.fa=!1}function ue(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function de(e,t,n){for(let r in e)t.call(n,e[r],r,e)}function w(e,t){for(let n in e)t.call(void 0,e[n],n,e)}function T(e){let t={};for(let n in e)t[n]=e[n];return t}let fe=`constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf`.split(` `);function pe(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<fe.length;t++)n=fe[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function me(e){this.src=e,this.g={},this.h=0}me.prototype.add=function(e,t,n,r,i){let a=e.toString();e=this.g[a],e||(e=this.g[a]=[],this.h++);let o=ge(e,t,r,i);return o>-1?(t=e[o],n||(t.fa=!1)):(t=new le(t,this.src,a,!!r,i),t.fa=n,e.push(t)),t};function he(e,t){let n=t.type;if(n in e.g){var r=e.g[n],i=Array.prototype.indexOf.call(r,t,void 0),a;(a=i>=0)&&Array.prototype.splice.call(r,i,1),a&&(ue(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function ge(e,t,n,r){for(let i=0;i<e.length;++i){let a=e[i];if(!a.da&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}var _e=`closure_lm_`+(Math.random()*1e6|0),E={};function ve(e,t,n,r,i){if(r&&r.once)return xe(e,t,n,r,i);if(Array.isArray(t)){for(let a=0;a<t.length;a++)ve(e,t[a],n,r,i);return null}return n=Oe(n),e&&e[se]?e.J(t,n,s(r)?!!r.capture:!!r,i):ye(e,t,n,!1,r,i)}function ye(e,t,n,r,i,a){if(!t)throw Error(`Invalid event type`);let o=s(i)?!!i.capture:!!i,c=Ee(e);if(c||(e[_e]=c=new me(e)),n=c.add(t,n,r,o,a),n.proxy)return n;if(r=be(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ie||(i=o),i===void 0&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(we(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error(`addEventListener and attachEvent are unavailable.`);return n}function be(){function e(n){return t.call(e.src,e.listener,n)}let t=Te;return e}function xe(e,t,n,r,i){if(Array.isArray(t)){for(let a=0;a<t.length;a++)xe(e,t[a],n,r,i);return null}return n=Oe(n),e&&e[se]?e.K(t,n,s(r)?!!r.capture:!!r,i):ye(e,t,n,!0,r,i)}function Se(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Se(e,t[a],n,r,i);else r=s(r)?!!r.capture:!!r,n=Oe(n),e&&e[se]?(e=e.i,a=String(t).toString(),a in e.g&&(t=e.g[a],n=ge(t,n,r,i),n>-1&&(ue(t[n]),Array.prototype.splice.call(t,n,1),t.length==0&&(delete e.g[a],e.h--)))):(e&&=Ee(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ge(t,n,r,i)),(n=e>-1?t[e]:null)&&Ce(n))}function Ce(e){if(typeof e!=`number`&&e&&!e.da){var t=e.src;if(t&&t[se])he(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(we(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ee(t))?(he(n,e),n.h==0&&(n.src=null,t[_e]=null)):ue(e)}}}function we(e){return e in E?E[e]:E[e]=`on`+e}function Te(e,t){if(e.da)e=!0;else{t=new oe(t,this);let n=e.listener,r=e.ha||e.src;e.fa&&Ce(e),e=n.call(r,t)}return e}function Ee(e){return e=e[_e],e instanceof me?e:null}var De=`__closure_events_fn_`+(Math.random()*1e9>>>0);function Oe(e){return typeof e==`function`?e:(e[De]||(e[De]=function(t){return e.handleEvent(t)}),e[De])}function ke(){ne.call(this),this.i=new me(this),this.M=this,this.G=null}d(ke,ne),ke.prototype[se]=!0,ke.prototype.removeEventListener=function(e,t,n,r){Se(this,e,t,n,r)};function Ae(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,typeof t==`string`)t=new re(t,e);else if(t instanceof re)t.target=t.target||e;else{var i=t;t=new re(r,e),pe(t,i)}i=!0;let a,o;if(n)for(o=n.length-1;o>=0;o--)a=t.g=n[o],i=je(a,r,!0,t)&&i;if(a=t.g=e,i=je(a,r,!0,t)&&i,i=je(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)a=t.g=n[o],i=je(a,r,!1,t)&&i}ke.prototype.N=function(){if(ke.Z.N.call(this),this.i){var e=this.i;for(let t in e.g){let n=e.g[t];for(let e=0;e<n.length;e++)ue(n[e]);delete e.g[t],e.h--}}this.G=null},ke.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ke.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function je(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();let i=!0;for(let a=0;a<t.length;++a){let o=t[a];if(o&&!o.da&&o.capture==n){let t=o.listener,n=o.ha||o.src;o.fa&&he(e.i,o),i=t.call(n,r)!==!1&&i}}return i&&!r.defaultPrevented}function Me(e,t){if(typeof e!=`function`)if(e&&typeof e.handleEvent==`function`)e=l(e.handleEvent,e);else throw Error(`Invalid listener argument`);return Number(t)>2147483647?-1:o.setTimeout(e,t||0)}function Ne(e){e.g=Me(()=>{e.g=null,e.i&&(e.i=!1,Ne(e))},e.l);let t=e.h;e.h=null,e.m.apply(null,t)}class Pe extends ne{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:Ne(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fe(e){ne.call(this),this.h=e,this.g={}}d(Fe,ne);var Ie=[];function Le(e){de(e.g,function(e,t){this.g.hasOwnProperty(t)&&Ce(e)},e),e.g={}}Fe.prototype.N=function(){Fe.Z.N.call(this),Le(this)},Fe.prototype.handleEvent=function(){throw Error(`EventHandler.handleEvent not implemented`)};var Re=o.JSON.stringify,ze=o.JSON.parse,Be=class{stringify(e){return o.JSON.stringify(e,void 0)}parse(e){return o.JSON.parse(e,void 0)}};function Ve(){}function He(){}var Ue={OPEN:`a`,hb:`b`,ERROR:`c`,tb:`d`};function We(){re.call(this,`d`)}d(We,re);function Ge(){re.call(this,`c`)}d(Ge,re);var Ke={},qe=null;function Je(){return qe||=new ke}Ke.Ia=`serverreachability`;function Ye(e){re.call(this,Ke.Ia,e)}d(Ye,re);function Xe(e){let t=Je();Ae(t,new Ye(t))}Ke.STAT_EVENT=`statevent`;function Ze(e,t){re.call(this,Ke.STAT_EVENT,e),this.stat=t}d(Ze,re);function Qe(e){let t=Je();Ae(t,new Ze(t,e))}Ke.Ja=`timingevent`;function $e(e,t){re.call(this,Ke.Ja,e),this.size=t}d($e,re);function et(e,t){if(typeof e!=`function`)throw Error(`Fn must not be null and must be a function`);return o.setTimeout(function(){e()},t)}function tt(){this.g=!0}tt.prototype.ua=function(){this.g=!1};function nt(e,t,n,r,i,a){e.info(function(){if(e.g)if(a){var o=``,s=a.split(`&`);for(let e=0;e<s.length;e++){var c=s[e].split(`=`);if(c.length>1){let e=c[0];c=c[1];let t=e.split(`_`);o=t.length>=2&&t[1]==`type`?o+(e+`=`+c+`&`):o+(e+`=redacted&`)}}}else o=null;else o=a;return`XMLHTTP REQ (`+r+`) [attempt `+i+`]: `+t+`
`+n+`
`+o})}function rt(e,t,n,r,i,a,o){e.info(function(){return`XMLHTTP RESP (`+r+`) [ attempt `+i+`]: `+t+`
`+n+`
`+a+` `+o})}function it(e,t,n,r){e.info(function(){return`XMLHTTP TEXT (`+t+`): `+ot(e,n)+(r?` `+r:``)})}function at(e,t){e.info(function(){return`TIMEOUT: `+t})}tt.prototype.info=function(){};function ot(e,t){if(!e.g)return t;if(!t)return null;try{let a=JSON.parse(t);if(a){for(e=0;e<a.length;e++)if(Array.isArray(a[e])){var n=a[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if(i!=`noop`&&i!=`stop`&&i!=`close`)for(let e=1;e<r.length;e++)r[e]=``}}}}return Re(a)}catch{return t}}var st={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ct={ib:`complete`,Fb:`success`,ERROR:`error`,Ga:`abort`,xb:`ready`,yb:`readystatechange`,TIMEOUT:`timeout`,sb:`incrementaldata`,wb:`progress`,lb:`downloadprogress`,Nb:`uploadprogress`},lt;function ut(){}d(ut,Ve),ut.prototype.g=function(){return new XMLHttpRequest},lt=new ut;function dt(e){return encodeURIComponent(String(e))}function ft(e){var t=1;e=e.split(`:`);let n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(`:`)),n}function pt(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new Fe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new mt}function mt(){this.i=null,this.g=``,this.h=!1}var ht={},gt={};function _t(e,t,n){e.M=1,e.A=Ht(Rt(t)),e.u=n,e.R=!0,vt(e,null)}function vt(e,t){e.F=Date.now(),St(e),e.B=Rt(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),nn(n.i,`t`,r),e.C=0,n=e.j.L,e.h=new mt,e.g=Jn(e.j,n?t:null,!e.u),e.P>0&&(e.O=new Pe(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i=`readystatechange`;Array.isArray(i)||(i&&(Ie[0]=i.toString()),i=Ie);for(let e=0;e<i.length;e++){let a=ve(n,i[e],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.J?T(e.J):{},e.u?(e.v||=`POST`,t[`Content-Type`]=`application/x-www-form-urlencoded`,e.g.ea(e.B,e.v,e.u,t)):(e.v=`GET`,e.g.ea(e.B,e.v,null,t)),Xe(),nt(e.i,e.v,e.B,e.l,e.S,e.u)}pt.prototype.ba=function(e){e=e.target;let t=this.O;t&&Tn(e)==3?t.j():this.Y(e)},pt.prototype.Y=function(e){try{if(e==this.g)a:{let s=Tn(this.g),c=this.g.ya(),l=this.g.ca();if(!(s<3)&&(s!=3||this.g&&(this.h.h||this.g.la()||En(this.g)))){this.K||s!=4||c==7||Xe(c==8||l<=0?3:2),wt(this);var t=this.g.ca();this.X=t;var n=yt(this);if(this.o=t==200,rt(this.i,this.v,this.B,this.l,this.S,s,t),this.o){if(this.U&&!this.L){b:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader(`X-HTTP-Initial-Response`):null)&&!ae(r)){var a=r;break b}}a=null}if(e=a)it(this.i,this.l,e,`Initial handshake response via X-HTTP-Initial-Response`),this.L=!0,Dt(this,e);else{this.o=!1,this.m=3,Qe(12),Et(this),Tt(this);break a}}if(this.R){e=!0;let t;for(;!this.K&&this.C<n.length;)if(t=xt(this,n),t==gt){s==4&&(this.m=4,Qe(14),e=!1),it(this.i,this.l,null,`[Incomplete Response]`);break}else if(t==ht){this.m=4,Qe(15),it(this.i,this.l,n,`[Invalid Chunk]`),e=!1;break}else it(this.i,this.l,t,null),Dt(this,t);if(bt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),s!=4||n.length!=0||this.h.h||(this.m=1,Qe(16),e=!1),this.o=this.o&&e,!e)it(this.i,this.l,n,`[Invalid Chunked Response]`),Et(this),Tt(this);else if(n.length>0&&!this.W){this.W=!0;var o=this.j;o.g==this&&o.aa&&!o.P&&(o.j.info(`Great, no buffering proxy detected. Bytes received: `+n.length),Bn(o),o.P=!0,Qe(11))}}else it(this.i,this.l,n,null),Dt(this,n);s==4&&Et(this),this.o&&!this.K&&(s==4?Un(this.j,this):(this.o=!1,St(this)))}else Dn(this.g),t==400&&n.indexOf(`Unknown SID`)>0?(this.m=3,Qe(12)):(this.m=0,Qe(13)),Et(this),Tt(this)}}}catch{}};function yt(e){if(!bt(e))return e.g.la();let t=En(e.g);if(t===``)return``;let n=``,r=t.length,i=Tn(e.g)==4;if(!e.h.i){if(typeof TextDecoder>`u`)return Et(e),Tt(e),``;e.h.i=new o.TextDecoder}for(let a=0;a<r;a++)e.h.h=!0,n+=e.h.i.decode(t[a],{stream:!(i&&a==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}function bt(e){return e.g?e.v==`GET`&&e.M!=2&&e.j.Aa:!1}function xt(e,t){var n=e.C,r=t.indexOf(`
`,n);return r==-1?gt:(n=Number(t.substring(n,r)),isNaN(n)?ht:(r+=1,r+n>t.length?gt:(t=t.slice(r,r+n),e.C=r+n,t)))}pt.prototype.cancel=function(){this.K=!0,Et(this)};function St(e){e.T=Date.now()+e.H,Ct(e,e.H)}function Ct(e,t){if(e.D!=null)throw Error(`WatchDog timer not null`);e.D=et(l(e.aa,e),t)}function wt(e){e.D&&=(o.clearTimeout(e.D),null)}pt.prototype.aa=function(){this.D=null;let e=Date.now();e-this.T>=0?(at(this.i,this.B),this.M!=2&&(Xe(),Qe(17)),Et(this),this.m=2,Tt(this)):Ct(this,this.T-e)};function Tt(e){e.j.I==0||e.K||Un(e.j,e)}function Et(e){wt(e);var t=e.O;t&&typeof t.dispose==`function`&&t.dispose(),e.O=null,Le(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function Dt(e,t){try{var n=e.j;if(n.I!=0&&(n.g==e||jt(n.h,e))){if(!e.L&&jt(n.h,e)&&n.I==3){try{var r=n.Ba.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){a:if(!n.v){if(n.g)if(n.g.F+3e3<e.F)Hn(n),jn(n);else break a;zn(n),Qe(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&n.A==0&&!n.C&&(n.C=et(l(n.Va,n),6e3));At(n.h)<=1&&n.ta&&(n.ta=void 0)}else Gn(n,11)}else if((e.L||n.g==e)&&Hn(n),!ae(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t],u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],n.I==2)if(l[0]==`c`){n.M=l[1],n.ba=l[2];let t=l[3];t!=null&&(n.ka=t,n.j.info(`VER=`+n.ka));let i=l[4];i!=null&&(n.za=i,n.j.info(`SVER=`+n.za));let u=l[5];u!=null&&typeof u==`number`&&u>0&&(r=1.5*u,n.O=r,n.j.info(`backChannelRequestTimeoutMs_=`+r)),r=n;let d=e.g;if(d){let e=d.g?d.g.getResponseHeader(`X-Client-Wire-Protocol`):null;if(e){var a=r.h;a.g||e.indexOf(`spdy`)==-1&&e.indexOf(`quic`)==-1&&e.indexOf(`h2`)==-1||(a.j=a.l,a.g=new Set,a.h&&=(Mt(a,a.h),null))}if(r.G){let e=d.g?d.g.getResponseHeader(`X-HTTP-Session-Id`):null;e&&(r.wa=e,O(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info(`Handshake RTT: `+n.T+`ms`)),r=n;var o=e;if(r.na=qn(r,r.L?r.ba:null,r.W),o.L){Nt(r.h,o);var s=o,c=r.O;c&&(s.H=c),s.D&&(wt(s),St(s)),r.g=o}else Rn(r);n.i.length>0&&Nn(n)}else l[0]!=`stop`&&l[0]!=`close`||Gn(n,7);else n.I==3&&(l[0]==`stop`||l[0]==`close`?l[0]==`stop`?Gn(n,7):An(n):l[0]!=`noop`&&n.l&&n.l.qa(l),n.A=0)}}Xe(4)}catch{}}var Ot=class{constructor(e,t){this.g=e,this.map=t}};function D(e){this.l=e||10,o.PerformanceNavigationTiming?(e=o.performance.getEntriesByType(`navigation`),e=e.length>0&&(e[0].nextHopProtocol==`hq`||e[0].nextHopProtocol==`h2`)):e=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function kt(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function At(e){return e.h?1:e.g?e.g.size:0}function jt(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function Mt(e,t){e.g?e.g.add(t):e.h=t}function Nt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}D.prototype.cancel=function(){if(this.i=Pt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let e of this.g.values())e.cancel();this.g.clear()}};function Pt(e){if(e.h!=null)return e.i.concat(e.h.G);if(e.g!=null&&e.g.size!==0){let t=e.i;for(let n of e.g.values())t=t.concat(n.G);return t}return p(e.i)}var Ft=RegExp(`^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$`);function It(e,t){if(e){e=e.split(`&`);for(let n=0;n<e.length;n++){let r=e[n].indexOf(`=`),i,a=null;r>=0?(i=e[n].substring(0,r),a=e[n].substring(r+1)):i=e[n],t(i,a?decodeURIComponent(a.replace(/\+/g,` `)):``)}}}function Lt(e){this.g=this.o=this.j=``,this.u=null,this.m=this.h=``,this.l=!1;let t;e instanceof Lt?(this.l=e.l,zt(this,e.j),this.o=e.o,this.g=e.g,Bt(this,e.u),this.h=e.h,Vt(this,rn(e.i)),this.m=e.m):e&&(t=String(e).match(Ft))?(this.l=!1,zt(this,t[1]||``,!0),this.o=Ut(t[2]||``),this.g=Ut(t[3]||``,!0),Bt(this,t[4]),this.h=Ut(t[5]||``,!0),Vt(this,t[6]||``,!0),this.m=Ut(t[7]||``)):(this.l=!1,this.i=new Zt(null,this.l))}Lt.prototype.toString=function(){let e=[];var t=this.j;t&&e.push(Wt(t,Kt,!0),`:`);var n=this.g;return(n||t==`file`)&&(e.push(`//`),(t=this.o)&&e.push(Wt(t,Kt,!0),`@`),e.push(dt(n).replace(/%25([0-9a-fA-F]{2})/g,`%$1`)),n=this.u,n!=null&&e.push(`:`,String(n))),(n=this.h)&&(this.g&&n.charAt(0)!=`/`&&e.push(`/`),e.push(Wt(n,n.charAt(0)==`/`?Jt:qt,!0))),(n=this.i.toString())&&e.push(`?`,n),(n=this.m)&&e.push(`#`,Wt(n,Xt)),e.join(``)},Lt.prototype.resolve=function(e){let t=Rt(this),n=!!e.j;n?zt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=e.u!=null;var r=e.h;if(n)Bt(t,e.u);else if(n=!!e.h){if(r.charAt(0)!=`/`)if(this.g&&!this.h)r=`/`+r;else{var i=t.h.lastIndexOf(`/`);i!=-1&&(r=t.h.slice(0,i+1)+r)}if(i=r,i==`..`||i==`.`)r=``;else if(i.indexOf(`./`)!=-1||i.indexOf(`/.`)!=-1){r=i.lastIndexOf(`/`,0)==0,i=i.split(`/`);let e=[];for(let t=0;t<i.length;){let n=i[t++];n==`.`?r&&t==i.length&&e.push(``):n==`..`?((e.length>1||e.length==1&&e[0]!=``)&&e.pop(),r&&t==i.length&&e.push(``)):(e.push(n),r=!0)}r=e.join(`/`)}else r=i}return n?t.h=r:n=e.i.toString()!==``,n?Vt(t,rn(e.i)):n=!!e.m,n&&(t.m=e.m),t};function Rt(e){return new Lt(e)}function zt(e,t,n){e.j=n?Ut(t,!0):t,e.j&&=e.j.replace(/:$/,``)}function Bt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error(`Bad port number `+t);e.u=t}else e.u=null}function Vt(e,t,n){t instanceof Zt?(e.i=t,on(e.i,e.l)):(n||(t=Wt(t,Yt)),e.i=new Zt(t,e.l))}function O(e,t,n){e.i.set(t,n)}function Ht(e){return O(e,`zx`,Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),e}function Ut(e,t){return e?t?decodeURI(e.replace(/%25/g,`%2525`)):decodeURIComponent(e):``}function Wt(e,t,n){return typeof e==`string`?(e=encodeURI(e).replace(t,Gt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,`%$1`)),e):null}function Gt(e){return e=e.charCodeAt(0),`%`+(e>>4&15).toString(16)+(e&15).toString(16)}var Kt=/[#\/\?@]/g,qt=/[#\?:]/g,Jt=/[#\?]/g,Yt=/[#\?@]/g,Xt=/#/g;function Zt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Qt(e){e.g||(e.g=new Map,e.h=0,e.i&&It(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g,` `)),n)}))}e=Zt.prototype,e.add=function(e,t){Qt(this),this.i=null,e=an(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function $t(e,t){Qt(e),t=an(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function en(e,t){return Qt(e),t=an(e,t),e.g.has(t)}e.forEach=function(e,t){Qt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)};function tn(e,t){Qt(e);let n=[];if(typeof t==`string`)en(e,t)&&(n=n.concat(e.g.get(an(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}e.set=function(e,t){return Qt(this),this.i=null,e=an(this,e),en(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e?(e=tn(this,e),e.length>0?String(e[0]):t):t};function nn(e,t,n){$t(e,t),n.length>0&&(e.i=null,e.g.set(an(e,t),p(n)),e.h+=n.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return``;let e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];let i=dt(n);n=tn(this,n);for(let t=0;t<n.length;t++){let r=i;n[t]!==``&&(r+=`=`+dt(n[t])),e.push(r)}}return this.i=e.join(`&`)};function rn(e){let t=new Zt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function an(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function on(e,t){t&&!e.j&&(Qt(e),e.i=null,e.g.forEach(function(e,t){let n=t.toLowerCase();t!=n&&($t(this,t),nn(this,n,e))},e)),e.j=t}function sn(e,t){let n=new tt;if(o.Image){let r=new Image;r.onload=u(ln,n,`TestLoadImage: loaded`,!0,t,r),r.onerror=u(ln,n,`TestLoadImage: error`,!1,t,r),r.onabort=u(ln,n,`TestLoadImage: abort`,!1,t,r),r.ontimeout=u(ln,n,`TestLoadImage: timeout`,!1,t,r),o.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function cn(e,t){let n=new tt,r=new AbortController,i=setTimeout(()=>{r.abort(),ln(n,`TestPingServer: timeout`,!1,t)},1e4);fetch(e,{signal:r.signal}).then(e=>{clearTimeout(i),e.ok?ln(n,`TestPingServer: ok`,!0,t):ln(n,`TestPingServer: server error`,!1,t)}).catch(()=>{clearTimeout(i),ln(n,`TestPingServer: error`,!1,t)})}function ln(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch{}}function un(){this.g=new Be}function dn(e){this.i=e.Sb||null,this.h=e.ab||!1}d(dn,Ve),dn.prototype.g=function(){return new fn(this.i,this.h)};function fn(e,t){ke.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText=``,this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F=`GET`,this.D=``,this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(fn,ke),e=fn.prototype,e.open=function(e,t){if(this.readyState!=0)throw this.abort(),Error(`Error reopening a connection`);this.F=e,this.D=t,this.readyState=1,hn(this)},e.send=function(e){if(this.readyState!=1)throw this.abort(),Error(`need to call open() first. `);if(this.v.signal.aborted)throw this.abort(),Error(`Request was aborted.`);this.g=!0;let t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||o).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText=``,this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel(`Request was aborted.`).catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,mn(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,hn(this)),this.g&&(this.readyState=3,hn(this),this.g)))if(this.responseType===`arraybuffer`)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(o.ReadableStream!==void 0&&`body`in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error(`responseType must be empty for "streamBinaryChunks" mode responses.`);this.response=[]}else this.response=this.responseText=``,this.B=new TextDecoder;pn(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))};function pn(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array;(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?mn(this):hn(this),this.readyState==3&&pn(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,mn(this))},e.Na=function(e){this.g&&(this.response=e,mn(this))},e.ga=function(){this.g&&mn(this)};function mn(e){e.readyState=4,e.l=null,e.j=null,e.B=null,hn(e)}e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||``},e.getAllResponseHeaders=function(){if(!this.h)return``;let e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+`: `+n[1]),n=t.next();return e.join(`\r
`)};function hn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(fn.prototype,`withCredentials`,{get:function(){return this.m===`include`},set:function(e){this.m=e?`include`:`same-origin`}});function gn(e){let t=``;return de(e,function(e,n){t+=n,t+=`:`,t+=e,t+=`\r
`}),t}function _n(e,t,n){a:{for(r in n){var r=!1;break a}r=!0}r||(n=gn(n),typeof e==`string`||O(e,t,n))}function vn(e){ke.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D=``,this.o=0,this.l=``,this.j=this.B=this.v=this.A=!1,this.m=null,this.F=``,this.H=!1}d(vn,ke);var yn=/^https?$/i,bn=[`POST`,`PUT`];e=vn.prototype,e.Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error(`[goog.net.XhrIo] Object is active with another request=`+this.D+`; newUri=`+e);t=t?t.toUpperCase():`GET`,this.D=e,this.l=``,this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():lt.g(),this.g.onreadystatechange=f(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(e){xn(this,e);return}if(e=n||``,n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys==`function`&&typeof r.get==`function`)for(let e of r.keys())n.set(e,r.get(e));else throw Error(`Unknown input type for opt_headers: `+String(r));r=Array.from(n.keys()).find(e=>e.toLowerCase()==`content-type`),i=o.FormData&&e instanceof o.FormData,!(Array.prototype.indexOf.call(bn,t,void 0)>=0)||r||i||n.set(`Content-Type`,`application/x-www-form-urlencoded;charset=utf-8`);for(let[e,t]of n)this.g.setRequestHeader(e,t);this.F&&(this.g.responseType=this.F),`withCredentials`in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&=(clearTimeout(this.m),null),this.v=!0,this.g.send(e),this.v=!1}catch(e){xn(this,e)}};function xn(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Sn(e),wn(e)}function Sn(e){e.A||(e.A=!0,Ae(e,`complete`),Ae(e,`error`))}e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,Ae(this,`complete`),Ae(this,`abort`),wn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wn(this,!0)),vn.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Cn(this):this.Xa())},e.Xa=function(){Cn(this)};function Cn(e){if(e.h&&a!==void 0){if(e.v&&Tn(e)==4)setTimeout(e.Ca.bind(e),0);else if(Ae(e,`readystatechange`),Tn(e)==4){e.h=!1;try{let a=e.ca();a:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break a;default:t=!1}var n;if(!(n=t)){var r;if(r=a===0){let t=String(e.D).match(Ft)[1]||null;!t&&o.self&&o.self.location&&(t=o.self.location.protocol.slice(0,-1)),r=!yn.test(t?t.toLowerCase():``)}n=r}if(n)Ae(e,`complete`),Ae(e,`success`);else{e.o=6;try{var i=Tn(e)>2?e.g.statusText:``}catch{i=``}e.l=i+` [`+e.ca()+`]`,Sn(e)}}finally{wn(e)}}}}function wn(e,t){if(e.g){e.m&&=(clearTimeout(e.m),null);let n=e.g;e.g=null,t||Ae(e,`ready`);try{n.onreadystatechange=null}catch{}}}e.isActive=function(){return!!this.g};function Tn(e){return e.g?e.g.readyState:0}e.ca=function(){try{return Tn(this)>2?this.g.status:-1}catch{return-1}},e.la=function(){try{return this.g?this.g.responseText:``}catch{return``}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),ze(t)}};function En(e){try{if(!e.g)return null;if(`response`in e.g)return e.g.response;switch(e.F){case``:case`text`:return e.g.responseText;case`arraybuffer`:if(`mozResponseArrayBuffer`in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function Dn(e){let t={};e=(e.g&&Tn(e)>=2&&e.g.getAllResponseHeaders()||``).split(`\r
`);for(let r=0;r<e.length;r++){if(ae(e[r]))continue;var n=ft(e[r]);let i=n[0];if(n=n[1],typeof n!=`string`)continue;n=n.trim();let a=t[i]||[];t[i]=a,a.push(n)}w(t,function(e){return e.join(`, `)})}e.ya=function(){return this.o},e.Ha=function(){return typeof this.l==`string`?this.l:String(this.l)};function On(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function kn(e){this.za=0,this.i=[],this.j=new tt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=On(`failFast`,!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=On(`baseRetryDelayMs`,5e3,e),this.Za=On(`retryDelaySeedMs`,1e4,e),this.Ta=On(`forwardChannelMaxRetries`,2,e),this.va=On(`forwardChannelRequestTimeoutMs`,2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M=``,this.h=new D(e&&e.concurrentRequestLimit),this.Ba=new un,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}e=kn.prototype,e.ka=8,e.I=1,e.connect=function(e,t,n,r){Qe(0),this.W=e,this.H=t||{},n&&r!==void 0&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=qn(this,null,this.W),Nn(this)};function An(e){if(Mn(e),e.I==3){var t=e.V++,n=Rt(e.J);if(O(n,`SID`,e.M),O(n,`RID`,t),O(n,`TYPE`,`terminate`),In(e,n),t=new pt(e,e.j,t),t.M=2,t.A=Ht(Rt(n)),n=!1,o.navigator&&o.navigator.sendBeacon)try{n=o.navigator.sendBeacon(t.A.toString(),``)}catch{}!n&&o.Image&&(new Image().src=t.A,n=!0),n||(t.g=Jn(t.j,null),t.g.ea(t.A)),t.F=Date.now(),St(t)}Kn(e)}function jn(e){e.g&&=(Bn(e),e.g.cancel(),null)}function Mn(e){jn(e),e.v&&=(o.clearTimeout(e.v),null),Hn(e),e.h.cancel(),e.m&&=(typeof e.m==`number`&&o.clearTimeout(e.m),null)}function Nn(e){if(!kt(e.h)&&!e.m){e.m=!0;var t=e.Ea;x||C(),ee||=(x(),!0),S.add(t,e),e.D=0}}function Pn(e,t){return At(e.h)>=e.h.j-(e.m?1:0)?!1:e.m?(e.i=t.G.concat(e.i),!0):e.I==1||e.I==2||e.D>=(e.Sa?0:e.Ta)?!1:(e.m=et(l(e.Ea,e,t),Wn(e,e.D)),e.D++,!0)}e.Ea=function(e){if(this.m)if(this.m=null,this.I==1){if(!e){this.V=Math.floor(Math.random()*1e5),e=this.V++;let i=new pt(this,this.j,e),a=this.o;if(this.U&&(a?(a=T(a),pe(a,this.U)):a=this.U),this.u!==null||this.R||(i.J=a,a=null),this.S)a:{for(var t=0,n=0;n<this.i.length;n++){b:{var r=this.i[n];if(`__data__`in r.map&&(r=r.map.__data__,typeof r==`string`)){r=r.length;break b}r=void 0}if(r===void 0)break;if(t+=r,t>4096){t=n;break a}if(t===4096||n===this.i.length-1){t=n+1;break a}}t=1e3}else t=1e3;t=Ln(this,i,t),n=Rt(this.J),O(n,`RID`,e),O(n,`CVER`,22),this.G&&O(n,`X-HTTP-Session-Id`,this.G),In(this,n),a&&(this.R?t=`headers=`+dt(gn(a))+`&`+t:this.u&&_n(n,this.u,a)),Mt(this.h,i),this.Ra&&O(n,`TYPE`,`init`),this.S?(O(n,`$req`,t),O(n,`SID`,`null`),i.U=!0,_t(i,n,null)):_t(i,n,t),this.I=2}}else this.I==3&&(e?Fn(this,e):this.i.length==0||kt(this.h)||Fn(this))};function Fn(e,t){var n=t?t.l:e.V++;let r=Rt(e.J);O(r,`SID`,e.M),O(r,`RID`,n),O(r,`AID`,e.K),In(e,r),e.u&&e.o&&_n(r,e.u,e.o),n=new pt(e,e.j,n,e.D+1),e.u===null&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=Ln(e,n,1e3),n.H=Math.round(e.va*.5)+Math.round(e.va*.5*Math.random()),Mt(e.h,n),_t(n,r,t)}function In(e,t){e.H&&de(e.H,function(e,n){O(t,n,e)}),e.l&&de({},function(e,n){O(t,n,e)})}function Ln(e,t,n){n=Math.min(e.i.length,n);let r=e.l?l(e.l.Ka,e.l,e):null;a:{var i=e.i;let t=-1;for(;;){let e=[`count=`+n];t==-1?n>0?(t=i[0].g,e.push(`ofs=`+t)):t=0:e.push(`ofs=`+t);let c=!0;for(let l=0;l<n;l++){var a=i[l].g;let n=i[l].map;if(a-=t,a<0)t=Math.max(0,i[l].g-100),c=!1;else try{a=`req`+a+`_`||``;try{var o=n instanceof Map?n:Object.entries(n);for(let[t,n]of o){let r=n;s(n)&&(r=Re(n)),e.push(a+t+`=`+encodeURIComponent(r))}}catch(t){throw e.push(a+`type=_badmap`),t}}catch{r&&r(n)}}if(c){o=e.join(`&`);break a}}o=void 0}return e=e.i.splice(0,n),t.G=e,o}function Rn(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;x||C(),ee||=(x(),!0),S.add(t,e),e.A=0}}function zn(e){return e.g||e.v||e.A>=3?!1:(e.Y++,e.v=et(l(e.Da,e),Wn(e,e.A)),e.A++,!0)}e.Da=function(){if(this.v=null,Vn(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var e=4*this.T;this.j.info(`BP detection timer enabled: `+e),this.B=et(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info(`BP detection timeout reached.`),this.j.info(`Buffering proxy detected and switch to long-polling!`),this.F=!1,this.P=!0,Qe(10),jn(this),Vn(this))};function Bn(e){e.B!=null&&(o.clearTimeout(e.B),e.B=null)}function Vn(e){e.g=new pt(e,e.j,`rpc`,e.Y),e.u===null&&(e.g.J=e.o),e.g.P=0;var t=Rt(e.na);O(t,`RID`,`rpc`),O(t,`SID`,e.M),O(t,`AID`,e.K),O(t,`CI`,e.F?`0`:`1`),!e.F&&e.ia&&O(t,`TO`,e.ia),O(t,`TYPE`,`xmlhttp`),In(e,t),e.u&&e.o&&_n(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=Ht(Rt(t)),n.u=null,n.R=!0,vt(n,e)}e.Va=function(){this.C!=null&&(this.C=null,jn(this),zn(this),Qe(19))};function Hn(e){e.C!=null&&(o.clearTimeout(e.C),e.C=null)}function Un(e,t){var n=null;if(e.g==t){Hn(e),Bn(e),e.g=null;var r=2}else if(jt(e.h,t))n=t.G,Nt(e.h,t),r=1;else return;if(e.I!=0){if(t.o)if(r==1){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;r=Je(),Ae(r,new $e(r,n)),Nn(e)}else Rn(e);else if(i=t.m,i==3||i==0&&t.X>0||!(r==1&&Pn(e,t)||r==2&&zn(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Gn(e,5);break;case 4:Gn(e,10);break;case 3:Gn(e,6);break;default:Gn(e,2)}}}function Wn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function Gn(e,t){if(e.j.info(`Error code `+t),t==2){var n=l(e.bb,e),r=e.Ua;let t=!r;r=new Lt(r||`//www.google.com/images/cleardot.gif`),o.location&&o.location.protocol==`http`||zt(r,`https`),Ht(r),t?sn(r.toString(),n):cn(r.toString(),n)}else Qe(2);e.I=0,e.l&&e.l.pa(t),Kn(e),Mn(e)}e.bb=function(e){e?(this.j.info(`Successfully pinged google.com`),Qe(2)):(this.j.info(`Failed to ping google.com`),Qe(1))};function Kn(e){if(e.I=0,e.ja=[],e.l){let t=Pt(e.h);(t.length!=0||e.i.length!=0)&&(m(e.ja,t),m(e.ja,e.i),e.h.i.length=0,p(e.i),e.i.length=0),e.l.oa()}}function qn(e,t,n){var r=n instanceof Lt?Rt(n):new Lt(n);if(r.g!=``)t&&(r.g=t+`.`+r.g),Bt(r,r.u);else{var i=o.location;r=i.protocol,t=t?t+`.`+i.hostname:i.hostname,i=+i.port;let e=new Lt(null);r&&zt(e,r),t&&(e.g=t),i&&Bt(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&O(r,n,t),O(r,`VER`,e.ka),In(e,r),r}function Jn(e,t,n){if(t&&!e.L)throw Error(`Can't create secondary domain capable XhrIo object.`);return t=e.Aa&&!e.ma?new vn(new dn({ab:n})):new vn(e.ma),t.Fa(e.L),t}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yn(){}e=Yn.prototype,e.ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){};function Xn(){}Xn.prototype.g=function(e,t){return new Zn(e,t)};function Zn(e,t){ke.call(this),this.g=new kn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e[`X-Client-Protocol`]=`webchannel`:e={"X-Client-Protocol":`webchannel`}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e[`X-WebChannel-Content-Type`]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e[`X-WebChannel-Client-Profile`]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!ae(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t&&=t.httpSessionIdParam)&&!ae(t)&&(this.g.G=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new er(this)}d(Zn,ke),Zn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Zn.prototype.close=function(){An(this.g)},Zn.prototype.o=function(e){var t=this.g;if(typeof e==`string`){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=Re(e),e=n);t.i.push(new Ot(t.Ya++,e)),t.I==3&&Nn(t)},Zn.prototype.N=function(){this.g.l=null,delete this.j,An(this.g),delete this.g,Zn.Z.N.call(this)};function Qn(e){We.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){a:{for(let n in t){e=n;break a}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}d(Qn,We);function $n(){Ge.call(this),this.status=1}d($n,Ge);function er(e){this.g=e}d(er,Yn),er.prototype.ra=function(){Ae(this.g,`a`)},er.prototype.qa=function(e){Ae(this.g,new Qn(e))},er.prototype.pa=function(e){Ae(this.g,new $n)},er.prototype.oa=function(){Ae(this.g,`b`)},Xn.prototype.createWebChannel=Xn.prototype.g,Zn.prototype.send=Zn.prototype.o,Zn.prototype.open=Zn.prototype.m,Zn.prototype.close=Zn.prototype.close,pd=ad.createWebChannelTransport=function(){return new Xn},fd=ad.getStatEventTarget=function(){return Je()},dd=ad.Event=Ke,ud=ad.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},st.NO_ERROR=0,st.TIMEOUT=8,st.HTTP_ERROR=6,ld=ad.ErrorCode=st,ct.COMPLETE=`complete`,cd=ad.EventType=ct,He.EventType=Ue,Ue.OPEN=`a`,Ue.CLOSE=`b`,Ue.ERROR=`c`,Ue.MESSAGE=`d`,ke.prototype.listen=ke.prototype.J,sd=ad.WebChannel=He,ad.FetchXmlHttpFactory=dn,vn.prototype.listenOnce=vn.prototype.K,vn.prototype.getLastError=vn.prototype.Ha,vn.prototype.getLastErrorCode=vn.prototype.ya,vn.prototype.getStatus=vn.prototype.ca,vn.prototype.getResponseJson=vn.prototype.La,vn.prototype.getResponseText=vn.prototype.la,vn.prototype.send=vn.prototype.ea,vn.prototype.setWithCredentials=vn.prototype.Fa,od=ad.XhrIo=vn}).apply(id===void 0?typeof self<`u`?self:typeof window<`u`?window:{}:id);var md=`@firebase/firestore`,hd=`4.9.2`,z=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?`uid:`+this.uid:`anonymous-user`}isEqual(e){return e.uid===this.uid}};z.UNAUTHENTICATED=new z(null),z.GOOGLE_CREDENTIALS=new z(`google-credentials-uid`),z.FIRST_PARTY=new z(`first-party-uid`),z.MOCK_USER=new z(`mock-user`);
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var gd=`12.3.0`,_d=new Nt(`@firebase/firestore`);function vd(){return _d.logLevel}function B(e,...t){if(_d.logLevel<=D.DEBUG){let n=t.map(xd);_d.debug(`Firestore (${gd}): ${e}`,...n)}}function yd(e,...t){if(_d.logLevel<=D.ERROR){let n=t.map(xd);_d.error(`Firestore (${gd}): ${e}`,...n)}}function bd(e,...t){if(_d.logLevel<=D.WARN){let n=t.map(xd);_d.warn(`Firestore (${gd}): ${e}`,...n)}}function xd(e){if(typeof e==`string`)return e;try{
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
return function(e){return JSON.stringify(e)}(e)}catch{return e}}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function V(e,t,n){let r=`Unexpected state`;typeof t==`string`?r=t:n=t,Sd(e,r,n)}function Sd(e,t,n){let r=`FIRESTORE (${gd}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=` CONTEXT: `+JSON.stringify(n)}catch{r+=` CONTEXT: `+n}throw yd(r),Error(r)}function H(e,t,n,r){let i=`Unexpected state`;typeof n==`string`?i=n:r=n,e||Sd(t,i,r)}function U(e,t){return e}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var W={OK:`ok`,CANCELLED:`cancelled`,UNKNOWN:`unknown`,INVALID_ARGUMENT:`invalid-argument`,DEADLINE_EXCEEDED:`deadline-exceeded`,NOT_FOUND:`not-found`,ALREADY_EXISTS:`already-exists`,PERMISSION_DENIED:`permission-denied`,UNAUTHENTICATED:`unauthenticated`,RESOURCE_EXHAUSTED:`resource-exhausted`,FAILED_PRECONDITION:`failed-precondition`,ABORTED:`aborted`,OUT_OF_RANGE:`out-of-range`,UNIMPLEMENTED:`unimplemented`,INTERNAL:`internal`,UNAVAILABLE:`unavailable`,DATA_LOSS:`data-loss`},G=class extends tt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}},Cd=class{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}},wd=class{constructor(e,t){this.user=t,this.type=`OAuth`,this.headers=new Map,this.headers.set(`Authorization`,`Bearer ${e}`)}},Td=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(z.UNAUTHENTICATED)))}shutdown(){}},Ed=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}},Dd=class{constructor(e){this.t=e,this.currentUser=z.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){H(this.o===void 0,42304);let n=this.i,r=e=>this.i===n?Promise.resolve():(n=this.i,t(e)),i=new Cd;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Cd,e.enqueueRetryable((()=>r(this.currentUser)))};let a=()=>{let t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{B(`FirebaseAuthCredentialsProvider`,`Auth detected`),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){let e=this.t.getImmediate({optional:!0});e?o(e):(B(`FirebaseAuthCredentialsProvider`,`Auth not yet detected`),i.resolve(),i=new Cd)}}),0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i===e?t?(H(typeof t.accessToken==`string`,31837,{l:t}),new wd(t.accessToken,this.currentUser)):null:(B(`FirebaseAuthCredentialsProvider`,`getToken aborted due to token change.`),this.getToken()))):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return H(e===null||typeof e==`string`,2055,{h:e}),new z(e)}},Od=class{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type=`FirstParty`,this.user=z.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set(`X-Goog-AuthUser`,this.P);let e=this.R();return e&&this.A.set(`Authorization`,e),this.T&&this.A.set(`X-Goog-Iam-Authorization-Token`,this.T),this.A}},kd=class{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Od(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(z.FIRST_PARTY)))}shutdown(){}invalidateToken(){}},Ad=class{constructor(e){this.value=e,this.type=`AppCheck`,this.headers=new Map,e&&e.length>0&&this.headers.set(`x-firebase-appcheck`,this.value)}},jd=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Un(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){H(this.o===void 0,3512);let n=e=>{e.error!=null&&B(`FirebaseAppCheckTokenProvider`,`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);let n=e.token!==this.m;return this.m=e.token,B(`FirebaseAppCheckTokenProvider`,`Received ${n?`new`:`existing`} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};let r=e=>{B(`FirebaseAppCheckTokenProvider`,`AppCheck detected`),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){let e=this.V.getImmediate({optional:!0});e?r(e):B(`FirebaseAppCheckTokenProvider`,`AppCheck not yet detected`)}}),0)}getToken(){if(this.p)return Promise.resolve(new Ad(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(H(typeof e.token==`string`,44558,{tokenResult:e}),this.m=e.token,new Ad(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Md(e){let t=typeof self<`u`&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues==`function`)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Nd=class{static newId(){let e=``;for(;e.length<20;){let t=Md(40);for(let n=0;n<t.length;++n)e.length<20&&t[n]<248&&(e+=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`.charAt(t[n]%62))}return e}};function K(e,t){return e<t?-1:e>t?1:0}function Pd(e,t){let n=Math.min(e.length,t.length);for(let r=0;r<n;r++){let n=e.charAt(r),i=t.charAt(r);if(n!==i)return Ld(n)===Ld(i)?K(n,i):Ld(n)?1:-1}return K(e.length,t.length)}var Fd=55296,Id=57343;function Ld(e){let t=e.charCodeAt(0);return t>=Fd&&t<=Id}function Rd(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zd=`__name__`,q=class e{constructor(e,t,n){t===void 0?t=0:t>e.length&&V(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&V(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(t){return e.comparator(this,t)===0}child(t){let n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((e=>{n.push(e)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){let r=Math.min(t.length,n.length);for(let i=0;i<r;i++){let r=e.compareSegments(t.get(i),n.get(i));if(r!==0)return r}return K(t.length,n.length)}static compareSegments(t,n){let r=e.isNumericId(t),i=e.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?e.extractNumericId(t).compare(e.extractNumericId(n)):Pd(t,n)}static isNumericId(e){return e.startsWith(`__id`)&&e.endsWith(`__`)}static extractNumericId(e){return nd.fromString(e.substring(4,e.length-2))}},Bd=class e extends q{construct(t,n,r){return new e(t,n,r)}canonicalString(){return this.toArray().join(`/`)}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join(`/`)}static fromString(...t){let n=[];for(let e of t){if(e.indexOf(`//`)>=0)throw new G(W.INVALID_ARGUMENT,`Invalid segment (${e}). Paths must not contain // in them.`);n.push(...e.split(`/`).filter((e=>e.length>0)))}return new e(n)}static emptyPath(){return new e([])}},Vd=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Hd=class e extends q{construct(t,n,r){return new e(t,n,r)}static isValidIdentifier(e){return Vd.test(e)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,`\\\\`).replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(`.`)}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===zd}static keyField(){return new e([zd])}static fromServerFormat(t){let n=[],r=``,i=0,a=()=>{if(r.length===0)throw new G(W.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=``},o=!1;for(;i<t.length;){let e=t[i];if(e===`\\`){if(i+1===t.length)throw new G(W.INVALID_ARGUMENT,`Path has trailing escape character: `+t);let e=t[i+1];if(e!==`\\`&&e!==`.`&&e!=="`")throw new G(W.INVALID_ARGUMENT,`Path has invalid escape sequence: `+t);r+=e,i+=2}else e==="`"?(o=!o,i++):e!==`.`||o?(r+=e,i++):(a(),i++)}if(a(),o)throw new G(W.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)}static emptyPath(){return new e([])}},J=class e{constructor(e){this.path=e}static fromPath(t){return new e(Bd.fromString(t))}static fromName(t){return new e(Bd.fromString(t).popFirst(5))}static empty(){return new e(Bd.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Bd.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Bd.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(t){return new e(new Bd(t.slice()))}};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ud(e,t,n){if(!n)throw new G(W.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Wd(e,t,n,r){if(!0===t&&!0===r)throw new G(W.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Gd(e){if(!J.isDocumentKey(e))throw new G(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Kd(e){if(J.isDocumentKey(e))throw new G(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function qd(e){return typeof e==`object`&&!!e&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function Jd(e){if(e===void 0)return`undefined`;if(e===null)return`null`;if(typeof e==`string`)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e==`number`||typeof e==`boolean`)return``+e;if(typeof e==`object`){if(e instanceof Array)return`an array`;{let t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:`an object`}}return typeof e==`function`?`a function`:V(12329,{type:typeof e})}function Yd(e,t){if(`_delegate`in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new G(W.INVALID_ARGUMENT,`Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?`);{let n=Jd(e);throw new G(W.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Xd(e,t){if(t<=0)throw new G(W.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}
/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Zd(e,t){let n={typeString:e};return t&&(n.value=t),n}function Qd(e,t){if(!qd(e))throw new G(W.INVALID_ARGUMENT,`JSON must be an object`);let n;for(let r in t)if(t[r]){let i=t[r].typeString,a=`value`in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}let o=e[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new G(W.INVALID_ARGUMENT,n);return!0}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var $d=-62135596800,ef=1e6,tf=class e{static now(){return e.fromMillis(Date.now())}static fromDate(t){return e.fromMillis(t.getTime())}static fromMillis(t){let n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*ef);return new e(n,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0||t>=1e9)throw new G(W.INVALID_ARGUMENT,`Timestamp nanoseconds out of range: `+t);if(e<$d||e>=253402300800)throw new G(W.INVALID_ARGUMENT,`Timestamp seconds out of range: `+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ef}_compareTo(e){return this.seconds===e.seconds?K(this.nanoseconds,e.nanoseconds):K(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return`Timestamp(seconds=`+this.seconds+`, nanoseconds=`+this.nanoseconds+`)`}toJSON(){return{type:e._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Qd(t,e._jsonSchema))return new e(t.seconds,t.nanoseconds)}valueOf(){let e=this.seconds-$d;return String(e).padStart(12,`0`)+`.`+String(this.nanoseconds).padStart(9,`0`)}};tf._jsonSchemaVersion=`firestore/timestamp/1.0`,tf._jsonSchema={type:Zd(`string`,tf._jsonSchemaVersion),seconds:Zd(`number`),nanoseconds:Zd(`number`)};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Y=class e{static fromTimestamp(t){return new e(t)}static min(){return new e(new tf(0,0))}static max(){return new e(new tf(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return`SnapshotVersion(`+this.timestamp.toString()+`)`}toTimestamp(){return this.timestamp}},nf=-1,rf=class{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}};rf.UNKNOWN_ID=-1;function af(e,t){let n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Y.fromTimestamp(r===1e9?new tf(n+1,0):new tf(n,r));return new cf(i,J.empty(),t)}function sf(e){return new cf(e.readTime,e.key,nf)}var cf=class e{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new e(Y.min(),J.empty(),nf)}static max(){return new e(Y.max(),J.empty(),nf)}};function lf(e,t){let n=e.readTime.compareTo(t.readTime);return n===0?(n=J.comparator(e.documentKey,t.documentKey),n===0?K(e.largestBatchId,t.largestBatchId):n):n}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uf=`The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.`,df=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function ff(e){if(e.code!==W.FAILED_PRECONDITION||e.message!==uf)throw e;B(`LocalStore`,`Unexpectedly lost primary lease`)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var X=class e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(t,n){return this.callbackAttached&&V(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(((e,r)=>{this.nextCallback=n=>{this.wrapSuccess(t,n).next(e,r)},this.catchCallback=t=>{this.wrapFailure(n,t).next(e,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(t){try{let n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):e.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):e.reject(n)}static resolve(t){return new e(((e,n)=>{e(t)}))}static reject(t){return new e(((e,n)=>{n(t)}))}static waitFor(t){return new e(((e,n)=>{let r=0,i=0,a=!1;t.forEach((t=>{++r,t.next((()=>{++i,a&&i===r&&e()}),(e=>n(e)))})),a=!0,i===r&&e()}))}static or(t){let n=e.resolve(!1);for(let r of t)n=n.next((t=>t?e.resolve(t):r()));return n}static forEach(e,t){let n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(t,n){return new e(((e,r)=>{let i=t.length,a=Array(i),o=0;for(let s=0;s<i;s++){let c=s;n(t[c]).next((t=>{a[c]=t,++o,o===i&&e(a)}),(e=>r(e)))}}))}static doWhile(t,n){return new e(((e,r)=>{let i=()=>{!0===t()?n().next((()=>{i()}),r):e()};i()}))}};function pf(e){let t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(`.`).slice(0,2).join(`.`):`-1`;return Number(n)}function mf(e){return e.name===`IndexedDbTransactionError`}
/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var hf=class{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.ue&&this.ue(e),e}};hf.ce=-1;
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var gf=-1;function _f(e){return e==null}function vf(e){return e===0&&1/e==-1/0}function yf(e){return typeof e==`number`&&Number.isInteger(e)&&!vf(e)&&e<=2**53-1&&e>=-(2**53-1)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bf=``;function xf(e){let t=``;for(let n=0;n<e.length;n++)t.length>0&&(t=Cf(t)),t=Sf(e.get(n),t);return Cf(t)}function Sf(e,t){let n=t,r=e.length;for(let t=0;t<r;t++){let r=e.charAt(t);switch(r){case`\0`:n+=``;break;case bf:n+=``;break;default:n+=r}}return n}function Cf(e){return e+bf+``}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function wf(e){let t=0;for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Tf(e,t){for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ef(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Df=class e{constructor(e,t){this.comparator=e,this.root=t||kf.EMPTY}insert(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,kf.BLACK,null,null))}remove(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,kf.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){let e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(`, `)}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Of(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Of(this.root,e,this.comparator,!1)}getReverseIterator(){return new Of(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Of(this.root,e,this.comparator,!0)}},Of=class{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},kf=class e{constructor(t,n,r,i,a){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??e.EMPTY,this.right=a??e.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,a){return new e(t??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this,i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):i===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return e.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){return 2**this.check()<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw V(43730,{key:this.key,value:this.value});if(this.right.isRed())throw V(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw V(27949);return e+(this.isRed()?0:1)}};kf.EMPTY=null,kf.RED=!0,kf.BLACK=!1,kf.EMPTY=new class{constructor(){this.size=0}get key(){throw V(57766)}get value(){throw V(16141)}get color(){throw V(16727)}get left(){throw V(29726)}get right(){throw V(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new kf(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Af=class e{constructor(e){this.comparator=e,this.data=new Df(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){let n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){let r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=t===void 0?this.data.getIterator():this.data.getIteratorFrom(t);n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new jf(this.data.getIterator())}getIteratorFrom(e){return new jf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){let e=n.getNext().key,t=r.getNext().key;if(this.comparator(e,t)!==0)return!1}return!0}toArray(){let e=[];return this.forEach((t=>{e.push(t)})),e}toString(){let e=[];return this.forEach((t=>e.push(t))),`SortedSet(`+e.toString()+`)`}copy(t){let n=new e(this.comparator);return n.data=t,n}},jf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}},Mf=class e{constructor(e){this.fields=e,e.sort(Hd.comparator)}static empty(){return new e([])}unionWith(t){let n=new Af(Hd.comparator);for(let e of this.fields)n=n.add(e);for(let e of t)n=n.add(e);return new e(n.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Rd(this.fields,e.fields,((e,t)=>e.isEqual(t)))}},Nf=class extends Error{constructor(){super(...arguments),this.name=`Base64DecodeError`}},Pf=class e{constructor(e){this.binaryString=e}static fromBase64String(t){let n=function(e){try{return atob(e)}catch(e){throw typeof DOMException<`u`&&e instanceof DOMException?new Nf(`Invalid base64 string: `+e):e}}(t);return new e(n)}static fromUint8Array(t){let n=function(e){let t=``;for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t);return new e(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return K(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Pf.EMPTY_BYTE_STRING=new Pf(``);var Ff=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function If(e){if(H(!!e,39018),typeof e==`string`){let t=0,n=Ff.exec(e);if(H(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+`000000000`).substr(0,9),t=Number(e)}let r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Lf(e.seconds),nanos:Lf(e.nanos)}}function Lf(e){return typeof e==`number`?e:typeof e==`string`?Number(e):0}function Rf(e){return typeof e==`string`?Pf.fromBase64String(e):Pf.fromUint8Array(e)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var zf=`server_timestamp`,Bf=`__type__`,Vf=`__previous_value__`,Hf=`__local_write_time__`;function Uf(e){return(e?.mapValue?.fields||{})[Bf]?.stringValue===zf}function Wf(e){let t=e.mapValue.fields[Vf];return Uf(t)?Wf(t):t}function Gf(e){let t=If(e.mapValue.fields[Hf].timestampValue);return new tf(t.seconds,t.nanos)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Kf=class{constructor(e,t,n,r,i,a,o,s,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=s,this.useFetchStreams=c,this.isUsingEmulator=l}},qf=`(default)`,Jf=class e{constructor(e,t){this.projectId=e,this.database=t||qf}static empty(){return new e(``,``)}get isDefaultDatabase(){return this.database===qf}isEqual(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}},Yf=`__type__`,Xf=`__max__`,Zf={mapValue:{fields:{__type__:{stringValue:Xf}}}},Qf=`__vector__`,$f=`value`;function ep(e){return`nullValue`in e?0:`booleanValue`in e?1:`integerValue`in e||`doubleValue`in e?2:`timestampValue`in e?3:`stringValue`in e?5:`bytesValue`in e?6:`referenceValue`in e?7:`geoPointValue`in e?8:`arrayValue`in e?9:`mapValue`in e?Uf(e)?4:_p(e)?9007199254740991:hp(e)?10:11:V(28295,{value:e})}function tp(e,t){if(e===t)return!0;let n=ep(e);if(n!==ep(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Gf(e).isEqual(Gf(t));case 3:return function(e,t){if(typeof e.timestampValue==`string`&&typeof t.timestampValue==`string`&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;let n=If(e.timestampValue),r=If(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Rf(e.bytesValue).isEqual(Rf(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Lf(e.geoPointValue.latitude)===Lf(t.geoPointValue.latitude)&&Lf(e.geoPointValue.longitude)===Lf(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if(`integerValue`in e&&`integerValue`in t)return Lf(e.integerValue)===Lf(t.integerValue);if(`doubleValue`in e&&`doubleValue`in t){let n=Lf(e.doubleValue),r=Lf(t.doubleValue);return n===r?vf(n)===vf(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Rd(e.arrayValue.values||[],t.arrayValue.values||[],tp);case 10:case 11:return function(e,t){let n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(wf(n)!==wf(r))return!1;for(let e in n)if(n.hasOwnProperty(e)&&(r[e]===void 0||!tp(n[e],r[e])))return!1;return!0}(e,t);default:return V(52216,{left:e})}}function np(e,t){return(e.values||[]).find((e=>tp(e,t)))!==void 0}function rp(e,t){if(e===t)return 0;let n=ep(e),r=ep(t);if(n!==r)return K(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return K(e.booleanValue,t.booleanValue);case 2:return function(e,t){let n=Lf(e.integerValue||e.doubleValue),r=Lf(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ip(e.timestampValue,t.timestampValue);case 4:return ip(Gf(e),Gf(t));case 5:return Pd(e.stringValue,t.stringValue);case 6:return function(e,t){let n=Rf(e),r=Rf(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){let n=e.split(`/`),r=t.split(`/`);for(let e=0;e<n.length&&e<r.length;e++){let t=K(n[e],r[e]);if(t!==0)return t}return K(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){let n=K(Lf(e.latitude),Lf(t.latitude));return n===0?K(Lf(e.longitude),Lf(t.longitude)):n}(e.geoPointValue,t.geoPointValue);case 9:return ap(e.arrayValue,t.arrayValue);case 10:return function(e,t){let n=e.fields||{},r=t.fields||{},i=n[$f]?.arrayValue,a=r[$f]?.arrayValue,o=K(i?.values?.length||0,a?.values?.length||0);return o===0?ap(i,a):o}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Zf.mapValue&&t===Zf.mapValue)return 0;if(e===Zf.mapValue)return 1;if(t===Zf.mapValue)return-1;let n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(let e=0;e<r.length&&e<a.length;++e){let t=Pd(r[e],a[e]);if(t!==0)return t;let o=rp(n[r[e]],i[a[e]]);if(o!==0)return o}return K(r.length,a.length)}(e.mapValue,t.mapValue);default:throw V(23264,{he:n})}}function ip(e,t){if(typeof e==`string`&&typeof t==`string`&&e.length===t.length)return K(e,t);let n=If(e),r=If(t),i=K(n.seconds,r.seconds);return i===0?K(n.nanos,r.nanos):i}function ap(e,t){let n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){let t=rp(n[e],r[e]);if(t)return t}return K(n.length,r.length)}function op(e){return sp(e)}function sp(e){return`nullValue`in e?`null`:`booleanValue`in e?``+e.booleanValue:`integerValue`in e?``+e.integerValue:`doubleValue`in e?``+e.doubleValue:`timestampValue`in e?function(e){let t=If(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):`stringValue`in e?e.stringValue:`bytesValue`in e?function(e){return Rf(e).toBase64()}(e.bytesValue):`referenceValue`in e?function(e){return J.fromName(e).toString()}(e.referenceValue):`geoPointValue`in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):`arrayValue`in e?function(e){let t=`[`,n=!0;for(let r of e.values||[])n?n=!1:t+=`,`,t+=sp(r);return t+`]`}(e.arrayValue):`mapValue`in e?function(e){let t=Object.keys(e.fields||{}).sort(),n=`{`,r=!0;for(let i of t)r?r=!1:n+=`,`,n+=`${i}:${sp(e.fields[i])}`;return n+`}`}(e.mapValue):V(61005,{value:e})}function cp(e){switch(ep(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let t=Wf(e);return t?16+cp(t):16;case 5:return 2*e.stringValue.length;case 6:return Rf(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+cp(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Tf(e.fields,((e,n)=>{t+=e.length+cp(n)})),t}(e.mapValue);default:throw V(13486,{value:e})}}function lp(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function up(e){return!!e&&`integerValue`in e}function dp(e){return!!e&&`arrayValue`in e}function fp(e){return!!e&&`nullValue`in e}function pp(e){return!!e&&`doubleValue`in e&&isNaN(Number(e.doubleValue))}function mp(e){return!!e&&`mapValue`in e}function hp(e){return(e?.mapValue?.fields||{})[Yf]?.stringValue===Qf}function gp(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue==`object`)return{timestampValue:{...e.timestampValue}};if(e.mapValue){let t={mapValue:{fields:{}}};return Tf(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=gp(n))),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=gp(e.arrayValue.values[n]);return t}return{...e}}function _p(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Xf}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var vp=class e{constructor(e){this.value=e}static empty(){return new e({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!mp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gp(t)}setAll(e){let t=Hd.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){let e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=gp(e):r.push(i.lastSegment())}));let i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){let t=this.field(e.popLast());mp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return tp(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];mp(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Tf(t,((t,n)=>e[t]=n));for(let t of n)delete e[t]}clone(){return new e(gp(this.value))}};function yp(e){let t=[];return Tf(e.fields,((e,n)=>{let r=new Hd([e]);if(mp(n)){let e=yp(n.mapValue).fields;if(e.length===0)t.push(r);else for(let n of e)t.push(r.child(n))}else t.push(r)})),new Mf(t)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var bp=class e{constructor(e,t,n,r,i,a,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(t){return new e(t,0,Y.min(),Y.min(),Y.min(),vp.empty(),0)}static newFoundDocument(t,n,r,i){return new e(t,1,n,Y.min(),r,i,0)}static newNoDocument(t,n){return new e(t,2,n,Y.min(),Y.min(),vp.empty(),0)}static newUnknownDocument(t,n){return new e(t,3,n,Y.min(),Y.min(),vp.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vp.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vp.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}},xp=class{constructor(e,t){this.position=e,this.inclusive=t}};function Sp(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){let a=t[i],o=e.position[i];if(r=a.field.isKeyField()?J.comparator(J.fromName(o.referenceValue),n.key):rp(o,n.data.field(a.field)),a.dir===`desc`&&(r*=-1),r!==0)break}return r}function Cp(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!tp(e.position[n],t.position[n]))return!1;return!0}
/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var wp=class{constructor(e,t=`asc`){this.field=e,this.dir=t}};function Tp(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}
/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ep=class{},Dp=class e extends Ep{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(t,n,r){return t.isKeyField()?n===`in`||n===`not-in`?this.createKeyFieldInFilter(t,n,r):new Fp(t,n,r):n===`array-contains`?new zp(t,r):n===`in`?new Bp(t,r):n===`not-in`?new Vp(t,r):n===`array-contains-any`?new Hp(t,r):new e(t,n,r)}static createKeyFieldInFilter(e,t,n){return t===`in`?new Ip(e,n):new Lp(e,n)}matches(e){let t=e.data.field(this.field);return this.op===`!=`?t!==null&&t.nullValue===void 0&&this.matchesComparison(rp(t,this.value)):t!==null&&ep(this.value)===ep(t)&&this.matchesComparison(rp(t,this.value))}matchesComparison(e){switch(this.op){case`<`:return e<0;case`<=`:return e<=0;case`==`:return e===0;case`!=`:return e!==0;case`>`:return e>0;case`>=`:return e>=0;default:return V(47266,{operator:this.op})}}isInequality(){return[`<`,`<=`,`>`,`>=`,`!=`,`not-in`].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Op=class e extends Ep{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(t,n){return new e(t,n)}matches(e){return kp(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function kp(e){return e.op===`and`}function Ap(e){return jp(e)&&kp(e)}function jp(e){for(let t of e.filters)if(t instanceof Op)return!1;return!0}function Mp(e){if(e instanceof Dp)return e.field.canonicalString()+e.op.toString()+op(e.value);if(Ap(e))return e.filters.map((e=>Mp(e))).join(`,`);{let t=e.filters.map((e=>Mp(e))).join(`,`);return`${e.op}(${t})`}}function Np(e,t){return e instanceof Dp?function(e,t){return t instanceof Dp&&e.op===t.op&&e.field.isEqual(t.field)&&tp(e.value,t.value)}(e,t):e instanceof Op?function(e,t){return t instanceof Op&&e.op===t.op&&e.filters.length===t.filters.length?e.filters.reduce(((e,n,r)=>e&&Np(n,t.filters[r])),!0):!1}(e,t):void V(19439)}function Pp(e){return e instanceof Dp?function(e){return`${e.field.canonicalString()} ${e.op} ${op(e.value)}`}(e):e instanceof Op?function(e){return e.op.toString()+` {`+e.getFilters().map(Pp).join(` ,`)+`}`}(e):`Filter`}var Fp=class extends Dp{constructor(e,t,n){super(e,t,n),this.key=J.fromName(n.referenceValue)}matches(e){let t=J.comparator(e.key,this.key);return this.matchesComparison(t)}},Ip=class extends Dp{constructor(e,t){super(e,`in`,t),this.keys=Rp(`in`,t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}},Lp=class extends Dp{constructor(e,t){super(e,`not-in`,t),this.keys=Rp(`not-in`,t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}};function Rp(e,t){return(t.arrayValue?.values||[]).map((e=>J.fromName(e.referenceValue)))}var zp=class extends Dp{constructor(e,t){super(e,`array-contains`,t)}matches(e){let t=e.data.field(this.field);return dp(t)&&np(t.arrayValue,this.value)}},Bp=class extends Dp{constructor(e,t){super(e,`in`,t)}matches(e){let t=e.data.field(this.field);return t!==null&&np(this.value.arrayValue,t)}},Vp=class extends Dp{constructor(e,t){super(e,`not-in`,t)}matches(e){if(np(this.value.arrayValue,{nullValue:`NULL_VALUE`}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!np(this.value.arrayValue,t)}},Hp=class extends Dp{constructor(e,t){super(e,`array-contains-any`,t)}matches(e){let t=e.data.field(this.field);return!(!dp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>np(this.value.arrayValue,e)))}},Up=class{constructor(e,t=null,n=[],r=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=a,this.endAt=o,this.Te=null}};function Wp(e,t=null,n=[],r=[],i=null,a=null,o=null){return new Up(e,t,n,r,i,a,o)}function Gp(e){let t=U(e);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+=`|cg:`+t.collectionGroup),e+=`|f:`,e+=t.filters.map((e=>Mp(e))).join(`,`),e+=`|ob:`,e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(`,`),_f(t.limit)||(e+=`|l:`,e+=t.limit),t.startAt&&(e+=`|lb:`,e+=t.startAt.inclusive?`b:`:`a:`,e+=t.startAt.position.map((e=>op(e))).join(`,`)),t.endAt&&(e+=`|ub:`,e+=t.endAt.inclusive?`a:`:`b:`,e+=t.endAt.position.map((e=>op(e))).join(`,`)),t.Te=e}return t.Te}function Kp(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Tp(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Np(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Cp(e.startAt,t.startAt)&&Cp(e.endAt,t.endAt)}function qp(e){return J.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Jp=class{constructor(e,t=null,n=[],r=[],i=null,a=`F`,o=null,s=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=s,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function Yp(e,t,n,r,i,a,o,s){return new Jp(e,t,n,r,i,a,o,s)}function Xp(e){return new Jp(e)}function Zp(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Qp(e){return e.collectionGroup!==null}function $p(e){let t=U(e);if(t.Ie===null){t.Ie=[];let e=new Set;for(let n of t.explicitOrderBy)t.Ie.push(n),e.add(n.field.canonicalString());let n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:`asc`;(function(e){let t=new Af(Hd.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t})(t).forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new wp(r,n))})),e.has(Hd.keyField().canonicalString())||t.Ie.push(new wp(Hd.keyField(),n))}return t.Ie}function em(e){let t=U(e);return t.Ee||=tm(t,$p(e)),t.Ee}function tm(e,t){if(e.limitType===`F`)return Wp(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{let t=e.dir===`desc`?`asc`:`desc`;return new wp(e.field,t)}));let n=e.endAt?new xp(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new xp(e.startAt.position,e.startAt.inclusive):null;return Wp(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function nm(e,t){let n=e.filters.concat([t]);return new Jp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function rm(e,t,n){return new Jp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function im(e,t){return Kp(em(e),em(t))&&e.limitType===t.limitType}function am(e){return`${Gp(em(e))}|lt:${e.limitType}`}function om(e){return`Query(target=${function(e){let t=e.path.canonicalString();return e.collectionGroup!==null&&(t+=` collectionGroup=`+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>Pp(e))).join(`, `)}]`),_f(e.limit)||(t+=`, limit: `+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(`, `)}]`),e.startAt&&(t+=`, startAt: `,t+=e.startAt.inclusive?`b:`:`a:`,t+=e.startAt.position.map((e=>op(e))).join(`,`)),e.endAt&&(t+=`, endAt: `,t+=e.endAt.inclusive?`a:`:`b:`,t+=e.endAt.position.map((e=>op(e))).join(`,`)),`Target(${t})`}(em(e))}; limitType=${e.limitType})`}function sm(e,t){return t.isFoundDocument()&&function(e,t){let n=t.key.path;return e.collectionGroup===null?J.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n):t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n)}(e,t)&&function(e,t){for(let n of $p(e))if(!n.field.isKeyField()&&t.data.field(n.field)===null)return!1;return!0}(e,t)&&function(e,t){for(let n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){let r=Sp(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,$p(e),t)||e.endAt&&!function(e,t,n){let r=Sp(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,$p(e),t))}(e,t)}function cm(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function lm(e){return(t,n)=>{let r=!1;for(let i of $p(e)){let e=um(i,t,n);if(e!==0)return e;r||=i.field.isKeyField()}return 0}}function um(e,t,n){let r=e.field.isKeyField()?J.comparator(t.key,n.key):function(e,t,n){let r=t.data.field(e),i=n.data.field(e);return r!==null&&i!==null?rp(r,i):V(42886)}(e.field,t,n);switch(e.dir){case`asc`:return r;case`desc`:return-1*r;default:return V(19790,{direction:e.dir})}}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var dm=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(let[t,r]of n)if(this.equalsFn(t,e))return r}}has(e){return this.get(e)!==void 0}set(e,t){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return n.length===1?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Tf(this.inner,((t,n)=>{for(let[t,r]of n)e(t,r)}))}isEmpty(){return Ef(this.inner)}size(){return this.innerSize}},fm=new Df(J.comparator);function pm(){return fm}var mm=new Df(J.comparator);function hm(...e){let t=mm;for(let n of e)t=t.insert(n.key,n);return t}function gm(e){let t=mm;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function _m(){return ym()}function vm(){return ym()}function ym(){return new dm((e=>e.toString()),((e,t)=>e.isEqual(t)))}var bm=new Df(J.comparator),xm=new Af(J.comparator);function Z(...e){let t=xm;for(let n of e)t=t.add(n);return t}var Sm=new Af(K);function Cm(){return Sm}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function wm(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:`NaN`};if(t===1/0)return{doubleValue:`Infinity`};if(t===-1/0)return{doubleValue:`-Infinity`}}return{doubleValue:vf(t)?`-0`:t}}function Tm(e){return{integerValue:``+e}}function Em(e,t){return yf(t)?Tm(t):wm(e,t)}
/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Dm=class{constructor(){this._=void 0}};function Om(e,t,n){return e instanceof jm?function(e,t){let n={fields:{[Bf]:{stringValue:zf},[Hf]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Uf(t)&&(t=Wf(t)),t&&(n.fields[Vf]=t),{mapValue:n}}(n,t):e instanceof Mm?Nm(e,t):e instanceof Pm?Fm(e,t):function(e,t){let n=Am(e,t),r=Lm(n)+Lm(e.Ae);return up(n)&&up(e.Ae)?Tm(r):wm(e.serializer,r)}(e,t)}function km(e,t,n){return e instanceof Mm?Nm(e,t):e instanceof Pm?Fm(e,t):n}function Am(e,t){return e instanceof Im?function(e){return up(e)||function(e){return!!e&&`doubleValue`in e}(e)}(t)?t:{integerValue:0}:null}var jm=class extends Dm{},Mm=class extends Dm{constructor(e){super(),this.elements=e}};function Nm(e,t){let n=Rm(t);for(let t of e.elements)n.some((e=>tp(e,t)))||n.push(t);return{arrayValue:{values:n}}}var Pm=class extends Dm{constructor(e){super(),this.elements=e}};function Fm(e,t){let n=Rm(t);for(let t of e.elements)n=n.filter((e=>!tp(e,t)));return{arrayValue:{values:n}}}var Im=class extends Dm{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function Lm(e){return Lf(e.integerValue||e.doubleValue)}function Rm(e){return dp(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var zm=class{constructor(e,t){this.field=e,this.transform=t}};function Bm(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Mm&&t instanceof Mm||e instanceof Pm&&t instanceof Pm?Rd(e.elements,t.elements,tp):e instanceof Im&&t instanceof Im?tp(e.Ae,t.Ae):e instanceof jm&&t instanceof jm}(e.transform,t.transform)}var Vm=class{constructor(e,t){this.version=e,this.transformResults=t}},Hm=class e{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new e}static exists(t){return new e(void 0,t)}static updateTime(t){return new e(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Um(e,t){return e.updateTime===void 0?e.exists===void 0||e.exists===t.isFoundDocument():t.isFoundDocument()&&t.version.isEqual(e.updateTime)}var Wm=class{};function Gm(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new th(e.key,Hm.none()):new Xm(e.key,e.data,Hm.none());{let n=e.data,r=vp.empty(),i=new Af(Hd.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);t===null&&e.length>1&&(e=e.popLast(),t=n.field(e)),t===null?r.delete(e):r.set(e,t),i=i.add(e)}return new Zm(e.key,r,new Mf(i.toArray()),Hm.none())}}function Km(e,t,n){e instanceof Xm?function(e,t,n){let r=e.value.clone(),i=$m(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Zm?function(e,t,n){if(!Um(e.precondition,t))return void t.convertToUnknownDocument(n.version);let r=$m(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Qm(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function qm(e,t,n,r){return e instanceof Xm?function(e,t,n,r){if(!Um(e.precondition,t))return n;let i=e.value.clone(),a=eh(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Zm?function(e,t,n,r){if(!Um(e.precondition,t))return n;let i=eh(e.fieldTransforms,r,t),a=t.data;return a.setAll(Qm(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),n===null?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Um(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Jm(e,t){let n=null;for(let r of e.fieldTransforms){let e=t.data.field(r.field),i=Am(r.transform,e||null);i!=null&&(n===null&&(n=vp.empty()),n.set(r.field,i))}return n||null}function Ym(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return e===void 0&&t===void 0||!(!e||!t)&&Rd(e,t,((e,t)=>Bm(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Xm=class extends Wm{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Zm=class extends Wm{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}};function Qm(e){let t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){let r=e.data.field(n);t.set(n,r)}})),t}function $m(e,t,n){let r=new Map;H(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){let a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,km(o,s,n[i]))}return r}function eh(e,t,n){let r=new Map;for(let i of e){let e=i.transform,a=n.data.field(i.field);r.set(i.field,Om(e,a,t))}return r}var th=class extends Wm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},nh=class extends Wm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}},rh=class{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){let n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){let r=this.mutations[t];r.key.isEqual(e.key)&&Km(r,e,n[t])}}applyToLocalView(e,t){for(let n of this.baseMutations)n.key.isEqual(e.key)&&(t=qm(n,e,t,this.localWriteTime));for(let n of this.mutations)n.key.isEqual(e.key)&&(t=qm(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let n=vm();return this.mutations.forEach((r=>{let i=e.get(r.key),a=i.overlayedDocument,o=this.applyToLocalView(a,i.mutatedFields);o=t.has(r.key)?null:o;let s=Gm(a,o);s!==null&&n.set(r.key,s),a.isValidDocument()||a.convertToNoDocument(Y.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Z())}isEqual(e){return this.batchId===e.batchId&&Rd(this.mutations,e.mutations,((e,t)=>Ym(e,t)))&&Rd(this.baseMutations,e.baseMutations,((e,t)=>Ym(e,t)))}},ih=class e{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(t,n,r){H(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let i=function(){return bm}(),a=t.mutations;for(let e=0;e<a.length;e++)i=i.insert(a[e].key,r[e].version);return new e(t,n,r,i)}},ah=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}},oh=class{constructor(e,t){this.count=e,this.unchangedNames=t}},sh,Q;function ch(e){switch(e){case W.OK:return V(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return V(15467,{code:e})}}function lh(e){if(e===void 0)return yd(`GRPC error has no .code`),W.UNKNOWN;switch(e){case sh.OK:return W.OK;case sh.CANCELLED:return W.CANCELLED;case sh.UNKNOWN:return W.UNKNOWN;case sh.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case sh.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case sh.INTERNAL:return W.INTERNAL;case sh.UNAVAILABLE:return W.UNAVAILABLE;case sh.UNAUTHENTICATED:return W.UNAUTHENTICATED;case sh.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case sh.NOT_FOUND:return W.NOT_FOUND;case sh.ALREADY_EXISTS:return W.ALREADY_EXISTS;case sh.PERMISSION_DENIED:return W.PERMISSION_DENIED;case sh.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case sh.ABORTED:return W.ABORTED;case sh.OUT_OF_RANGE:return W.OUT_OF_RANGE;case sh.UNIMPLEMENTED:return W.UNIMPLEMENTED;case sh.DATA_LOSS:return W.DATA_LOSS;default:return V(39323,{code:e})}}(Q=sh||={})[Q.OK=0]=`OK`,Q[Q.CANCELLED=1]=`CANCELLED`,Q[Q.UNKNOWN=2]=`UNKNOWN`,Q[Q.INVALID_ARGUMENT=3]=`INVALID_ARGUMENT`,Q[Q.DEADLINE_EXCEEDED=4]=`DEADLINE_EXCEEDED`,Q[Q.NOT_FOUND=5]=`NOT_FOUND`,Q[Q.ALREADY_EXISTS=6]=`ALREADY_EXISTS`,Q[Q.PERMISSION_DENIED=7]=`PERMISSION_DENIED`,Q[Q.UNAUTHENTICATED=16]=`UNAUTHENTICATED`,Q[Q.RESOURCE_EXHAUSTED=8]=`RESOURCE_EXHAUSTED`,Q[Q.FAILED_PRECONDITION=9]=`FAILED_PRECONDITION`,Q[Q.ABORTED=10]=`ABORTED`,Q[Q.OUT_OF_RANGE=11]=`OUT_OF_RANGE`,Q[Q.UNIMPLEMENTED=12]=`UNIMPLEMENTED`,Q[Q.INTERNAL=13]=`INTERNAL`,Q[Q.UNAVAILABLE=14]=`UNAVAILABLE`,Q[Q.DATA_LOSS=15]=`DATA_LOSS`;
/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var uh=null;
/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function dh(){return new TextEncoder}
/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var fh=new nd([4294967295,4294967295],0);function ph(e){let t=dh().encode(e),n=new rd;return n.update(t),new Uint8Array(n.digest())}function mh(e){let t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new nd([n,r],0),new nd([i,a],0)]}var hh=class e{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new gh(`Invalid padding: ${t}`);if(n<0||e.length>0&&this.hashCount===0)throw new gh(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new gh(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=nd.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(nd.fromNumber(n)));return r.compare(fh)===1&&(r=new nd([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=ph(e),[n,r]=mh(t);for(let e=0;e<this.hashCount;e++){let t=this.ye(n,r,e);if(!this.we(t))return!1}return!0}static create(t,n,r){let i=t%8==0?0:8-t%8,a=new Uint8Array(Math.ceil(t/8)),o=new e(a,i,n);return r.forEach((e=>o.insert(e))),o}insert(e){if(this.ge===0)return;let t=ph(e),[n,r]=mh(t);for(let e=0;e<this.hashCount;e++){let t=this.ye(n,r,e);this.Se(t)}}Se(e){let t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}},gh=class extends Error{constructor(){super(...arguments),this.name=`BloomFilterError`}},_h=class e{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){let i=new Map;return i.set(t,vh.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Y.min(),i,new Df(K),pm(),Z())}},vh=class e{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new e(r,n,Z(),Z(),Z())}},yh=class{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}},bh=class{constructor(e,t){this.targetId=e,this.Ce=t}},xh=class{constructor(e,t,n=Pf.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}},Sh=class{constructor(){this.ve=0,this.Fe=Th(),this.Me=Pf.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Z(),t=Z(),n=Z();return this.Fe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:V(38017,{changeType:i})}})),new vh(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=Th()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){--this.ve,H(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},Ch=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=pm(),this.Je=wh(),this.He=wh(),this.Ye=new Df(K)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{let n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:V(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((e,n)=>{this.rt(n)&&t(n)}))}st(e){let t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){let i=r.target;if(qp(i))if(n===0){let e=new J(i.path);this.et(t,e,bp.newNoDocument(e,Y.min()))}else H(n===1,20013,{expectedCount:n});else{let r=this._t(t);if(r!==n){let n=this.ut(e),i=n?this.ct(n,e,r):1;if(i!==0){this.it(t);let e=i===2?`TargetPurposeExistenceFilterMismatchBloom`:`TargetPurposeExistenceFilterMismatch`;this.Ye=this.Ye.insert(t,e)}uh?.lt(function(e,t,n,r,i){let a={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},o=t.unchangedNames;return o&&(a.bloomFilter={applied:i===0,hashCount:o?.hashCount??0,bitmapLength:o?.bits?.bitmap?.length??0,padding:o?.bits?.padding??0,mightContain:e=>r?.mightContain(e)??!1}),a}(r,e.Ce,this.Ge.ht(),n,i))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:n=``,padding:r=0},hashCount:i=0}=t,a,o;try{a=Rf(n).toUint8Array()}catch(e){if(e instanceof Nf)return bd(`Decoding the base64 bloom filter in existence filter failed (`+e.message+`); ignoring the bloom filter and falling back to full re-query.`),null;throw e}try{o=new hh(a,r,i)}catch(e){return bd(e instanceof gh?`BloomFilter error: `:`Applying bloom filter failed: `,e),null}return o.ge===0?null:o}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){let n=this.Ge.getRemoteKeysForTarget(t),r=0;return n.forEach((n=>{let i=this.Ge.ht(),a=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(a)||(this.et(t,n,null),r++)})),r}Tt(e){let t=new Map;this.ze.forEach(((n,r)=>{let i=this.ot(r);if(i){if(n.current&&qp(i.target)){let t=new J(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,bp.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}}));let n=Z();this.He.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{let t=this.ot(e);return!t||t.purpose===`TargetPurposeLimboResolution`||(r=!1,!1)})),r&&(n=n.add(e))})),this.je.forEach(((t,n)=>n.setReadTime(e)));let r=new _h(e,t,this.Ye,this.je,n);return this.je=pm(),this.Je=wh(),this.He=wh(),this.Ye=new Df(K),r}Xe(e,t){if(!this.rt(e))return;let n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;let r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Sh,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Af(K),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Af(K),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||B(`WatchChangeAggregator`,`Detected inactive target`,e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Sh),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function wh(){return new Df(J.comparator)}function Th(){return new Df(J.comparator)}var Eh=(()=>({asc:`ASCENDING`,desc:`DESCENDING`}))(),Dh=(()=>({"<":`LESS_THAN`,"<=":`LESS_THAN_OR_EQUAL`,">":`GREATER_THAN`,">=":`GREATER_THAN_OR_EQUAL`,"==":`EQUAL`,"!=":`NOT_EQUAL`,"array-contains":`ARRAY_CONTAINS`,in:`IN`,"not-in":`NOT_IN`,"array-contains-any":`ARRAY_CONTAINS_ANY`}))(),Oh=(()=>({and:`AND`,or:`OR`}))(),kh=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Ah(e,t){return e.useProto3Json||_f(t)?t:{value:t}}function jh(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,``).replace(`Z`,``)}.${(`000000000`+t.nanoseconds).slice(-9)}Z`:{seconds:``+t.seconds,nanos:t.nanoseconds}}function Mh(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Nh(e,t){return jh(e,t.toTimestamp())}function Ph(e){return H(!!e,49232),Y.fromTimestamp(function(e){let t=If(e);return new tf(t.seconds,t.nanos)}(e))}function Fh(e,t){return Ih(e,t).canonicalString()}function Ih(e,t){let n=function(e){return new Bd([`projects`,e.projectId,`databases`,e.database])}(e).child(`documents`);return t===void 0?n:n.child(t)}function Lh(e){let t=Bd.fromString(e);return H(og(t),10190,{key:t.toString()}),t}function Rh(e,t){return Fh(e.databaseId,t.path)}function zh(e,t){let n=Lh(t);if(n.get(1)!==e.databaseId.projectId)throw new G(W.INVALID_ARGUMENT,`Tried to deserialize key from different project: `+n.get(1)+` vs `+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new G(W.INVALID_ARGUMENT,`Tried to deserialize key from different database: `+n.get(3)+` vs `+e.databaseId.database);return new J(Uh(n))}function Bh(e,t){return Fh(e.databaseId,t)}function Vh(e){let t=Lh(e);return t.length===4?Bd.emptyPath():Uh(t)}function Hh(e){return new Bd([`projects`,e.databaseId.projectId,`databases`,e.databaseId.database]).canonicalString()}function Uh(e){return H(e.length>4&&e.get(4)===`documents`,29091,{key:e.toString()}),e.popFirst(5)}function Wh(e,t,n){return{name:Rh(e,t),fields:n.value.mapValue.fields}}function Gh(e,t){let n;if(`targetChange`in t){t.targetChange;let r=function(e){return e===`NO_CHANGE`?0:e===`ADD`?1:e===`REMOVE`?2:e===`CURRENT`?3:e===`RESET`?4:V(39313,{state:e})}(t.targetChange.targetChangeType||`NO_CHANGE`),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(H(t===void 0||typeof t==`string`,58123),Pf.fromBase64String(t||``)):(H(t===void 0||t instanceof Buffer||t instanceof Uint8Array,16193),Pf.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){let t=e.code===void 0?W.UNKNOWN:lh(e.code);return new G(t,e.message||``)}(o);n=new xh(r,i,a,s||null)}else if(`documentChange`in t){t.documentChange;let r=t.documentChange;r.document,r.document.name,r.document.updateTime;let i=zh(e,r.document.name),a=Ph(r.document.updateTime),o=r.document.createTime?Ph(r.document.createTime):Y.min(),s=new vp({mapValue:{fields:r.document.fields}}),c=bp.newFoundDocument(i,a,o,s),l=r.targetIds||[],u=r.removedTargetIds||[];n=new yh(l,u,c.key,c)}else if(`documentDelete`in t){t.documentDelete;let r=t.documentDelete;r.document;let i=zh(e,r.document),a=r.readTime?Ph(r.readTime):Y.min(),o=bp.newNoDocument(i,a),s=r.removedTargetIds||[];n=new yh([],s,o.key,o)}else if(`documentRemove`in t){t.documentRemove;let r=t.documentRemove;r.document;let i=zh(e,r.document),a=r.removedTargetIds||[];n=new yh([],a,i,null)}else{if(!(`filter`in t))return V(11601,{Rt:t});{t.filter;let e=t.filter;e.targetId;let{count:r=0,unchangedNames:i}=e,a=new oh(r,i),o=e.targetId;n=new bh(o,a)}}return n}function Kh(e,t){let n;if(t instanceof Xm)n={update:Wh(e,t.key,t.value)};else if(t instanceof th)n={delete:Rh(e,t.key)};else if(t instanceof Zm)n={update:Wh(e,t.key,t.data),updateMask:ag(t.fieldMask)};else{if(!(t instanceof nh))return V(16599,{Vt:t.type});n={verify:Rh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){let n=t.transform;if(n instanceof jm)return{fieldPath:t.field.canonicalString(),setToServerValue:`REQUEST_TIME`};if(n instanceof Mm)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Pm)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Im)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw V(20930,{transform:t.transform})}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return t.updateTime===void 0?t.exists===void 0?V(27497):{exists:t.exists}:{updateTime:Nh(e,t.updateTime)}}(e,t.precondition)),n}function qh(e,t){return e&&e.length>0?(H(t!==void 0,14353),e.map((e=>function(e,t){let n=e.updateTime?Ph(e.updateTime):Ph(t);return n.isEqual(Y.min())&&(n=Ph(t)),new Vm(n,e.transformResults||[])}(e,t)))):[]}function Jh(e,t){return{documents:[Bh(e,t.path)]}}function Yh(e,t){let n={structuredQuery:{}},r=t.path,i;t.collectionGroup===null?(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]):(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]),n.parent=Bh(e,i);let a=function(e){if(e.length!==0)return ig(Op.create(e,`and`))}(t.filters);a&&(n.structuredQuery.where=a);let o=function(e){if(e.length!==0)return e.map((e=>function(e){return{field:ng(e.field),direction:$h(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);let s=Ah(e,t.limit);return s!==null&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function Xh(e){let t=Vh(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){H(r===1,65062);let e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let a=[];n.where&&(a=function(e){let t=Qh(e);return t instanceof Op&&Ap(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new wp(rg(e.field),function(e){switch(e){case`ASCENDING`:return`asc`;case`DESCENDING`:return`desc`;default:return}}(e.direction))}(e)))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t=typeof e==`object`?e.value:e,_f(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){let t=!!e.before,n=e.values||[];return new xp(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){let t=!e.before,n=e.values||[];return new xp(n,t)}(n.endAt)),Yp(t,i,o,a,s,`F`,c,l)}function Zh(e,t){let n=function(e){switch(e){case`TargetPurposeListen`:return null;case`TargetPurposeExistenceFilterMismatch`:return`existence-filter-mismatch`;case`TargetPurposeExistenceFilterMismatchBloom`:return`existence-filter-mismatch-bloom`;case`TargetPurposeLimboResolution`:return`limbo-document`;default:return V(28987,{purpose:e})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Qh(e){return e.unaryFilter===void 0?e.fieldFilter===void 0?e.compositeFilter===void 0?V(30097,{filter:e}):function(e){return Op.create(e.compositeFilter.filters.map((e=>Qh(e))),function(e){switch(e){case`AND`:return`and`;case`OR`:return`or`;default:return V(1026)}}(e.compositeFilter.op))}(e):function(e){return Dp.create(rg(e.fieldFilter.field),function(e){switch(e){case`EQUAL`:return`==`;case`NOT_EQUAL`:return`!=`;case`GREATER_THAN`:return`>`;case`GREATER_THAN_OR_EQUAL`:return`>=`;case`LESS_THAN`:return`<`;case`LESS_THAN_OR_EQUAL`:return`<=`;case`ARRAY_CONTAINS`:return`array-contains`;case`IN`:return`in`;case`NOT_IN`:return`not-in`;case`ARRAY_CONTAINS_ANY`:return`array-contains-any`;case`OPERATOR_UNSPECIFIED`:return V(58110);default:return V(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):function(e){switch(e.unaryFilter.op){case`IS_NAN`:let t=rg(e.unaryFilter.field);return Dp.create(t,`==`,{doubleValue:NaN});case`IS_NULL`:let n=rg(e.unaryFilter.field);return Dp.create(n,`==`,{nullValue:`NULL_VALUE`});case`IS_NOT_NAN`:let r=rg(e.unaryFilter.field);return Dp.create(r,`!=`,{doubleValue:NaN});case`IS_NOT_NULL`:let i=rg(e.unaryFilter.field);return Dp.create(i,`!=`,{nullValue:`NULL_VALUE`});case`OPERATOR_UNSPECIFIED`:return V(61313);default:return V(60726)}}(e)}function $h(e){return Eh[e]}function eg(e){return Dh[e]}function tg(e){return Oh[e]}function ng(e){return{fieldPath:e.canonicalString()}}function rg(e){return Hd.fromServerFormat(e.fieldPath)}function ig(e){return e instanceof Dp?function(e){if(e.op===`==`){if(pp(e.value))return{unaryFilter:{field:ng(e.field),op:`IS_NAN`}};if(fp(e.value))return{unaryFilter:{field:ng(e.field),op:`IS_NULL`}}}else if(e.op===`!=`){if(pp(e.value))return{unaryFilter:{field:ng(e.field),op:`IS_NOT_NAN`}};if(fp(e.value))return{unaryFilter:{field:ng(e.field),op:`IS_NOT_NULL`}}}return{fieldFilter:{field:ng(e.field),op:eg(e.op),value:e.value}}}(e):e instanceof Op?function(e){let t=e.getFilters().map((e=>ig(e)));return t.length===1?t[0]:{compositeFilter:{op:tg(e.op),filters:t}}}(e):V(54877,{filter:e})}function ag(e){let t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function og(e){return e.length>=4&&e.get(0)===`projects`&&e.get(2)===`databases`}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var sg=class e{constructor(e,t,n,r,i=Y.min(),a=Y.min(),o=Pf.EMPTY_BYTE_STRING,s=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=s}withSequenceNumber(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}},cg=class{constructor(e){this.yt=e}};function lg(e){let t=Xh({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType===`LAST`?rm(t,t.limit,`L`):t}
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var ug=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if(`nullValue`in e)this.Ft(t,5);else if(`booleanValue`in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if(`integerValue`in e)this.Ft(t,15),t.Mt(Lf(e.integerValue));else if(`doubleValue`in e){let n=Lf(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),vf(n)?t.Mt(0):t.Mt(n))}else if(`timestampValue`in e){let n=e.timestampValue;this.Ft(t,20),typeof n==`string`&&(n=If(n)),t.xt(`${n.seconds||``}`),t.Mt(n.nanos||0)}else if(`stringValue`in e)this.Ot(e.stringValue,t),this.Nt(t);else if(`bytesValue`in e)this.Ft(t,30),t.Bt(Rf(e.bytesValue)),this.Nt(t);else if(`referenceValue`in e)this.Lt(e.referenceValue,t);else if(`geoPointValue`in e){let n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else `mapValue`in e?_p(e)?this.Ft(t,2**53-1):hp(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):`arrayValue`in e?(this.Qt(e.arrayValue,t),this.Nt(t)):V(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let n=e.fields||{};this.Ft(t,55);for(let e of Object.keys(n))this.Ot(e,t),this.Ct(n[e],t)}kt(e,t){let n=e.fields||{};this.Ft(t,53);let r=$f,i=n[r].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Lf(i)),this.Ot(r,t),this.Ct(n[r],t)}Qt(e,t){let n=e.values||[];this.Ft(t,50);for(let e of n)this.Ct(e,t)}Lt(e,t){this.Ft(t,37),J.fromName(e).path.forEach((e=>{this.Ft(t,60),this.Ut(e,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};ug.Kt=new ug;
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var dg=class{constructor(){this.Cn=new fg}addToCollectionParentIndex(e,t){return this.Cn.add(t),X.resolve()}getCollectionParents(e,t){return X.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return X.resolve()}deleteFieldIndex(e,t){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,t){return X.resolve()}getDocumentsMatchingTarget(e,t){return X.resolve(null)}getIndexType(e,t){return X.resolve(0)}getFieldIndexes(e,t){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,t){return X.resolve(cf.min())}getMinOffsetFromCollectionGroup(e,t){return X.resolve(cf.min())}updateCollectionGroup(e,t,n){return X.resolve()}updateIndexEntries(e,t){return X.resolve()}},fg=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Af(Bd.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Af(Bd.comparator)).toArray()}};new Uint8Array;
/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mg=41943040,hg=class e{static withCacheSize(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
hg.DEFAULT_COLLECTION_PERCENTILE=10,hg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hg.DEFAULT=new hg(mg,hg.DEFAULT_COLLECTION_PERCENTILE,hg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hg.DISABLED=new hg(-1,0,0);
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var gg=class e{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new e(0)}static cr(){return new e(-1)}},_g=`LruGarbageCollector`,vg=1048576;function yg([e,t],[n,r]){let i=K(e,n);return i===0?K(t,r):i}var bg=class{constructor(e){this.Ir=e,this.buffer=new Af(yg),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let e=this.buffer.last();yg(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}},xg=class{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&=(this.Rr.cancel(),null)}get started(){return this.Rr!==null}Vr(e){B(_g,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay(`lru_garbage_collection`,e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){mf(e)?B(_g,`Ignoring IndexedDB error during garbage collection: `,e):await ff(e)}await this.Vr(3e5)}))}},Sg=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(t===0)return X.resolve(hf.ce);let n=new bg(t);return this.mr.forEachTarget(e,(e=>n.Ar(e.sequenceNumber))).next((()=>this.mr.pr(e,(e=>n.Ar(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(B(`LruGarbageCollector`,`Garbage collection skipped; disabled`),X.resolve(pg)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(B(`LruGarbageCollector`,`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pg):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,a,o,s,c,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(B(`LruGarbageCollector`,`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,s=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),vd()<=D.DEBUG&&B(`LruGarbageCollector`,`LRU Garbage Collection\n\tCounted targets in ${a-l}ms\n\tDetermined least recently used ${r} in `+(o-a)+`ms
\tRemoved ${i} targets in `+(s-o)+`ms
\tRemoved ${e} documents in `+(c-s)+`ms
Total Duration: ${c-l}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}};function Cg(e,t){return new Sg(e,t)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var wg=class{constructor(){this.changes=new dm((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,bp.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let n=this.changes.get(t);return n===void 0?this.getFromCache(e,t):X.resolve(n)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}},Tg=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}},Eg=class{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(n!==null&&qm(n.mutation,e,Mf.empty(),tf.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Z()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=Z()){let r=_m();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=hm();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){let n=_m();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Z())))}populateOverlays(e,t,n){let r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=pm(),a=ym(),o=function(){return ym()}();return t.forEach(((e,t)=>{let o=n.get(t.key);r.has(t.key)&&(o===void 0||o.mutation instanceof Zm)?i=i.insert(t.key,t):o===void 0?a.set(t.key,Mf.empty()):(a.set(t.key,o.mutation.getFieldMask()),qm(o.mutation,t,o.mutation.getFieldMask(),tf.now()))})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>a.set(e,t))),t.forEach(((e,t)=>o.set(e,new Tg(t,a.get(e)??null)))),o)))}recalculateAndSaveOverlays(e,t){let n=ym(),r=new Df(((e,t)=>e-t)),i=Z();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(let i of e)i.keys().forEach((e=>{let a=t.get(e);if(a===null)return;let o=n.get(e)||Mf.empty();o=i.applyToLocalView(a,o),n.set(e,o);let s=(r.get(i.batchId)||Z()).add(e);r=r.insert(i.batchId,s)}))})).next((()=>{let a=[],o=r.getReverseIterator();for(;o.hasNext();){let r=o.getNext(),s=r.key,c=r.value,l=vm();c.forEach((e=>{if(!i.has(e)){let r=Gm(t.get(e),n.get(e));r!==null&&l.set(e,r),i=i.add(e)}})),a.push(this.documentOverlayCache.saveOverlays(e,s,l))}return X.waitFor(a)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return J.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Qp(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{let a=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):X.resolve(_m()),o=nf,s=i;return a.next((t=>X.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?X.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{s=s.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,s,t,Z()))).next((e=>({batchId:o,changes:gm(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new J(t)).next((e=>{let t=hm();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){let i=t.collectionGroup,a=hm();return this.indexManager.getCollectionParents(e,i).next((o=>X.forEach(o,(o=>{let s=function(e,t){return new Jp(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next((e=>{e.forEach(((e,t)=>{a=a.insert(e,t)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{let r=n.getKey();e.get(r)===null&&(e=e.insert(r,bp.newInvalidDocument(r)))}));let n=hm();return e.forEach(((e,r)=>{let a=i.get(e);a!==void 0&&qm(a.mutation,r,Mf.empty(),tf.now()),sm(t,r)&&(n=n.insert(e,r))})),n}))}},Dg=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return X.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Ph(e.createTime)}}(t)),X.resolve()}getNamedQuery(e,t){return X.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:lg(e.bundledQuery),readTime:Ph(e.readTime)}}(t)),X.resolve()}},Og=class{constructor(){this.overlays=new Df(J.comparator),this.qr=new Map}getOverlay(e,t){return X.resolve(this.overlays.get(t))}getOverlays(e,t){let n=_m();return X.forEach(t,(t=>this.getOverlay(e,t).next((e=>{e!==null&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.St(e,t,r)})),X.resolve()}removeOverlaysForBatchId(e,t,n){let r=this.qr.get(n);return r!==void 0&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.qr.delete(n)),X.resolve()}getOverlaysForCollection(e,t,n){let r=_m(),i=t.length+1,a=new J(t.child(``)),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){let e=o.getNext().value,a=e.getKey();if(!t.isPrefixOf(a.path))break;a.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return X.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Df(((e,t)=>e-t)),a=this.overlays.getIterator();for(;a.hasNext();){let e=a.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);t===null&&(t=_m(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}let o=_m(),s=i.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return X.resolve(o)}St(e,t,n){let r=this.overlays.get(n.key);if(r!==null){let e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new ah(t,n));let i=this.qr.get(t);i===void 0&&(i=Z(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}},kg=class{constructor(){this.sessionToken=Pf.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,X.resolve()}},Ag=class{constructor(){this.Qr=new Af(jg.$r),this.Ur=new Af(jg.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let n=new jg(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Gr(new jg(e,t))}zr(e,t){e.forEach((e=>this.removeReference(e,t)))}jr(e){let t=new J(new Bd([])),n=new jg(t,e),r=new jg(t,e+1),i=[];return this.Ur.forEachInRange([n,r],(e=>{this.Gr(e),i.push(e.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new J(new Bd([])),n=new jg(t,e),r=new jg(t,e+1),i=Z();return this.Ur.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){let t=new jg(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}},jg=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return J.comparator(e.key,t.key)||K(e.Yr,t.Yr)}static Kr(e,t){return K(e.Yr,t.Yr)||J.comparator(e.key,t.key)}},Mg=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Af(jg.$r)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,r){let i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new rh(i,t,n,r);this.mutationQueue.push(a);for(let t of r)this.Zr=this.Zr.add(new jg(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return X.resolve(a)}lookupMutationBatch(e,t){return X.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let n=t+1,r=this.ei(n),i=r<0?0:r;return X.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?gf:this.tr-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let n=new jg(t,0),r=new jg(t,1/0),i=[];return this.Zr.forEachInRange([n,r],(e=>{let t=this.Xr(e.Yr);i.push(t)})),X.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Af(K);return t.forEach((e=>{let t=new jg(e,0),r=new jg(e,1/0);this.Zr.forEachInRange([t,r],(e=>{n=n.add(e.Yr)}))})),X.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){let n=t.path,r=n.length+1,i=n;J.isDocumentKey(i)||(i=i.child(``));let a=new jg(new J(i),0),o=new Af(K);return this.Zr.forEachWhile((e=>{let t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Yr)),!0)}),a),X.resolve(this.ti(o))}ti(e){let t=[];return e.forEach((e=>{let n=this.Xr(e);n!==null&&t.push(n)})),t}removeMutationBatch(e,t){H(this.ni(t.batchId,`removed`)===0,55003),this.mutationQueue.shift();let n=this.Zr;return X.forEach(t.mutations,(r=>{let i=new jg(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,t){let n=new jg(t,0),r=this.Zr.firstAfterOrEqual(n);return X.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}},Ng=class{constructor(e){this.ri=e,this.docs=function(){return new Df(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let n=this.docs.get(t);return X.resolve(n?n.document.mutableCopy():bp.newInvalidDocument(t))}getEntries(e,t){let n=pm();return t.forEach((e=>{let t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():bp.newInvalidDocument(e))})),X.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=pm(),a=t.path,o=new J(a.child(`__id-9223372036854775808__`)),s=this.docs.getIteratorFrom(o);for(;s.hasNext();){let{key:e,value:{document:o}}=s.getNext();if(!a.isPrefixOf(e.path))break;e.path.length>a.length+1||lf(sf(o),n)<=0||(r.has(o.key)||sm(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return X.resolve(i)}getAllFromCollectionGroup(e,t,n,r){V(9500)}ii(e,t){return X.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Pg(this)}getSize(e){return X.resolve(this.size)}},Pg=class extends wg{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)})),X.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}},Fg=class{constructor(e){this.persistence=e,this.si=new dm((e=>Gp(e)),Kp),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.oi=0,this._i=new Ag,this.targetCount=0,this.ai=gg.ur()}forEachTarget(e,t){return this.si.forEach(((e,n)=>t(n))),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),X.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new gg(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,X.resolve()}updateTargetData(e,t){return this.Pr(t),X.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),--this.targetCount,X.resolve()}removeTargets(e,t,n){let r=0,i=[];return this.si.forEach(((a,o)=>{o.sequenceNumber<=t&&n.get(o.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),X.waitFor(i).next((()=>r))}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,t){let n=this.si.get(t)||null;return X.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),X.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);let r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),X.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),X.resolve()}getMatchingKeysForTargetId(e,t){let n=this._i.Hr(t);return X.resolve(n)}containsKey(e,t){return X.resolve(this._i.containsKey(t))}},Ig=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new hf(0),this.li=!1,this.li=!0,this.hi=new kg,this.referenceDelegate=e(this),this.Pi=new Fg(this),this.indexManager=new dg,this.remoteDocumentCache=function(e){return new Ng(e)}((e=>this.referenceDelegate.Ti(e))),this.serializer=new cg(t),this.Ii=new Dg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Og,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new Mg(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){B(`MemoryPersistence`,`Starting transaction:`,e);let r=new Lg(this.ci.next());return this.referenceDelegate.Ei(),n(r).next((e=>this.referenceDelegate.di(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Ai(e,t){return X.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,t))))}},Lg=class extends df{constructor(e){super(),this.currentSequenceNumber=e}},Rg=class e{constructor(e){this.persistence=e,this.Ri=new Ag,this.Vi=null}static mi(t){return new e(t)}get fi(){if(this.Vi)return this.Vi;throw V(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),X.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),X.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),X.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((e=>this.fi.add(e.toString())));let n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.fi.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.fi,(n=>{let r=J.fromPath(n);return this.gi(e,r).next((e=>{e||t.removeEntry(r,Y.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return X.or([()=>X.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},zg=class e{constructor(e,t){this.persistence=e,this.pi=new dm((e=>xf(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=Cg(this,t)}static mi(t,n){return new e(t,n)}Ei(){}di(e){return X.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}wr(e){let t=0;return this.pr(e,(e=>{t++})).next((()=>t))}pr(e,t){return X.forEach(this.pi,((n,r)=>this.br(e,n,r).next((e=>e?X.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0,r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,(r=>this.br(e,r,t).next((e=>{e||(n++,i.removeEntry(r,Y.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),X.resolve()}removeTarget(e,t){let n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),X.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),X.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),X.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=cp(e.data.value)),t}br(e,t,n){return X.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let e=this.pi.get(t);return X.resolve(e!==void 0&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}},Bg=class e{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(t,n){let r=Z(),i=Z();for(let e of n.docChanges)switch(e.type){case 0:r=r.add(e.doc.key);break;case 1:i=i.add(e.doc.key)}return new e(t,n.fromCache,r,i)}},Vg=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}},Hg=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Ze()?8:pf(Ke())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){let i={result:null};return this.ys(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ws(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;let n=new Vg;return this.Ss(e,t,n).next((r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)}))})).next((()=>i.result))}bs(e,t,n,r){return n.documentReadCount<this.fs?(vd()<=D.DEBUG&&B(`QueryEngine`,`SDK will not create cache indexes for query:`,om(t),`since it only creates cache indexes for collection contains`,`more than or equal to`,this.fs,`documents`),X.resolve()):(vd()<=D.DEBUG&&B(`QueryEngine`,`Query:`,om(t),`scans`,n.documentReadCount,`local documents and returns`,r,`documents as results.`),n.documentReadCount>this.gs*r?(vd()<=D.DEBUG&&B(`QueryEngine`,`The SDK decides to create cache indexes for query:`,om(t),`as using cache indexes may help improve performance.`),this.indexManager.createTargetIndexes(e,em(t))):X.resolve())}ys(e,t){if(Zp(t))return X.resolve(null);let n=em(t);return this.indexManager.getIndexType(e,n).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=rm(t,null,`F`),n=em(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{let i=Z(...r);return this.ps.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{let a=this.Ds(t,r);return this.Cs(t,a,i,n.readTime)?this.ys(e,rm(t,null,`F`)):this.vs(e,a,t,n)}))))})))))}ws(e,t,n,r){return Zp(t)||r.isEqual(Y.min())?X.resolve(null):this.ps.getDocuments(e,n).next((i=>{let a=this.Ds(t,i);return this.Cs(t,a,n,r)?X.resolve(null):(vd()<=D.DEBUG&&B(`QueryEngine`,`Re-using previous result from %s to execute query: %s`,r.toString(),om(t)),this.vs(e,a,t,af(r,nf)).next((e=>e)))}))}Ds(e,t){let n=new Af(lm(e));return t.forEach(((t,r)=>{sm(e,r)&&(n=n.add(r))})),n}Cs(e,t,n,r){if(e.limit===null)return!1;if(n.size!==t.size)return!0;let i=e.limitType===`F`?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return vd()<=D.DEBUG&&B(`QueryEngine`,`Using full collection scan to execute query:`,om(t)),this.ps.getDocumentsMatchingQuery(e,t,cf.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}},Ug=`LocalStore`,Wg=3e8,Gg=class{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new Df(K),this.xs=new dm((e=>Gp(e)),Kp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Eg(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction(`Collect garbage`,`readwrite-primary`,(t=>e.collect(t,this.Ms)))}};function Kg(e,t,n,r){return new Gg(e,t,n,r)}async function qg(e,t){let n=U(e);return await n.persistence.runTransaction(`Handle user change`,`readonly`,(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{let i=[],a=[],o=Z();for(let e of r){i.push(e.batchId);for(let t of e.mutations)o=o.add(t.key)}for(let e of t){a.push(e.batchId);for(let t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({Ls:e,removedBatchIds:i,addedBatchIds:a})))}))}))}function Jg(e,t){let n=U(e);return n.persistence.runTransaction(`Acknowledge batch`,`readwrite-primary`,(e=>{let r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){let i=n.batch,a=i.keys(),o=X.resolve();return a.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{let a=n.docVersions.get(e);H(a!==null,48541),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Z();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}function Yg(e){let t=U(e);return t.persistence.runTransaction(`Get last remote snapshot version`,`readonly`,(e=>t.Pi.getLastRemoteSnapshotVersion(e)))}function Xg(e,t){let n=U(e),r=t.snapshotVersion,i=n.Ms;return n.persistence.runTransaction(`Apply remote event`,`readwrite-primary`,(e=>{let a=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;let o=[];t.targetChanges.forEach(((a,s)=>{let c=i.get(s);if(!c)return;o.push(n.Pi.removeMatchingKeys(e,a.removedDocuments,s).next((()=>n.Pi.addMatchingKeys(e,a.addedDocuments,s))));let l=c.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.get(s)===null?a.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(a.resumeToken,r)):l=l.withResumeToken(Pf.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()),i=i.insert(s,l),function(e,t,n){return e.resumeToken.approximateByteSize()===0||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=Wg?!0:n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,a)&&o.push(n.Pi.updateTargetData(e,l))}));let s=pm(),c=Z();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Zg(e,a,t.documentUpdates).next((e=>{s=e.ks,c=e.qs}))),!r.isEqual(Y.min())){let t=n.Pi.getLastRemoteSnapshotVersion(e).next((t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return X.waitFor(o).next((()=>a.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,s,c))).next((()=>s))})).then((e=>(n.Ms=i,e)))}function Zg(e,t,n){let r=Z(),i=Z();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=pm();return n.forEach(((n,a)=>{let o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Y.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||a.version.compareTo(o.version)===0&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):B(Ug,`Ignoring outdated watch update for `,n,`. Current version:`,o.version,` Watch version:`,a.version)})),{ks:r,qs:i}}))}function Qg(e,t){let n=U(e);return n.persistence.runTransaction(`Get next mutation batch`,`readonly`,(e=>(t===void 0&&(t=gf),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function $g(e,t){let n=U(e);return n.persistence.runTransaction(`Allocate target`,`readwrite`,(e=>{let r;return n.Pi.getTargetData(e,t).next((i=>i?(r=i,X.resolve(r)):n.Pi.allocateTargetId(e).next((i=>(r=new sg(t,i,`TargetPurposeListen`,e.currentSequenceNumber),n.Pi.addTargetData(e,r).next((()=>r)))))))})).then((e=>{let r=n.Ms.get(e.targetId);return(r===null||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e}))}async function e_(e,t,n){let r=U(e),i=r.Ms.get(t),a=n?`readwrite`:`readwrite-primary`;try{n||await r.persistence.runTransaction(`Release target`,a,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!mf(e))throw e;B(Ug,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function t_(e,t,n){let r=U(e),i=Y.min(),a=Z();return r.persistence.runTransaction(`Execute query`,`readwrite`,(e=>function(e,t,n){let r=U(e),i=r.xs.get(n);return i===void 0?r.Pi.getTargetData(t,n):X.resolve(r.Ms.get(i))}(r,e,em(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next((e=>{a=e}))})).next((()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:Y.min(),n?a:Z()))).next((e=>(n_(r,cm(t),e),{documents:e,Qs:a})))))}function n_(e,t,n){let r=e.Os.get(t)||Y.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Os.set(t,r)}var r_=class{constructor(){this.activeTargetIds=Cm()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},i_=class{constructor(){this.Mo=new r_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||`not-current`}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new r_,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}},a_=class{Oo(e){}shutdown(){}},o_=`ConnectivityMonitor`,s_=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener(`online`,this.No),window.removeEventListener(`offline`,this.Lo)}Qo(){window.addEventListener(`online`,this.No),window.addEventListener(`offline`,this.Lo)}Bo(){B(o_,`Network connectivity changed: AVAILABLE`);for(let e of this.qo)e(0)}ko(){B(o_,`Network connectivity changed: UNAVAILABLE`);for(let e of this.qo)e(1)}static v(){return typeof window<`u`&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}},c_=null;function l_(){return c_===null?c_=function(){return 268435456+Math.round(2147483648*Math.random())}():c_++,`0x`+c_.toString(16)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var u_=`RestConnection`,d_={BatchGetDocuments:`batchGet`,Commit:`commit`,RunQuery:`runQuery`,RunAggregationQuery:`runAggregationQuery`},f_=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?`https`:`http`,n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+`://`+e.host,this.Ko=`projects/${n}/databases/${r}`,this.Wo=this.databaseId.database===qf?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Go(e,t,n,r,i){let a=l_(),o=this.zo(e,t.toUriEncodedString());B(u_,`Sending RPC '${e}' ${a}:`,o,n);let s={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(s,r,i);let{host:c}=new URL(o),l=Re(c);return this.Jo(e,o,s,n,l).then((t=>(B(u_,`Received RPC '${e}' ${a}: `,t),t)),(t=>{throw bd(u_,`RPC '${e}' ${a} failed with error: `,t,`url: `,o,`request:`,n),t}))}Ho(e,t,n,r,i,a){return this.Go(e,t,n,r,i)}jo(e,t,n){e[`X-Goog-Api-Client`]=function(){return`gl-js/ fire/`+gd}(),e[`Content-Type`]=`text/plain`,this.databaseInfo.appId&&(e[`X-Firebase-GMPID`]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}zo(e,t){let n=d_[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}},p_=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}},m_=`WebChannelConnection`,h_=class extends f_{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){let a=l_();return new Promise(((i,o)=>{let s=new od;s.setWithCredentials(!0),s.listenOnce(cd.COMPLETE,(()=>{try{switch(s.getLastErrorCode()){case ld.NO_ERROR:let t=s.getResponseJson();B(m_,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(t)),i(t);break;case ld.TIMEOUT:B(m_,`RPC '${e}' ${a} timed out`),o(new G(W.DEADLINE_EXCEEDED,`Request time out`));break;case ld.HTTP_ERROR:let n=s.getStatus();if(B(m_,`RPC '${e}' ${a} failed with status:`,n,`response text:`,s.getResponseText()),n>0){let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);let t=e?.error;if(t&&t.status&&t.message){let e=function(e){let t=e.toLowerCase().replace(/_/g,`-`);return Object.values(W).indexOf(t)>=0?t:W.UNKNOWN}(t.status);o(new G(e,t.message))}else o(new G(W.UNKNOWN,`Server responded with status `+s.getStatus()))}else o(new G(W.UNAVAILABLE,`Connection failed.`));break;default:V(9055,{l_:e,streamId:a,h_:s.getLastErrorCode(),P_:s.getLastError()})}}finally{B(m_,`RPC '${e}' ${a} completed.`)}}));let c=JSON.stringify(r);B(m_,`RPC '${e}' ${a} sending request:`,r),s.send(t,`POST`,c,n,15)}))}T_(e,t,n){let r=l_(),i=[this.Uo,`/`,`google.firestore.v1.Firestore`,`/`,e,`/channel`],a=pd(),o=fd(),s={httpSessionIdParam:`gsessionid`,initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(s.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(s.useFetchStreams=!0),this.jo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;let l=i.join(``);B(m_,`Creating RPC '${e}' stream ${r}: ${l}`,s);let u=a.createWebChannel(l,s);this.I_(u);let d=!1,f=!1,p=new p_({Yo:t=>{f?B(m_,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||=(B(m_,`Opening RPC '${e}' stream ${r} transport.`),u.open(),!0),B(m_,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},Zo:()=>u.close()}),m=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return m(u,sd.EventType.OPEN,(()=>{f||(B(m_,`RPC '${e}' stream ${r} transport opened.`),p.o_())})),m(u,sd.EventType.CLOSE,(()=>{f||(f=!0,B(m_,`RPC '${e}' stream ${r} transport closed`),p.a_(),this.E_(u))})),m(u,sd.EventType.ERROR,(t=>{f||(f=!0,bd(m_,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,`Message:`,t.message),p.a_(new G(W.UNAVAILABLE,`The operation could not be completed`)))})),m(u,sd.EventType.MESSAGE,(t=>{if(!f){let n=t.data[0];H(!!n,16349);let i=n,a=i?.error||i[0]?.error;if(a){B(m_,`RPC '${e}' stream ${r} received error:`,a);let t=a.status,n=function(e){let t=sh[e];if(t!==void 0)return lh(t)}(t),i=a.message;n===void 0&&(n=W.INTERNAL,i=`Unknown error status: `+t+` with message `+a.message),f=!0,p.a_(new G(n,i)),u.close()}else B(m_,`RPC '${e}' stream ${r} received:`,n),p.u_(n)}})),m(o,dd.STAT_EVENT,(t=>{t.stat===ud.PROXY?B(m_,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===ud.NOPROXY&&B(m_,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{p.__()}),0),p}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}};function g_(){return typeof document<`u`?document:null}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function __(e){return new kh(e,!0)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var v_=class{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&B(`ExponentialBackoff`,`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}},y_=`PersistentStream`,b_=class{constructor(e,t,n,r,i,a,o,s){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=s,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new v_(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state===4?this.N_():this.auth()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&=(this.C_.cancel(),null)}U_(){this.v_&&=(this.v_.cancel(),null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e===4?t&&t.code===W.RESOURCE_EXHAUSTED?(yd(t.toString()),yd(`Using maximum backoff delay to prevent overloading the backend.`),this.M_.g_()):t&&t.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()):this.M_.reset(),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.D_===t&&this.G_(e,n)}),(t=>{e((()=>{let e=new G(W.UNKNOWN,`Fetching auth token failed: `+t.message);return this.z_(e)}))}))}G_(e,t){let n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((e=>{n((()=>this.z_(e)))})),this.stream.onMessage((e=>{n((()=>++this.F_==1?this.J_(e):this.onNext(e)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return B(y_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(B(y_,`stream callback skipped by getCloseGuardedDispatcher.`),Promise.resolve())))}}},x_=class extends b_{constructor(e,t,n,r,i,a){super(e,`listen_stream_connection_backoff`,`listen_stream_idle`,`health_check_timeout`,t,n,r,a),this.serializer=i}j_(e,t){return this.connection.T_(`Listen`,e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=Gh(this.serializer,e),n=function(e){if(!(`targetChange`in e))return Y.min();let t=e.targetChange;return t.targetIds&&t.targetIds.length?Y.min():t.readTime?Ph(t.readTime):Y.min()}(e);return this.listener.H_(t,n)}Y_(e){let t={};t.database=Hh(this.serializer),t.addTarget=function(e,t){let n,r=t.target;if(n=qp(r)?{documents:Jh(e,r)}:{query:Yh(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Mh(e,t.resumeToken);let r=Ah(e,t.expectedCount);r!==null&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Y.min())>0){n.readTime=jh(e,t.snapshotVersion.toTimestamp());let r=Ah(e,t.expectedCount);r!==null&&(n.expectedCount=r)}return n}(this.serializer,e);let n=Zh(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){let t={};t.database=Hh(this.serializer),t.removeTarget=e,this.q_(t)}},S_=class extends b_{constructor(e,t,n,r,i,a){super(e,`write_stream_connection_backoff`,`write_stream_idle`,`health_check_timeout`,t,n,r,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_(`Write`,e,t)}J_(e){return H(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,H(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){H(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=qh(e.writeResults,e.commitTime),n=Ph(e.commitTime);return this.listener.na(n,t)}ra(){let e={};e.database=Hh(this.serializer),this.q_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map((e=>Kh(this.serializer,e)))};this.q_(t)}},C_=class{},w_=class extends C_{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new G(W.FAILED_PRECONDITION,`The client has already been terminated.`)}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Go(e,Ih(t,n),r,i,a))).catch((e=>{throw e.name===`FirebaseError`?(e.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new G(W.UNKNOWN,e.toString())}))}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Ho(e,Ih(t,n),r,a,o,i))).catch((e=>{throw e.name===`FirebaseError`?(e.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new G(W.UNKNOWN,e.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}},T_=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=`Unknown`,this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca(`Unknown`),this._a=this.asyncQueue.enqueueAfterDelay(`online_state_timeout`,1e4,(()=>(this._a=null,this.la(`Backend didn't respond within 10 seconds.`),this.ca(`Offline`),Promise.resolve()))))}ha(e){this.state===`Online`?this.ca(`Unknown`):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca(`Offline`)))}set(e){this.Pa(),this.oa=0,e===`Online`&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(yd(t),this.aa=!1):B(`OnlineStateTracker`,t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}},E_=`RemoteStore`,D_=class{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((e=>{n.enqueueAndForget((async()=>{I_(this)&&(B(E_,`Restarting streams for network reachability change.`),await async function(e){let t=U(e);t.Ea.add(4),await k_(t),t.Ra.set(`Unknown`),t.Ea.delete(4),await O_(t)}(this))}))})),this.Ra=new T_(n,r)}};async function O_(e){if(I_(e))for(let t of e.da)await t(!0)}async function k_(e){for(let t of e.da)await t(!1)}function A_(e,t){let n=U(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),F_(n)?P_(n):tv(n).O_()&&M_(n,t))}function j_(e,t){let n=U(e),r=tv(n);n.Ia.delete(t),r.O_()&&N_(n,t),n.Ia.size===0&&(r.O_()?r.L_():I_(n)&&n.Ra.set(`Unknown`))}function M_(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Y.min())>0){let n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}tv(e).Y_(t)}function N_(e,t){e.Va.Ue(t),tv(e).Z_(t)}function P_(e){e.Va=new Ch({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),tv(e).start(),e.Ra.ua()}function F_(e){return I_(e)&&!tv(e).x_()&&e.Ia.size>0}function I_(e){return U(e).Ea.size===0}function L_(e){e.Va=void 0}async function R_(e){e.Ra.set(`Online`)}async function z_(e){e.Ia.forEach(((t,n)=>{M_(e,t)}))}async function B_(e,t){L_(e),F_(e)?(e.Ra.ha(t),P_(e)):e.Ra.set(`Unknown`)}async function V_(e,t,n){if(e.Ra.set(`Online`),t instanceof xh&&t.state===2&&t.cause)try{await async function(e,t){let n=t.cause;for(let r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){B(E_,`Failed to remove targets %s: %s `,t.targetIds.join(`,`),n),await H_(e,n)}else if(t instanceof yh?e.Va.Ze(t):t instanceof bh?e.Va.st(t):e.Va.tt(t),!n.isEqual(Y.min()))try{let t=await Yg(e.localStore);n.compareTo(t)>=0&&await function(e,t){let n=e.Va.Tt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){let i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{let r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(Pf.EMPTY_BYTE_STRING,r.snapshotVersion)),N_(e,t);let i=new sg(r.target,t,n,r.sequenceNumber);M_(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){B(E_,`Failed to raise snapshot:`,t),await H_(e,t)}}async function H_(e,t,n){if(!mf(t))throw t;e.Ea.add(1),await k_(e),e.Ra.set(`Offline`),n||=()=>Yg(e.localStore),e.asyncQueue.enqueueRetryable((async()=>{B(E_,`Retrying IndexedDB access`),await n(),e.Ea.delete(1),await O_(e)}))}function U_(e,t){return t().catch((n=>H_(e,n,t)))}async function W_(e){let t=U(e),n=nv(t),r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:gf;for(;G_(t);)try{let e=await Qg(t.localStore,r);if(e===null){t.Ta.length===0&&n.L_();break}r=e.batchId,K_(t,e)}catch(e){await H_(t,e)}q_(t)&&J_(t)}function G_(e){return I_(e)&&e.Ta.length<10}function K_(e,t){e.Ta.push(t);let n=nv(e);n.O_()&&n.X_&&n.ea(t.mutations)}function q_(e){return I_(e)&&!nv(e).x_()&&e.Ta.length>0}function J_(e){nv(e).start()}async function Y_(e){nv(e).ra()}async function X_(e){let t=nv(e);for(let n of e.Ta)t.ea(n.mutations)}async function Z_(e,t,n){let r=e.Ta.shift(),i=ih.from(r,t,n);await U_(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await W_(e)}async function Q_(e,t){t&&nv(e).X_&&await async function(e,t){if(function(e){return ch(e)&&e!==W.ABORTED}(t.code)){let n=e.Ta.shift();nv(e).B_(),await U_(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await W_(e)}}(e,t),q_(e)&&J_(e)}async function $_(e,t){let n=U(e);n.asyncQueue.verifyOperationInProgress(),B(E_,`RemoteStore received new credentials`);let r=I_(n);n.Ea.add(3),await k_(n),r&&n.Ra.set(`Unknown`),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await O_(n)}async function ev(e,t){let n=U(e);t?(n.Ea.delete(2),await O_(n)):t||(n.Ea.add(2),await k_(n),n.Ra.set(`Unknown`))}function tv(e){return e.ma||(e.ma=function(e,t,n){let r=U(e);return r.sa(),new x_(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:R_.bind(null,e),t_:z_.bind(null,e),r_:B_.bind(null,e),H_:V_.bind(null,e)}),e.da.push((async t=>{t?(e.ma.B_(),F_(e)?P_(e):e.Ra.set(`Unknown`)):(await e.ma.stop(),L_(e))}))),e.ma}function nv(e){return e.fa||(e.fa=function(e,t,n){let r=U(e);return r.sa(),new S_(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Y_.bind(null,e),r_:Q_.bind(null,e),ta:X_.bind(null,e),na:Z_.bind(null,e)}),e.da.push((async t=>{t?(e.fa.B_(),await W_(e)):(await e.fa.stop(),e.Ta.length>0&&(B(E_,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))}))),e.fa}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var rv=class e{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Cd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,a){let o=Date.now()+r,s=new e(t,n,o,i,a);return s.start(r),s}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(W.CANCELLED,`Operation cancelled`+(e?`: `+e:``))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle===null?Promise.resolve():(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e))))))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function iv(e,t){if(yd(`AsyncQueue`,`${t}: ${e}`),mf(e))return new G(W.UNAVAILABLE,`${t}: ${e}`);throw e}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var av=class e{static emptySet(t){return new e(t.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||J.comparator(t.key,n.key):(e,t)=>J.comparator(e.key,t.key),this.keyedMap=hm(),this.sortedSet=new Df(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){let e=n.getNext().key,t=r.getNext().key;if(!e.isEqual(t))return!1}return!0}toString(){let e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?`DocumentSet ()`:`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(t,n){let r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}},ov=class{constructor(){this.ga=new Df(J.comparator)}track(e){let t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):V(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}},sv=class e{constructor(e,t,n,r,i,a,o,s,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=s,this.hasCachedResults=c}static fromInitialDocuments(t,n,r,i,a){let o=[];return n.forEach((e=>{o.push({type:0,doc:e})})),new e(t,n,av.emptySet(n),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&im(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}},cv=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}},lv=class{constructor(){this.queries=uv(),this.onlineState=`Unknown`,this.Ca=new Set}terminate(){(function(e,t){let n=U(e),r=n.queries;n.queries=uv(),r.forEach(((e,n)=>{for(let e of n.Sa)e.onError(t)}))})(this,new G(W.ABORTED,`Firestore shutting down`))}};function uv(){return new dm((e=>am(e)),im)}async function dv(e,t){let n=U(e),r=3,i=t.query,a=n.queries.get(i);a?!a.ba()&&t.Da()&&(r=2):(a=new cv,r=t.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){let n=iv(e,`Initialization of query '${om(t.query)}' failed`);t.onError(n);return}n.queries.set(i,a),a.Sa.push(t),t.va(n.onlineState),a.wa&&t.Fa(a.wa)&&hv(n)}async function fv(e,t){let n=U(e),r=t.query,i=3,a=n.queries.get(r);if(a){let e=a.Sa.indexOf(t);e>=0&&(a.Sa.splice(e,1),a.Sa.length===0?i=t.Da()?0:1:!a.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function pv(e,t){let n=U(e),r=!1;for(let e of t){let t=e.query,i=n.queries.get(t);if(i){for(let t of i.Sa)t.Fa(e)&&(r=!0);i.wa=e}}r&&hv(n)}function mv(e,t,n){let r=U(e),i=r.queries.get(t);if(i)for(let e of i.Sa)e.onError(n);r.queries.delete(t)}function hv(e){e.Ca.forEach((e=>{e.next()}))}var gv,_v;(_v=gv||={}).Ma=`default`,_v.Cache=`cache`;var vv=class{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState=`Unknown`,this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){let t=[];for(let n of e.docChanges)n.type!==3&&t.push(n);e=new sv(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let n=t!==`Offline`;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t===`Offline`)}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=sv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==gv.Cache}},yv=class{constructor(e){this.key=e}},bv=class{constructor(e){this.key=e}},xv=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Z(),this.mutatedKeys=Z(),this.eu=lm(e),this.tu=new av(this.eu)}get nu(){return this.Ya}ru(e,t){let n=t?t.iu:new ov,r=t?t.tu:this.tu,i=t?t.mutatedKeys:this.mutatedKeys,a=r,o=!1,s=this.query.limitType===`F`&&r.size===this.query.limit?r.last():null,c=this.query.limitType===`L`&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{let l=r.get(e),u=sm(this.query,t)?t:null,d=!!l&&this.mutatedKeys.has(l.key),f=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations),p=!1;l&&u?l.data.isEqual(u.data)?d!==f&&(n.track({type:3,doc:u}),p=!0):this.su(l,u)||(n.track({type:2,doc:u}),p=!0,(s&&this.eu(u,s)>0||c&&this.eu(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),p=!0):l&&!u&&(n.track({type:1,doc:l}),p=!0,(s||c)&&(o=!0)),p&&(u?(a=a.add(u),i=f?i.add(e):i.delete(e)):(a=a.delete(e),i=i.delete(e)))})),this.query.limit!==null)for(;a.size>this.query.limit;){let e=this.query.limitType===`F`?a.last():a.first();a=a.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:a,iu:n,Cs:o,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){let i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let a=e.iu.ya();a.sort(((e,t)=>function(e,t){let n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return V(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc))),this.ou(n),r??=!1;let o=t&&!r?this._u():[],s=this.Xa.size===0&&this.current&&!r?1:0,c=s!==this.Za;return this.Za=s,a.length!==0||c?{snapshot:new sv(this.query,e.tu,i,a,e.mutatedKeys,s===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e===`Offline`?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ov,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((e=>this.Ya=this.Ya.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Ya=this.Ya.delete(e))),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=Z(),this.tu.forEach((e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))}));let t=[];return e.forEach((e=>{this.Xa.has(e)||t.push(new bv(e))})),this.Xa.forEach((n=>{e.has(n)||t.push(new yv(n))})),t}cu(e){this.Ya=e.Qs,this.Xa=Z();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return sv.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},Sv=`SyncEngine`,Cv=class{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}},wv=class{constructor(e){this.key=e,this.hu=!1}},Tv=class{constructor(e,t,n,r,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new dm((e=>am(e)),im),this.Iu=new Map,this.Eu=new Set,this.du=new Df(J.comparator),this.Au=new Map,this.Ru=new Ag,this.Vu={},this.mu=new Map,this.fu=gg.cr(),this.onlineState=`Unknown`,this.gu=void 0}get isPrimaryClient(){return!0===this.gu}};async function Ev(e,t,n=!0){let r=Jv(e),i,a=r.Tu.get(t);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await Ov(r,t,n,!0),i}async function Dv(e,t){let n=Jv(e);await Ov(n,t,!0,!1)}async function Ov(e,t,n,r){let i=await $g(e.localStore,em(t)),a=i.targetId,o=e.sharedClientState.addLocalQueryTarget(a,n),s;return r&&(s=await kv(e,t,a,o===`current`,i.resumeToken)),e.isPrimaryClient&&n&&A_(e.remoteStore,i),s}async function kv(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await t_(e.localStore,t.query,!1).then((({documents:e})=>t.view.ru(e,i))));let a=r&&r.targetChanges.get(t.targetId),o=r&&r.targetMismatches.get(t.targetId)!=null,s=t.view.applyChanges(i,e.isPrimaryClient,a,o);return Hv(e,t.targetId,s.au),s.snapshot}(e,t,n,r);let a=await t_(e.localStore,t,!0),o=new xv(t,a.Qs),s=o.ru(a.documents),c=vh.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!==`Offline`,i),l=o.applyChanges(s,e.isPrimaryClient,c);Hv(e,n,l.au);let u=new Cv(t,n,o);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),l.snapshot}async function Av(e,t,n){let r=U(e),i=r.Tu.get(t),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((e=>!im(e,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await e_(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&j_(r.remoteStore,i.targetId),Bv(r,i.targetId)})).catch(ff)):(Bv(r,i.targetId),await e_(r.localStore,i.targetId,!0))}async function jv(e,t){let n=U(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),j_(n.remoteStore,r.targetId))}async function Mv(e,t,n){let r=Yv(e);try{let e=await function(e,t){let n=U(e),r=tf.now(),i=t.reduce(((e,t)=>e.add(t.key)),Z()),a,o;return n.persistence.runTransaction(`Locally write mutations`,`readwrite`,(e=>{let s=pm(),c=Z();return n.Ns.getEntries(e,i).next((e=>{s=e,s.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,s))).next((i=>{a=i;let o=[];for(let e of t){let t=Jm(e,a.get(e.key).overlayedDocument);t!=null&&o.push(new Zm(e.key,t,yp(t.value.mapValue),Hm.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;let r=t.applyToLocalDocumentSet(a,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:gm(a)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||=new Df(K),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await Gv(r,e.changes),await W_(r.remoteStore)}catch(e){let t=iv(e,`Failed to persist write`);n.reject(t)}}async function Nv(e,t){let n=U(e);try{let e=await Xg(n.localStore,t);t.targetChanges.forEach(((e,t)=>{let r=n.Au.get(t);r&&(H(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?H(r.hu,14607):e.removedDocuments.size>0&&(H(r.hu,42227),r.hu=!1))})),await Gv(n,e,t)}catch(e){await ff(e)}}function Pv(e,t,n){let r=U(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let e=[];r.Tu.forEach(((n,r)=>{let i=r.view.va(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){let n=U(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(let e of n.Sa)e.va(t)&&(r=!0)})),r&&hv(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Fv(e,t,n){let r=U(e);r.sharedClientState.updateQueryState(t,`rejected`,n);let i=r.Au.get(t),a=i&&i.key;if(a){let e=new Df(J.comparator);e=e.insert(a,bp.newNoDocument(a,Y.min()));let n=Z().add(a),i=new _h(Y.min(),new Map,new Df(K),e,n);await Nv(r,i),r.du=r.du.remove(a),r.Au.delete(t),Wv(r)}else await e_(r.localStore,t,!1).then((()=>Bv(r,t,n))).catch(ff)}async function Iv(e,t){let n=U(e),r=t.batch.batchId;try{let e=await Jg(n.localStore,t);zv(n,r,null),Rv(n,r),n.sharedClientState.updateMutationState(r,`acknowledged`),await Gv(n,e)}catch(e){await ff(e)}}async function Lv(e,t,n){let r=U(e);try{let e=await function(e,t){let n=U(e);return n.persistence.runTransaction(`Reject batch`,`readwrite-primary`,(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(H(t!==null,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);zv(r,t,n),Rv(r,t),r.sharedClientState.updateMutationState(t,`rejected`,n),await Gv(r,e)}catch(e){await ff(e)}}function Rv(e,t){(e.mu.get(t)||[]).forEach((e=>{e.resolve()})),e.mu.delete(t)}function zv(e,t,n){let r=U(e),i=r.Vu[r.currentUser.toKey()];if(i){let e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function Bv(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(let r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach((t=>{e.Ru.containsKey(t)||Vv(e,t)}))}function Vv(e,t){e.Eu.delete(t.path.canonicalString());let n=e.du.get(t);n!==null&&(j_(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Wv(e))}function Hv(e,t,n){for(let r of n)r instanceof yv?(e.Ru.addReference(r.key,t),Uv(e,r)):r instanceof bv?(B(Sv,`Document no longer in limbo: `+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||Vv(e,r.key)):V(19791,{wu:r})}function Uv(e,t){let n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(B(Sv,`New document in limbo: `+n),e.Eu.add(r),Wv(e))}function Wv(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){let t=e.Eu.values().next().value;e.Eu.delete(t);let n=new J(Bd.fromString(t)),r=e.fu.next();e.Au.set(r,new wv(n)),e.du=e.du.insert(n,r),A_(e.remoteStore,new sg(em(Xp(n.path)),r,`TargetPurposeLimboResolution`,hf.ce))}}async function Gv(e,t,n){let r=U(e),i=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((e,s)=>{o.push(r.pu(s,t,n).then((e=>{if((e||n)&&r.isPrimaryClient){let t=e?!e.fromCache:n?.targetChanges.get(s.targetId)?.current;r.sharedClientState.updateQueryState(s.targetId,t?`current`:`not-current`)}if(e){i.push(e);let t=Bg.As(s.targetId,e);a.push(t)}})))})),await Promise.all(o),r.Pu.H_(i),await async function(e,t){let n=U(e);try{await n.persistence.runTransaction(`notifyLocalViewChanges`,`readwrite`,(e=>X.forEach(t,(t=>X.forEach(t.Es,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>X.forEach(t.ds,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!mf(e))throw e;B(Ug,`Failed to update sequence numbers: `+e)}for(let e of t){let t=e.targetId;if(!e.fromCache){let e=n.Ms.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(t,i)}}}(r.localStore,a))}async function Kv(e,t){let n=U(e);if(!n.currentUser.isEqual(t)){B(Sv,`User change. New user:`,t.toKey());let e=await qg(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach((e=>{e.forEach((e=>{e.reject(new G(W.CANCELLED,t))}))})),e.mu.clear()}(n,`'waitForPendingWrites' promise is rejected due to a user change.`),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Gv(n,e.Ls)}}function qv(e,t){let n=U(e),r=n.Au.get(t);if(r&&r.hu)return Z().add(r.key);{let e=Z(),r=n.Iu.get(t);if(!r)return e;for(let t of r){let r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function Jv(e){let t=U(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Nv.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=qv.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Fv.bind(null,t),t.Pu.H_=pv.bind(null,t.eventManager),t.Pu.yu=mv.bind(null,t.eventManager),t}function Yv(e){let t=U(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Iv.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Lv.bind(null,t),t}var Xv=class{constructor(){this.kind=`memory`,this.synchronizeTabs=!1}async initialize(e){this.serializer=__(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Kg(this.persistence,new Hg,e.initialUser,this.serializer)}Cu(e){return new Ig(Rg.mi,this.serializer)}Du(e){return new i_}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}};Xv.provider={build:()=>new Xv};var Zv=class extends Xv{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){H(this.persistence.referenceDelegate instanceof zg,46915);let n=this.persistence.referenceDelegate.garbageCollector;return new xg(n,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes===void 0?hg.DEFAULT:hg.withCacheSize(this.cacheSizeBytes);return new Ig((e=>zg.mi(e,t)),this.serializer)}},Qv=class{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Pv(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Kv.bind(null,this.syncEngine),await ev(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new lv}()}createDatastore(e){let t=__(e.databaseInfo.databaseId),n=function(e){return new h_(e)}(e.databaseInfo);return function(e,t,n,r){return new w_(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new D_(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Pv(this.syncEngine,e,0)),function(){return s_.v()?new s_:new a_}())}createSyncEngine(e,t){return function(e,t,n,r,i,a,o){let s=new Tv(e,t,n,r,i,a);return o&&(s.gu=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(e){let t=U(e);B(E_,`RemoteStore shutting down.`),t.Ea.add(5),await k_(t),t.Aa.shutdown(),t.Ra.set(`Unknown`)}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}};Qv.provider={build:()=>new Qv};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var $v=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):yd(`Uncaught Error in snapshot listener:`,e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}},ey=`FirestoreClient`,ty=class{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=z.UNAUTHENTICATED,this.clientId=Nd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{B(ey,`Received user=`,e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(B(ey,`Received new app check token=`,e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Cd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let n=iv(t,`Failed to shutdown persistence`);e.reject(n)}})),e.promise}};async function ny(e,t){e.asyncQueue.verifyOperationInProgress(),B(ey,`Initializing OfflineComponentProvider`);let n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await qg(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function ry(e,t){e.asyncQueue.verifyOperationInProgress();let n=await iy(e);B(ey,`Initializing OnlineComponentProvider`),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>$_(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>$_(t.remoteStore,n))),e._onlineComponents=t}async function iy(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){B(ey,`Using user provided OfflineComponentProvider`);try{await ny(e,e._uninitializedComponentsProvider._offline)}catch(t){let n=t;if(!function(e){return e.name===`FirebaseError`?e.code===W.FAILED_PRECONDITION||e.code===W.UNIMPLEMENTED:!(typeof DOMException<`u`&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}(n))throw n;bd(`Error using user provided cache. Falling back to memory cache: `+n),await ny(e,new Xv)}}else B(ey,`Using default OfflineComponentProvider`),await ny(e,new Zv(void 0));return e._offlineComponents}async function ay(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(B(ey,`Using user provided OnlineComponentProvider`),await ry(e,e._uninitializedComponentsProvider._online)):(B(ey,`Using default OnlineComponentProvider`),await ry(e,new Qv))),e._onlineComponents}function oy(e){return ay(e).then((e=>e.syncEngine))}async function sy(e){let t=await ay(e),n=t.eventManager;return n.onListen=Ev.bind(null,t.syncEngine),n.onUnlisten=Av.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Dv.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=jv.bind(null,t.syncEngine),n}function cy(e,t,n={}){let r=new Cd;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){let a=new $v({next:n=>{a.Nu(),t.enqueueAndForget((()=>fv(e,o))),n.fromCache&&r.source===`server`?i.reject(new G(W.UNAVAILABLE,`Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)`)):i.resolve(n)},error:e=>i.reject(e)}),o=new vv(n,a,{includeMetadataChanges:!0,qa:!0});return dv(e,o)}(await sy(e),e.asyncQueue,t,n,r))),r.promise}
/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function ly(e){let t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uy=new Map,dy=`firestore.googleapis.com`,fy=!0,py=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new G(W.INVALID_ARGUMENT,`Can't provide ssl option if host option is not set`);this.host=dy,this.ssl=fy}else this.host=e.host,this.ssl=e.ssl??fy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=mg;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<vg)throw new G(W.INVALID_ARGUMENT,`cacheSizeBytes must be at least 1048576`);this.cacheSizeBytes=e.cacheSizeBytes}Wd(`experimentalForceLongPolling`,e.experimentalForceLongPolling,`experimentalAutoDetectLongPolling`,e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ly(e.experimentalLongPollingOptions??{}),function(e){if(e.timeoutSeconds!==void 0){if(isNaN(e.timeoutSeconds))throw new G(W.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new G(W.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new G(W.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},my=class{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type=`firestore-lite`,this._persistenceKey=`(lite)`,this._settings=new py({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask=`notTerminated`}get app(){if(!this._app)throw new G(W.FAILED_PRECONDITION,`Firestore was not initialized using the Firebase SDK. 'app' is not available`);return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==`notTerminated`}_setSettings(e){if(this._settingsFrozen)throw new G(W.FAILED_PRECONDITION,`Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.`);this._settings=new py(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(e){if(!e)return new Td;switch(e.type){case`firstParty`:return new kd(e.sessionIndex||`0`,e.iamToken||null,e.authTokenFactory||null);case`provider`:return e.client;default:throw new G(W.INVALID_ARGUMENT,`makeAuthCredentialsProvider failed due to invalid credential type`)}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask===`notTerminated`&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask===`notTerminated`?await this._terminate():this._terminateTask=`notTerminated`}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let t=uy.get(e);t&&(B(`ComponentProvider`,`Removing Datastore`),uy.delete(e),t.terminate())}(this),Promise.resolve()}};function hy(e,t,n,r={}){e=Yd(e,my);let i=Re(t),a=e._getSettings(),o={...a,emulatorOptions:e._getEmulatorOptions()},s=`${t}:${n}`;i&&(ze(`https://${s}`),Ge(`Firestore`,!0)),a.host!==dy&&a.host!==s&&bd(`Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.`);let c={...a,host:s,ssl:i,emulatorOptions:r};if(!mt(c,o)&&(e._setSettings(c),r.mockUserToken)){let t,n;if(typeof r.mockUserToken==`string`)t=r.mockUserToken,n=z.MOCK_USER;else{t=Be(r.mockUserToken,e._app?.options.projectId);let i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new G(W.INVALID_ARGUMENT,`mockUserToken must contain 'sub' or 'user_id' field!`);n=new z(i)}e._authCredentials=new Ed(new wd(t,n))}}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var gy=class e{constructor(e,t,n){this.converter=t,this._query=n,this.type=`query`,this.firestore=e}withConverter(t){return new e(this.firestore,t,this._query)}},_y=class e{constructor(e,t,n){this.converter=t,this._key=n,this.type=`document`,this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vy(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new e(this.firestore,t,this._key)}toJSON(){return{type:e._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(Qd(n,e._jsonSchema))return new e(t,r||null,new J(Bd.fromString(n.referencePath)))}};_y._jsonSchemaVersion=`firestore/documentReference/1.0`,_y._jsonSchema={type:Zd(`string`,_y._jsonSchemaVersion),referencePath:Zd(`string`)};var vy=class e extends gy{constructor(e,t,n){super(e,t,Xp(n)),this._path=n,this.type=`collection`}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new _y(this.firestore,null,new J(e))}withConverter(t){return new e(this.firestore,t,this._path)}};function yy(e,t,...n){if(e=xt(e),Ud(`collection`,`path`,t),e instanceof my){let r=Bd.fromString(t,...n);return Kd(r),new vy(e,null,r)}{if(!(e instanceof _y||e instanceof vy))throw new G(W.INVALID_ARGUMENT,`Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore`);let r=e._path.child(Bd.fromString(t,...n));return Kd(r),new vy(e.firestore,null,r)}}function by(e,t,...n){if(e=xt(e),arguments.length===1&&(t=Nd.newId()),Ud(`doc`,`path`,t),e instanceof my){let r=Bd.fromString(t,...n);return Gd(r),new _y(e,null,new J(r))}{if(!(e instanceof _y||e instanceof vy))throw new G(W.INVALID_ARGUMENT,`Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore`);let r=e._path.child(Bd.fromString(t,...n));return Gd(r),new _y(e.firestore,e instanceof vy?e.converter:null,new J(r))}}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xy=`AsyncQueue`,Sy=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new v_(this,`async_queue_retry`),this._c=()=>{let e=g_();e&&B(xy,`Visibility state changed to `+e.visibilityState),this.M_.w_()},this.ac=e;let t=g_();t&&typeof t.addEventListener==`function`&&t.addEventListener(`visibilitychange`,this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=g_();t&&typeof t.removeEventListener==`function`&&t.removeEventListener(`visibilitychange`,this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));let t=new Cd;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!mf(e))throw e;B(xy,`Operation failed with retryable error: `+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){let t=this.ac.then((()=>(this.rc=!0,e().catch((e=>{throw this.nc=e,this.rc=!1,yd(`INTERNAL UNHANDLED ERROR: `,Cy(e)),e})).then((e=>(this.rc=!1,e))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let r=rv.createAndSchedule(this,e,t,n,(e=>this.hc(e)));return this.tc.push(r),r}uc(){this.nc&&V(47125,{Pc:Cy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(let t of this.tc)if(t.skipDelay(),e!==`all`&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function Cy(e){let t=e.message||``;return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}var wy=class extends my{constructor(e,t,n,r){super(e,t,n,r),this.type=`firestore`,this._queue=new Sy,this._persistenceKey=r?.name||`[DEFAULT]`}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Sy(e),this._firestoreClient=void 0,await e}}};function Ty(e,t){let n=typeof e==`object`?e:Jn(),r=typeof e==`string`?e:t||qf,i=Hn(n,`firestore`).getImmediate({identifier:r});if(!i._initialized){let e=Fe(`firestore`);e&&hy(i,...e)}return i}function Ey(e){if(e._terminated)throw new G(W.FAILED_PRECONDITION,`The client has already been terminated.`);return e._firestoreClient||Dy(e),e._firestoreClient}function Dy(e){let t=e._freezeSettings(),n=function(e,t,n,r){return new Kf(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,ly(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,e._app?.options.appId||``,e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new ty(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(e){let t=e?._online.build();return{_offline:e?._offline.build(t),_online:t}}(e._componentsProvider))}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Oy=class e{constructor(e){this._byteString=e}static fromBase64String(t){try{return new e(Pf.fromBase64String(t))}catch(e){throw new G(W.INVALID_ARGUMENT,`Failed to construct data from Base64 string: `+e)}}static fromUint8Array(t){return new e(Pf.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return`Bytes(base64: `+this.toBase64()+`)`}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:e._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Qd(t,e._jsonSchema))return e.fromBase64String(t.bytes)}};Oy._jsonSchemaVersion=`firestore/bytes/1.0`,Oy._jsonSchema={type:Zd(`string`,Oy._jsonSchemaVersion),bytes:Zd(`string`)};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var ky=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new G(W.INVALID_ARGUMENT,`Invalid field name at argument $(i + 1). Field names must not be empty.`);this._internalPath=new Hd(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}},Ay=class{constructor(e){this._methodName=e}},jy=class e{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new G(W.INVALID_ARGUMENT,`Latitude must be a number between -90 and 90, but was: `+e);if(!isFinite(t)||t<-180||t>180)throw new G(W.INVALID_ARGUMENT,`Longitude must be a number between -180 and 180, but was: `+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return K(this._lat,e._lat)||K(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:e._jsonSchemaVersion}}static fromJSON(t){if(Qd(t,e._jsonSchema))return new e(t.latitude,t.longitude)}};jy._jsonSchemaVersion=`firestore/geoPoint/1.0`,jy._jsonSchema={type:Zd(`string`,jy._jsonSchemaVersion),latitude:Zd(`number`),longitude:Zd(`number`)};
/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var My=class e{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:e._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Qd(t,e._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e==`number`)))return new e(t.vectorValues);throw new G(W.INVALID_ARGUMENT,`Expected 'vectorValues' field to be a number array`)}}};My._jsonSchemaVersion=`firestore/vectorValue/1.0`,My._jsonSchema={type:Zd(`string`,My._jsonSchemaVersion),vectorValues:Zd(`object`)};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Ny=/^__.*__$/,Py=class{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask===null?new Xm(e,this.data,t,this.fieldTransforms):new Zm(e,this.data,this.fieldMask,t,this.fieldTransforms)}},Fy=class{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Zm(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function Iy(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw V(40011,{Ac:e})}}var Ly=class e{constructor(e,t,n,r,i,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new e({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){let t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return $y(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc(`Document fields must not be empty`);if(Iy(this.Ac)&&Ny.test(e))throw this.Sc(`Document fields cannot begin and end with "__"`)}},Ry=class{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||__(e)}Cc(e,t,n,r=!1){return new Ly({Ac:e,methodName:t,Dc:n,path:Hd.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function zy(e){let t=e._freezeSettings(),n=__(e._databaseId);return new Ry(e._databaseId,!!t.ignoreUndefinedProperties,n)}function By(e,t,n,r,i,a={}){let o=e.Cc(a.merge||a.mergeFields?2:0,t,n,i);Yy(`Data must be an object, but it was:`,o,r);let s=qy(r,o),c,l;if(a.merge)c=new Mf(o.fieldMask),l=o.fieldTransforms;else if(a.mergeFields){let e=[];for(let r of a.mergeFields){let i=Xy(t,r,n);if(!o.contains(i))throw new G(W.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);eb(e,i)||e.push(i)}c=new Mf(e),l=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=o.fieldTransforms;return new Py(new vp(s),c,l)}var Vy=class e extends Ay{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(t){return t instanceof e}},Hy=class e extends Ay{_toFieldTransform(e){return new zm(e.path,new jm)}isEqual(t){return t instanceof e}};function Uy(e,t,n,r){let i=e.Cc(1,t,n);Yy(`Data must be an object, but it was:`,i,r);let a=[],o=vp.empty();Tf(r,((e,r)=>{let s=Qy(t,e,n);r=xt(r);let c=i.yc(s);if(r instanceof Vy)a.push(s);else{let e=Ky(r,c);e!=null&&(a.push(s),o.set(s,e))}}));let s=new Mf(a);return new Fy(o,s,i.fieldTransforms)}function Wy(e,t,n,r,i,a){let o=e.Cc(1,t,n),s=[Xy(t,r,n)],c=[i];if(a.length%2!=0)throw new G(W.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<a.length;e+=2)s.push(Xy(t,a[e])),c.push(a[e+1]);let l=[],u=vp.empty();for(let e=s.length-1;e>=0;--e)if(!eb(l,s[e])){let t=s[e],n=c[e];n=xt(n);let r=o.yc(t);if(n instanceof Vy)l.push(t);else{let e=Ky(n,r);e!=null&&(l.push(t),u.set(t,e))}}let d=new Mf(l);return new Fy(u,d,o.fieldTransforms)}function Gy(e,t,n,r=!1){return Ky(n,e.Cc(r?4:3,t))}function Ky(e,t){if(Jy(e=xt(e)))return Yy(`Unsupported field value:`,t,e),qy(e,t);if(e instanceof Ay)return function(e,t){if(!Iy(t.Ac))throw t.Sc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Sc(`${e._methodName}() is not currently supported inside arrays`);let n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc(`Nested arrays are not supported`);return function(e,t){let n=[],r=0;for(let i of e){let e=Ky(i,t.wc(r));e??={nullValue:`NULL_VALUE`},n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if((e=xt(e))===null)return{nullValue:`NULL_VALUE`};if(typeof e==`number`)return Em(t.serializer,e);if(typeof e==`boolean`)return{booleanValue:e};if(typeof e==`string`)return{stringValue:e};if(e instanceof Date){let n=tf.fromDate(e);return{timestampValue:jh(t.serializer,n)}}if(e instanceof tf){let n=new tf(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:jh(t.serializer,n)}}if(e instanceof jy)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Oy)return{bytesValue:Mh(t.serializer,e._byteString)};if(e instanceof _y){let n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Fh(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof My)return function(e,t){return{mapValue:{fields:{[Yf]:{stringValue:Qf},[$f]:{arrayValue:{values:e.toArray().map((e=>{if(typeof e!=`number`)throw t.Sc(`VectorValues must only contain numeric values.`);return wm(t.serializer,e)}))}}}}}}(e,t);throw t.Sc(`Unsupported field value: ${Jd(e)}`)}(e,t)}function qy(e,t){let n={};return Ef(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Tf(e,((e,r)=>{let i=Ky(r,t.mc(e));i!=null&&(n[e]=i)})),{mapValue:{fields:n}}}function Jy(e){return!(typeof e!=`object`||!e||e instanceof Array||e instanceof Date||e instanceof tf||e instanceof jy||e instanceof Oy||e instanceof _y||e instanceof Ay||e instanceof My)}function Yy(e,t,n){if(!Jy(n)||!qd(n)){let r=Jd(n);throw r===`an object`?t.Sc(e+` a custom object`):t.Sc(e+` `+r)}}function Xy(e,t,n){if((t=xt(t))instanceof ky)return t._internalPath;if(typeof t==`string`)return Qy(e,t);throw $y(`Field path arguments must be of type string or `,e,!1,void 0,n)}var Zy=RegExp(`[~\\*/\\[\\]]`);function Qy(e,t,n){if(t.search(Zy)>=0)throw $y(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new ky(...t.split(`.`))._internalPath}catch{throw $y(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function $y(e,t,n,r,i){let a=r&&!r.isEmpty(),o=i!==void 0,s=`Function ${t}() called with invalid data`;n&&(s+=" (via `toFirestore()`)"),s+=`. `;let c=``;return(a||o)&&(c+=` (found`,a&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=`)`),new G(W.INVALID_ARGUMENT,s+e+c)}function eb(e,t){return e.some((e=>e.isEqual(t)))}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var tb=class{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new _y(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new nb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(rb(`DocumentSnapshot.get`,e));if(t!==null)return this._userDataWriter.convertValue(t)}}},nb=class extends tb{data(){return super.data()}};function rb(e,t){return typeof t==`string`?Qy(e,t):t instanceof ky?t._internalPath:t._delegate._internalPath}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ib(e){if(e.limitType===`L`&&e.explicitOrderBy.length===0)throw new G(W.UNIMPLEMENTED,`limitToLast() queries require specifying at least one orderBy() clause`)}var ab=class{},ob=class extends ab{};function sb(e,t,...n){let r=[];t instanceof ab&&r.push(t),r=r.concat(n),function(e){let t=e.filter((e=>e instanceof ub)).length,n=e.filter((e=>e instanceof cb)).length;if(t>1||t>0&&n>0)throw new G(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let t of r)e=t._apply(e);return e}var cb=class e extends ob{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type=`where`}static _create(t,n,r){return new e(t,n,r)}_apply(e){let t=this._parse(e);return hb(e._query,t),new gy(e.firestore,e.converter,nm(e._query,t))}_parse(e){let t=zy(e.firestore);return function(e,t,n,r,i,a,o){let s;if(i.isKeyField()){if(a===`array-contains`||a===`array-contains-any`)throw new G(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${a}' queries on documentId().`);if(a===`in`||a===`not-in`){mb(o,a);let t=[];for(let n of o)t.push(pb(r,e,n));s={arrayValue:{values:t}}}else s=pb(r,e,o)}else a!==`in`&&a!==`not-in`&&a!==`array-contains-any`||mb(o,a),s=Gy(n,t,o,a===`in`||a===`not-in`);return Dp.create(i,a,s)}(e._query,`where`,t,e.firestore._databaseId,this._field,this._op,this._value)}};function lb(e,t,n){let r=t,i=rb(`where`,e);return cb._create(i,r,n)}var ub=class e extends ab{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(t,n){return new e(t,n)}_parse(e){let t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return t.length===1?t[0]:Op.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(e,t){let n=e,r=t.getFlattenedFilters();for(let e of r)hb(n,e),n=nm(n,e)}(e._query,t),new gy(e.firestore,e.converter,nm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type===`and`?`and`:`or`}},db=class e extends ob{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(t,n,r){return new e(t,n,r)}_apply(e){return new gy(e.firestore,e.converter,rm(e._query,this._limit,this._limitType))}};function fb(e){return Xd(`limit`,e),db._create(`limit`,e,`F`)}function pb(e,t,n){if(typeof(n=xt(n))==`string`){if(n===``)throw new G(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.`);if(!Qp(t)&&n.indexOf(`/`)!==-1)throw new G(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=t.path.child(Bd.fromString(n));if(!J.isDocumentKey(r))throw new G(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return lp(e,new J(r))}if(n instanceof _y)return lp(e,n._key);throw new G(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jd(n)}.`)}function mb(e,t){if(!Array.isArray(e)||e.length===0)throw new G(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function hb(e,t){let n=function(e,t){for(let n of e)for(let e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case`!=`:return[`!=`,`not-in`];case`array-contains-any`:case`in`:return[`not-in`];case`not-in`:return[`array-contains-any`,`in`,`not-in`,`!=`];default:return[]}}(t.op));if(n!==null)throw n===t.op?new G(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new G(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}var gb=class{convertValue(e,t=`none`){switch(ep(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Lf(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Rf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw V(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t=`none`){let n={};return Tf(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){let t=e.fields?.[$f].arrayValue?.values?.map((e=>Lf(e.doubleValue)));return new My(t)}convertGeoPoint(e){return new jy(Lf(e.latitude),Lf(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case`previous`:let n=Wf(e);return n==null?null:this.convertValue(n,t);case`estimate`:return this.convertTimestamp(Gf(e));default:return null}}convertTimestamp(e){let t=If(e);return new tf(t.seconds,t.nanos)}convertDocumentKey(e,t){let n=Bd.fromString(e);H(og(n),9688,{name:e});let r=new Jf(n.get(1),n.get(3)),i=new J(n.popFirst(5));return r.isEqual(t)||yd(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function _b(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}var vb=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},yb=class e extends tb{constructor(e,t,n,r,i,a){super(e,t,n,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new bb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let n=this._document.data.field(rb(`DocumentSnapshot.get`,e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new G(W.FAILED_PRECONDITION,`DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().`);let t=this._document,n={};return n.type=e._jsonSchemaVersion,n.bundle=``,n.bundleSource=`DocumentSnapshot`,n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,`previous`),n.bundle=(this._firestore,this.ref.path,`NOT SUPPORTED`),n)}};yb._jsonSchemaVersion=`firestore/documentSnapshot/1.0`,yb._jsonSchema={type:Zd(`string`,yb._jsonSchemaVersion),bundleSource:Zd(`string`,`DocumentSnapshot`),bundleName:Zd(`string`),bundle:Zd(`string`)};var bb=class extends yb{data(e={}){return super.data(e)}},xb=class e{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new vb(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){let e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new bb(this._firestore,this._userDataWriter,n.key,n,new vb(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new G(W.INVALID_ARGUMENT,`To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().`);return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{let r=new bb(e._firestore,e._userDataWriter,n.doc.key,n.doc,new vb(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:`added`,doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||e.type!==3)).map((t=>{let r=new bb(e._firestore,e._userDataWriter,t.doc.key,t.doc,new vb(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return t.type!==0&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),t.type!==1&&(n=n.add(t.doc),a=n.indexOf(t.doc.key)),{type:Sb(t.type),doc:r,oldIndex:i,newIndex:a}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new G(W.FAILED_PRECONDITION,`QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().`);let t={};t.type=e._jsonSchemaVersion,t.bundleSource=`QuerySnapshot`,t.bundleName=Nd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach((e=>{e._document!==null&&(n.push(e._document),r.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,`previous`)),i.push(e.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,`NOT SUPPORTED`),t}};function Sb(e){switch(e){case 0:return`added`;case 2:case 3:return`modified`;case 1:return`removed`;default:return V(61501,{type:e})}}xb._jsonSchemaVersion=`firestore/querySnapshot/1.0`,xb._jsonSchema={type:Zd(`string`,xb._jsonSchemaVersion),bundleSource:Zd(`string`,`QuerySnapshot`),bundleName:Zd(`string`),bundle:Zd(`string`)};var Cb=class extends gb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oy(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new _y(this.firestore,null,t)}};function wb(e){e=Yd(e,gy);let t=Yd(e.firestore,wy),n=Ey(t),r=new Cb(t);return ib(e._query),cy(n,e._query).then((n=>new xb(t,r,e,n)))}function Tb(e,t,n){e=Yd(e,_y);let r=Yd(e.firestore,wy),i=_b(e.converter,t,n);return Db(r,[By(zy(r),`setDoc`,e._key,i,e.converter!==null,n).toMutation(e._key,Hm.none())])}function Eb(e,t,n,...r){e=Yd(e,_y);let i=Yd(e.firestore,wy),a=zy(i),o;return o=typeof(t=xt(t))==`string`||t instanceof ky?Wy(a,`updateDoc`,e._key,t,n,r):Uy(a,`updateDoc`,e._key,t),Db(i,[o.toMutation(e._key,Hm.exists(!0))])}function Db(e,t){return function(e,t){let n=new Cd;return e.asyncQueue.enqueueAndForget((async()=>Mv(await oy(e),t,n))),n.promise}(Ey(e),t)}function Ob(){return new Hy(`serverTimestamp`)}(function(e,t=!0){(function(e){gd=e})(Kn),Vn(new St(`firestore`,((e,{instanceIdentifier:n,options:r})=>{let i=e.getProvider(`app`).getImmediate(),a=new wy(new Dd(e.getProvider(`auth-internal`)),new jd(i,e.getProvider(`app-check-internal`)),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,[`projectId`]))throw new G(W.INVALID_ARGUMENT,`"projectId" not provided in firebase.initializeApp.`);return new Jf(e.options.projectId,t)}(i,n),i);return r={useFetchStreams:t,...r},a._setSettings(r),a}),`PUBLIC`).setMultipleInstances(!0)),Yn(md,hd,e),Yn(md,hd,`esm2020`)})();var kb=o((e=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.fragment`);function r(e,n,r){var i=null;if(r!==void 0&&(i=``+r),n.key!==void 0&&(i=``+n.key),`key`in n)for(var a in r={},n)a!==`key`&&(r[a]=n[a]);else r=n;return n=r.ref,{$$typeof:t,type:e,key:i,ref:n===void 0?null:n,props:r}}e.Fragment=n,e.jsx=r,e.jsxs=r})),$=c(o(((e,t)=>{t.exports=kb()}))()),Ab=qn({apiKey:`AIzaSyAGYqDE7wRSj7FL0i3MY3-meunLyXkETA0`,authDomain:`chilitosramen-89223.firebaseapp.com`,databaseURL:`https://chilitosramen-89223-default-rtdb.firebaseio.com`,projectId:`chilitosramen-89223`,storageBucket:`chilitosramen-89223.appspot.com`,messagingSenderId:`980858860861`,appId:`1:980858860861:web:50efba800ea74546a08154`,measurementId:`G-23ZQE8834Z`}),jb=Zu(Ab),Mb=Ty(Ab),Nb=()=>{let[e,t]=(0,_.useState)([]),[n,r]=(0,_.useState)(null),[i,a]=(0,_.useState)(!0),[o,s]=(0,_.useState)(`todos`),[c]=(0,_.useState)({nombre:`Repartidor Web`,email:`repartidor@web.com`,imagen:``,frase:`Tu pedido está en camino`});(0,_.useEffect)(()=>{let e=Pu(jb,`pedidos_activos`),n=Hu(e,e=>{let n=e.val();if(n){let e=Object.entries(n).map(([e,t])=>({id:e,orderId:t.orderId||null,nombreCliente:t.nombreCliente||null,telefono:t.telefono||null,direccion:t.direccion||null,cantidad:t.cantidad||0,metodoPago:t.metodoPago||null,montoPagado:t.montoPagado||null,cambio:t.cambio||null,estado:t.estado||`pendiente`,ubicacion:t.ubicacion||null,edificio:t.edificio||null,productos:t.productos||[],vendedorData:t.vendedorData||null,comentarioe:t.comentarioe||null,comentariop:t.comentariop||null,email:t.email||null}));t(e)}else t([]);a(!1)},e=>{console.error(`Error al cargar pedidos:`,e),a(!1)});return()=>n()},[]);let l=[{nombre:`Edificio A`,centro:{lat:19.72914,lng:-98.46742},radio:29.25,color:`#1976D2`,icon:`🏢`},{nombre:`Edificio B`,centro:{lat:19.72971,lng:-98.46744},radio:26.76,color:`#388E3C`,icon:`🏢`},{nombre:`Edificio C`,centro:{lat:19.72961,lng:-98.46659},radio:28.19,color:`#D32F2F`,icon:`🏢`},{nombre:`Edificio D`,centro:{lat:19.72914,lng:-98.46619},radio:28.23,color:`#F57C00`,icon:`🏢`},{nombre:`Edificio E`,centro:{lat:19.72999,lng:-98.46624},radio:21.16,color:`#7B1FA2`,icon:`🏢`},{nombre:`Edificio F`,centro:{lat:19.73021,lng:-98.46731},radio:26.4,color:`#0097A7`,icon:`🏢`},{nombre:`Edificio G`,centro:{lat:19.73048,lng:-98.46699},radio:16.36,color:`#C2185B`,icon:`🏢`},{nombre:`Cafetería`,centro:{lat:19.73003,lng:-98.46689},radio:11.76,color:`#8D6E63`,icon:`☕`},{nombre:`Gallineros`,centro:{lat:19.72997,lng:-98.46662},radio:16.88,color:`#FFB74D`,icon:`🏠`},{nombre:`En medio`,centro:{lat:19.72952,lng:-98.46701},radio:16.1,color:`#4DB6AC`,icon:`🎯`},{nombre:`Árbol de Redes`,centro:{lat:19.7293,lng:-98.46672},radio:21.17,color:`#66BB6A`,icon:`🌳`},{nombre:`Fuera Edificio E`,centro:{lat:19.72967,lng:-98.46615},radio:18.41,color:`#9575CD`,icon:`📍`},{nombre:`Polideportivo`,centro:{lat:19.72958,lng:-98.46523},radio:75.99,color:`#5D4037`,icon:`🏟️`},{nombre:`Dentro de ITESA`,centro:{lat:19.72917,lng:-98.46605},radio:208.99,color:`#9C27B0`,icon:`🎓`}],u=(e,t)=>{let n=e.lat*Math.PI/180,r=t.lat*Math.PI/180,i=(t.lat-e.lat)*Math.PI/180,a=(t.lng-e.lng)*Math.PI/180,o=Math.sin(i/2)*Math.sin(i/2)+Math.cos(n)*Math.cos(r)*Math.sin(a/2)*Math.sin(a/2);return 6371e3*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))},d=e=>{if(!e||!e.lat||!e.lng)return{nombre:`Sin ubicación`,color:`#757575`,icon:`❓`};for(let t of l)if(!(t.nombre===`Fuera de Universidad`||t.nombre===`Dentro de ITESA`)&&u(t.centro,e)<=t.radio)return t;let t=l.find(e=>e.nombre===`Dentro de ITESA`);return t&&u(t.centro,e)<=t.radio?t:{nombre:`Fuera de Universidad`,color:`#757575`,icon:`🌍`}},f=async(e,t,n)=>{try{let r=yy(Mb,e,`vendidos`,`0`),i=sb(r,lb(`orderId`,`==`,t),fb(1)),a=await wb(i);if(!a.empty){let e=a.docs[0];await Eb(e.ref,{estado:n,fechaActualizacion:Ob(),ultimaActualizacionRepartidor:c.email}),console.log(`✅ Estado actualizado en colección del cliente`)}}catch(e){console.error(`Error actualizando estado del cliente:`,e)}},p=async e=>{try{let t=e.email,n=e.orderId,i=e.id,a=by(Mb,t,`repartidor`);await Tb(a,{nombre:c.nombre,frase:`Tu pedido está en camino`,imagen:c.imagen,email:c.email,enCamino:!0,afuera:!1,problema:!1,estado:`En Camino`,fechaActualizacion:Ob()},{merge:!0});let o=Pu(jb,`pedidos_activos/${i}`);await Ru(o,{estado:`En Camino`,enCamino:!0,afuera:!1,problema:!1,repartidorEmail:c.email,repartidorNombre:c.nombre,repartidorImagen:c.imagen,repartidorFrase:`Tu pedido está en camino`,fechaActualizacion:Date.now()}),await f(t,n,`En Camino`),alert(`✅ Cliente notificado: Pedido en camino`),r(null)}catch(e){console.error(`Error en handleEnCamino:`,e),alert(`❌ Error al actualizar estado`)}},m=async e=>{try{let t=e.email,n=e.orderId,i=e.id,a=by(Mb,t,`repartidor`);await Tb(a,{nombre:c.nombre,frase:c.frase||`Estoy afuera con tu pedido`,imagen:c.imagen,email:c.email,afuera:!0,enCamino:!1,problema:!1,estado:`Afuera`,fechaActualizacion:Ob()},{merge:!0});let o=Pu(jb,`pedidos_activos/${i}`);await Ru(o,{estado:`Afuera`,afuera:!0,enCamino:!1,problema:!1,repartidorEmail:c.email,repartidorNombre:c.nombre,repartidorImagen:c.imagen,repartidorFrase:c.frase||`Estoy afuera con tu pedido`,fechaActualizacion:Date.now()}),await f(t,n,`Afuera`),alert(`✅ Cliente notificado: Repartidor afuera`),r(null)}catch(e){console.error(`Error en handleAfuera:`,e),alert(`❌ Error al actualizar estado`)}},h=async e=>{try{let t=e.email,n=e.orderId,i=e.id,a=by(Mb,t,`repartidor`);await Tb(a,{nombre:c.nombre,frase:`Hay un problema con tu pedido, lo resolveremos en breve`,imagen:c.imagen,email:c.email,problema:!0,afuera:!1,enCamino:!1,estado:`Error`,fechaActualizacion:Ob()},{merge:!0});let o=Pu(jb,`pedidos_activos/${i}`);await Ru(o,{estado:`Error`,problema:!0,afuera:!1,enCamino:!1,repartidorEmail:c.email,repartidorNombre:c.nombre,repartidorImagen:c.imagen,repartidorFrase:`Hay un problema con tu pedido, lo resolveremos en breve`,fechaActualizacion:Date.now()}),await f(t,n,`Error`),alert(`⚠️ Cliente notificado: Hay un problema`),r(null)}catch(e){console.error(`Error en handleProblema:`,e),alert(`❌ Error al actualizar estado`)}},g=async e=>{try{let t=e.email,n=e.orderId,i=e.id,a=Pu(jb,`pedidos_activos/${i}`),o=await new Promise((e,t)=>{let n=Pu(jb,`pedidos_activos/${i}`);Hu(n,t=>{e(t.val())},{onlyOnce:!0})});if(o){let e={...o,estado:`Listo`,repartidorEmail:c.email,repartidorNombre:c.nombre,repartidorImagen:c.imagen,fechaCompletado:Date.now(),enCamino:!1,afuera:!1,problema:!1},t=Pu(jb,`pedidos_completados/${i}`);await Ru(t,e),await Iu(a);let n=Pu(jb,`cola_pedidos/${i}`);await Iu(n)}await f(t,n,`Listo`),alert(`🎉 Pedido completado exitosamente`),r(null)}catch(e){console.error(`Error en handleCompletar:`,e),alert(`❌ Error al completar pedido`)}},v=(e,t)=>{if(!e){alert(`No hay número de teléfono disponible`);return}let n=e.replace(/\D/g,``),r=`Hola ${t||`cliente`}, soy el repartidor con tu pedido.`,i=`https://wa.me/${n}?text=${encodeURIComponent(r)}`;window.open(i,`_blank`)},y=e=>{if(!e||!e.lat||!e.lng){alert(`No hay ubicación disponible para este pedido`);return}let t=`https://www.google.com/maps/dir/?api=1&destination=${e.lat},${e.lng}`;window.open(t,`_blank`)},b=e.filter(e=>o===`todos`?!0:o===`pendientes`?e.estado===`pendiente`:o===`en_camino`?e.estado===`En Camino`:o===`afuera`?e.estado===`Afuera`:o===`completados`?e.estado===`Listo`:!0),x=e=>({pendiente:`#f59e0b`,"En Camino":`#3b82f6`,Afuera:`#10b981`,Listo:`#10b981`,Error:`#ef4444`})[e]||`#6b7280`,ee=e=>({pendiente:ae,"En Camino":pe,Afuera:ce,Listo:ie,Error:re})[e]||ae,S={container:{minHeight:`100vh`,minHeight:`100dvh`,background:`linear-gradient(to bottom right, #f8fafc, #e2e8f0)`,fontFamily:`-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif`,paddingBottom:`env(safe-area-inset-bottom)`,WebkitFontSmoothing:`antialiased`},header:{background:`linear-gradient(135deg, #667eea 0%, #764ba2 100%)`,boxShadow:`0 4px 12px rgba(102, 126, 234, 0.2)`,color:`white`,padding:`max(env(safe-area-inset-top), 1rem) 1rem 1rem`,marginBottom:`1rem`,position:`sticky`,top:0,zIndex:30},card:{backgroundColor:`white`,borderRadius:`12px`,boxShadow:`0 2px 8px rgba(0, 0, 0, 0.08)`,transition:`all 0.2s ease`,overflow:`hidden`,WebkitTapHighlightColor:`transparent`},badge:{display:`inline-flex`,alignItems:`center`,gap:`0.375rem`,padding:`0.375rem 0.75rem`,borderRadius:`9999px`,fontSize:`0.8125rem`,fontWeight:`600`},button:{padding:`0.875rem 1rem`,borderRadius:`12px`,fontWeight:`600`,border:`none`,cursor:`pointer`,transition:`all 0.2s ease`,display:`flex`,alignItems:`center`,justifyContent:`center`,gap:`0.5rem`,WebkitTapHighlightColor:`transparent`,WebkitTouchCallout:`none`,userSelect:`none`,fontSize:`0.9375rem`,minHeight:`44px`}};return i?(0,$.jsx)(`div`,{style:{...S.container,display:`flex`,alignItems:`center`,justifyContent:`center`},children:(0,$.jsxs)(`div`,{style:{textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{width:`48px`,height:`48px`,border:`3px solid #e5e7eb`,borderTop:`3px solid #667eea`,borderRadius:`50%`,animation:`spin 1s linear infinite`,margin:`0 auto`}}),(0,$.jsx)(`p`,{style:{marginTop:`1rem`,color:`#6b7280`,fontSize:`1rem`,fontWeight:`500`},children:`Cargando pedidos...`})]})}):(0,$.jsxs)(`div`,{style:S.container,children:[(0,$.jsx)(`style`,{children:`
          * {
            -webkit-tap-highlight-color: transparent;
          }
          
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
          
          @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
          }
          
          @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
          }
          
          .card-animate {
            animation: slideIn 0.3s ease;
          }
          
          @supports (padding: max(0px)) {
            body {
              padding-left: env(safe-area-inset-left);
              padding-right: env(safe-area-inset-right);
            }
          }
          
          button:active {
            opacity: 0.7;
          }
        `}),(0,$.jsx)(`div`,{style:S.header,children:(0,$.jsx)(`div`,{style:{maxWidth:`100%`},children:(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,justifyContent:`space-between`,gap:`0.75rem`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`0.75rem`},children:[(0,$.jsx)(`div`,{style:{background:`rgba(255, 255, 255, 0.2)`,padding:`0.75rem`,borderRadius:`12px`,backdropFilter:`blur(10px)`},children:(0,$.jsx)(de,{size:28})}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{style:{fontSize:`1.375rem`,fontWeight:`700`,margin:0,marginBottom:`0.125rem`},children:`Panel de Entregas`}),(0,$.jsx)(`p`,{style:{fontSize:`0.8125rem`,opacity:.9,margin:0},children:`Gestión de repartidor`})]})]}),(0,$.jsxs)(`div`,{style:{background:`rgba(255, 255, 255, 0.2)`,padding:`0.625rem 1rem`,borderRadius:`12px`,backdropFilter:`blur(10px)`,textAlign:`center`,minWidth:`60px`},children:[(0,$.jsx)(`p`,{style:{fontSize:`1.75rem`,fontWeight:`700`,margin:0,lineHeight:1},children:b.length}),(0,$.jsx)(`p`,{style:{fontSize:`0.6875rem`,opacity:.9,margin:0,marginTop:`0.125rem`},children:`Activos`})]})]})})}),(0,$.jsxs)(`div`,{style:{padding:`0 1rem 1.5rem`},children:[(0,$.jsx)(`div`,{style:{marginBottom:`1rem`},children:(0,$.jsx)(`div`,{style:{display:`flex`,gap:`0.5rem`,overflowX:`auto`,WebkitOverflowScrolling:`touch`,paddingBottom:`0.5rem`,msOverflowStyle:`none`,scrollbarWidth:`none`},children:[`todos`,`pendientes`,`en_camino`,`afuera`,`completados`].map(e=>{let{text:t,icon:n}={todos:{text:`Todos`,icon:de},pendientes:{text:`Pendientes`,icon:ae},en_camino:{text:`En Camino`,icon:pe},afuera:{text:`Afuera`,icon:ce},completados:{text:`Listos`,icon:ie}}[e];return(0,$.jsxs)(`button`,{onClick:()=>s(e),style:{...S.button,background:o===e?`linear-gradient(135deg, #667eea 0%, #764ba2 100%)`:`white`,color:o===e?`white`:`#374151`,boxShadow:o===e?`0 4px 12px rgba(102, 126, 234, 0.3)`:`0 2px 6px rgba(0, 0, 0, 0.1)`,padding:`0.625rem 1rem`,minHeight:`44px`,whiteSpace:`nowrap`,flexShrink:0},children:[(0,$.jsx)(n,{size:18}),t]},e)})})}),b.length===0?(0,$.jsxs)(`div`,{style:{...S.card,padding:`3rem 1.5rem`,textAlign:`center`},children:[(0,$.jsx)(de,{size:64,style:{color:`#d1d5db`,margin:`0 auto 0.75rem`}}),(0,$.jsx)(`p`,{style:{color:`#6b7280`,fontSize:`1rem`,fontWeight:`500`},children:`No hay pedidos en esta categoría`})]}):(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`0.75rem`},children:b.map((e,t)=>{let i=d(e.ubicacion),a=ee(e.estado);return(0,$.jsxs)(`div`,{className:`card-animate`,style:{...S.card,animationDelay:`${t*.05}s`},children:[(0,$.jsxs)(`div`,{style:{padding:`1rem`,background:`linear-gradient(to right, #f9fafb, white)`,borderBottom:`1px solid #e5e7eb`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`flex-start`,justifyContent:`space-between`,gap:`0.75rem`,marginBottom:`0.75rem`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`0.5rem`,flex:1},children:[(0,$.jsxs)(`div`,{style:{...S.badge,backgroundColor:x(e.estado),color:`white`,alignSelf:`flex-start`},children:[(0,$.jsx)(a,{size:14}),e.estado]}),e.orderId&&(0,$.jsxs)(`span`,{style:{fontFamily:`monospace`,fontSize:`0.8125rem`,color:`#6b7280`,background:`#f3f4f6`,padding:`0.25rem 0.625rem`,borderRadius:`6px`,alignSelf:`flex-start`},children:[`#`,e.orderId]})]}),(0,$.jsxs)(`div`,{style:{textAlign:`right`},children:[(0,$.jsxs)(`p`,{style:{fontSize:`1.5rem`,fontWeight:`700`,color:`#10b981`,margin:0,lineHeight:1},children:[`$`,e.cantidad?.toFixed?e.cantidad.toFixed(2):e.cantidad||`0.00`]}),e.metodoPago&&(0,$.jsx)(`p`,{style:{fontSize:`0.6875rem`,color:`#6b7280`,margin:0,marginTop:`0.25rem`},children:e.metodoPago})]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`0.5rem`,marginBottom:`0.625rem`},children:[(0,$.jsx)(`span`,{style:{fontSize:`1.125rem`},children:i.icon}),(0,$.jsxs)(`span`,{style:{...S.badge,backgroundColor:`${i.color}15`,color:i.color,border:`1.5px solid ${i.color}30`},children:[(0,$.jsx)(ne,{size:14}),(0,$.jsx)(`span`,{style:{fontSize:`0.8125rem`},children:e.edificio||i.nombre})]})]}),e.nombreCliente&&(0,$.jsx)(`div`,{style:{marginBottom:`0.5rem`},children:(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`0.5rem`,color:`#374151`},children:[(0,$.jsx)(me,{size:16,style:{color:`#667eea`}}),(0,$.jsx)(`span`,{style:{fontWeight:`600`,fontSize:`0.9375rem`},children:e.nombreCliente})]})}),e.direccion&&(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`start`,gap:`0.5rem`,color:`#6b7280`,fontSize:`0.8125rem`},children:[(0,$.jsx)(ce,{size:14,style:{color:`#ef4444`,marginTop:`2px`,flexShrink:0}}),(0,$.jsx)(`span`,{style:{lineHeight:1.4},children:e.direccion})]})]}),(0,$.jsxs)(`div`,{style:{padding:`0.75rem`,background:`#f9fafb`,display:`grid`,gridTemplateColumns:`repeat(3, 1fr)`,gap:`0.5rem`},children:[e.telefono&&(0,$.jsxs)(`button`,{onClick:()=>v(e.telefono,e.nombreCliente),style:{...S.button,background:`linear-gradient(135deg, #10b981 0%, #059669 100%)`,color:`white`,boxShadow:`0 2px 8px rgba(16, 185, 129, 0.25)`,padding:`0.75rem 0.5rem`,fontSize:`0.8125rem`},children:[(0,$.jsx)(le,{size:16}),(0,$.jsx)(`span`,{style:{display:window.innerWidth>380?`inline`:`none`},children:`Chat`})]}),e.ubicacion&&(0,$.jsxs)(`button`,{onClick:()=>y(e.ubicacion),style:{...S.button,background:`linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)`,color:`white`,boxShadow:`0 2px 8px rgba(59, 130, 246, 0.25)`,padding:`0.75rem 0.5rem`,fontSize:`0.8125rem`},children:[(0,$.jsx)(ue,{size:16}),(0,$.jsx)(`span`,{style:{display:window.innerWidth>380?`inline`:`none`},children:`Ir`})]}),(0,$.jsxs)(`button`,{onClick:()=>r(n?.id===e.id?null:e),style:{...S.button,background:`linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)`,color:`white`,boxShadow:`0 2px 8px rgba(139, 92, 246, 0.25)`,padding:`0.75rem 0.5rem`,fontSize:`0.8125rem`},children:[(0,$.jsx)(se,{size:16}),(0,$.jsx)(`span`,{style:{display:window.innerWidth>380?`inline`:`none`},children:`Info`})]})]})]},e.id)})})]}),n&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{style:{position:`fixed`,inset:0,backgroundColor:`rgba(0, 0, 0, 0.5)`,backdropFilter:`blur(4px)`,zIndex:40,animation:`fadeIn 0.2s ease`},onClick:()=>r(null)}),(0,$.jsx)(`div`,{style:{position:`fixed`,inset:0,zIndex:50,display:`flex`,alignItems:`flex-end`,justifyContent:`center`,animation:`slideIn 0.3s ease`,padding:0},children:(0,$.jsxs)(`div`,{style:{backgroundColor:`white`,borderRadius:`20px 20px 0 0`,boxShadow:`0 -4px 20px rgba(0, 0, 0, 0.15)`,width:`100%`,maxHeight:`90vh`,maxHeight:`90dvh`,overflow:`hidden`,display:`flex`,flexDirection:`column`},children:[(0,$.jsxs)(`div`,{style:{background:`linear-gradient(135deg, #1e293b 0%, #334155 100%)`,padding:`1rem`,paddingTop:`max(1rem, env(safe-area-inset-top))`,display:`flex`,alignItems:`center`,justifyContent:`space-between`,color:`white`,position:`sticky`,top:0,zIndex:10},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`0.625rem`},children:[(0,$.jsx)(de,{size:20}),(0,$.jsx)(`h2`,{style:{fontSize:`1.125rem`,fontWeight:`700`,margin:0},children:`Detalles del Pedido`})]}),(0,$.jsx)(`button`,{onClick:()=>r(null),style:{padding:`0.5rem`,background:`rgba(255, 255, 255, 0.15)`,border:`none`,borderRadius:`8px`,cursor:`pointer`,color:`white`,display:`flex`,alignItems:`center`,justifyContent:`center`,minWidth:`36px`,minHeight:`36px`,WebkitTapHighlightColor:`transparent`},children:(0,$.jsx)(he,{size:20})})]}),(0,$.jsxs)(`div`,{style:{overflowY:`auto`,flex:1,WebkitOverflowScrolling:`touch`},children:[(0,$.jsxs)(`div`,{style:{padding:`1rem`,background:`#f0f9ff`},children:[(0,$.jsxs)(`h3`,{style:{fontWeight:`700`,color:`#1f2937`,display:`flex`,alignItems:`center`,gap:`0.5rem`,marginBottom:`0.75rem`,fontSize:`1rem`},children:[(0,$.jsx)(se,{size:18,style:{color:`#3b82f6`}}),`Información del Pedido`]}),(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`0.625rem`},children:[n.orderId&&(0,$.jsxs)(`div`,{style:{backgroundColor:`white`,borderRadius:`10px`,padding:`0.875rem`,border:`1px solid #dbeafe`},children:[(0,$.jsx)(`p`,{style:{fontSize:`0.75rem`,color:`#64748b`,marginBottom:`0.25rem`},children:`ID del Pedido`}),(0,$.jsx)(`p`,{style:{fontWeight:`600`,color:`#1f2937`,margin:0,fontFamily:`monospace`,fontSize:`0.875rem`},children:n.orderId})]}),n.nombreCliente&&(0,$.jsxs)(`div`,{style:{backgroundColor:`white`,borderRadius:`10px`,padding:`0.875rem`,border:`1px solid #dbeafe`},children:[(0,$.jsx)(`p`,{style:{fontSize:`0.75rem`,color:`#64748b`,marginBottom:`0.25rem`},children:`Cliente`}),(0,$.jsxs)(`p`,{style:{fontWeight:`600`,color:`#1f2937`,margin:0,display:`flex`,alignItems:`center`,gap:`0.5rem`,fontSize:`0.9375rem`},children:[(0,$.jsx)(me,{size:16,style:{color:`#667eea`}}),n.nombreCliente]})]}),(0,$.jsx)(`div`,{style:{backgroundColor:`white`,borderRadius:`10px`,padding:`0.875rem`,border:`2px solid #dbeafe`},children:(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsx)(`span`,{style:{color:`#64748b`,fontWeight:`500`,fontSize:`0.875rem`},children:`Total a Cobrar`}),(0,$.jsxs)(`span`,{style:{fontSize:`1.5rem`,fontWeight:`700`,color:`#10b981`},children:[`$`,n.cantidad?.toFixed?n.cantidad.toFixed(2):n.cantidad||`0.00`]})]})}),n.metodoPago&&(0,$.jsxs)(`div`,{style:{backgroundColor:`white`,borderRadius:`10px`,padding:`0.875rem`,border:`1px solid #dbeafe`},children:[(0,$.jsx)(`p`,{style:{fontSize:`0.75rem`,color:`#64748b`,marginBottom:`0.25rem`},children:`Método de Pago`}),(0,$.jsxs)(`p`,{style:{fontWeight:`600`,color:`#1f2937`,margin:0,display:`flex`,alignItems:`center`,gap:`0.5rem`,fontSize:`0.9375rem`},children:[(0,$.jsx)(oe,{size:16,style:{color:`#10b981`}}),n.metodoPago]})]}),n.montoPagado&&(0,$.jsxs)(`div`,{style:{backgroundColor:`#dbeafe`,borderRadius:`10px`,padding:`0.875rem`,borderLeft:`3px solid #3b82f6`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,marginBottom:`0.375rem`},children:[(0,$.jsx)(`span`,{style:{fontSize:`0.8125rem`,color:`#1e40af`,fontWeight:`600`},children:`Cliente paga con:`}),(0,$.jsxs)(`span`,{style:{fontSize:`1rem`,fontWeight:`700`,color:`#1e40af`},children:[`$`,n.montoPagado?.toFixed?n.montoPagado.toFixed(2):n.montoPagado]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`},children:[(0,$.jsx)(`span`,{style:{fontSize:`0.8125rem`,color:`#1e40af`,fontWeight:`600`},children:`Cambio a devolver:`}),(0,$.jsxs)(`span`,{style:{fontSize:`1rem`,fontWeight:`700`,color:`#f59e0b`},children:[`$`,n.cambio?.toFixed?n.cambio.toFixed(2):n.cambio||`0.00`]})]})]}),n.direccion&&(0,$.jsxs)(`div`,{style:{backgroundColor:`white`,borderRadius:`10px`,padding:`0.875rem`,border:`1px solid #dbeafe`},children:[(0,$.jsx)(`p`,{style:{fontSize:`0.75rem`,color:`#64748b`,marginBottom:`0.25rem`},children:`Dirección del cliente`}),(0,$.jsxs)(`p`,{style:{fontWeight:`600`,color:`#1f2937`,margin:0,display:`flex`,alignItems:`start`,gap:`0.5rem`,fontSize:`0.875rem`,lineHeight:1.4},children:[(0,$.jsx)(ce,{size:14,style:{color:`#ef4444`,marginTop:`2px`,flexShrink:0}}),(0,$.jsx)(`span`,{children:n.direccion})]})]}),n.edificio&&(0,$.jsxs)(`div`,{style:{backgroundColor:`white`,borderRadius:`10px`,padding:`0.875rem`,border:`1px solid #dbeafe`},children:[(0,$.jsx)(`p`,{style:{fontSize:`0.75rem`,color:`#64748b`,marginBottom:`0.25rem`},children:`Edificio de Entrega`}),(0,$.jsxs)(`p`,{style:{fontWeight:`600`,color:`#8b5cf6`,margin:0,display:`flex`,alignItems:`center`,gap:`0.5rem`,fontSize:`0.9375rem`},children:[(0,$.jsx)(ne,{size:16}),n.edificio]})]}),n.telefono&&(0,$.jsx)(`div`,{style:{backgroundColor:`white`,borderRadius:`10px`,padding:`0.875rem`,border:`1px solid #dbeafe`},children:(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,justifyContent:`space-between`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`p`,{style:{fontSize:`0.75rem`,color:`#64748b`,margin:0,marginBottom:`0.25rem`},children:`Teléfono`}),(0,$.jsx)(`p`,{style:{fontWeight:`600`,color:`#1f2937`,margin:0,fontSize:`0.9375rem`},children:n.telefono})]}),(0,$.jsx)(`button`,{onClick:()=>v(n.telefono,n.nombreCliente),style:{backgroundColor:`#10b981`,padding:`0.625rem`,borderRadius:`10px`,border:`none`,cursor:`pointer`,display:`flex`,alignItems:`center`,justifyContent:`center`,boxShadow:`0 2px 6px rgba(16, 185, 129, 0.3)`,minWidth:`40px`,minHeight:`40px`,WebkitTapHighlightColor:`transparent`},children:(0,$.jsx)(w,{size:16,style:{color:`white`}})})]})}),(n.comentarioe||n.comentariop)&&(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`0.5rem`},children:[n.comentarioe&&(0,$.jsxs)(`div`,{style:{backgroundColor:`#fef3c7`,borderLeft:`3px solid #f59e0b`,borderRadius:`8px`,padding:`0.75rem`},children:[(0,$.jsx)(`p`,{style:{fontSize:`0.8125rem`,fontWeight:`600`,color:`#92400e`,margin:0,marginBottom:`0.25rem`},children:`📍 Comentario de Entrega:`}),(0,$.jsx)(`p`,{style:{fontSize:`0.8125rem`,color:`#78350f`,margin:0,lineHeight:1.4},children:n.comentarioe})]}),n.comentariop&&(0,$.jsxs)(`div`,{style:{backgroundColor:`#dbeafe`,borderLeft:`3px solid #3b82f6`,borderRadius:`8px`,padding:`0.75rem`},children:[(0,$.jsx)(`p`,{style:{fontSize:`0.8125rem`,fontWeight:`600`,color:`#1e40af`,margin:0,marginBottom:`0.25rem`},children:`🍽️ Comentario del Pedido:`}),(0,$.jsx)(`p`,{style:{fontSize:`0.8125rem`,color:`#1e3a8a`,margin:0,lineHeight:1.4},children:n.comentariop})]})]})]})]}),n.productos&&Array.isArray(n.productos)&&n.productos.length>0&&(0,$.jsxs)(`div`,{style:{padding:`1rem`,background:`#faf5ff`},children:[(0,$.jsxs)(`h3`,{style:{fontWeight:`700`,color:`#1f2937`,display:`flex`,alignItems:`center`,gap:`0.5rem`,marginBottom:`0.75rem`,fontSize:`1rem`},children:[(0,$.jsx)(T,{size:18,style:{color:`#8b5cf6`}}),`Productos`]}),(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`0.625rem`},children:n.productos.map((e,t)=>(0,$.jsxs)(`div`,{style:{backgroundColor:`white`,borderRadius:`10px`,padding:`0.875rem`,boxShadow:`0 1px 3px rgba(0, 0, 0, 0.05)`,border:`1px solid #e9d5ff`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`start`,marginBottom:`0.375rem`},children:[(0,$.jsxs)(`div`,{style:{flex:1},children:[(0,$.jsx)(`p`,{style:{fontWeight:`600`,color:`#1f2937`,fontSize:`0.9375rem`,margin:0,marginBottom:`0.125rem`},children:e.titulo}),e.preparado&&(0,$.jsxs)(`p`,{style:{fontSize:`0.75rem`,color:`#6b7280`,margin:0},children:[`Preparación: `,e.preparado]})]}),(0,$.jsxs)(`span`,{style:{backgroundColor:`#f3e8ff`,color:`#7c3aed`,padding:`0.25rem 0.625rem`,borderRadius:`9999px`,fontSize:`0.75rem`,fontWeight:`600`,marginLeft:`0.5rem`,flexShrink:0},children:[`x`,e.cantidad]})]}),(0,$.jsxs)(`p`,{style:{fontWeight:`700`,color:`#8b5cf6`,textAlign:`right`,margin:0,fontSize:`1rem`},children:[`$`,e.precio?.toFixed?e.precio.toFixed(2):e.precio||`0.00`]})]},t))})]}),n.vendedorData&&typeof n.vendedorData==`object`&&(0,$.jsxs)(`div`,{style:{padding:`1rem`,background:`#f1f5f9`},children:[(0,$.jsxs)(`h3`,{style:{fontWeight:`700`,color:`#1f2937`,display:`flex`,alignItems:`center`,gap:`0.5rem`,marginBottom:`0.75rem`,fontSize:`1rem`},children:[(0,$.jsx)(fe,{size:18,style:{color:`#475569`}}),`Recoger en`]}),(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`0.625rem`},children:[n.vendedorData.nombre&&(0,$.jsxs)(`div`,{style:{backgroundColor:`white`,borderRadius:`10px`,padding:`0.875rem`,border:`1px solid #e2e8f0`},children:[(0,$.jsx)(`p`,{style:{fontSize:`0.75rem`,color:`#64748b`,marginBottom:`0.25rem`},children:`Vendedor`}),(0,$.jsx)(`p`,{style:{fontWeight:`600`,color:`#8b5cf6`,fontSize:`0.9375rem`,margin:0},children:n.vendedorData.nombre})]}),n.vendedorData.direccion&&(0,$.jsxs)(`div`,{style:{backgroundColor:`white`,borderRadius:`10px`,padding:`0.875rem`,border:`1px solid #e2e8f0`},children:[(0,$.jsx)(`p`,{style:{fontSize:`0.75rem`,color:`#64748b`,marginBottom:`0.25rem`},children:`Dirección`}),(0,$.jsx)(`p`,{style:{fontWeight:`600`,color:`#1f2937`,margin:0,fontSize:`0.875rem`,lineHeight:1.4},children:n.vendedorData.direccion})]}),n.vendedorData.Vendedortelefono&&(0,$.jsxs)(`button`,{onClick:()=>v(n.vendedorData.Vendedortelefono,n.vendedorData.nombre),style:{...S.button,background:`linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)`,color:`white`,boxShadow:`0 2px 8px rgba(139, 92, 246, 0.3)`,width:`100%`,padding:`0.875rem`},children:[(0,$.jsx)(w,{size:16}),`Contactar Vendedor`]})]})]}),n.ubicacion&&n.ubicacion.lat&&n.ubicacion.lng&&(0,$.jsxs)(`div`,{style:{padding:`1rem`,background:`white`},children:[(0,$.jsxs)(`h3`,{style:{fontWeight:`700`,color:`#1f2937`,marginBottom:`0.75rem`,display:`flex`,alignItems:`center`,gap:`0.5rem`,fontSize:`1rem`},children:[(0,$.jsx)(ce,{size:18,style:{color:`#ef4444`}}),`Mapa de Ubicación`]}),(0,$.jsx)(`div`,{style:{borderRadius:`12px`,overflow:`hidden`,boxShadow:`0 2px 8px rgba(0, 0, 0, 0.1)`,border:`1px solid #e5e7eb`,marginBottom:`0.75rem`},children:(0,$.jsx)(`iframe`,{width:`100%`,height:`250`,frameBorder:`0`,style:{border:0},src:`https://www.google.com/maps?q=${n.ubicacion.lat},${n.ubicacion.lng}&z=17&output=embed`,allowFullScreen:!0})}),(0,$.jsxs)(`button`,{onClick:()=>y(n.ubicacion),style:{...S.button,background:`linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)`,color:`white`,boxShadow:`0 2px 8px rgba(59, 130, 246, 0.3)`,width:`100%`,padding:`0.875rem`},children:[(0,$.jsx)(ue,{size:16}),`Abrir en Google Maps`]})]})]}),(0,$.jsxs)(`div`,{style:{padding:`1rem`,paddingBottom:`max(1rem, env(safe-area-inset-bottom))`,background:`linear-gradient(to bottom, #f9fafb, #f3f4f6)`,borderTop:`1px solid #e5e7eb`,display:`grid`,gridTemplateColumns:`repeat(2, 1fr)`,gap:`0.625rem`},children:[(0,$.jsxs)(`button`,{onClick:()=>p(n),style:{...S.button,flexDirection:`column`,background:`linear-gradient(135deg, #667eea 0%, #764ba2 100%)`,color:`white`,padding:`0.75rem`,boxShadow:`0 2px 8px rgba(102, 126, 234, 0.3)`,minHeight:`70px`},children:[(0,$.jsx)(ue,{size:20}),(0,$.jsx)(`span`,{style:{fontSize:`0.8125rem`,marginTop:`0.25rem`},children:`En Camino`})]}),(0,$.jsxs)(`button`,{onClick:()=>m(n),style:{...S.button,flexDirection:`column`,background:`linear-gradient(135deg, #10b981 0%, #059669 100%)`,color:`white`,padding:`0.75rem`,boxShadow:`0 2px 8px rgba(16, 185, 129, 0.3)`,minHeight:`70px`},children:[(0,$.jsx)(ce,{size:20}),(0,$.jsx)(`span`,{style:{fontSize:`0.8125rem`,marginTop:`0.25rem`},children:`Afuera`})]}),(0,$.jsxs)(`button`,{onClick:()=>h(n),style:{...S.button,flexDirection:`column`,background:`linear-gradient(135deg, #f59e0b 0%, #d97706 100%)`,color:`white`,padding:`0.75rem`,boxShadow:`0 2px 8px rgba(245, 158, 11, 0.3)`,minHeight:`70px`},children:[(0,$.jsx)(re,{size:20}),(0,$.jsx)(`span`,{style:{fontSize:`0.8125rem`,marginTop:`0.25rem`},children:`Problema`})]}),(0,$.jsxs)(`button`,{onClick:()=>g(n),style:{...S.button,flexDirection:`column`,background:`linear-gradient(135deg, #10b981 0%, #059669 100%)`,color:`white`,padding:`0.75rem`,boxShadow:`0 2px 8px rgba(16, 185, 129, 0.3)`,minHeight:`70px`},children:[(0,$.jsx)(ie,{size:20}),(0,$.jsx)(`span`,{style:{fontSize:`0.8125rem`,marginTop:`0.25rem`},children:`Completado`})]})]})]})})]})]})};function Pb(){return(0,$.jsx)(Nb,{})}var Fb=Pb;(0,g.createRoot)(document.getElementById(`root`)).render((0,$.jsx)(_.StrictMode,{children:(0,$.jsx)(Fb,{})}));